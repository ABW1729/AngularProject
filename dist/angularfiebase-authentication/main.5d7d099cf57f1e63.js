"use strict";(self.webpackChunkangularfiebase_authentication=self.webpackChunkangularfiebase_authentication||[]).push([[179],{6304:(bt,Pe,j)=>{j.d(Pe,{Dh:()=>ze,GT:()=>de,cc:()=>Be,hO:()=>st,on:()=>oe,pX:()=>ae,xv:()=>Me});var E=j(5879),w=j(120),$=j(2793);bt=j.hmd(bt);const Q=["ngOnDestroy"],ae=(Ge,Oe,yt,Ae={})=>new Proxy(Ge,{get:(Qe,ye)=>yt.runOutsideAngular(()=>{var Le;if(Ge[ye])return!(null===(Le=Ae?.spy)||void 0===Le)&&Le.get&&Ae.spy.get(ye,Ge[ye]),Ge[ye];if(Q.indexOf(ye)>-1)return()=>{};const nt=Oe.toPromise().then(it=>{const Te=it&&it[ye];return"function"==typeof Te?Te.bind(it):Te&&Te.then?Te.then(_t=>yt.run(()=>_t)):yt.run(()=>Te)});return new Proxy(()=>{},{get:(it,Te)=>nt[Te],apply:(it,Te,_t)=>nt.then(pn=>{var Wn;const _n=pn&&pn(..._t);return!(null===(Wn=Ae?.spy)||void 0===Wn)&&Wn.apply&&Ae.spy.apply(ye,_t,_n),_n})})})}),de=(Ge,Oe)=>{Oe.forEach(yt=>{Object.getOwnPropertyNames(yt.prototype||yt).forEach(Ae=>{Object.defineProperty(Ge.prototype,Ae,Object.getOwnPropertyDescriptor(yt.prototype||yt,Ae))})})};class ve{constructor(Oe){return Oe}}const ze=new E.OlP("angularfire2.app.options"),Me=new E.OlP("angularfire2.app.name");function oe(Ge,Oe,yt){const Qe="object"==typeof yt&&yt||{};Qe.name=Qe.name||"string"==typeof yt&&yt||"[DEFAULT]";const Le=w.Z.apps.filter(nt=>nt&&nt.name===Qe.name)[0]||Oe.runOutsideAngular(()=>w.Z.initializeApp(Ge,Qe));try{JSON.stringify(Ge)!==JSON.stringify(Le.options)&&le("error",`${Le.name} Firebase App already initialized with different options${bt.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch{}return new ve(Le)}const le=(Ge,...Oe)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ge](...Oe)},_e={provide:ve,useFactory:oe,deps:[ze,E.R0b,[new E.FiY,Me]]};let st=(()=>{class Ge{constructor(yt){w.Z.registerVersion("angularfire",$.q4.full,"core"),w.Z.registerVersion("angularfire",$.q4.full,"app-compat"),w.Z.registerVersion("angular",E.q4F.full,yt.toString())}static initializeApp(yt,Ae){return{ngModule:Ge,providers:[{provide:ze,useValue:yt},{provide:Me,useValue:Ae}]}}}return Ge.\u0275fac=function(yt){return new(yt||Ge)(E.LFG(E.Lbi))},Ge.\u0275mod=E.oAB({type:Ge}),Ge.\u0275inj=E.cJS({providers:[_e]}),Ge})();function Be(Ge,Oe,yt,Ae,Qe){const[,ye,Le]=globalThis.\u0275AngularfireInstanceCache.find(nt=>nt[0]===Ge)||[];if(ye)return function gt(Ge,Oe){try{return Ge.toString()===Oe.toString()}catch{return Ge===Oe}}(Qe,Le)||(xe("error",`${Oe} was already initialized on the ${yt} Firebase App with different settings.${et?" You may need to reload as Firebase is not HMR aware.":""}`),xe("warn",{is:Qe,was:Le})),ye;{const nt=Ae();return globalThis.\u0275AngularfireInstanceCache.push([Ge,nt,Qe]),nt}}const et=!!bt.hot,xe=(Ge,...Oe)=>{(0,E.X6Q)()&&typeof console<"u"&&console[Ge](...Oe)};globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=[])},2793:(bt,Pe,j)=>{j.d(Pe,{q4:()=>gc,iC:()=>Xc,fc:()=>Xp,HU:()=>Jc,vb:()=>Fv,JM:()=>Bl});var E=j(5879),w=j(4097),$=j(5861),Q=j(1356),ae=j(9058),de=j(4537),ve=j(7879);const ze=(T,R)=>R.some(B=>T instanceof B);let Me,oe;const st=new WeakMap,Be=new WeakMap,gt=new WeakMap,et=new WeakMap,xe=new WeakMap;let yt={get(T,R,B){if(T instanceof IDBTransaction){if("done"===R)return Be.get(T);if("objectStoreNames"===R)return T.objectStoreNames||gt.get(T);if("store"===R)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return Le(T[R])},set:(T,R,B)=>(T[R]=B,!0),has:(T,R)=>T instanceof IDBTransaction&&("done"===R||"store"===R)||R in T};function ye(T){return"function"==typeof T?function Qe(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _e(){return oe||(oe=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...R){return T.apply(nt(this),R),Le(st.get(this))}:function(...R){return Le(T.apply(nt(this),R))}:function(R,...B){const re=T.call(nt(this),R,...B);return gt.set(re,R.sort?R.sort():[R]),Le(re)}}(T):(T instanceof IDBTransaction&&function Oe(T){if(Be.has(T))return;const R=new Promise((B,re)=>{const ge=()=>{T.removeEventListener("complete",Ce),T.removeEventListener("error",Ze),T.removeEventListener("abort",Ze)},Ce=()=>{B(),ge()},Ze=()=>{re(T.error||new DOMException("AbortError","AbortError")),ge()};T.addEventListener("complete",Ce),T.addEventListener("error",Ze),T.addEventListener("abort",Ze)});Be.set(T,R)}(T),ze(T,function le(){return Me||(Me=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,yt):T)}function Le(T){if(T instanceof IDBRequest)return function Ge(T){const R=new Promise((B,re)=>{const ge=()=>{T.removeEventListener("success",Ce),T.removeEventListener("error",Ze)},Ce=()=>{B(Le(T.result)),ge()},Ze=()=>{re(T.error),ge()};T.addEventListener("success",Ce),T.addEventListener("error",Ze)});return R.then(B=>{B instanceof IDBCursor&&st.set(B,T)}).catch(()=>{}),xe.set(R,T),R}(T);if(et.has(T))return et.get(T);const R=ye(T);return R!==T&&(et.set(T,R),xe.set(R,T)),R}const nt=T=>xe.get(T),_t=["get","getKey","getAll","getAllKeys","count"],pn=["put","add","delete","clear"],Wn=new Map;function _n(T,R){if(!(T instanceof IDBDatabase)||R in T||"string"!=typeof R)return;if(Wn.get(R))return Wn.get(R);const B=R.replace(/FromIndex$/,""),re=R!==B,ge=pn.includes(B);if(!(B in(re?IDBIndex:IDBObjectStore).prototype)||!ge&&!_t.includes(B))return;const Ce=function(){var Ze=(0,$.Z)(function*(Tt,...wt){const Zt=this.transaction(Tt,ge?"readwrite":"readonly");let hn=Zt.store;return re&&(hn=hn.index(wt.shift())),(yield Promise.all([hn[B](...wt),ge&&Zt.done]))[0]});return function(wt){return Ze.apply(this,arguments)}}();return Wn.set(R,Ce),Ce}!function Ae(T){yt=T(yt)}(T=>({...T,get:(R,B,re)=>_n(R,B)||T.get(R,B,re),has:(R,B)=>!!_n(R,B)||T.has(R,B)}));const Sr="@firebase/installations",Qn="0.6.4",Os=1e4,Gr=`w:${Qn}`,Re="FIS_v2",Fe="https://firebaseinstallations.googleapis.com/v1",Ke=36e5,Dt=new ae.LL("installations","Installations",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"not-registered":"Firebase Installation is not registered.","installation-not-found":"Firebase Installation not found.","request-failed":'{$requestName} request failed with error "{$serverCode} {$serverStatus}: {$serverMessage}"',"app-offline":"Could not process request. Application offline.","delete-pending-registration":"Can't delete installation while there is a pending registration request."});function At(T){return T instanceof ae.ZR&&T.code.includes("request-failed")}function sr({projectId:T}){return`${Fe}/projects/${T}/installations`}function Gt(T){return{token:T.token,requestStatus:2,expiresIn:zr(T.expiresIn),creationTime:Date.now()}}function gn(T,R){return sn.apply(this,arguments)}function sn(){return(sn=(0,$.Z)(function*(T,R){const re=(yield R.json()).error;return Dt.create("request-failed",{requestName:T,serverCode:re.code,serverMessage:re.message,serverStatus:re.status})})).apply(this,arguments)}function Hn({apiKey:T}){return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T})}function Lt(T){return Sn.apply(this,arguments)}function Sn(){return(Sn=(0,$.Z)(function*(T){const R=yield T();return R.status>=500&&R.status<600?T():R})).apply(this,arguments)}function zr(T){return Number(T.replace("s","000"))}function Wr(){return(Wr=(0,$.Z)(function*({appConfig:T,heartbeatServiceProvider:R},{fid:B}){const re=sr(T),ge=Hn(T),Ce=R.getImmediate({optional:!0});if(Ce){const Zt=yield Ce.getHeartbeatsHeader();Zt&&ge.append("x-firebase-client",Zt)}const Tt={method:"POST",headers:ge,body:JSON.stringify({fid:B,authVersion:Re,appId:T.appId,sdkVersion:Gr})},wt=yield Lt(()=>fetch(re,Tt));if(wt.ok){const Zt=yield wt.json();return{fid:Zt.fid||B,registrationStatus:2,refreshToken:Zt.refreshToken,authToken:Gt(Zt.authToken)}}throw yield gn("Create Installation",wt)})).apply(this,arguments)}function Xn(T){return new Promise(R=>{setTimeout(R,T)})}const Ar=/^[cdef][\w-]{21}$/,mt="";function zt(){try{const T=new Uint8Array(17);(self.crypto||self.msCrypto).getRandomValues(T),T[0]=112+T[0]%16;const B=function Ht(T){return function lr(T){return btoa(String.fromCharCode(...T)).replace(/\+/g,"-").replace(/\//g,"_")}(T).substr(0,22)}(T);return Ar.test(B)?B:mt}catch{return mt}}function Un(T){return`${T.appName}!${T.appId}`}const fr=new Map;function ei(T,R){const B=Un(T);Ps(B,R),function bn(T,R){const B=function xt(){return!kr&&"BroadcastChannel"in self&&(kr=new BroadcastChannel("[Firebase] FID Change"),kr.onmessage=T=>{Ps(T.data.key,T.data.fid)}),kr}();B&&B.postMessage({key:T,fid:R}),function Ai(){0===fr.size&&kr&&(kr.close(),kr=null)}()}(B,R)}function Ps(T,R){const B=fr.get(T);if(B)for(const re of B)re(R)}let kr=null;const po="firebase-installations-database",hs=1,qi="firebase-installations-store";let li=null;function Cr(){return li||(li=function it(T,R,{blocked:B,upgrade:re,blocking:ge,terminated:Ce}={}){const Ze=indexedDB.open(T,R),Tt=Le(Ze);return re&&Ze.addEventListener("upgradeneeded",wt=>{re(Le(Ze.result),wt.oldVersion,wt.newVersion,Le(Ze.transaction))}),B&&Ze.addEventListener("blocked",()=>B()),Tt.then(wt=>{Ce&&wt.addEventListener("close",()=>Ce()),ge&&wt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),Tt}(po,hs,{upgrade:(T,R)=>{0===R&&T.createObjectStore(qi)}})),li}function Mr(T,R){return Gn.apply(this,arguments)}function Gn(){return(Gn=(0,$.Z)(function*(T,R){const B=Un(T),ge=(yield Cr()).transaction(qi,"readwrite"),Ce=ge.objectStore(qi),Ze=yield Ce.get(B);return yield Ce.put(R,B),yield ge.done,(!Ze||Ze.fid!==R.fid)&&ei(T,R.fid),R})).apply(this,arguments)}function Li(T){return Nn.apply(this,arguments)}function Nn(){return(Nn=(0,$.Z)(function*(T){const R=Un(T),re=(yield Cr()).transaction(qi,"readwrite");yield re.objectStore(qi).delete(R),yield re.done})).apply(this,arguments)}function qr(T,R){return vn.apply(this,arguments)}function vn(){return(vn=(0,$.Z)(function*(T,R){const B=Un(T),ge=(yield Cr()).transaction(qi,"readwrite"),Ce=ge.objectStore(qi),Ze=yield Ce.get(B),Tt=R(Ze);return void 0===Tt?yield Ce.delete(B):yield Ce.put(Tt,B),yield ge.done,Tt&&(!Ze||Ze.fid!==Tt.fid)&&ei(T,Tt.fid),Tt})).apply(this,arguments)}function ue(T){return G.apply(this,arguments)}function G(){return G=(0,$.Z)(function*(T){let R;const B=yield qr(T.appConfig,re=>{const ge=function z(T){return Wt(T||{fid:zt(),registrationStatus:0})}(re),Ce=function Z(T,R){if(0===R.registrationStatus){if(!navigator.onLine)return{installationEntry:R,registrationPromise:Promise.reject(Dt.create("app-offline"))};const B={fid:R.fid,registrationStatus:1,registrationTime:Date.now()},re=function ne(T,R){return be.apply(this,arguments)}(T,B);return{installationEntry:B,registrationPromise:re}}return 1===R.registrationStatus?{installationEntry:R,registrationPromise:Xe(T)}:{installationEntry:R}}(T,ge);return R=Ce.registrationPromise,Ce.installationEntry});return B.fid===mt?{installationEntry:yield R}:{installationEntry:B,registrationPromise:R}}),G.apply(this,arguments)}function be(){return be=(0,$.Z)(function*(T,R){try{const B=yield function fo(T,R){return Wr.apply(this,arguments)}(T,R);return Mr(T.appConfig,B)}catch(B){throw At(B)&&409===B.customData.serverCode?yield Li(T.appConfig):yield Mr(T.appConfig,{fid:R.fid,registrationStatus:0}),B}}),be.apply(this,arguments)}function Xe(T){return pt.apply(this,arguments)}function pt(){return(pt=(0,$.Z)(function*(T){let R=yield Yt(T.appConfig);for(;1===R.registrationStatus;)yield Xn(100),R=yield Yt(T.appConfig);if(0===R.registrationStatus){const{installationEntry:B,registrationPromise:re}=yield ue(T);return re||B}return R})).apply(this,arguments)}function Yt(T){return qr(T,R=>{if(!R)throw Dt.create("installation-not-found");return Wt(R)})}function Wt(T){return function Rt(T){return 1===T.registrationStatus&&T.registrationTime+Os<Date.now()}(T)?{fid:T.fid,registrationStatus:0}:T}function dr(){return(dr=(0,$.Z)(function*({appConfig:T,heartbeatServiceProvider:R},B){const re=function Mi(T,{fid:R}){return`${sr(T)}/${R}/authTokens:generate`}(T,B),ge=function Jn(T,{refreshToken:R}){const B=Hn(T);return B.append("Authorization",function Er(T){return`${Re} ${T}`}(R)),B}(T,B),Ce=R.getImmediate({optional:!0});if(Ce){const Zt=yield Ce.getHeartbeatsHeader();Zt&&ge.append("x-firebase-client",Zt)}const Tt={method:"POST",headers:ge,body:JSON.stringify({installation:{sdkVersion:Gr,appId:T.appId}})},wt=yield Lt(()=>fetch(re,Tt));if(wt.ok)return Gt(yield wt.json());throw yield gn("Generate Auth Token",wt)})).apply(this,arguments)}function Es(T){return xr.apply(this,arguments)}function xr(){return xr=(0,$.Z)(function*(T,R=!1){let B;const re=yield qr(T.appConfig,Ce=>{if(!ln(Ce))throw Dt.create("not-registered");const Ze=Ce.authToken;if(!R&&function mn(T){return 2===T.requestStatus&&!function On(T){const R=Date.now();return R<T.creationTime||T.creationTime+T.expiresIn<R+Ke}(T)}(Ze))return Ce;if(1===Ze.requestStatus)return B=function Ue(T,R){return Se.apply(this,arguments)}(T,R),Ce;{if(!navigator.onLine)throw Dt.create("app-offline");const Tt=function pr(T){const R={requestStatus:1,requestTime:Date.now()};return Object.assign(Object.assign({},T),{authToken:R})}(Ce);return B=function Pt(T,R){return Qt.apply(this,arguments)}(T,Tt),Tt}});return B?yield B:re.authToken}),xr.apply(this,arguments)}function Se(){return(Se=(0,$.Z)(function*(T,R){let B=yield rt(T.appConfig);for(;1===B.authToken.requestStatus;)yield Xn(100),B=yield rt(T.appConfig);const re=B.authToken;return 0===re.requestStatus?Es(T,R):re})).apply(this,arguments)}function rt(T){return qr(T,R=>{if(!ln(R))throw Dt.create("not-registered");return function ws(T){return 1===T.requestStatus&&T.requestTime+Os<Date.now()}(R.authToken)?Object.assign(Object.assign({},R),{authToken:{requestStatus:0}}):R})}function Qt(){return Qt=(0,$.Z)(function*(T,R){try{const B=yield function cn(T,R){return dr.apply(this,arguments)}(T,R),re=Object.assign(Object.assign({},R),{authToken:B});return yield Mr(T.appConfig,re),B}catch(B){if(!At(B)||401!==B.customData.serverCode&&404!==B.customData.serverCode){const re=Object.assign(Object.assign({},R),{authToken:{requestStatus:0}});yield Mr(T.appConfig,re)}else yield Li(T.appConfig);throw B}}),Qt.apply(this,arguments)}function ln(T){return void 0!==T&&2===T.registrationStatus}function $o(){return($o=(0,$.Z)(function*(T){const R=T,{installationEntry:B,registrationPromise:re}=yield ue(R);return re?re.catch(console.error):Es(R).catch(console.error),B.fid})).apply(this,arguments)}function di(){return di=(0,$.Z)(function*(T,R=!1){const B=T;return yield function Ja(T){return Zi.apply(this,arguments)}(B),(yield Es(B,R)).token}),di.apply(this,arguments)}function Zi(){return(Zi=(0,$.Z)(function*(T){const{registrationPromise:R}=yield ue(T);R&&(yield R)})).apply(this,arguments)}function hi(T){return Dt.create("missing-app-config-values",{valueName:T})}const aa="installations",Go=T=>{const R=T.getProvider("app").getImmediate(),B=function Zs(T){if(!T||!T.options)throw hi("App Configuration");if(!T.name)throw hi("App Name");const R=["projectId","apiKey","appId"];for(const B of R)if(!T.options[B])throw hi(B);return{appName:T.name,projectId:T.options.projectId,apiKey:T.options.apiKey,appId:T.options.appId}}(R);return{app:R,appConfig:B,heartbeatServiceProvider:(0,Q._getProvider)(R,"heartbeat"),_delete:()=>Promise.resolve()}},xi=T=>{const R=T.getProvider("app").getImmediate(),B=(0,Q._getProvider)(R,aa).getImmediate();return{getId:()=>function qs(T){return $o.apply(this,arguments)}(B),getToken:ge=>function So(T){return di.apply(this,arguments)}(B,ge)}};(function ua(){(0,Q._registerComponent)(new de.wA(aa,Go,"PUBLIC")),(0,Q._registerComponent)(new de.wA("installations-internal",xi,"PRIVATE"))})(),(0,Q.registerVersion)(Sr,Qn),(0,Q.registerVersion)(Sr,Qn,"esm2017");const xo="@firebase/remote-config",qn=new ae.LL("remoteconfig","Remote Config",{"registration-window":"Undefined window object. This SDK only supports usage in a browser environment.","registration-project-id":"Undefined project identifier. Check Firebase app initialization.","registration-api-key":"Undefined API key. Check Firebase app initialization.","registration-app-id":"Undefined app identifier. Check Firebase app initialization.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","storage-delete":"Error thrown when deleting from storage. Original error: {$originalErrorMessage}.","fetch-client-network":"Fetch client failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-timeout":'The config fetch request timed out.  Configure timeout using "fetchTimeoutMillis" SDK setting.',"fetch-throttle":'The config fetch request timed out while in an exponential backoff state. Configure timeout using "fetchTimeoutMillis" SDK setting. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.',"fetch-client-parse":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","indexed-db-unavailable":"Indexed DB is not supported by current browser"});class gi{constructor(R,B,re,ge){this.client=R,this.storage=B,this.storageCache=re,this.logger=ge}isCachedDataFresh(R,B){if(!B)return this.logger.debug("Config fetch cache check. Cache unpopulated."),!1;const re=Date.now()-B,ge=re<=R;return this.logger.debug(`Config fetch cache check. Cache age millis: ${re}. Cache max age millis (minimumFetchIntervalMillis setting): ${R}. Is cache hit: ${ge}.`),ge}fetch(R){var B=this;return(0,$.Z)(function*(){const[re,ge]=yield Promise.all([B.storage.getLastSuccessfulFetchTimestampMillis(),B.storage.getLastSuccessfulFetchResponse()]);if(ge&&B.isCachedDataFresh(R.cacheMaxAgeMillis,re))return ge;R.eTag=ge&&ge.eTag;const Ce=yield B.client.fetch(R),Ze=[B.storageCache.setLastSuccessfulFetchTimestampMillis(Date.now())];return 200===Ce.status&&Ze.push(B.storage.setLastSuccessfulFetchResponse(Ce)),yield Promise.all(Ze),Ce})()}}function Ui(T=navigator){return T.languages&&T.languages[0]||T.language}class Vi{constructor(R,B,re,ge,Ce,Ze){this.firebaseInstallations=R,this.sdkVersion=B,this.namespace=re,this.projectId=ge,this.apiKey=Ce,this.appId=Ze}fetch(R){var B=this;return(0,$.Z)(function*(){const[re,ge]=yield Promise.all([B.firebaseInstallations.getId(),B.firebaseInstallations.getToken()]),Ze=`${window.FIREBASE_REMOTE_CONFIG_URL_BASE||"https://firebaseremoteconfig.googleapis.com"}/v1/projects/${B.projectId}/namespaces/${B.namespace}:fetch?key=${B.apiKey}`,Tt={"Content-Type":"application/json","Content-Encoding":"gzip","If-None-Match":R.eTag||"*"},wt={sdk_version:B.sdkVersion,app_instance_id:re,app_instance_id_token:ge,app_id:B.appId,language_code:Ui()},Zt={method:"POST",headers:Tt,body:JSON.stringify(wt)},hn=fetch(Ze,Zt),wn=new Promise((Co,gu)=>{R.signal.addEventListener(()=>{const Yd=new Error("The operation was aborted.");Yd.name="AbortError",gu(Yd)})});let wo;try{yield Promise.race([hn,wn]),wo=yield hn}catch(Co){let gu="fetch-client-network";throw"AbortError"===Co?.name&&(gu="fetch-timeout"),qn.create(gu,{originalErrorMessage:Co?.message})}let Ei=wo.status;const el=wo.headers.get("ETag")||void 0;let Gu,mc;if(200===wo.status){let Co;try{Co=yield wo.json()}catch(gu){throw qn.create("fetch-client-parse",{originalErrorMessage:gu?.message})}Gu=Co.entries,mc=Co.state}if("INSTANCE_STATE_UNSPECIFIED"===mc?Ei=500:"NO_CHANGE"===mc?Ei=304:("NO_TEMPLATE"===mc||"EMPTY_CONFIG"===mc)&&(Gu={}),304!==Ei&&200!==Ei)throw qn.create("fetch-status",{httpStatus:Ei});return{status:Ei,eTag:el,config:Gu}})()}}class yo{constructor(R,B){this.client=R,this.storage=B}fetch(R){var B=this;return(0,$.Z)(function*(){const re=(yield B.storage.getThrottleMetadata())||{backoffCount:0,throttleEndTimeMillis:Date.now()};return B.attemptFetch(R,re)})()}attemptFetch(R,{throttleEndTimeMillis:B,backoffCount:re}){var ge=this;return(0,$.Z)(function*(){yield function hr(T,R){return new Promise((B,re)=>{const ge=Math.max(R-Date.now(),0),Ce=setTimeout(B,ge);T.addEventListener(()=>{clearTimeout(Ce),re(qn.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(R.signal,B);try{const Ce=yield ge.client.fetch(R);return yield ge.storage.deleteThrottleMetadata(),Ce}catch(Ce){if(!function Cs(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const R=Number(T.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Ce))throw Ce;const Ze={throttleEndTimeMillis:Date.now()+(0,ae.$s)(re),backoffCount:re+1};return yield ge.storage.setThrottleMetadata(Ze),ge.attemptFetch(R,Ze)}})()}}class da{constructor(R,B,re,ge,Ce){this.app=R,this._client=B,this._storageCache=re,this._storage=ge,this._logger=Ce,this._isInitializationComplete=!1,this.settings={fetchTimeoutMillis:6e4,minimumFetchIntervalMillis:432e5},this.defaultConfig={}}get fetchTimeMillis(){return this._storageCache.getLastSuccessfulFetchTimestampMillis()||-1}get lastFetchStatus(){return this._storageCache.getLastFetchStatus()||"no-fetch-yet"}}function Fr(T,R){const B=T.target.error||void 0;return qn.create(R,{originalErrorMessage:B&&B?.message})}const Ir="app_namespace_store";class nu{constructor(R,B,re,ge=function fn(){return new Promise((T,R)=>{try{const B=indexedDB.open("firebase_remote_config",1);B.onerror=re=>{R(Fr(re,"storage-open"))},B.onsuccess=re=>{T(re.target.result)},B.onupgradeneeded=re=>{0===re.oldVersion&&re.target.result.createObjectStore(Ir,{keyPath:"compositeKey"})}}catch(B){R(qn.create("storage-open",{originalErrorMessage:B?.message}))}})}()){this.appId=R,this.appName=B,this.namespace=re,this.openDbPromise=ge}getLastFetchStatus(){return this.get("last_fetch_status")}setLastFetchStatus(R){return this.set("last_fetch_status",R)}getLastSuccessfulFetchTimestampMillis(){return this.get("last_successful_fetch_timestamp_millis")}setLastSuccessfulFetchTimestampMillis(R){return this.set("last_successful_fetch_timestamp_millis",R)}getLastSuccessfulFetchResponse(){return this.get("last_successful_fetch_response")}setLastSuccessfulFetchResponse(R){return this.set("last_successful_fetch_response",R)}getActiveConfig(){return this.get("active_config")}setActiveConfig(R){return this.set("active_config",R)}getActiveConfigEtag(){return this.get("active_config_etag")}setActiveConfigEtag(R){return this.set("active_config_etag",R)}getThrottleMetadata(){return this.get("throttle_metadata")}setThrottleMetadata(R){return this.set("throttle_metadata",R)}deleteThrottleMetadata(){return this.delete("throttle_metadata")}get(R){var B=this;return(0,$.Z)(function*(){const re=yield B.openDbPromise;return new Promise((ge,Ce)=>{const Tt=re.transaction([Ir],"readonly").objectStore(Ir),wt=B.createCompositeKey(R);try{const Zt=Tt.get(wt);Zt.onerror=hn=>{Ce(Fr(hn,"storage-get"))},Zt.onsuccess=hn=>{const wn=hn.target.result;ge(wn?wn.value:void 0)}}catch(Zt){Ce(qn.create("storage-get",{originalErrorMessage:Zt?.message}))}})})()}set(R,B){var re=this;return(0,$.Z)(function*(){const ge=yield re.openDbPromise;return new Promise((Ce,Ze)=>{const wt=ge.transaction([Ir],"readwrite").objectStore(Ir),Zt=re.createCompositeKey(R);try{const hn=wt.put({compositeKey:Zt,value:B});hn.onerror=wn=>{Ze(Fr(wn,"storage-set"))},hn.onsuccess=()=>{Ce()}}catch(hn){Ze(qn.create("storage-set",{originalErrorMessage:hn?.message}))}})})()}delete(R){var B=this;return(0,$.Z)(function*(){const re=yield B.openDbPromise;return new Promise((ge,Ce)=>{const Tt=re.transaction([Ir],"readwrite").objectStore(Ir),wt=B.createCompositeKey(R);try{const Zt=Tt.delete(wt);Zt.onerror=hn=>{Ce(Fr(hn,"storage-delete"))},Zt.onsuccess=()=>{ge()}}catch(Zt){Ce(qn.create("storage-delete",{originalErrorMessage:Zt?.message}))}})})()}createCompositeKey(R){return[this.appId,this.appName,this.namespace,R].join()}}class Ys{constructor(R){this.storage=R}getLastFetchStatus(){return this.lastFetchStatus}getLastSuccessfulFetchTimestampMillis(){return this.lastSuccessfulFetchTimestampMillis}getActiveConfig(){return this.activeConfig}loadFromStorage(){var R=this;return(0,$.Z)(function*(){const B=R.storage.getLastFetchStatus(),re=R.storage.getLastSuccessfulFetchTimestampMillis(),ge=R.storage.getActiveConfig(),Ce=yield B;Ce&&(R.lastFetchStatus=Ce);const Ze=yield re;Ze&&(R.lastSuccessfulFetchTimestampMillis=Ze);const Tt=yield ge;Tt&&(R.activeConfig=Tt)})()}setLastFetchStatus(R){return this.lastFetchStatus=R,this.storage.setLastFetchStatus(R)}setLastSuccessfulFetchTimestampMillis(R){return this.lastSuccessfulFetchTimestampMillis=R,this.storage.setLastSuccessfulFetchTimestampMillis(R)}setActiveConfig(R){return this.activeConfig=R,this.storage.setActiveConfig(R)}}function fs(){return Is.apply(this,arguments)}function Is(){return(Is=(0,$.Z)(function*(){if(!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}!function Bi(){(0,Q._registerComponent)(new de.wA("remote-config",function T(R,{instanceIdentifier:B}){const re=R.getProvider("app").getImmediate(),ge=R.getProvider("installations-internal").getImmediate();if(typeof window>"u")throw qn.create("registration-window");if(!(0,ae.hl)())throw qn.create("indexed-db-unavailable");const{projectId:Ce,apiKey:Ze,appId:Tt}=re.options;if(!Ce)throw qn.create("registration-project-id");if(!Ze)throw qn.create("registration-api-key");if(!Tt)throw qn.create("registration-app-id");const wt=new nu(Tt,re.name,B=B||"firebase"),Zt=new Ys(wt),hn=new ve.Yd(xo);hn.logLevel=ve.in.ERROR;const wn=new Vi(ge,Q.SDK_VERSION,B,Ce,Ze,Tt),wo=new yo(wn,wt),Ei=new gi(wo,wt,Zt,hn),el=new da(re,Ei,Zt,wt,hn);return function tn(T){const R=(0,ae.m9)(T);R._initializePromise||(R._initializePromise=R._storageCache.loadFromStorage().then(()=>{R._isInitializationComplete=!0}))}(el),el},"PUBLIC").setMultipleInstances(!0)),(0,Q.registerVersion)(xo,"0.4.4"),(0,Q.registerVersion)(xo,"0.4.4","esm2017")}();const Br=(T,R)=>R.some(B=>T instanceof B);let ec,or;const Us=new WeakMap,Vs=new WeakMap,Zr=new WeakMap,ai=new WeakMap,K=new WeakMap;let fe={get(T,R,B){if(T instanceof IDBTransaction){if("done"===R)return Vs.get(T);if("objectStoreNames"===R)return T.objectStoreNames||Zr.get(T);if("store"===R)return B.objectStoreNames[1]?void 0:B.objectStore(B.objectStoreNames[0])}return rn(T[R])},set:(T,R,B)=>(T[R]=B,!0),has:(T,R)=>T instanceof IDBTransaction&&("done"===R||"store"===R)||R in T};function Mt(T){return"function"==typeof T?function ot(T){return T!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function _o(){return or||(or=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(T)?function(...R){return T.apply(zn(this),R),rn(Us.get(this))}:function(...R){return rn(T.apply(zn(this),R))}:function(R,...B){const re=T.call(zn(this),R,...B);return Zr.set(re,R.sort?R.sort():[R]),rn(re)}}(T):(T instanceof IDBTransaction&&function te(T){if(Vs.has(T))return;const R=new Promise((B,re)=>{const ge=()=>{T.removeEventListener("complete",Ce),T.removeEventListener("error",Ze),T.removeEventListener("abort",Ze)},Ce=()=>{B(),ge()},Ze=()=>{re(T.error||new DOMException("AbortError","AbortError")),ge()};T.addEventListener("complete",Ce),T.addEventListener("error",Ze),T.addEventListener("abort",Ze)});Vs.set(T,R)}(T),Br(T,function Yi(){return ec||(ec=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(T,fe):T)}function rn(T){if(T instanceof IDBRequest)return function V(T){const R=new Promise((B,re)=>{const ge=()=>{T.removeEventListener("success",Ce),T.removeEventListener("error",Ze)},Ce=()=>{B(rn(T.result)),ge()},Ze=()=>{re(T.error),ge()};T.addEventListener("success",Ce),T.addEventListener("error",Ze)});return R.then(B=>{B instanceof IDBCursor&&Us.set(B,T)}).catch(()=>{}),K.set(R,T),R}(T);if(ai.has(T))return ai.get(T);const R=Mt(T);return R!==T&&(ai.set(T,R),K.set(R,T)),R}const zn=T=>K.get(T);function Kr(T,R,{blocked:B,upgrade:re,blocking:ge,terminated:Ce}={}){const Ze=indexedDB.open(T,R),Tt=rn(Ze);return re&&Ze.addEventListener("upgradeneeded",wt=>{re(rn(Ze.result),wt.oldVersion,wt.newVersion,rn(Ze.transaction))}),B&&Ze.addEventListener("blocked",()=>B()),Tt.then(wt=>{Ce&&wt.addEventListener("close",()=>Ce()),ge&&wt.addEventListener("versionchange",()=>ge())}).catch(()=>{}),Tt}function yi(T,{blocked:R}={}){const B=indexedDB.deleteDatabase(T);return R&&B.addEventListener("blocked",()=>R()),rn(B).then(()=>{})}const Pn=["get","getKey","getAll","getAllKeys","count"],Qi=["put","add","delete","clear"],No=new Map;function Su(T,R){if(!(T instanceof IDBDatabase)||R in T||"string"!=typeof R)return;if(No.get(R))return No.get(R);const B=R.replace(/FromIndex$/,""),re=R!==B,ge=Qi.includes(B);if(!(B in(re?IDBIndex:IDBObjectStore).prototype)||!ge&&!Pn.includes(B))return;const Ce=function(){var Ze=(0,$.Z)(function*(Tt,...wt){const Zt=this.transaction(Tt,ge?"readwrite":"readonly");let hn=Zt.store;return re&&(hn=hn.index(wt.shift())),(yield Promise.all([hn[B](...wt),ge&&Zt.done]))[0]});return function(wt){return Ze.apply(this,arguments)}}();return No.set(R,Ce),Ce}!function pe(T){fe=T(fe)}(T=>({...T,get:(R,B,re)=>Su(R,B)||T.get(R,B,re),has:(R,B)=>!!Su(R,B)||T.has(R,B)}));const Ra="/firebase-messaging-sw.js",fa="/firebase-cloud-messaging-push-scope",ru="BDOU99-h67HcA6JeFXHbSNMu7e2yNNu3RzoMj8TM4W88jITfq7ZmPvIM1Iv-4_l2LxQcYwhqby2xGpWwzjfAnG4",Vc="https://fcmregistrations.googleapis.com/v1",Bc="google.c.a.c_id",Yr="google.c.a.c_l",Dl="google.c.a.ts";var ni=(()=>((ni=ni||{}).PUSH_RECEIVED="push-received",ni.NOTIFICATION_CLICKED="notification-clicked",ni))();function ps(T){const R=new Uint8Array(T);return btoa(String.fromCharCode(...R)).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function gr(T){const B=(T+"=".repeat((4-T.length%4)%4)).replace(/\-/g,"+").replace(/_/g,"/"),re=atob(B),ge=new Uint8Array(re.length);for(let Ce=0;Ce<re.length;++Ce)ge[Ce]=re.charCodeAt(Ce);return ge}const Bs="fcm_token_details_db",bs=5,Oo="fcm_token_object_Store";function _i(){return _i=(0,$.Z)(function*(T){if("databases"in indexedDB&&!(yield indexedDB.databases()).map(Ce=>Ce.name).includes(Bs))return null;let R=null;return(yield Kr(Bs,bs,{upgrade:(re=(0,$.Z)(function*(ge,Ce,Ze,Tt){var wt;if(Ce<2||!ge.objectStoreNames.contains(Oo))return;const Zt=Tt.objectStore(Oo),hn=yield Zt.index("fcmSenderId").get(T);if(yield Zt.clear(),hn)if(2===Ce){const wn=hn;if(!wn.auth||!wn.p256dh||!wn.endpoint)return;R={token:wn.fcmToken,createTime:null!==(wt=wn.createTime)&&void 0!==wt?wt:Date.now(),subscriptionOptions:{auth:wn.auth,p256dh:wn.p256dh,endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:"string"==typeof wn.vapidKey?wn.vapidKey:ps(wn.vapidKey)}}}else if(3===Ce){const wn=hn;R={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:ps(wn.auth),p256dh:ps(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:ps(wn.vapidKey)}}}else if(4===Ce){const wn=hn;R={token:wn.fcmToken,createTime:wn.createTime,subscriptionOptions:{auth:ps(wn.auth),p256dh:ps(wn.p256dh),endpoint:wn.endpoint,swScope:wn.swScope,vapidKey:ps(wn.vapidKey)}}}}),function(Ce,Ze,Tt,wt){return re.apply(this,arguments)})})).close(),yield yi(Bs),yield yi("fcm_vapid_details_db"),yield yi("undefined"),function Qs(T){if(!T||!T.subscriptionOptions)return!1;const{subscriptionOptions:R}=T;return"number"==typeof T.createTime&&T.createTime>0&&"string"==typeof T.token&&T.token.length>0&&"string"==typeof R.auth&&R.auth.length>0&&"string"==typeof R.p256dh&&R.p256dh.length>0&&"string"==typeof R.endpoint&&R.endpoint.length>0&&"string"==typeof R.swScope&&R.swScope.length>0&&"string"==typeof R.vapidKey&&R.vapidKey.length>0}(R)?R:null;var re}),_i.apply(this,arguments)}const pa="firebase-messaging-database",jr=1,ji="firebase-messaging-store";let nc=null;function Wo(){return nc||(nc=Kr(pa,jr,{upgrade:(T,R)=>{0===R&&T.createObjectStore(ji)}})),nc}function ga(T){return Ji.apply(this,arguments)}function Ji(){return Ji=(0,$.Z)(function*(T){const R=su(T),re=yield(yield Wo()).transaction(ji).objectStore(ji).get(R);if(re)return re;{const ge=yield function tc(T){return _i.apply(this,arguments)}(T.appConfig.senderId);if(ge)return yield ma(T,ge),ge}}),Ji.apply(this,arguments)}function ma(T,R){return Cn.apply(this,arguments)}function Cn(){return(Cn=(0,$.Z)(function*(T,R){const B=su(T),ge=(yield Wo()).transaction(ji,"readwrite");return yield ge.objectStore(ji).put(R,B),yield ge.done,R})).apply(this,arguments)}function vo(){return(vo=(0,$.Z)(function*(T){const R=su(T),re=(yield Wo()).transaction(ji,"readwrite");yield re.objectStore(ji).delete(R),yield re.done})).apply(this,arguments)}function su({appConfig:T}){return T.appId}const ui=new ae.LL("messaging","Messaging",{"missing-app-config-values":'Missing App configuration value: "{$valueName}"',"only-available-in-window":"This method is available in a Window context.","only-available-in-sw":"This method is available in a service worker context.","permission-default":"The notification permission was not granted and dismissed instead.","permission-blocked":"The notification permission was not granted and blocked instead.","unsupported-browser":"This browser doesn't support the API's required to use the Firebase SDK.","indexed-db-unsupported":"This browser doesn't support indexedDb.open() (ex. Safari iFrame, Firefox Private Browsing, etc)","failed-service-worker-registration":"We are unable to register the default service worker. {$browserErrorMessage}","token-subscribe-failed":"A problem occurred while subscribing the user to FCM: {$errorInfo}","token-subscribe-no-token":"FCM returned no token when subscribing the user to push.","token-unsubscribe-failed":"A problem occurred while unsubscribing the user from FCM: {$errorInfo}","token-update-failed":"A problem occurred while updating the user from FCM: {$errorInfo}","token-update-no-token":"FCM returned no token when updating the user to push.","use-sw-after-get-token":"The useServiceWorker() method may only be called once and must be called before calling getToken() to ensure your service worker is used.","invalid-sw-registration":"The input to useServiceWorker() must be a ServiceWorkerRegistration.","invalid-bg-handler":"The input to setBackgroundMessageHandler() must be a function.","invalid-vapid-key":"The public VAPID key must be a string.","use-vapid-key-after-get-token":"The usePublicVapidKey() method may only be called once and must be called before calling getToken() to ensure your VAPID key is used."});function Au(T,R){return ic.apply(this,arguments)}function ic(){return(ic=(0,$.Z)(function*(T,R){const B=yield ya(T),re=Sl(R),ge={method:"POST",headers:B,body:JSON.stringify(re)};let Ce;try{Ce=yield(yield fetch(Na(T.appConfig),ge)).json()}catch(Ze){throw ui.create("token-subscribe-failed",{errorInfo:Ze?.toString()})}if(Ce.error)throw ui.create("token-subscribe-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw ui.create("token-subscribe-no-token");return Ce.token})).apply(this,arguments)}function Mu(){return(Mu=(0,$.Z)(function*(T,R){const B=yield ya(T),re=Sl(R.subscriptionOptions),ge={method:"PATCH",headers:B,body:JSON.stringify(re)};let Ce;try{Ce=yield(yield fetch(`${Na(T.appConfig)}/${R.token}`,ge)).json()}catch(Ze){throw ui.create("token-update-failed",{errorInfo:Ze?.toString()})}if(Ce.error)throw ui.create("token-update-failed",{errorInfo:Ce.error.message});if(!Ce.token)throw ui.create("token-update-no-token");return Ce.token})).apply(this,arguments)}function xu(T,R){return oc.apply(this,arguments)}function oc(){return(oc=(0,$.Z)(function*(T,R){const re={method:"DELETE",headers:yield ya(T)};try{const Ce=yield(yield fetch(`${Na(T.appConfig)}/${R}`,re)).json();if(Ce.error)throw ui.create("token-unsubscribe-failed",{errorInfo:Ce.error.message})}catch(ge){throw ui.create("token-unsubscribe-failed",{errorInfo:ge?.toString()})}})).apply(this,arguments)}function Na({projectId:T}){return`${Vc}/projects/${T}/registrations`}function ya(T){return ou.apply(this,arguments)}function ou(){return(ou=(0,$.Z)(function*({appConfig:T,installations:R}){const B=yield R.getToken();return new Headers({"Content-Type":"application/json",Accept:"application/json","x-goog-api-key":T.apiKey,"x-goog-firebase-installations-auth":`FIS ${B}`})})).apply(this,arguments)}function Sl({p256dh:T,auth:R,endpoint:B,vapidKey:re}){const ge={web:{endpoint:B,auth:R,p256dh:T}};return re!==ru&&(ge.web.applicationPubKey=re),ge}const ac=6048e5;function Ru(){return Ru=(0,$.Z)(function*(T){const R=yield function _a(T,R){return M.apply(this,arguments)}(T.swRegistration,T.vapidKey),B={vapidKey:T.vapidKey,swScope:T.swRegistration.scope,endpoint:R.endpoint,auth:ps(R.getKey("auth")),p256dh:ps(R.getKey("p256dh"))},re=yield ga(T.firebaseDependencies);if(re){if(function F(T,R){return R.vapidKey===T.vapidKey&&R.endpoint===T.endpoint&&R.auth===T.auth&&R.p256dh===T.p256dh}(re.subscriptionOptions,B))return Date.now()>=re.createTime+ac?function ri(T,R){return ee.apply(this,arguments)}(T,{token:re.token,createTime:Date.now(),subscriptionOptions:B}):re.token;try{yield xu(T.firebaseDependencies,re.token)}catch(ge){console.warn(ge)}return Xi(T.firebaseDependencies,B)}return Xi(T.firebaseDependencies,B)}),Ru.apply(this,arguments)}function br(){return br=(0,$.Z)(function*(T){const R=yield ga(T.firebaseDependencies);R&&(yield xu(T.firebaseDependencies,R.token),yield function iu(T){return vo.apply(this,arguments)}(T.firebaseDependencies));const B=yield T.swRegistration.pushManager.getSubscription();return!B||B.unsubscribe()}),br.apply(this,arguments)}function ee(){return ee=(0,$.Z)(function*(T,R){try{const B=yield function sc(T,R){return Mu.apply(this,arguments)}(T.firebaseDependencies,R),re=Object.assign(Object.assign({},R),{token:B,createTime:Date.now()});return yield ma(T.firebaseDependencies,re),B}catch(B){throw yield function qe(T){return br.apply(this,arguments)}(T),B}}),ee.apply(this,arguments)}function Xi(T,R){return Vn.apply(this,arguments)}function Vn(){return(Vn=(0,$.Z)(function*(T,R){const re={token:yield Au(T,R),createTime:Date.now(),subscriptionOptions:R};return yield ma(T,re),re.token})).apply(this,arguments)}function M(){return(M=(0,$.Z)(function*(T,R){return(yield T.pushManager.getSubscription())||T.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:gr(R)})})).apply(this,arguments)}function N(T){const R={from:T.from,collapseKey:T.collapse_key,messageId:T.fcmMessageId};return function W(T,R){if(!R.notification)return;T.notification={};const B=R.notification.title;B&&(T.notification.title=B);const re=R.notification.body;re&&(T.notification.body=re);const ge=R.notification.image;ge&&(T.notification.image=ge);const Ce=R.notification.icon;Ce&&(T.notification.icon=Ce)}(R,T),function se(T,R){R.data&&(T.data=R.data)}(R,T),function Ne(T,R){var B,re,ge,Ce,Ze;if(!(R.fcmOptions||null!==(B=R.notification)&&void 0!==B&&B.click_action))return;T.fcmOptions={};const Tt=null!==(ge=null===(re=R.fcmOptions)||void 0===re?void 0:re.link)&&void 0!==ge?ge:null===(Ce=R.notification)||void 0===Ce?void 0:Ce.click_action;Tt&&(T.fcmOptions.link=Tt);const wt=null===(Ze=R.fcmOptions)||void 0===Ze?void 0:Ze.analytics_label;wt&&(T.fcmOptions.analyticsLabel=wt)}(R,T),R}function Ut(T,R){const B=[];for(let re=0;re<T.length;re++)B.push(T.charAt(re)),re<R.length&&B.push(R.charAt(re));return B.join("")}function xn(T){return ui.create("missing-app-config-values",{valueName:T})}Ut("hts/frbslgigp.ogepscmv/ieo/eaylg","tp:/ieaeogn-agolai.o/1frlglgc/o"),Ut("AzSCbw63g1R0nCw85jG8","Iaya3yLKwmgvh7cF0q4");class Bn{constructor(R,B,re){this.deliveryMetricsExportedToBigQueryEnabled=!1,this.onBackgroundMessageHandler=null,this.onMessageHandler=null,this.logEvents=[],this.isLogServiceStarted=!1;const ge=function ar(T){if(!T||!T.options)throw xn("App Configuration Object");if(!T.name)throw xn("App Name");const R=["projectId","apiKey","appId","messagingSenderId"],{options:B}=T;for(const re of R)if(!B[re])throw xn(re);return{appName:T.name,projectId:B.projectId,apiKey:B.apiKey,appId:B.appId,senderId:B.messagingSenderId}}(R);this.firebaseDependencies={app:R,appConfig:ge,installations:B,analyticsProvider:re}}_delete(){return Promise.resolve()}}function Dr(){return(Dr=(0,$.Z)(function*(T){try{T.swRegistration=yield navigator.serviceWorker.register(Ra,{scope:fa}),T.swRegistration.update().catch(()=>{})}catch(R){throw ui.create("failed-service-worker-registration",{browserErrorMessage:R?.message})}})).apply(this,arguments)}function mr(){return(mr=(0,$.Z)(function*(T,R){if(!R&&!T.swRegistration&&(yield function In(T){return Dr.apply(this,arguments)}(T)),R||!T.swRegistration){if(!(R instanceof ServiceWorkerRegistration))throw ui.create("invalid-sw-registration");T.swRegistration=R}})).apply(this,arguments)}function Bt(){return(Bt=(0,$.Z)(function*(T,R){R?T.vapidKey=R:T.vapidKey||(T.vapidKey=ru)})).apply(this,arguments)}function Hi(){return Hi=(0,$.Z)(function*(T,R){if(!navigator)throw ui.create("only-available-in-window");if("default"===Notification.permission&&(yield Notification.requestPermission()),"granted"!==Notification.permission)throw ui.create("permission-blocked");return yield function Ni(T,R){return Bt.apply(this,arguments)}(T,R?.vapidKey),yield function yn(T,R){return mr.apply(this,arguments)}(T,R?.serviceWorkerRegistration),function Al(T){return Ru.apply(this,arguments)}(T)}),Hi.apply(this,arguments)}function Qr(){return(Qr=(0,$.Z)(function*(T,R,B){const re=function qo(T){switch(T){case ni.NOTIFICATION_CLICKED:return"notification_open";case ni.PUSH_RECEIVED:return"notification_foreground";default:throw new Error}}(R);(yield T.firebaseDependencies.analyticsProvider.get()).logEvent(re,{message_id:B[Bc],message_name:B[Yr],message_time:B[Dl],message_device_time:Math.floor(Date.now()/1e3)})})).apply(this,arguments)}function Po(){return Po=(0,$.Z)(function*(T,R){const B=R.data;if(!B.isFirebaseMessaging)return;T.onMessageHandler&&B.messageType===ni.PUSH_RECEIVED&&("function"==typeof T.onMessageHandler?T.onMessageHandler(N(B)):T.onMessageHandler.next(N(B)));const re=B.data;(function Je(T){return"object"==typeof T&&!!T&&Bc in T})(re)&&"1"===re["google.c.a.e"]&&(yield function Eo(T,R,B){return Qr.apply(this,arguments)}(T,B.messageType,re))}),Po.apply(this,arguments)}const uc="@firebase/messaging",$i=T=>{const R=new Bn(T.getProvider("app").getImmediate(),T.getProvider("installations-internal").getImmediate(),T.getProvider("analytics-internal"));return navigator.serviceWorker.addEventListener("message",B=>function jc(T,R){return Po.apply(this,arguments)}(R,B)),R},Nu=T=>{const R=T.getProvider("messaging").getImmediate();return{getToken:re=>function es(T,R){return Hi.apply(this,arguments)}(R,re)}};function at(){return Ln.apply(this,arguments)}function Ln(){return(Ln=(0,$.Z)(function*(){try{yield(0,ae.eu)()}catch{return!1}return typeof window<"u"&&(0,ae.hl)()&&(0,ae.zI)()&&"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window&&"fetch"in window&&ServiceWorkerRegistration.prototype.hasOwnProperty("showNotification")&&PushSubscription.prototype.hasOwnProperty("getKey")})).apply(this,arguments)}!function Ou(){(0,Q._registerComponent)(new de.wA("messaging",$i,"PUBLIC")),(0,Q._registerComponent)(new de.wA("messaging-internal",Nu,"PRIVATE")),(0,Q.registerVersion)(uc,"0.12.4"),(0,Q.registerVersion)(uc,"0.12.4","esm2017")}();const tr="analytics",xl="firebase_id",Pu="origin",Ds=6e4,Js="https://firebase.googleapis.com/v1alpha/projects/-/apps/{app-id}/webConfig",ka="https://www.googletagmanager.com/gtag/js",Tr=new ve.Yd("@firebase/analytics"),ms=new ae.LL("analytics","Analytics",{"already-exists":"A Firebase Analytics instance with the appId {$id}  already exists. Only one Firebase Analytics instance can be created for each appId.","already-initialized":"initializeAnalytics() cannot be called again with different options than those it was initially called with. It can be called again with the same options to return the existing instance, or getAnalytics() can be used to get a reference to the already-intialized instance.","already-initialized-settings":"Firebase Analytics has already been initialized.settings() must be called before initializing any Analytics instanceor it will have no effect.","interop-component-reg-failed":"Firebase Analytics Interop Component failed to instantiate: {$reason}","invalid-analytics-context":"Firebase Analytics is not supported in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","indexeddb-unavailable":"IndexedDB unavailable or restricted in this environment. Wrap initialization of analytics in analytics.isSupported() to prevent initialization in unsupported environments. Details: {$errorInfo}","fetch-throttle":"The config fetch request timed out while in an exponential backoff state. Unix timestamp in milliseconds when fetch request throttling ends: {$throttleEndTimeMillis}.","config-fetch-failed":"Dynamic config fetch failed: [{$httpStatus}] {$responseMessage}","no-api-key":'The "apiKey" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid API key.',"no-app-id":'The "appId" field is empty in the local Firebase config. Firebase Analytics requires this field tocontain a valid app ID.',"no-client-id":'The "client_id" field is empty.',"invalid-gtag-resource":"Trusted Types detected an invalid gtag resource: {$gtagURL}."});function ku(T){if(!T.startsWith(ka)){const R=ms.create("invalid-gtag-resource",{gtagURL:T});return Tr.warn(R.message),""}return T}function Rl(T){return Promise.all(T.map(R=>R.catch(B=>B)))}function Fa(){return(Fa=(0,$.Z)(function*(T,R,B,re,ge,Ce){const Ze=re[ge];try{if(Ze)yield R[Ze];else{const wt=(yield Rl(B)).find(Zt=>Zt.measurementId===ge);wt&&(yield R[wt.appId])}}catch(Tt){Tr.error(Tt)}T("config",ge,Ce)})).apply(this,arguments)}function cc(){return(cc=(0,$.Z)(function*(T,R,B,re,ge){try{let Ce=[];if(ge&&ge.send_to){let Ze=ge.send_to;Array.isArray(Ze)||(Ze=[Ze]);const Tt=yield Rl(B);for(const wt of Ze){const Zt=Tt.find(wn=>wn.measurementId===wt),hn=Zt&&R[Zt.appId];if(!hn){Ce=[];break}Ce.push(hn)}}0===Ce.length&&(Ce=Object.values(R)),yield Promise.all(Ce),T("event",re,ge||{})}catch(Ce){Tr.error(Ce)}})).apply(this,arguments)}const $c=30,Nl=new class Ea{constructor(R={},B=1e3){this.throttleMetadata=R,this.intervalMillis=B}getThrottleMetadata(R){return this.throttleMetadata[R]}setThrottleMetadata(R,B){this.throttleMetadata[R]=B}deleteThrottleMetadata(R){delete this.throttleMetadata[R]}};function Bd(T){return new Headers({Accept:"application/json","x-goog-api-key":T})}function Fo(){return(Fo=(0,$.Z)(function*(T){var R;const{appId:B,apiKey:re}=T,ge={method:"GET",headers:Bd(re)},Ce=Js.replace("{app-id}",B),Ze=yield fetch(Ce,ge);if(200!==Ze.status&&304!==Ze.status){let Tt="";try{const wt=yield Ze.json();null!==(R=wt.error)&&void 0!==R&&R.message&&(Tt=wt.error.message)}catch{}throw ms.create("config-fetch-failed",{httpStatus:Ze.status,responseMessage:Tt})}return Ze.json()})).apply(this,arguments)}function Uu(){return(Uu=(0,$.Z)(function*(T,R=Nl,B){const{appId:re,apiKey:ge,measurementId:Ce}=T.options;if(!re)throw ms.create("no-app-id");if(!ge){if(Ce)return{measurementId:Ce,appId:re};throw ms.create("no-api-key")}const Ze=R.getThrottleMetadata(re)||{backoffCount:0,throttleEndTimeMillis:Date.now()},Tt=new Gc;return setTimeout((0,$.Z)(function*(){Tt.abort()}),void 0!==B?B:Ds),jd({appId:re,apiKey:ge,measurementId:Ce},Ze,Tt,R)})).apply(this,arguments)}function jd(T,R,B){return Vu.apply(this,arguments)}function Vu(){return Vu=(0,$.Z)(function*(T,{throttleEndTimeMillis:R,backoffCount:B},re,ge=Nl){var Ce;const{appId:Ze,measurementId:Tt}=T;try{yield function Hd(T,R){return new Promise((B,re)=>{const ge=Math.max(R-Date.now(),0),Ce=setTimeout(B,ge);T.addEventListener(()=>{clearTimeout(Ce),re(ms.create("fetch-throttle",{throttleEndTimeMillis:R}))})})}(re,R)}catch(wt){if(Tt)return Tr.warn(`Timed out fetching this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${wt?.message}]`),{appId:Ze,measurementId:Tt};throw wt}try{const wt=yield function ys(T){return Fo.apply(this,arguments)}(T);return ge.deleteThrottleMetadata(Ze),wt}catch(wt){const Zt=wt;if(!function dc(T){if(!(T instanceof ae.ZR&&T.customData))return!1;const R=Number(T.customData.httpStatus);return 429===R||500===R||503===R||504===R}(Zt)){if(ge.deleteThrottleMetadata(Ze),Tt)return Tr.warn(`Failed to fetch this Firebase app's measurement ID from the server. Falling back to the measurement ID ${Tt} provided in the "measurementId" field in the local Firebase config. [${Zt?.message}]`),{appId:Ze,measurementId:Tt};throw wt}const hn=503===Number(null===(Ce=Zt?.customData)||void 0===Ce?void 0:Ce.httpStatus)?(0,ae.$s)(B,ge.intervalMillis,$c):(0,ae.$s)(B,ge.intervalMillis),wn={throttleEndTimeMillis:Date.now()+hn,backoffCount:B+1};return ge.setThrottleMetadata(Ze,wn),Tr.debug(`Calling attemptFetch again in ${hn} millis`),jd(T,wn,re,ge)}}),Vu.apply(this,arguments)}class Gc{constructor(){this.listeners=[]}addEventListener(R){this.listeners.push(R)}abort(){this.listeners.forEach(R=>R())}}let I,zc;function v(){return(v=(0,$.Z)(function*(T,R,B,re,ge){if(ge&&ge.global)T("event",B,re);else{const Ce=yield R;T("event",B,Object.assign(Object.assign({},re),{send_to:Ce}))}})).apply(this,arguments)}function hu(){return(hu=(0,$.Z)(function*(){if(!(0,ae.hl)())return Tr.warn(ms.create("indexeddb-unavailable",{errorInfo:"IndexedDB is not available in this environment."}).message),!1;try{yield(0,ae.eu)()}catch(T){return Tr.warn(ms.create("indexeddb-unavailable",{errorInfo:T?.toString()}).message),!1}return!0})).apply(this,arguments)}function fu(){return fu=(0,$.Z)(function*(T,R,B,re,ge,Ce,Ze){var Tt;const wt=function Hr(T){return Uu.apply(this,arguments)}(T);wt.then(Ei=>{B[Ei.measurementId]=Ei.appId,T.options.measurementId&&Ei.measurementId!==T.options.measurementId&&Tr.warn(`The measurement ID in the local Firebase config (${T.options.measurementId}) does not match the measurement ID fetched from the server (${Ei.measurementId}). To ensure analytics events are always sent to the correct Analytics property, update the measurement ID field in the local config or remove it from the local config.`)}).catch(Ei=>Tr.error(Ei)),R.push(wt);const Zt=function du(){return hu.apply(this,arguments)}().then(Ei=>{if(Ei)return re.getId()}),[hn,wn]=yield Promise.all([wt,Zt]);(function La(T){const R=window.document.getElementsByTagName("script");for(const B of Object.values(R))if(B.src&&B.src.includes(ka)&&B.src.includes(T))return B;return null})(Ce)||function va(T,R){const B=function Zo(T,R){let B;return window.trustedTypes&&(B=window.trustedTypes.createPolicy(T,R)),B}("firebase-js-sdk-policy",{createScriptURL:ku}),re=document.createElement("script"),ge=`${ka}?l=${T}&id=${R}`;re.src=B?B?.createScriptURL(ge):ge,re.async=!0,document.head.appendChild(re)}(Ce,hn.measurementId),zc&&(ge("consent","default",zc),function Ko(T){zc=T}(void 0)),ge("js",new Date);const wo=null!==(Tt=Ze?.config)&&void 0!==Tt?Tt:{};return wo[Pu]="firebase",wo.update=!0,null!=wn&&(wo[xl]=wn),ge("config",hn.measurementId,wo),I&&(ge("set",I),function wa(T){I=T}(void 0)),hn.measurementId}),fu.apply(this,arguments)}class Lo{constructor(R){this.app=R}_delete(){return delete Xs[this.app.options.appId],Promise.resolve()}}let Xs={},Ol=[];const Pl={};let ef,Yo,hc="dataLayer",Gd=!1;function tf(T,R,B){!function Ca(){const T=[];if((0,ae.ru)()&&T.push("This is a browser extension environment."),(0,ae.zI)()||T.push("Cookies are not available."),T.length>0){const R=T.map((re,ge)=>`(${ge+1}) ${re}`).join(" "),B=ms.create("invalid-analytics-context",{errorInfo:R});Tr.warn(B.message)}}();const re=T.options.appId;if(!re)throw ms.create("no-app-id");if(!T.options.apiKey){if(!T.options.measurementId)throw ms.create("no-api-key");Tr.warn(`The "apiKey" field is empty in the local Firebase config. This is needed to fetch the latest measurement ID for this Firebase app. Falling back to the measurement ID ${T.options.measurementId} provided in the "measurementId" field in the local Firebase config.`)}if(null!=Xs[re])throw ms.create("already-exists",{id:re});if(!Gd){!function Hc(T){let R=[];Array.isArray(window[T])?R=window[T]:window[T]=R}(hc);const{wrappedGtag:Ce,gtagCore:Ze}=function lc(T,R,B,re,ge){let Ce=function(...Ze){window[re].push(arguments)};return window[ge]&&"function"==typeof window[ge]&&(Ce=window[ge]),window[ge]=function lu(T,R,B,re){function Ce(){return Ce=(0,$.Z)(function*(Ze,...Tt){try{if("event"===Ze){const[wt,Zt]=Tt;yield function Lu(T,R,B,re,ge){return cc.apply(this,arguments)}(T,R,B,wt,Zt)}else if("config"===Ze){const[wt,Zt]=Tt;yield function Fu(T,R,B,re,ge,Ce){return Fa.apply(this,arguments)}(T,R,B,re,wt,Zt)}else if("consent"===Ze){const[wt]=Tt;T("consent","update",wt)}else if("get"===Ze){const[wt,Zt,hn]=Tt;T("get",wt,Zt,hn)}else if("set"===Ze){const[wt]=Tt;T("set",wt)}else T(Ze,...Tt)}catch(wt){Tr.error(wt)}}),Ce.apply(this,arguments)}return function ge(Ze){return Ce.apply(this,arguments)}}(Ce,T,R,B),{gtagCore:Ce,wrappedGtag:window[ge]}}(Xs,Ol,Pl,hc,"gtag");Yo=Ce,ef=Ze,Gd=!0}return Xs[re]=function $d(T,R,B,re,ge,Ce,Ze){return fu.apply(this,arguments)}(T,Ol,Pl,R,ef,hc,B),new Lo(T)}function zd(){return Fl.apply(this,arguments)}function Fl(){return(Fl=(0,$.Z)(function*(){if((0,ae.ru)()||!(0,ae.zI)()||!(0,ae.hl)())return!1;try{return yield(0,ae.eu)()}catch{return!1}})).apply(this,arguments)}const Bu="@firebase/analytics";!function Ll(){(0,Q._registerComponent)(new de.wA(tr,(R,{options:B})=>tf(R.getProvider("app").getImmediate(),R.getProvider("installations-internal").getImmediate(),B),"PUBLIC")),(0,Q._registerComponent)(new de.wA("analytics-internal",function T(R){try{const B=R.getProvider(tr).getImmediate();return{logEvent:(re,ge,Ce)=>function pu(T,R,B,re){T=(0,ae.m9)(T),function S(T,R,B,re,ge){return v.apply(this,arguments)}(Yo,Xs[T.app.options.appId],R,B,re).catch(ge=>Tr.error(ge))}(B,re,ge,Ce)}}catch(B){throw ms.create("interop-component-reg-failed",{reason:B})}},"PRIVATE")),(0,Q.registerVersion)(Bu,"0.10.0"),(0,Q.registerVersion)(Bu,"0.10.0","esm2017")}();var Qo=j(1954),Ul=j(2631);const Qp=new class Kc extends Ul.v{}(class Yp extends Qo.o{constructor(R,B){super(R,B),this.scheduler=R,this.work=B}schedule(R,B=0){return B>0?super.schedule(R,B):(this.delay=B,this.state=R,this.scheduler.flush(this),this)}execute(R,B){return B>0||this.closed?super.execute(R,B):this._execute(R,B)}requestAsyncId(R,B,re=0){return null!=re&&re>0||null==re&&this.delay>0?super.requestAsyncId(R,B,re):(R.flush(this),0)}});var Yc=j(6321),ju=j(9397),Ba=j(3093),Ia=j(5137);const gc=new E.GfV("7.6.1"),Qc="__angularfire_symbol__analyticsIsSupportedValue",eo="__angularfire_symbol__analyticsIsSupported",af="__angularfire_symbol__remoteConfigIsSupportedValue",Vl="__angularfire_symbol__remoteConfigIsSupported",qd="__angularfire_symbol__messagingIsSupportedValue",Zd="__angularfire_symbol__messagingIsSupported";function Bl(T,R,B){if(R){if(1===R.length)return R[0];const Ce=R.filter(Ze=>Ze.app===B);if(1===Ce.length)return Ce[0]}return B.container.getProvider(T).getImmediate({optional:!0})}globalThis[eo]||(globalThis[eo]=zd().then(T=>globalThis[Qc]=T).catch(()=>globalThis[Qc]=!1)),globalThis[Zd]||(globalThis[Zd]=at().then(T=>globalThis[qd]=T).catch(()=>globalThis[qd]=!1)),globalThis[Vl]||(globalThis[Vl]=fs().then(T=>globalThis[af]=T).catch(()=>globalThis[af]=!1));const Fv=(T,R)=>{const B=R?[R]:(0,w.C6)(),re=[];return B.forEach(ge=>{ge.container.getProvider(T).instances.forEach(Ze=>{re.includes(Ze)||re.push(Ze)})}),re};function Hu(){}class Gi{constructor(R,B=Qp){this.zone=R,this.delegate=B}now(){return this.delegate.now()}schedule(R,B,re){const ge=this.zone;return this.delegate.schedule(function(Ze){ge.runGuarded(()=>{R.apply(this,[Ze])})},B,re)}}class jl{constructor(R){this.zone=R,this.task=null}call(R,B){const re=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",Hu,{},Hu,Hu)),B.pipe((0,ju.b)({next:re,complete:re,error:re})).subscribe(R).add(re)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}let Jc=(()=>{class T{constructor(B){this.ngZone=B,this.outsideAngular=B.runOutsideAngular(()=>new Gi(Zone.current)),this.insideAngular=B.run(()=>new Gi(Zone.current,Yc.z)),globalThis.\u0275AngularFireScheduler||(globalThis.\u0275AngularFireScheduler=this)}}return T.\u0275fac=function(B){return new(B||T)(E.LFG(E.R0b))},T.\u0275prov=E.Yz7({token:T,factory:T.\u0275fac,providedIn:"root"}),T})();function $u(){const T=globalThis.\u0275AngularFireScheduler;if(!T)throw new Error("Either AngularFireModule has not been provided in your AppModule (this can be done manually or implictly using\nprovideFirebaseApp) or you're calling an AngularFire method outside of an NgModule (which is not supported).");return T}function Xp(T){return T.pipe((0,Ba.Q)($u().outsideAngular))}function Xc(T){return $u(),function Ym(T){return function(B){return(B=B.lift(new jl(T.ngZone))).pipe((0,Ia.R)(T.outsideAngular),(0,Ba.Q)(T.insideAngular))}}($u())(T)}},9058:(bt,Pe,j)=>{j.d(Pe,{$s:()=>Li,BH:()=>ye,DV:()=>zr,Dv:()=>Ps,G6:()=>Gr,GJ:()=>Lt,L:()=>Me,LL:()=>tt,Pz:()=>Qe,Sg:()=>Le,UG:()=>Te,UI:()=>fo,US:()=>de,Wj:()=>xt,Wl:()=>Gt,Yr:()=>Os,ZB:()=>_e,ZR:()=>We,aH:()=>Ae,b$:()=>Wn,cI:()=>sr,dS:()=>po,eu:()=>Fe,g5:()=>$,gK:()=>bn,gQ:()=>Ht,h$:()=>ze,hl:()=>Re,hu:()=>w,jU:()=>_t,lb:()=>Ai,m9:()=>vn,ne:()=>Un,p$:()=>le,pd:()=>zt,r3:()=>Sn,ru:()=>pn,tV:()=>oe,uI:()=>it,ug:()=>hs,vZ:()=>Wr,w1:()=>Sr,w9:()=>Jn,xO:()=>Ar,xb:()=>Er,z$:()=>nt,zI:()=>Ke,zd:()=>mt});const E={NODE_CLIENT:!1,NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"},w=function(ue,G){if(!ue)throw $(G)},$=function(ue){return new Error("Firebase Database ("+E.SDK_VERSION+") INTERNAL ASSERT FAILED: "+ue)},Q=function(ue){const G=[];let z=0;for(let Z=0;Z<ue.length;Z++){let ne=ue.charCodeAt(Z);ne<128?G[z++]=ne:ne<2048?(G[z++]=ne>>6|192,G[z++]=63&ne|128):55296==(64512&ne)&&Z+1<ue.length&&56320==(64512&ue.charCodeAt(Z+1))?(ne=65536+((1023&ne)<<10)+(1023&ue.charCodeAt(++Z)),G[z++]=ne>>18|240,G[z++]=ne>>12&63|128,G[z++]=ne>>6&63|128,G[z++]=63&ne|128):(G[z++]=ne>>12|224,G[z++]=ne>>6&63|128,G[z++]=63&ne|128)}return G},de={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(ue,G){if(!Array.isArray(ue))throw Error("encodeByteArray takes an array as a parameter");this.init_();const z=G?this.byteToCharMapWebSafe_:this.byteToCharMap_,Z=[];for(let ne=0;ne<ue.length;ne+=3){const be=ue[ne],Xe=ne+1<ue.length,pt=Xe?ue[ne+1]:0,Yt=ne+2<ue.length,Wt=Yt?ue[ne+2]:0;let dr=(15&pt)<<2|Wt>>6,Mi=63&Wt;Yt||(Mi=64,Xe||(dr=64)),Z.push(z[be>>2],z[(3&be)<<4|pt>>4],z[dr],z[Mi])}return Z.join("")},encodeString(ue,G){return this.HAS_NATIVE_SUPPORT&&!G?btoa(ue):this.encodeByteArray(Q(ue),G)},decodeString(ue,G){return this.HAS_NATIVE_SUPPORT&&!G?atob(ue):function(ue){const G=[];let z=0,Z=0;for(;z<ue.length;){const ne=ue[z++];if(ne<128)G[Z++]=String.fromCharCode(ne);else if(ne>191&&ne<224){const be=ue[z++];G[Z++]=String.fromCharCode((31&ne)<<6|63&be)}else if(ne>239&&ne<365){const Yt=((7&ne)<<18|(63&ue[z++])<<12|(63&ue[z++])<<6|63&ue[z++])-65536;G[Z++]=String.fromCharCode(55296+(Yt>>10)),G[Z++]=String.fromCharCode(56320+(1023&Yt))}else{const be=ue[z++],Xe=ue[z++];G[Z++]=String.fromCharCode((15&ne)<<12|(63&be)<<6|63&Xe)}}return G.join("")}(this.decodeStringToByteArray(ue,G))},decodeStringToByteArray(ue,G){this.init_();const z=G?this.charToByteMapWebSafe_:this.charToByteMap_,Z=[];for(let ne=0;ne<ue.length;){const be=z[ue.charAt(ne++)],pt=ne<ue.length?z[ue.charAt(ne)]:0;++ne;const Wt=ne<ue.length?z[ue.charAt(ne)]:64;++ne;const cn=ne<ue.length?z[ue.charAt(ne)]:64;if(++ne,null==be||null==pt||null==Wt||null==cn)throw new ve;Z.push(be<<2|pt>>4),64!==Wt&&(Z.push(pt<<4&240|Wt>>2),64!==cn&&Z.push(Wt<<6&192|cn))}return Z},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let ue=0;ue<this.ENCODED_VALS.length;ue++)this.byteToCharMap_[ue]=this.ENCODED_VALS.charAt(ue),this.charToByteMap_[this.byteToCharMap_[ue]]=ue,this.byteToCharMapWebSafe_[ue]=this.ENCODED_VALS_WEBSAFE.charAt(ue),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[ue]]=ue,ue>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(ue)]=ue,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(ue)]=ue)}}};class ve extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ze=function(ue){const G=Q(ue);return de.encodeByteArray(G,!0)},Me=function(ue){return ze(ue).replace(/\./g,"")},oe=function(ue){try{return de.decodeString(ue,!0)}catch(G){console.error("base64Decode failed: ",G)}return null};function le(ue){return _e(void 0,ue)}function _e(ue,G){if(!(G instanceof Object))return G;switch(G.constructor){case Date:return new Date(G.getTime());case Object:void 0===ue&&(ue={});break;case Array:ue=[];break;default:return G}for(const z in G)!G.hasOwnProperty(z)||!st(z)||(ue[z]=_e(ue[z],G[z]));return ue}function st(ue){return"__proto__"!==ue}const Ge=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const ue=process.env.__FIREBASE_DEFAULTS__;return ue?JSON.parse(ue):void 0})()||(()=>{if(typeof document>"u")return;let ue;try{ue=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const G=ue&&oe(ue[1]);return G&&JSON.parse(G)})()}catch(ue){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${ue}`)}},Ae=()=>{var ue;return null===(ue=Ge())||void 0===ue?void 0:ue.config},Qe=ue=>{var G;return null===(G=Ge())||void 0===G?void 0:G[`_${ue}`]};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((G,z)=>{this.resolve=G,this.reject=z})}wrapCallback(G){return(z,Z)=>{z?this.reject(z):this.resolve(Z),"function"==typeof G&&(this.promise.catch(()=>{}),1===G.length?G(z):G(z,Z))}}}function Le(ue,G){if(ue.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const Z=G||"demo-project",ne=ue.iat||0,be=ue.sub||ue.user_id;if(!be)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const Xe=Object.assign({iss:`https://securetoken.google.com/${Z}`,aud:Z,iat:ne,exp:ne+3600,auth_time:ne,sub:be,user_id:be,firebase:{sign_in_provider:"custom",identities:{}}},ue);return[Me(JSON.stringify({alg:"none",type:"JWT"})),Me(JSON.stringify(Xe)),""].join(".")}function nt(){return typeof navigator<"u"&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function it(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(nt())}function Te(){var ue;const G=null===(ue=Ge())||void 0===ue?void 0:ue.forceEnvironment;if("node"===G)return!0;if("browser"===G)return!1;try{return"[object process]"===Object.prototype.toString.call(global.process)}catch{return!1}}function _t(){return"object"==typeof self&&self.self===self}function pn(){const ue="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof ue&&void 0!==ue.id}function Wn(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function Sr(){const ue=nt();return ue.indexOf("MSIE ")>=0||ue.indexOf("Trident/")>=0}function Os(){return!0===E.NODE_CLIENT||!0===E.NODE_ADMIN}function Gr(){return!Te()&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Re(){try{return"object"==typeof indexedDB}catch{return!1}}function Fe(){return new Promise((ue,G)=>{try{let z=!0;const Z="validate-browser-context-for-indexeddb-analytics-module",ne=self.indexedDB.open(Z);ne.onsuccess=()=>{ne.result.close(),z||self.indexedDB.deleteDatabase(Z),ue(!0)},ne.onupgradeneeded=()=>{z=!1},ne.onerror=()=>{var be;G((null===(be=ne.error)||void 0===be?void 0:be.message)||"")}}catch(z){G(z)}})}function Ke(){return!(typeof navigator>"u"||!navigator.cookieEnabled)}class We extends Error{constructor(G,z,Z){super(z),this.code=G,this.customData=Z,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(G,z,Z){this.service=G,this.serviceName=z,this.errors=Z}create(G,...z){const Z=z[0]||{},ne=`${this.service}/${G}`,be=this.errors[G],Xe=be?function Dt(ue,G){return ue.replace(At,(z,Z)=>{const ne=G[Z];return null!=ne?String(ne):`<${Z}?>`})}(be,Z):"Error";return new We(ne,`${this.serviceName}: ${Xe} (${ne}).`,Z)}}const At=/\{\$([^}]+)}/g;function sr(ue){return JSON.parse(ue)}function Gt(ue){return JSON.stringify(ue)}const gn=function(ue){let G={},z={},Z={},ne="";try{const be=ue.split(".");G=sr(oe(be[0])||""),z=sr(oe(be[1])||""),ne=be[2],Z=z.d||{},delete z.d}catch{}return{header:G,claims:z,data:Z,signature:ne}},Jn=function(ue){const z=gn(ue).claims;return!!z&&"object"==typeof z&&z.hasOwnProperty("iat")},Lt=function(ue){const G=gn(ue).claims;return"object"==typeof G&&!0===G.admin};function Sn(ue,G){return Object.prototype.hasOwnProperty.call(ue,G)}function zr(ue,G){if(Object.prototype.hasOwnProperty.call(ue,G))return ue[G]}function Er(ue){for(const G in ue)if(Object.prototype.hasOwnProperty.call(ue,G))return!1;return!0}function fo(ue,G,z){const Z={};for(const ne in ue)Object.prototype.hasOwnProperty.call(ue,ne)&&(Z[ne]=G.call(z,ue[ne],ne,ue));return Z}function Wr(ue,G){if(ue===G)return!0;const z=Object.keys(ue),Z=Object.keys(G);for(const ne of z){if(!Z.includes(ne))return!1;const be=ue[ne],Xe=G[ne];if(Xn(be)&&Xn(Xe)){if(!Wr(be,Xe))return!1}else if(be!==Xe)return!1}for(const ne of Z)if(!z.includes(ne))return!1;return!0}function Xn(ue){return null!==ue&&"object"==typeof ue}function Ar(ue){const G=[];for(const[z,Z]of Object.entries(ue))Array.isArray(Z)?Z.forEach(ne=>{G.push(encodeURIComponent(z)+"="+encodeURIComponent(ne))}):G.push(encodeURIComponent(z)+"="+encodeURIComponent(Z));return G.length?"&"+G.join("&"):""}function mt(ue){const G={};return ue.replace(/^\?/,"").split("&").forEach(Z=>{if(Z){const[ne,be]=Z.split("=");G[decodeURIComponent(ne)]=decodeURIComponent(be)}}),G}function zt(ue){const G=ue.indexOf("?");if(!G)return"";const z=ue.indexOf("#",G);return ue.substring(G,z>0?z:void 0)}class Ht{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=64,this.pad_[0]=128;for(let G=1;G<this.blockSize;++G)this.pad_[G]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(G,z){z||(z=0);const Z=this.W_;if("string"==typeof G)for(let cn=0;cn<16;cn++)Z[cn]=G.charCodeAt(z)<<24|G.charCodeAt(z+1)<<16|G.charCodeAt(z+2)<<8|G.charCodeAt(z+3),z+=4;else for(let cn=0;cn<16;cn++)Z[cn]=G[z]<<24|G[z+1]<<16|G[z+2]<<8|G[z+3],z+=4;for(let cn=16;cn<80;cn++){const dr=Z[cn-3]^Z[cn-8]^Z[cn-14]^Z[cn-16];Z[cn]=4294967295&(dr<<1|dr>>>31)}let Wt,Rt,ne=this.chain_[0],be=this.chain_[1],Xe=this.chain_[2],pt=this.chain_[3],Yt=this.chain_[4];for(let cn=0;cn<80;cn++){cn<40?cn<20?(Wt=pt^be&(Xe^pt),Rt=1518500249):(Wt=be^Xe^pt,Rt=1859775393):cn<60?(Wt=be&Xe|pt&(be|Xe),Rt=2400959708):(Wt=be^Xe^pt,Rt=3395469782);const dr=(ne<<5|ne>>>27)+Wt+Yt+Rt+Z[cn]&4294967295;Yt=pt,pt=Xe,Xe=4294967295&(be<<30|be>>>2),be=ne,ne=dr}this.chain_[0]=this.chain_[0]+ne&4294967295,this.chain_[1]=this.chain_[1]+be&4294967295,this.chain_[2]=this.chain_[2]+Xe&4294967295,this.chain_[3]=this.chain_[3]+pt&4294967295,this.chain_[4]=this.chain_[4]+Yt&4294967295}update(G,z){if(null==G)return;void 0===z&&(z=G.length);const Z=z-this.blockSize;let ne=0;const be=this.buf_;let Xe=this.inbuf_;for(;ne<z;){if(0===Xe)for(;ne<=Z;)this.compress_(G,ne),ne+=this.blockSize;if("string"==typeof G){for(;ne<z;)if(be[Xe]=G.charCodeAt(ne),++Xe,++ne,Xe===this.blockSize){this.compress_(be),Xe=0;break}}else for(;ne<z;)if(be[Xe]=G[ne],++Xe,++ne,Xe===this.blockSize){this.compress_(be),Xe=0;break}}this.inbuf_=Xe,this.total_+=z}digest(){const G=[];let z=8*this.total_;this.update(this.pad_,this.inbuf_<56?56-this.inbuf_:this.blockSize-(this.inbuf_-56));for(let ne=this.blockSize-1;ne>=56;ne--)this.buf_[ne]=255&z,z/=256;this.compress_(this.buf_);let Z=0;for(let ne=0;ne<5;ne++)for(let be=24;be>=0;be-=8)G[Z]=this.chain_[ne]>>be&255,++Z;return G}}function Un(ue,G){const z=new fr(ue,G);return z.subscribe.bind(z)}class fr{constructor(G,z){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=z,this.task.then(()=>{G(this)}).catch(Z=>{this.error(Z)})}next(G){this.forEachObserver(z=>{z.next(G)})}error(G){this.forEachObserver(z=>{z.error(G)}),this.close(G)}complete(){this.forEachObserver(G=>{G.complete()}),this.close()}subscribe(G,z,Z){let ne;if(void 0===G&&void 0===z&&void 0===Z)throw new Error("Missing Observer.");ne=function An(ue,G){if("object"!=typeof ue||null===ue)return!1;for(const z of G)if(z in ue&&"function"==typeof ue[z])return!0;return!1}(G,["next","error","complete"])?G:{next:G,error:z,complete:Z},void 0===ne.next&&(ne.next=wr),void 0===ne.error&&(ne.error=wr),void 0===ne.complete&&(ne.complete=wr);const be=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?ne.error(this.finalError):ne.complete()}catch{}}),this.observers.push(ne),be}unsubscribeOne(G){void 0===this.observers||void 0===this.observers[G]||(delete this.observers[G],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(G){if(!this.finalized)for(let z=0;z<this.observers.length;z++)this.sendOne(z,G)}sendOne(G,z){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[G])try{z(this.observers[G])}catch(Z){typeof console<"u"&&console.error&&console.error(Z)}})}close(G){this.finalized||(this.finalized=!0,void 0!==G&&(this.finalError=G),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function wr(){}const Ps=function(ue,G,z,Z){let ne;if(Z<G?ne="at least "+G:Z>z&&(ne=0===z?"none":"no more than "+z),ne)throw new Error(ue+" failed: Was called with "+Z+(1===Z?" argument.":" arguments.")+" Expects "+ne+".")};function bn(ue,G){return`${ue} failed: ${G} argument `}function xt(ue,G,z,Z){if((!Z||z)&&"function"!=typeof z)throw new Error(bn(ue,G)+"must be a valid function.")}function Ai(ue,G,z,Z){if((!Z||z)&&("object"!=typeof z||null===z))throw new Error(bn(ue,G)+"must be a valid context object.")}const po=function(ue){const G=[];let z=0;for(let Z=0;Z<ue.length;Z++){let ne=ue.charCodeAt(Z);if(ne>=55296&&ne<=56319){const be=ne-55296;Z++,w(Z<ue.length,"Surrogate pair missing trail surrogate."),ne=65536+(be<<10)+(ue.charCodeAt(Z)-56320)}ne<128?G[z++]=ne:ne<2048?(G[z++]=ne>>6|192,G[z++]=63&ne|128):ne<65536?(G[z++]=ne>>12|224,G[z++]=ne>>6&63|128,G[z++]=63&ne|128):(G[z++]=ne>>18|240,G[z++]=ne>>12&63|128,G[z++]=ne>>6&63|128,G[z++]=63&ne|128)}return G},hs=function(ue){let G=0;for(let z=0;z<ue.length;z++){const Z=ue.charCodeAt(z);Z<128?G++:Z<2048?G+=2:Z>=55296&&Z<=56319?(G+=4,z++):G+=3}return G},li=1e3,Cr=2,Mr=144e5,Gn=.5;function Li(ue,G=li,z=Cr){const Z=G*Math.pow(z,ue),ne=Math.round(Gn*Z*(Math.random()-.5)*2);return Math.min(Mr,Z+ne)}function vn(ue){return ue&&ue._delegate?ue._delegate:ue}},6587:(bt,Pe,j)=>{j.r(Pe),j.d(Pe,{Assignment1Module:()=>et});var E=j(1180),w=j(6814),$=j(7045),Q=j(5879);const Be=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"q1",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"1. What is REST API?",answer:"REST API (Representational State Transfer Application Programming Interface) is an architectural style for designing networked applications, allowing communication between a client and server over HTTP using standard CRUD (Create, Read, Update, Delete) operations. Here's an explanation of REST API:<br><br><ul><li><strong>HTTP Methods:</strong><ul><li><strong>GET:</strong> Retrieve data from a specified resource.</li><li><strong>POST:</strong> Create a new resource or submit data to be processed on a specified resource.</li><li><strong>PUT:</strong> Update a specified resource or create it if it doesn't exist.</li><li><strong>DELETE:</strong> Remove a specified resource.</li></ul></li><li><strong>Stateless:</strong> REST APIs are stateless, meaning each request from a client to a server must contain all the information needed to understand and fulfill the request. No client context is stored on the server between requests.</li><li><strong>Resource-Based:</strong> In REST, resources (e.g., data objects) are identified by URIs (Uniform Resource Identifiers), and interactions with these resources are performed using standard HTTP methods.</li><li><strong>Example:</strong> Using REST API to retrieve a list of products from a server:<br><code>GET /api/products</code><br>This request retrieves a list of products from the server, and the response typically includes a representation of those products in a specified format, such as JSON or XML.</li></ul></li></ul>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q1"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q2",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"2. What are http and https protocols? Explain in detail the following http methods..\n a. GET \nb. POST\nc. PUT",answer:"HTTP (Hypertext Transfer Protocol) is a protocol used for transmitting data over the internet, while HTTPS is a secure version of HTTP.<br><br>HTTP methods:<br><ol><li>GET: Retrieves data from a specified resource.</li><li>POST: Submits data to be processed to a specified resource.</li><li>PUT: Updates a specified resource or creates it if it doesn't exist.</li></ol>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q2"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q3",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"3. Explain the following with a component diagram 3 tier architecture",answer:"Three-tier architecture consists of Presentation (UI), Business Logic (Application Logic), and Data Storage layers. The presentation layer interacts with the business logic layer, which in turn interacts with the data storage layer.<br><br><img src='https://www.researchgate.net/profile/Santi-Caballe/publication/277187696/figure/fig1/AS:613958725672966@1523390575480/3-tier-architecture.png' alt='3-Tier Architecture Diagram'><br><br>Additional points:<br>- The presentation layer handles user interface and user interaction.<br>- The business logic layer contains application-specific logic and processes user requests.<br>- The data storage layer manages data storage and retrieval operations."}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q3"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q4",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"4. What are different array methods in JavaScript? Explain with examples",answer:"Here are some common array methods in JavaScript with brief explanations:<br><ol><li>push: Adds one or more elements to the end of an array.</li><li>pop: Removes and returns the last element from an array.</li><li>shift: Removes and returns the first element from an array.</li><li>unshift: Adds one or more elements to the beginning of an array.</li><li>splice: Adds, removes, or replaces elements at a specified index.</li><li>slice: Returns a shallow copy of a portion of an array.</li><li>map: Creates a new array by applying a function to each element.</li><li>filter: Creates a new array with elements that pass a test.</li></ol>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q4"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q5",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"5. What is difference between let, var and const in javascript?    ",answer:"In JavaScript, 'let' and 'const' are block-scoped variables, while 'var' is function-scoped. Here are the key differences:<br><br><ul><li><strong>Scope:</strong><ul><li>'var' is function-scoped, accessible anywhere within the function it's declared in.</li><li>'let' and 'const' are block-scoped, only accessible within the block where they are declared.</li></ul></li><li><strong>Reassignment:</strong><ul><li>'var' variables can be reassigned multiple times within their scope.</li><li>'let' variables can also be reassigned within their scope.</li><li>'const' variables, once assigned a value, cannot be reassigned; they are constant.</li></ul></li><li><strong>Hoisting:</strong><ul><li>'var' declarations are hoisted to the top of their function or global scope, but their initializations remain where they are.</li><li>'let' and 'const' declarations are hoisted to the top of their block but are not initialized until the actual declaration is encountered in the code. You can't access them before their declaration.</li></ul></li><li><strong>Temporal Dead Zone (TDZ):</strong><ul><li>'let' and 'const' variables are in the Temporal Dead Zone (TDZ) from the start of their block until their declaration is encountered, preventing access before the declaration.</li></ul></li></ul>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q5"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q6",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"6. What is AJAX? Explain with examples..    ",answer:"AJAX (Asynchronous JavaScript and XML) is a technique for making asynchronous HTTP requests to a server from a web page without reloading the entire page. Here's an explanation with examples:<br><br><ul><li><strong>Definition:</strong> AJAX allows web pages to send and receive data from a server without disrupting the user's experience.</li><li><strong>Example:</strong> Using the fetch API to load data from a server without refreshing the page.<br><br><code>// Example using the fetch API to fetch data from a server</code><br><code>fetch('https://api.example.com/data')</code><br><code>  .then(response => response.json())</code><br><code>  .then(data => {</code><br><code>    // Process and display the data on the web page</code><br><code>    console.log(data);</code><br><code>  })</code><br><br>This example demonstrates how AJAX allows you to retrieve data from a server in the background and update the web page dynamically, providing a smoother and more interactive user experience.</li></ul></li></ul>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q6"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q7",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"7. What is a single page application?    ",answer:"A Single Page Application (SPA) is a web application or website that loads and interacts with content dynamically on a single web page, without the need for complete page reloads. Here's an explanation of SPAs:<br><br><ul><li><strong>Dynamic Content:</strong> SPAs retrieve and display content from the server as the user interacts with the application, typically through asynchronous requests.</li><li><strong>Smooth User Experience:</strong> SPAs provide a smoother and more responsive user experience since they avoid full page reloads, resulting in faster transitions between views and reduced server load.</li><li><strong>Client-Side Routing:</strong> SPAs often use client-side routing to manage navigation within the application, allowing different views or components to be displayed based on the URL without contacting the server.</li><li><strong>JavaScript Frameworks:</strong> SPAs are commonly built using JavaScript frameworks and libraries like React, Angular, or Vue.js, which facilitate the development of dynamic and interactive user interfaces.</li><li><strong>Examples:</strong> Notable examples of SPAs include social media platforms like Facebook and Twitter, as well as web applications like Gmail.</li></ul></li></ul>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q7"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q8",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"8. What is a component in angular?.    ",answer:"In Angular, a component is a fundamental building block of the application. Here's an explanation of Angular components:<br><br><ul><li><strong>Composition:</strong> A component combines a template, logic, and styles to define a specific part of the user interface (UI).</li><li><strong>Reusability:</strong> Components are designed for reusability, allowing you to create modular and self-contained pieces of the UI that can be used across the application.</li><li><strong>Encapsulation:</strong> Components encapsulate their functionality, meaning their logic and styles are scoped to that specific component, preventing conflicts with other parts of the application.</li><li><strong>Communication:</strong> Components can communicate with other components through input and output properties, enabling parent-child relationships and data sharing.</li><li><strong>Example:</strong> For example, in an e-commerce application, you might have a 'ProductList' component responsible for displaying a list of products, and a 'ProductDetail' component for showing detailed information about a selected product. Each of these components would have its own template, logic, and styles.</li></ul></li></ul>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q8"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()},{path:"q9",component:(()=>{class xe{handleClick(Oe){Oe.isVisible=!Oe.isVisible}ngOnInit(){}constructor(Oe){(0,E.Z)(this,"router",void 0),(0,E.Z)(this,"qa",{question:"9. Explain with syntax the following directives:\na. ngFor\nb. ngIf",answer:"In Angular, directives are special markers in the DOM that tell Angular to attach behavior to an element. Here's an explanation of the 'ngFor' and 'ngIf' directives along with their syntax:<br><br><ul><li><strong>ngFor Directive:</strong><ul><li><strong>Syntax:</strong> The 'ngFor' directive is used for iterating over a collection and rendering elements for each item in the collection.</li><li><strong>Example:</strong> Using 'ngFor' to iterate over an array in a component's template:<br><code>&lt;ul&gt;<br>  &lt;li *ngFor=\"let item of items\"&gt;{{ item }}&lt;/li&gt;<br>&lt;/ul&gt;</code><br>This code iterates over the 'items' array in the component and renders a list item for each item in the array.</li></ul></li><li><strong>ngIf Directive:</strong><ul><li><strong>Syntax:</strong> The 'ngIf' directive is used for conditionally rendering elements based on a condition.</li><li><strong>Example:</strong> Using 'ngIf' to conditionally display an element:<br><code>&lt;div *ngIf=\"showElement\"&gt;This element is displayed conditionally.&lt;/div&gt;</code><br>In this example, 'showElement' is a variable in the component, and the 'div' element is displayed only if the condition 'showElement' is true.</li></ul></li></ul>"}),this.router=Oe}goToAssignment1(){this.router.navigate(["/assignment1"])}}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)(Q.Y36($.F0))}),(0,E.Z)(xe,"\u0275cmp",Q.Xpm({type:xe,selectors:[["app-q9"]],decls:6,vars:2,consts:[["role","main",1,"content"],[1,"info"],[3,"innerHTML"]],template:function(Oe,yt){1&Oe&&(Q.TgZ(0,"div",0),Q._UZ(1,"div",1),Q.TgZ(2,"div")(3,"h2"),Q._uU(4),Q.qZA(),Q._UZ(5,"p",2),Q.qZA()()),2&Oe&&(Q.xp6(4),Q.Oqu(yt.qa.question),Q.xp6(1),Q.Q6J("innerHTML",yt.qa.answer,Q.oJD))},styles:[".content[_ngcontent-%COMP%]{margin:20px}.info[_ngcontent-%COMP%]{display:flex;justify-content:space-between;margin-bottom:20px}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}div[_ngcontent-%COMP%]{margin-top:20px}h2[_ngcontent-%COMP%]{color:#007bff}p[_ngcontent-%COMP%]{line-height:1.6}"]})),xe})()}];let gt=(()=>{class xe{}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)}),(0,E.Z)(xe,"\u0275mod",Q.oAB({type:xe})),(0,E.Z)(xe,"\u0275inj",Q.cJS({imports:[$.Bz.forChild(Be),$.Bz]})),xe})(),et=(()=>{class xe{}return(0,E.Z)(xe,"\u0275fac",function(Oe){return new(Oe||xe)}),(0,E.Z)(xe,"\u0275mod",Q.oAB({type:xe})),(0,E.Z)(xe,"\u0275inj",Q.cJS({imports:[w.ez,gt]})),xe})()},2121:(bt,Pe,j)=>{var E=j(6593),w=j(5879),$=j(1180),Q=j(6814),ae=j(2459),de=j(5592),ve=j(7453),ze=j(4829),Me=j(4564),oe=j(8251),le=j(7400),_e=j(2714),Be=j(7398);let gt=(()=>{class n{constructor(t,r){this._renderer=t,this._elementRef=r,this.onChange=i=>{},this.onTouched=()=>{}}setProperty(t,r){this._renderer.setProperty(this._elementRef.nativeElement,t,r)}registerOnTouched(t){this.onTouched=t}registerOnChange(t){this.onChange=t}setDisabledState(t){this.setProperty("disabled",t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(w.Qsj),w.Y36(w.SBq))},n.\u0275dir=w.lG2({type:n}),n})(),et=(()=>{class n extends gt{}return n.\u0275fac=function(){let e;return function(r){return(e||(e=w.n5z(n)))(r||n)}}(),n.\u0275dir=w.lG2({type:n,features:[w.qOj]}),n})();const xe=new w.OlP("NgValueAccessor"),yt={provide:xe,useExisting:(0,w.Gpc)(()=>ye),multi:!0},Qe=new w.OlP("CompositionEventMode");let ye=(()=>{class n extends gt{constructor(t,r,i){super(t,r),this._compositionMode=i,this._composing=!1,null==this._compositionMode&&(this._compositionMode=!function Ae(){const n=(0,Q.q)()?(0,Q.q)().getUserAgent():"";return/android (\d+)/.test(n.toLowerCase())}())}writeValue(t){this.setProperty("value",t??"")}_handleInput(t){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(t)}_compositionStart(){this._composing=!0}_compositionEnd(t){this._composing=!1,this._compositionMode&&this.onChange(t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(w.Qsj),w.Y36(w.SBq),w.Y36(Qe,8))},n.\u0275dir=w.lG2({type:n,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(t,r){1&t&&w.NdJ("input",function(u){return r._handleInput(u.target.value)})("blur",function(){return r.onTouched()})("compositionstart",function(){return r._compositionStart()})("compositionend",function(u){return r._compositionEnd(u.target.value)})},features:[w._Bn([yt]),w.qOj]}),n})();const it=new w.OlP("NgValidators"),Te=new w.OlP("NgAsyncValidators");function He(n){return null!=n}function We(n){return(0,w.QGY)(n)?(0,ae.D)(n):n}function tt(n){let e={};return n.forEach(t=>{e=null!=t?{...e,...t}:e}),0===Object.keys(e).length?null:e}function Dt(n,e){return e.map(t=>t(n))}function sr(n){return n.map(e=>function At(n){return!n.validate}(e)?e:t=>e.validate(t))}function gn(n){return null!=n?function Gt(n){if(!n)return null;const e=n.filter(He);return 0==e.length?null:function(t){return tt(Dt(t,e))}}(sr(n)):null}function Hn(n){return null!=n?function sn(n){if(!n)return null;const e=n.filter(He);return 0==e.length?null:function(t){return function st(...n){const e=(0,Me.jO)(n),{args:t,keys:r}=(0,ve.D)(n),i=new de.y(u=>{const{length:c}=t;if(!c)return void u.complete();const p=new Array(c);let m=c,b=c;for(let O=0;O<c;O++){let U=!1;(0,ze.Xf)(t[O]).subscribe((0,oe.x)(u,J=>{U||(U=!0,b--),p[O]=J},()=>m--,void 0,()=>{(!m||!U)&&(b||u.next(r?(0,_e.n)(r,p):p),u.complete())}))}});return e?i.pipe((0,le.Z)(e)):i}(Dt(t,e).map(We)).pipe((0,Be.U)(tt))}}(sr(n)):null}function Jn(n,e){return null===n?[e]:Array.isArray(n)?[...n,e]:[n,e]}function zr(n){return n?Array.isArray(n)?n:[n]:[]}function Er(n,e){return Array.isArray(n)?n.includes(e):n===e}function fo(n,e){const t=zr(e);return zr(n).forEach(i=>{Er(t,i)||t.push(i)}),t}function Wr(n,e){return zr(e).filter(t=>!Er(n,t))}class Xn{constructor(){this._rawValidators=[],this._rawAsyncValidators=[],this._onDestroyCallbacks=[]}get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=gn(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=Hn(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,t){return!!this.control&&this.control.hasError(e,t)}getError(e,t){return this.control?this.control.getError(e,t):null}}class lr extends Xn{get formDirective(){return null}get path(){return null}}class Ar extends Xn{constructor(){super(...arguments),this._parent=null,this.name=null,this.valueAccessor=null}}class mt{constructor(e){this._cd=e}get isTouched(){return!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return!!this._cd?.submitted}}let Un=(()=>{class n extends mt{constructor(t){super(t)}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(Ar,2))},n.\u0275dir=w.lG2({type:n,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(t,r){2&t&&w.ekj("ng-untouched",r.isUntouched)("ng-touched",r.isTouched)("ng-pristine",r.isPristine)("ng-dirty",r.isDirty)("ng-valid",r.isValid)("ng-invalid",r.isInvalid)("ng-pending",r.isPending)},features:[w.qOj]}),n})();const qr="VALID",vn="INVALID",ue="PENDING",G="DISABLED";function Xe(n){return null!=n&&!Array.isArray(n)&&"object"==typeof n}class Wt{constructor(e,t){this._pendingDirty=!1,this._hasOwnPendingAsyncValidator=!1,this._pendingTouched=!1,this._onCollectionChange=()=>{},this._parent=null,this.pristine=!0,this.touched=!1,this._onDisabledChange=[],this._assignValidators(e),this._assignAsyncValidators(t)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get valid(){return this.status===qr}get invalid(){return this.status===vn}get pending(){return this.status==ue}get disabled(){return this.status===G}get enabled(){return this.status!==G}get dirty(){return!this.pristine}get untouched(){return!this.touched}get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(fo(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(fo(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(Wr(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(Wr(e,this._rawAsyncValidators))}hasValidator(e){return Er(this._rawValidators,e)}hasAsyncValidator(e){return Er(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){this.touched=!0,this._parent&&!e.onlySelf&&this._parent.markAsTouched(e)}markAllAsTouched(){this.markAsTouched({onlySelf:!0}),this._forEachChild(e=>e.markAllAsTouched())}markAsUntouched(e={}){this.touched=!1,this._pendingTouched=!1,this._forEachChild(t=>{t.markAsUntouched({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}markAsDirty(e={}){this.pristine=!1,this._parent&&!e.onlySelf&&this._parent.markAsDirty(e)}markAsPristine(e={}){this.pristine=!0,this._pendingDirty=!1,this._forEachChild(t=>{t.markAsPristine({onlySelf:!0})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}markAsPending(e={}){this.status=ue,!1!==e.emitEvent&&this.statusChanges.emit(this.status),this._parent&&!e.onlySelf&&this._parent.markAsPending(e)}disable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=G,this.errors=null,this._forEachChild(r=>{r.disable({...e,onlySelf:!0})}),this._updateValue(),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!0))}enable(e={}){const t=this._parentMarkedDirty(e.onlySelf);this.status=qr,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:t}),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine(),this._parent._updateTouched())}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){this._setInitialStatus(),this._updateValue(),this.enabled&&(this._cancelExistingSubscription(),this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===qr||this.status===ue)&&this._runAsyncValidator(e.emitEvent)),!1!==e.emitEvent&&(this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity(e)}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(t=>t._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?G:qr}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e){if(this.asyncValidator){this.status=ue,this._hasOwnPendingAsyncValidator=!0;const t=We(this.asyncValidator(this));this._asyncValidationSubscription=t.subscribe(r=>{this._hasOwnPendingAsyncValidator=!1,this.setErrors(r,{emitEvent:e})})}}_cancelExistingSubscription(){this._asyncValidationSubscription&&(this._asyncValidationSubscription.unsubscribe(),this._hasOwnPendingAsyncValidator=!1)}setErrors(e,t={}){this.errors=e,this._updateControlsErrors(!1!==t.emitEvent)}get(e){let t=e;return null==t||(Array.isArray(t)||(t=t.split(".")),0===t.length)?null:t.reduce((r,i)=>r&&r._find(i),this)}getError(e,t){const r=t?this.get(t):this;return r&&r.errors?r.errors[e]:null}hasError(e,t){return!!this.getError(e,t)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),this._parent&&this._parent._updateControlsErrors(e)}_initObservables(){this.valueChanges=new w.vpe,this.statusChanges=new w.vpe}_calculateStatus(){return this._allControlsDisabled()?G:this.errors?vn:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(ue)?ue:this._anyControlsHaveStatus(vn)?vn:qr}_anyControlsHaveStatus(e){return this._anyControls(t=>t.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e={}){this.pristine=!this._anyControlsDirty(),this._parent&&!e.onlySelf&&this._parent._updatePristine(e)}_updateTouched(e={}){this.touched=this._anyControlsTouched(),this._parent&&!e.onlySelf&&this._parent._updateTouched(e)}_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Xe(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function Z(n){return Array.isArray(n)?gn(n):n||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function be(n){return Array.isArray(n)?Hn(n):n||null}(this._rawAsyncValidators)}}const xr=new w.OlP("CallSetDisabledState",{providedIn:"root",factory:()=>Ue}),Ue="always";function rt(n,e,t=Ue){(function mn(n,e){const t=function Lt(n){return n._rawValidators}(n);null!==e.validator?n.setValidators(Jn(t,e.validator)):"function"==typeof t&&n.setValidators([t]);const r=function Sn(n){return n._rawAsyncValidators}(n);null!==e.asyncValidator?n.setAsyncValidators(Jn(r,e.asyncValidator)):"function"==typeof r&&n.setAsyncValidators([r]);const i=()=>n.updateValueAndValidity();Qt(e._rawValidators,i),Qt(e._rawAsyncValidators,i)})(n,e),e.valueAccessor.writeValue(n.value),(n.disabled||"always"===t)&&e.valueAccessor.setDisabledState?.(n.disabled),function pr(n,e){e.valueAccessor.registerOnChange(t=>{n._pendingValue=t,n._pendingChange=!0,n._pendingDirty=!0,"change"===n.updateOn&&qs(n,e)})}(n,e),function $o(n,e){const t=(r,i)=>{e.valueAccessor.writeValue(r),i&&e.viewToModelUpdate(r)};n.registerOnChange(t),e._registerOnDestroy(()=>{n._unregisterOnChange(t)})}(n,e),function ws(n,e){e.valueAccessor.registerOnTouched(()=>{n._pendingTouched=!0,"blur"===n.updateOn&&n._pendingChange&&qs(n,e),"submit"!==n.updateOn&&n.markAsTouched()})}(n,e),function ln(n,e){if(e.valueAccessor.setDisabledState){const t=r=>{e.valueAccessor.setDisabledState(r)};n.registerOnDisabledChange(t),e._registerOnDestroy(()=>{n._unregisterOnDisabledChange(t)})}}(n,e)}function Qt(n,e){n.forEach(t=>{t.registerOnValidatorChange&&t.registerOnValidatorChange(e)})}function qs(n,e){n._pendingDirty&&n.markAsDirty(),n.setValue(n._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(n._pendingValue),n._pendingChange=!1}function xi(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}function ua(n){return"object"==typeof n&&null!==n&&2===Object.keys(n).length&&"value"in n&&"disabled"in n}const xo=class extends Wt{constructor(e=null,t,r){super(function z(n){return(Xe(n)?n.validators:n)||null}(t),function ne(n,e){return(Xe(e)?e.asyncValidators:n)||null}(r,t)),this.defaultValue=null,this._onChange=[],this._pendingChange=!1,this._applyFormState(e),this._setUpdateStrategy(t),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Xe(t)&&(t.nonNullable||t.initialValueIsDefault)&&(this.defaultValue=ua(e)?e.value:e)}setValue(e,t={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==t.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==t.emitViewToModelChange)),this.updateValueAndValidity(t)}patchValue(e,t={}){this.setValue(e,t)}reset(e=this.defaultValue,t={}){this._applyFormState(e),this.markAsPristine(t),this.markAsUntouched(t),this.setValue(this.value,t),this._pendingChange=!1}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){xi(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){xi(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){ua(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},Ro={provide:Ar,useExisting:(0,w.Gpc)(()=>xa)},mo=(()=>Promise.resolve())();let xa=(()=>{class n extends Ar{constructor(t,r,i,u,c,p){super(),this._changeDetectorRef=c,this.callSetDisabledState=p,this.control=new xo,this._registered=!1,this.name="",this.update=new w.vpe,this._parent=t,this._setValidators(r),this._setAsyncValidators(i),this.valueAccessor=function oa(n,e){if(!e)return null;let t,r,i;return Array.isArray(e),e.forEach(u=>{u.constructor===ye?t=u:function Mo(n){return Object.getPrototypeOf(n.constructor)===et}(u)?r=u:i=u}),i||r||t||null}(0,u)}ngOnChanges(t){if(this._checkForErrors(),!this._registered||"name"in t){if(this._registered&&(this._checkName(),this.formDirective)){const r=t.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in t&&this._updateDisabled(t),function $n(n,e){if(!n.hasOwnProperty("model"))return!1;const t=n.model;return!!t.isFirstChange()||!Object.is(e,t.currentValue)}(t,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(t){this.viewModel=t,this.update.emit(t)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){rt(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._isStandalone()||this._checkParentType(),this._checkName()}_checkParentType(){}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(t){mo.then(()=>{this.control.setValue(t,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(t){const r=t.isDisabled.currentValue,i=0!==r&&(0,w.VuI)(r);mo.then(()=>{i&&!this.control.disabled?this.control.disable():!i&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(t){return this._parent?function Se(n,e){return[...e.path,n]}(t,this._parent):[t]}}return n.\u0275fac=function(t){return new(t||n)(w.Y36(lr,9),w.Y36(it,10),w.Y36(Te,10),w.Y36(xe,10),w.Y36(w.sBO,8),w.Y36(xr,8))},n.\u0275dir=w.lG2({type:n,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:["disabled","isDisabled"],model:["ngModel","model"],options:["ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],features:[w._Bn([Ro]),w.qOj,w.TTD]}),n})(),Ur=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({}),n})(),No=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[Ur]}),n})(),zo=(()=>{class n{static withConfig(t){return{ngModule:n,providers:[{provide:xr,useValue:t.callSetDisabledState??Ue}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({imports:[No]}),n})();var ni=j(7045);let ps=(()=>{class n{constructor(){(0,$.Z)(this,"title","angularfiebase-authentication")}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-root"]],decls:1,vars:0,template:function(t,r){1&t&&w._UZ(0,"router-outlet")},dependencies:[ni.lC]})),n})();var gr=j(6304),Bs=j(8645),bs=j(2096),Oo=j(3019),tc=j(3093),_i=j(4664),Qs=j(4552);class pa extends Bs.x{constructor(e=1/0,t=1/0,r=Qs.l){super(),this._bufferSize=e,this._windowTime=t,this._timestampProvider=r,this._buffer=[],this._infiniteTimeWindow=!0,this._infiniteTimeWindow=t===1/0,this._bufferSize=Math.max(1,e),this._windowTime=Math.max(1,t)}next(e){const{isStopped:t,_buffer:r,_infiniteTimeWindow:i,_timestampProvider:u,_windowTime:c}=this;t||(r.push(e),!i&&r.push(u.now()+c)),this._trimBuffer(),super.next(e)}_subscribe(e){this._throwIfClosed(),this._trimBuffer();const t=this._innerSubscribe(e),{_infiniteTimeWindow:r,_buffer:i}=this,u=i.slice();for(let c=0;c<u.length&&!e.closed;c+=r?1:2)e.next(u[c]);return this._checkFinalizedStatuses(e),t}_trimBuffer(){const{_bufferSize:e,_timestampProvider:t,_buffer:r,_infiniteTimeWindow:i}=this,u=(i?1:2)*e;if(e<1/0&&u<r.length&&r.splice(0,r.length-u),!i){const c=t.now();let p=0;for(let m=1;m<r.length&&r[m]<=c;m+=2)p=m;p&&r.splice(0,p+1)}}}var jr=j(3020);function ji(n,e,t){let r,i=!1;return n&&"object"==typeof n?({bufferSize:r=1/0,windowTime:e=1/0,refCount:i=!1,scheduler:t}=n):r=n??1/0,(0,jr.B)({connector:()=>new pa(r,e,t),resetOnError:!0,resetOnComplete:!1,resetOnRefCountZero:i})}var nc=j(1374),Wo=j(4674);function ga(n,e){return(0,Wo.m)(e)?(0,_i.w)(()=>n,e):(0,_i.w)(()=>n)}var Ji=j(5137),ma=j(2181),Cn=j(2793);j(4097);var qe=j(5861),br=j(1356),ri=j(4537),ee=j(9058),Xi=j(7879);const Vn=new Map,_a={activated:!1,tokenObservers:[]},M={initialized:!1,enabled:!1};function F(n){return Vn.get(n)||Object.assign({},_a)}function W(){return M}const se="https://content-firebaseappcheck.googleapis.com/v1",Ut="exchangeDebugToken",ar={OFFSET_DURATION:3e5,RETRIAL_MIN_WAIT:3e4,RETRIAL_MAX_WAIT:96e4};class Bn{constructor(e,t,r,i,u){if(this.operation=e,this.retryPolicy=t,this.getWaitDuration=r,this.lowerBound=i,this.upperBound=u,this.pending=null,this.nextErrorWaitInterval=i,i>u)throw new Error("Proactive refresh lower bound greater than upper bound!")}start(){this.nextErrorWaitInterval=this.lowerBound,this.process(!0).catch(()=>{})}stop(){this.pending&&(this.pending.reject("cancelled"),this.pending=null)}isRunning(){return!!this.pending}process(e){var t=this;return(0,qe.Z)(function*(){t.stop();try{t.pending=new ee.BH,yield function In(n){return new Promise(e=>{setTimeout(e,n)})}(t.getNextRun(e)),t.pending.resolve(),yield t.pending.promise,t.pending=new ee.BH,yield t.operation(),t.pending.resolve(),yield t.pending.promise,t.process(!0).catch(()=>{})}catch(r){t.retryPolicy(r)?t.process(!1).catch(()=>{}):t.stop()}})()}getNextRun(e){if(e)return this.nextErrorWaitInterval=this.lowerBound,this.getWaitDuration();{const t=this.nextErrorWaitInterval;return this.nextErrorWaitInterval*=2,this.nextErrorWaitInterval>this.upperBound&&(this.nextErrorWaitInterval=this.upperBound),t}}}const yn=new ee.LL("appCheck","AppCheck",{"already-initialized":"You have already called initializeAppCheck() for FirebaseApp {$appName} with different options. To avoid this error, call initializeAppCheck() with the same options as when it was originally called. This will return the already initialized instance.","use-before-activation":"App Check is being used before initializeAppCheck() is called for FirebaseApp {$appName}. Call initializeAppCheck() before instantiating other Firebase services.","fetch-network-error":"Fetch failed to connect to a network. Check Internet connection. Original error: {$originalErrorMessage}.","fetch-parse-error":"Fetch client could not parse response. Original error: {$originalErrorMessage}.","fetch-status-error":"Fetch server returned an HTTP error status. HTTP status: {$httpStatus}.","storage-open":"Error thrown when opening storage. Original error: {$originalErrorMessage}.","storage-get":"Error thrown when reading from storage. Original error: {$originalErrorMessage}.","storage-set":"Error thrown when writing to storage. Original error: {$originalErrorMessage}.","recaptcha-error":"ReCAPTCHA error.",throttled:"Requests throttled due to {$httpStatus} error. Attempts allowed again after {$time}"});function Ni(n){if(!F(n).activated)throw yn.create("use-before-activation",{appName:n.name})}function Hi(n,e){return Eo.apply(this,arguments)}function Eo(){return(Eo=(0,qe.Z)(function*({url:n,body:e},t){const r={"Content-Type":"application/json"},i=t.getImmediate({optional:!0});if(i){const U=yield i.getHeartbeatsHeader();U&&(r["X-Firebase-Client"]=U)}const u={method:"POST",body:JSON.stringify(e),headers:r};let c,p;try{c=yield fetch(n,u)}catch(U){throw yn.create("fetch-network-error",{originalErrorMessage:U?.message})}if(200!==c.status)throw yn.create("fetch-status-error",{httpStatus:c.status});try{p=yield c.json()}catch(U){throw yn.create("fetch-parse-error",{originalErrorMessage:U?.message})}const m=p.ttl.match(/^([\d.]+)(s)$/);if(!m||!m[2]||isNaN(Number(m[1])))throw yn.create("fetch-parse-error",{originalErrorMessage:`ttl field (timeToLive) is not in standard Protobuf Duration format: ${p.ttl}`});const b=1e3*Number(m[1]),O=Date.now();return{token:p.token,expireTimeMillis:O+b,issuedAtTimeMillis:O}})).apply(this,arguments)}function jc(n,e){const{projectId:t,appId:r,apiKey:i}=n.options;return{url:`${se}/projects/${t}/apps/${r}:${Ut}?key=${i}`,body:{debug_token:e}}}const Po="firebase-app-check-database",uc=1,au="firebase-app-check-store";let Nu=null;function ko(){return(ko=(0,qe.Z)(function*(n,e){const r=(yield function Ou(){return Nu||(Nu=new Promise((n,e)=>{try{const t=indexedDB.open(Po,uc);t.onsuccess=r=>{n(r.target.result)},t.onerror=r=>{var i;e(yn.create("storage-open",{originalErrorMessage:null===(i=r.target.error)||void 0===i?void 0:i.message}))},t.onupgradeneeded=r=>{0===r.oldVersion&&r.target.result.createObjectStore(au,{keyPath:"compositeKey"})}}catch(t){e(yn.create("storage-open",{originalErrorMessage:t?.message}))}}),Nu)}()).transaction(au,"readwrite"),u=r.objectStore(au).put({compositeKey:n,value:e});return new Promise((c,p)=>{u.onsuccess=m=>{c()},r.onerror=m=>{var b;p(yn.create("storage-set",{originalErrorMessage:null===(b=m.target.error)||void 0===b?void 0:b.message}))}})})).apply(this,arguments)}const Pa=new Xi.Yd("@firebase/app-check");function Pu(n,e){return(0,ee.hl)()?function Ln(n,e){return function ts(n,e){return ko.apply(this,arguments)}(function cu(n){return`${n.options.appId}-${n.name}`}(n),e)}(n,e).catch(t=>{Pa.warn(`Failed to write token to IndexedDB. Error: ${t}`)}):Promise.resolve()}function ka(){return W().enabled}function Tr(){return Ts.apply(this,arguments)}function Ts(){return(Ts=(0,qe.Z)(function*(){const n=W();if(n.enabled&&n.token)return n.token.promise;throw Error("\n            Can't get debug token in production mode.\n        ")})).apply(this,arguments)}const ku={error:"UNKNOWN_ERROR"};function Rl(n){return ee.US.encodeString(JSON.stringify(n),!1)}function Zo(n){return va.apply(this,arguments)}function va(){return(va=(0,qe.Z)(function*(n,e=!1){const t=n.app;Ni(t);const r=F(t);let u,i=r.token;if(i&&!La(i)&&(r.token=void 0,i=void 0),!i){const m=yield r.cachedTokenPromise;m&&(La(m)?i=m:yield Pu(t,void 0))}if(!e&&i&&La(i))return{token:i.token};let p,c=!1;if(ka()){r.exchangeTokenPromise||(r.exchangeTokenPromise=Hi(jc(t,yield Tr()),n.heartbeatServiceProvider).finally(()=>{r.exchangeTokenPromise=void 0}),c=!0);const m=yield r.exchangeTokenPromise;return yield Pu(t,m),r.token=m,{token:m.token}}try{r.exchangeTokenPromise||(r.exchangeTokenPromise=r.provider.getToken().finally(()=>{r.exchangeTokenPromise=void 0}),c=!0),i=yield F(t).exchangeTokenPromise}catch(m){"appCheck/throttled"===m.code?Pa.warn(m.message):Pa.error(m),u=m}return i?u?p=La(i)?{token:i.token,internalError:u}:$c(u):(p={token:i.token},r.token=i,yield Pu(t,i)):p=$c(u),c&&function lc(n,e){const t=F(n).tokenObservers;for(const r of t)try{"EXTERNAL"===r.type&&null!=e.error?r.error(e.error):r.next(e)}catch{}}(t,p),p})).apply(this,arguments)}function Hc(n){return Fu.apply(this,arguments)}function Fu(){return(Fu=(0,qe.Z)(function*(n){const e=n.app;Ni(e);const{provider:t}=F(e);if(ka()){const r=yield Tr(),{token:i}=yield Hi(jc(e,r),n.heartbeatServiceProvider);return{token:i}}{const{token:r}=yield t.getToken();return{token:r}}})).apply(this,arguments)}function Lu(n,e){const t=F(n),r=t.tokenObservers.filter(i=>i.next!==e);0===r.length&&t.tokenRefresher&&t.tokenRefresher.isRunning()&&t.tokenRefresher.stop(),t.tokenObservers=r}function cc(n){const{app:e}=n,t=F(e);let r=t.tokenRefresher;r||(r=function lu(n){const{app:e}=n;return new Bn((0,qe.Z)(function*(){let r;if(r=F(e).token?yield Zo(n,!0):yield Zo(n),r.error)throw r.error;if(r.internalError)throw r.internalError}),()=>!0,()=>{const t=F(e);if(t.token){let r=t.token.issuedAtTimeMillis+.5*(t.token.expireTimeMillis-t.token.issuedAtTimeMillis)+3e5;return r=Math.min(r,t.token.expireTimeMillis-3e5),Math.max(0,r-Date.now())}return 0},ar.RETRIAL_MIN_WAIT,ar.RETRIAL_MAX_WAIT)}(n),t.tokenRefresher=r),!r.isRunning()&&t.isTokenAutoRefreshEnabled&&r.start()}function La(n){return n.expireTimeMillis-Date.now()>0}function $c(n){return{token:Rl(ku),error:n}}class Vd{constructor(e,t){this.app=e,this.heartbeatServiceProvider=t}_delete(){const{tokenObservers:e}=F(this.app);for(const t of e)Lu(this.app,t.next);return Promise.resolve()}}const du="app-check-internal";!function hu(){(0,br._registerComponent)(new ri.wA("app-check",n=>function Ea(n,e){return new Vd(n,e)}(n.getProvider("app").getImmediate(),n.getProvider("heartbeat")),"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((n,e,t)=>{n.getProvider(du).initialize()})),(0,br._registerComponent)(new ri.wA(du,n=>function Nl(n){return{getToken:e=>Zo(n,e),getLimitedUseToken:()=>Hc(n),addTokenListener:e=>function Fa(n,e,t,r){const{app:i}=n,u=F(i);if(u.tokenObservers=[...u.tokenObservers,{next:t,error:r,type:e}],u.token&&La(u.token)){const p=u.token;Promise.resolve().then(()=>{t({token:p.token}),cc(n)}).catch(()=>{})}u.cachedTokenPromise.then(()=>cc(n))}(n,"INTERNAL",e),removeTokenListener:e=>Lu(n.app,e)}}(n.getProvider("app-check").getImmediate()),"PUBLIC").setInstantiationMode("EXPLICIT")),(0,br.registerVersion)("@firebase/app-check","0.8.0")}();class Lo{constructor(){return(0,Cn.vb)("app-check")}}typeof window<"u"&&window;var Ua=j(120);const pc=new w.OlP("angularfire2.auth.use-emulator"),Wc=new w.OlP("angularfire2.auth.settings"),qc=new w.OlP("angularfire2.auth.tenant-id"),Zc=new w.OlP("angularfire2.auth.langugage-code"),rf=new w.OlP("angularfire2.auth.use-device-language"),pu=new w.OlP("angularfire.auth.persistence"),Va=(n,e,t,r,i,u,c,p)=>(0,gr.cc)(`${n.name}.auth`,"AngularFireAuth",n.name,()=>{const m=e.runOutsideAngular(()=>n.auth());if(t&&m.useEmulator(...t),r&&(m.tenantId=r),m.languageCode=i,u&&m.useDeviceLanguage(),c)for(const[b,O]of Object.entries(c))m.settings[b]=O;return p&&m.setPersistence(p),m},[t,r,i,u,c,p]);let Bu=(()=>{class n{constructor(t,r,i,u,c,p,m,b,O,U,J,ce){const we=new Bs.x,Ve=(0,bs.of)(void 0).pipe((0,tc.Q)(c.outsideAngular),(0,_i.w)(()=>u.runOutsideAngular(()=>Promise.resolve().then(j.bind(j,8977)))),(0,Be.U)(()=>(0,gr.on)(t,u,r)),(0,Be.U)(Ye=>Va(Ye,u,p,b,O,U,m,J)),ji({bufferSize:1,refCount:!1}));if((0,Q.PM)(i))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=(0,bs.of)(null);else{Ve.pipe((0,nc.P)()).subscribe();const Ot=Ve.pipe((0,_i.w)(Kt=>Kt.getRedirectResult().then(Mn=>Mn,()=>null)),Cn.iC,ji({bufferSize:1,refCount:!1})),en=Ve.pipe((0,_i.w)(Kt=>new de.y(Mn=>({unsubscribe:u.runOutsideAngular(()=>Kt.onAuthStateChanged(Fn=>Mn.next(Fn),Fn=>Mn.error(Fn),()=>Mn.complete()))})))),It=Ve.pipe((0,_i.w)(Kt=>new de.y(Mn=>({unsubscribe:u.runOutsideAngular(()=>Kt.onIdTokenChanged(Fn=>Mn.next(Fn),Fn=>Mn.error(Fn),()=>Mn.complete()))}))));this.authState=Ot.pipe(ga(en),(0,Ji.R)(c.outsideAngular),(0,tc.Q)(c.insideAngular)),this.user=Ot.pipe(ga(It),(0,Ji.R)(c.outsideAngular),(0,tc.Q)(c.insideAngular)),this.idToken=this.user.pipe((0,_i.w)(Kt=>Kt?(0,ae.D)(Kt.getIdToken()):(0,bs.of)(null))),this.idTokenResult=this.user.pipe((0,_i.w)(Kt=>Kt?(0,ae.D)(Kt.getIdTokenResult()):(0,bs.of)(null))),this.credential=(0,Oo.T)(Ot,we,this.authState.pipe((0,ma.h)(Kt=>!Kt))).pipe((0,Be.U)(Kt=>Kt?.user?Kt:null),(0,Ji.R)(c.outsideAngular),(0,tc.Q)(c.insideAngular))}return(0,gr.pX)(this,Ve,u,{spy:{apply:(Ye,Ot,en)=>{(Ye.startsWith("signIn")||Ye.startsWith("createUser"))&&en.then(It=>we.next(It))}}})}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(gr.Dh),w.LFG(gr.xv,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Cn.HU),w.LFG(pc,8),w.LFG(Wc,8),w.LFG(qc,8),w.LFG(Zc,8),w.LFG(rf,8),w.LFG(pu,8),w.LFG(Lo,8))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Wd=(()=>{class n{constructor(){Ua.Z.registerVersion("angularfire",Cn.q4.full,"auth-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[Bu]}),n})();var Ll=j(6321),Qo=j(9360);function eo(n,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===n&&(n={});break;case Array:n=[];break;default:return e}for(const t in e)!e.hasOwnProperty(t)||!af(t)||(n[t]=eo(n[t],e[t]));return n}function af(n){return"__proto__"!==n}class ge extends Error{constructor(e,t,r){super(t),this.code=e,this.customData=r,this.name="FirebaseError",Object.setPrototypeOf(this,ge.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Ce.prototype.create)}}class Ce{constructor(e,t,r){this.service=e,this.serviceName=t,this.errors=r}create(e,...t){const r=t[0]||{},i=`${this.service}/${e}`,u=this.errors[e],c=u?function Ze(n,e){return n.replace(Tt,(t,r)=>{const i=e[r];return null!=i?String(i):`<${r}?>`})}(u,r):"Error";return new ge(i,`${this.serviceName}: ${c} (${i}).`,r)}}const Tt=/\{\$([^}]+)}/g;function Gu(n,e){return Object.prototype.hasOwnProperty.call(n,e)}function $l(n,e){const t=new Jm(n,e);return t.subscribe.bind(t)}class Jm{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,r){let i;if(void 0===e&&void 0===t&&void 0===r)throw new Error("Missing Observer.");i=function Xm(n,e){if("object"!=typeof n||null===n)return!1;for(const t of e)if(t in n&&"function"==typeof n[t])return!0;return!1}(e,["next","error","complete"])?e:{next:e,error:t,complete:r},void 0===i.next&&(i.next=tg),void 0===i.error&&(i.error=tg),void 0===i.complete&&(i.complete=tg);const u=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),u}unsubscribeOne(e){void 0===this.observers||void 0===this.observers[e]||(delete this.observers[e],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(void 0!==this.observers&&void 0!==this.observers[e])try{t(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,void 0!==e&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function tg(){}class Qd{constructor(e,t,r){this.name=e,this.instanceFactory=t,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}class iy{constructor(e,t){this._delegate=e,this.firebase=t,(0,br._addComponent)(e,new Qd("app-compat",()=>this,"PUBLIC")),this.container=e.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this._delegate.automaticDataCollectionEnabled=e}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(e=>{this._delegate.checkDestroyed(),e()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,br.deleteApp)(this._delegate)))}_getService(e,t=br._DEFAULT_ENTRY_NAME){var r;this._delegate.checkDestroyed();const i=this._delegate.container.getProvider(e);return!i.isInitialized()&&"EXPLICIT"===(null===(r=i.getComponent())||void 0===r?void 0:r.instantiationMode)&&i.initialize(),i.getImmediate({identifier:t})}_removeServiceInstance(e,t=br._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(e).clearInstance(t)}_addComponent(e){(0,br._addComponent)(this._delegate,e)}_addOrOverwriteComponent(e){(0,br._addOrOverwriteComponent)(this._delegate,e)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const Jd=new Ce("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),df=function Xd(){const n=function sy(n){const e={},t={__esModule:!0,initializeApp:function u(b,O={}){const U=br.initializeApp(b,O);if(Gu(e,U.name))return e[U.name];const J=new n(U,t);return e[U.name]=J,J},app:i,registerVersion:br.registerVersion,setLogLevel:br.setLogLevel,onLog:br.onLog,apps:null,SDK_VERSION:br.SDK_VERSION,INTERNAL:{registerComponent:function p(b){const O=b.name,U=O.replace("-compat","");if(br._registerComponent(b)&&"PUBLIC"===b.type){const J=(ce=i())=>{if("function"!=typeof ce[U])throw Jd.create("invalid-app-argument",{appName:O});return ce[U]()};void 0!==b.serviceProps&&eo(J,b.serviceProps),t[U]=J,n.prototype[U]=function(...ce){return this._getService.bind(this,O).apply(this,b.multipleInstances?ce:[])}}return"PUBLIC"===b.type?t[U]:null},removeApp:function r(b){delete e[b]},useAsService:function m(b,O){return"serverAuth"===O?null:O},modularAPIs:br}};function i(b){if(!Gu(e,b=b||br._DEFAULT_ENTRY_NAME))throw Jd.create("no-app",{appName:b});return e[b]}return t.default=t,Object.defineProperty(t,"apps",{get:function c(){return Object.keys(e).map(b=>e[b])}}),i.App=n,t}(iy);return n.INTERNAL=Object.assign(Object.assign({},n.INTERNAL),{createFirebaseNamespace:Xd,extendNamespace:function e(t){eo(n,t)},createSubscribe:$l,ErrorFactory:Ce,deepExtend:eo}),n}(),nl=new Xi.Yd("@firebase/app-compat");if(function js(){return"object"==typeof self&&self.self===self}()&&void 0!==self.firebase){nl.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const n=self.firebase.SDK_VERSION;n&&n.indexOf("LITE")>=0&&nl.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const ff=df;!function hf(n){(0,br.registerVersion)("@firebase/app-compat","0.2.1",n)}();const ja="firebasestorage.googleapis.com",rg="storageBucket";class ii extends ee.ZR{constructor(e,t,r=0){super(ig(e),`Firebase Storage: ${t} (${ig(e)})`),this.status_=r,this.customData={serverResponse:null},this._baseMessage=this.message,Object.setPrototypeOf(this,ii.prototype)}get status(){return this.status_}set status(e){this.status_=e}_codeEquals(e){return ig(e)===this.code}get serverResponse(){return this.customData.serverResponse}set serverResponse(e){this.customData.serverResponse=e,this.message=this.customData.serverResponse?`${this._baseMessage}\n${this.customData.serverResponse}`:this._baseMessage}}var on=(()=>((on=on||{}).UNKNOWN="unknown",on.OBJECT_NOT_FOUND="object-not-found",on.BUCKET_NOT_FOUND="bucket-not-found",on.PROJECT_NOT_FOUND="project-not-found",on.QUOTA_EXCEEDED="quota-exceeded",on.UNAUTHENTICATED="unauthenticated",on.UNAUTHORIZED="unauthorized",on.UNAUTHORIZED_APP="unauthorized-app",on.RETRY_LIMIT_EXCEEDED="retry-limit-exceeded",on.INVALID_CHECKSUM="invalid-checksum",on.CANCELED="canceled",on.INVALID_EVENT_NAME="invalid-event-name",on.INVALID_URL="invalid-url",on.INVALID_DEFAULT_BUCKET="invalid-default-bucket",on.NO_DEFAULT_BUCKET="no-default-bucket",on.CANNOT_SLICE_BLOB="cannot-slice-blob",on.SERVER_FILE_WRONG_SIZE="server-file-wrong-size",on.NO_DOWNLOAD_URL="no-download-url",on.INVALID_ARGUMENT="invalid-argument",on.INVALID_ARGUMENT_COUNT="invalid-argument-count",on.APP_DELETED="app-deleted",on.INVALID_ROOT_OPERATION="invalid-root-operation",on.INVALID_FORMAT="invalid-format",on.INTERNAL_ERROR="internal-error",on.UNSUPPORTED_ENVIRONMENT="unsupported-environment",on))();function ig(n){return"storage/"+n}function pf(){return new ii(on.UNKNOWN,"An unknown error occurred, please check the error payload for server response.")}function th(){return new ii(on.RETRY_LIMIT_EXCEEDED,"Max retry time for operation exceeded, please try again.")}function Wl(){return new ii(on.CANCELED,"User canceled the upload/download.")}function sg(){return new ii(on.CANNOT_SLICE_BLOB,"Cannot slice blob for upload. Please retry the upload.")}function rl(n){return new ii(on.INVALID_ARGUMENT,n)}function yf(){return new ii(on.APP_DELETED,"The Firebase app was deleted.")}function rh(n){return new ii(on.INVALID_ROOT_OPERATION,"The operation '"+n+"' cannot be performed on a root reference, create a non-root reference using child, such as .child('file.png').")}function ih(n,e){return new ii(on.INVALID_FORMAT,"String does not match format '"+n+"': "+e)}function Zl(n){throw new ii(on.INTERNAL_ERROR,"Internal error: "+n)}class Ss{constructor(e,t){this.bucket=e,this.path_=t}get path(){return this.path_}get isRoot(){return 0===this.path.length}fullServerUrl(){const e=encodeURIComponent;return"/b/"+e(this.bucket)+"/o/"+e(this.path)}bucketOnlyServerUrl(){return"/b/"+encodeURIComponent(this.bucket)+"/o"}static makeFromBucketSpec(e,t){let r;try{r=Ss.makeFromUrl(e,t)}catch{return new Ss(e,"")}if(""===r.path)return r;throw function nh(n){return new ii(on.INVALID_DEFAULT_BUCKET,"Invalid default bucket '"+n+"'.")}(e)}static makeFromUrl(e,t){let r=null;const i="([A-Za-z0-9.\\-_]+)",p=new RegExp("^gs://"+i+"(/(.*))?$","i");function b(Kt){Kt.path_=decodeURIComponent(Kt.path)}const U=t.replace(/[.]/g,"\\."),It=[{regex:p,indices:{bucket:1,path:3},postModify:function u(Kt){"/"===Kt.path.charAt(Kt.path.length-1)&&(Kt.path_=Kt.path_.slice(0,-1))}},{regex:new RegExp(`^https?://${U}/v[A-Za-z0-9_]+/b/${i}/o(/([^?#]*).*)?$`,"i"),indices:{bucket:1,path:3},postModify:b},{regex:new RegExp(`^https?://${t===ja?"(?:storage.googleapis.com|storage.cloud.google.com)":t}/${i}/([^?#]*)`,"i"),indices:{bucket:1,path:2},postModify:b}];for(let Kt=0;Kt<It.length;Kt++){const Mn=It[Kt],Fn=Mn.regex.exec(e);if(Fn){let Xu=Fn[Mn.indices.path];Xu||(Xu=""),r=new Ss(Fn[Mn.indices.bucket],Xu),Mn.postModify(r);break}}if(null==r)throw function Hs(n){return new ii(on.INVALID_URL,"Invalid URL '"+n+"'.")}(e);return r}}class mu{constructor(e){this.promise_=Promise.reject(e)}getPromise(){return this.promise_}cancel(e=!1){}}function As(n){return"string"==typeof n||n instanceof String}function oh(n){return yu()&&n instanceof Blob}function yu(){return typeof Blob<"u"&&!(0,ee.UG)()}function Kl(n,e,t,r){if(r<e)throw rl(`Invalid value for '${n}'. Expected ${e} or greater.`);if(r>t)throw rl(`Invalid value for '${n}'. Expected ${t} or less.`)}function Ms(n,e,t){let r=e;return null==t&&(r=`https://${e}`),`${t}://${r}/v0${n}`}function _c(n){const e=encodeURIComponent;let t="?";for(const r in n)n.hasOwnProperty(r)&&(t=t+(e(r)+"=")+e(n[r])+"&");return t=t.slice(0,-1),t}var xs=(()=>((xs=xs||{})[xs.NO_ERROR=0]="NO_ERROR",xs[xs.NETWORK_ERROR=1]="NETWORK_ERROR",xs[xs.ABORT=2]="ABORT",xs))();function ag(n,e){const t=n>=500&&n<600,i=-1!==[408,429].indexOf(n),u=-1!==e.indexOf(n);return t||i||u}class Kv{constructor(e,t,r,i,u,c,p,m,b,O,U,J=!0){this.url_=e,this.method_=t,this.headers_=r,this.body_=i,this.successCodes_=u,this.additionalRetryCodes_=c,this.callback_=p,this.errorCallback_=m,this.timeout_=b,this.progressCallback_=O,this.connectionFactory_=U,this.retry=J,this.pendingConnection_=null,this.backoffId_=null,this.canceled_=!1,this.appDelete_=!1,this.promise_=new Promise((ce,we)=>{this.resolve_=ce,this.reject_=we,this.start_()})}start_(){const t=(r,i)=>{const u=this.resolve_,c=this.reject_,p=i.connection;if(i.wasSuccessCode)try{const m=this.callback_(p,p.getResponse());!function qv(n){return void 0!==n}(m)?u():u(m)}catch(m){c(m)}else if(null!==p){const m=pf();m.serverResponse=p.getErrorText(),c(this.errorCallback_?this.errorCallback_(p,m):m)}else c(i.canceled?this.appDelete_?yf():Wl():th())};this.canceled_?t(0,new Yl(!1,null,!0)):this.backoffId_=function ly(n,e,t){let r=1,i=null,u=null,c=!1,p=0;function m(){return 2===p}let b=!1;function O(...Ye){b||(b=!0,e.apply(null,Ye))}function U(Ye){i=setTimeout(()=>{i=null,n(ce,m())},Ye)}function J(){u&&clearTimeout(u)}function ce(Ye,...Ot){if(b)return void J();if(Ye)return J(),void O.call(null,Ye,...Ot);if(m()||c)return J(),void O.call(null,Ye,...Ot);let It;r<64&&(r*=2),1===p?(p=2,It=0):It=1e3*(r+Math.random()),U(It)}let we=!1;function Ve(Ye){we||(we=!0,J(),!b&&(null!==i?(Ye||(p=2),clearTimeout(i),U(0)):Ye||(p=1)))}return U(0),u=setTimeout(()=>{c=!0,Ve(!0)},t),Ve}((r,i)=>{if(i)return void r(!1,new Yl(!1,null,!0));const u=this.connectionFactory_();this.pendingConnection_=u;const c=p=>{null!==this.progressCallback_&&this.progressCallback_(p.loaded,p.lengthComputable?p.total:-1)};null!==this.progressCallback_&&u.addUploadProgressListener(c),u.send(this.url_,this.method_,this.body_,this.headers_).then(()=>{null!==this.progressCallback_&&u.removeUploadProgressListener(c),this.pendingConnection_=null;const p=u.getErrorCode()===xs.NO_ERROR,m=u.getStatus();if(!p||ag(m,this.additionalRetryCodes_)&&this.retry){const O=u.getErrorCode()===xs.ABORT;return void r(!1,new Yl(!1,null,O))}const b=-1!==this.successCodes_.indexOf(m);r(!0,new Yl(b,u))})},t,this.timeout_)}getPromise(){return this.promise_}cancel(e){this.canceled_=!0,this.appDelete_=e||!1,null!==this.backoffId_&&function sh(n){n(!1)}(this.backoffId_),null!==this.pendingConnection_&&this.pendingConnection_.abort()}}class Yl{constructor(e,t,r){this.wasSuccessCode=e,this.connection=t,this.canceled=!!r}}function g(...n){const e=function h(){return typeof BlobBuilder<"u"?BlobBuilder:typeof WebKitBlobBuilder<"u"?WebKitBlobBuilder:void 0}();if(void 0!==e){const t=new e;for(let r=0;r<n.length;r++)t.append(n[r]);return t.getBlob()}if(yu())return new Blob(n);throw new ii(on.UNSUPPORTED_ENVIRONMENT,"This browser doesn't seem to support creating Blobs")}const H={RAW:"raw",BASE64:"base64",BASE64URL:"base64url",DATA_URL:"data_url"};class he{constructor(e,t){this.data=e,this.contentType=t||null}}function Ie(n,e){switch(n){case H.RAW:return new he(ht(e));case H.BASE64:case H.BASE64URL:return new he(Ft(n,e));case H.DATA_URL:return new he(function Jr(n){const e=new jt(n);return e.base64?Ft(H.BASE64,e.rest):function vt(n){let e;try{e=decodeURIComponent(n)}catch{throw ih(H.DATA_URL,"Malformed data URL.")}return ht(e)}(e.rest)}(e),function Ha(n){return new jt(n).contentType}(e))}throw pf()}function ht(n){const e=[];for(let t=0;t<n.length;t++){let r=n.charCodeAt(t);r<=127?e.push(r):r<=2047?e.push(192|r>>6,128|63&r):55296==(64512&r)?t<n.length-1&&56320==(64512&n.charCodeAt(t+1))?(r=65536|(1023&r)<<10|1023&n.charCodeAt(++t),e.push(240|r>>18,128|r>>12&63,128|r>>6&63,128|63&r)):e.push(239,191,189):56320==(64512&r)?e.push(239,191,189):e.push(224|r>>12,128|r>>6&63,128|63&r)}return new Uint8Array(e)}function Ft(n,e){switch(n){case H.BASE64:{const i=-1!==e.indexOf("-"),u=-1!==e.indexOf("_");if(i||u)throw ih(n,"Invalid character '"+(i?"-":"_")+"' found: is it base64url encoded?");break}case H.BASE64URL:{const i=-1!==e.indexOf("+"),u=-1!==e.indexOf("/");if(i||u)throw ih(n,"Invalid character '"+(i?"+":"/")+"' found: is it base64 encoded?");e=e.replace(/-/g,"+").replace(/_/g,"/");break}}let t;try{t=function k(n){if(typeof atob>"u")throw function cy(n){return new ii(on.UNSUPPORTED_ENVIRONMENT,`${n} is missing. Make sure to install the required polyfills. See https://firebase.google.com/docs/web/environments-js-sdk#polyfills for more information.`)}("base-64");return atob(n)}(e)}catch(i){throw i.message.includes("polyfill")?i:ih(n,"Invalid character found")}const r=new Uint8Array(t.length);for(let i=0;i<t.length;i++)r[i]=t.charCodeAt(i);return r}class jt{constructor(e){this.base64=!1,this.contentType=null;const t=e.match(/^data:([^,]+)?,/);if(null===t)throw ih(H.DATA_URL,"Must be formatted 'data:[<mediatype>][;base64],<data>");const r=t[1]||null;null!=r&&(this.base64=function ah(n,e){return n.length>=e.length&&n.substring(n.length-e.length)===e}(r,";base64"),this.contentType=this.base64?r.substring(0,r.length-7):r),this.rest=e.substring(e.indexOf(",")+1)}}class Da{constructor(e,t){let r=0,i="";oh(e)?(this.data_=e,r=e.size,i=e.type):e instanceof ArrayBuffer?(t?this.data_=new Uint8Array(e):(this.data_=new Uint8Array(e.byteLength),this.data_.set(new Uint8Array(e))),r=this.data_.length):e instanceof Uint8Array&&(t?this.data_=e:(this.data_=new Uint8Array(e.length),this.data_.set(e)),r=e.length),this.size_=r,this.type_=i}size(){return this.size_}type(){return this.type_}slice(e,t){if(oh(this.data_)){const i=function C(n,e,t){return n.webkitSlice?n.webkitSlice(e,t):n.mozSlice?n.mozSlice(e,t):n.slice?n.slice(e,t):null}(this.data_,e,t);return null===i?null:new Da(i)}{const r=new Uint8Array(this.data_.buffer,e,t-e);return new Da(r,!0)}}static getBlob(...e){if(yu()){const t=e.map(r=>r instanceof Da?r.data_:r);return new Da(g.apply(null,t))}{const t=e.map(c=>As(c)?Ie(H.RAW,c).data:c.data_);let r=0;t.forEach(c=>{r+=c.byteLength});const i=new Uint8Array(r);let u=0;return t.forEach(c=>{for(let p=0;p<c.length;p++)i[u++]=c[p]}),new Da(i,!0)}}uploadData(){return this.data_}}function Ql(n){let e;try{e=JSON.parse(n)}catch{return null}return function og(n){return"object"==typeof n&&!Array.isArray(n)}(e)?e:null}function il(n){const e=n.lastIndexOf("/",n.length-2);return-1===e?n:n.slice(e+1)}function Jl(n,e){return e}class $s{constructor(e,t,r,i){this.server=e,this.local=t||e,this.writable=!!r,this.xform=i||Jl}}let vc=null;function Xl(){if(vc)return vc;const n=[];n.push(new $s("bucket")),n.push(new $s("generation")),n.push(new $s("metageneration")),n.push(new $s("name","fullPath",!0));const t=new $s("name");t.xform=function e(u,c){return function uh(n){return!As(n)||n.length<2?n:il(n)}(c)},n.push(t);const i=new $s("size");return i.xform=function r(u,c){return void 0!==c?Number(c):c},n.push(i),n.push(new $s("timeCreated")),n.push(new $s("updated")),n.push(new $s("md5Hash",null,!0)),n.push(new $s("cacheControl",null,!0)),n.push(new $s("contentDisposition",null,!0)),n.push(new $s("contentEncoding",null,!0)),n.push(new $s("contentLanguage",null,!0)),n.push(new $s("contentType",null,!0)),n.push(new $s("metadata","customMetadata",!0)),vc=n,vc}function jC(n,e,t){const r=Ql(e);return null===r?null:function lh(n,e,t){const r={type:"file"},i=t.length;for(let u=0;u<i;u++){const c=t[u];r[c.local]=c.xform(r,e[c.server])}return function ch(n,e){Object.defineProperty(n,"ref",{get:function t(){const u=new Ss(n.bucket,n.fullPath);return e._makeStorageReference(u)}})}(r,n),r}(n,r,t)}function Xv(n,e){const t={},r=e.length;for(let i=0;i<r;i++){const u=e[i];u.writable&&(t[u.server]=n[u.local])}return JSON.stringify(t)}const $C="prefixes",GC="items";class $a{constructor(e,t,r,i){this.url=e,this.method=t,this.handler=r,this.timeout=i,this.urlParams={},this.headers={},this.body=null,this.errorHandler=null,this.progressCallback=null,this.successCodes=[200],this.additionalRetryCodes=[]}}function _u(n){if(!n)throw pf()}function sl(n,e){return function t(r,i){const u=jC(n,i,e);return _u(null!==u),u}}function cg(n){return function e(t,r){let i;return i=401===t.getStatus()?t.getErrorText().includes("Firebase App Check token is invalid")?function Uo(){return new ii(on.UNAUTHORIZED_APP,"This app does not have permission to access Firebase Storage on this project.")}():function Wv(){return new ii(on.UNAUTHENTICATED,"User is not authenticated, please authenticate using Firebase Authentication and try again.")}():402===t.getStatus()?function zv(n){return new ii(on.QUOTA_EXCEEDED,"Quota for bucket '"+n+"' exceeded, please view quota on https://firebase.google.com/pricing/.")}(n.bucket):403===t.getStatus()?function gf(n){return new ii(on.UNAUTHORIZED,"User does not have permission to access '"+n+"'.")}(n.path):r,i.status=t.getStatus(),i.serverResponse=r.serverResponse,i}}function lg(n){const e=cg(n);return function t(r,i){let u=e(r,i);return 404===r.getStatus()&&(u=function uy(n){return new ii(on.OBJECT_NOT_FOUND,"Object '"+n+"' does not exist.")}(n.path)),u.serverResponse=i.serverResponse,u}}function hy(n,e,t){const i=Ms(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new $a(i,"GET",sl(n,t),c);return p.errorHandler=lg(e),p}function xS(n,e,t,r,i){const u={};u.prefix=e.isRoot?"":e.path+"/",t&&t.length>0&&(u.delimiter=t),r&&(u.pageToken=r),i&&(u.maxResults=i);const p=Ms(e.bucketOnlyServerUrl(),n.host,n._protocol),b=n.maxOperationRetryTime,O=new $a(p,"GET",function AS(n,e){return function t(r,i){const u=function WC(n,e,t){const r=Ql(t);return null===r?null:function zC(n,e,t){const r={prefixes:[],items:[],nextPageToken:t.nextPageToken};if(t[$C])for(const i of t[$C]){const u=i.replace(/\/$/,""),c=n._makeStorageReference(new Ss(e,u));r.prefixes.push(c)}if(t[GC])for(const i of t[GC]){const u=n._makeStorageReference(new Ss(e,i.name));r.items.push(u)}return r}(n,e,r)}(n,e,i);return _u(null!==u),u}}(n,e.bucket),b);return O.urlParams=u,O.errorHandler=cg(e),O}function t0(n,e,t){const r=Object.assign({},t);return r.fullPath=n.path,r.size=e.size(),r.contentType||(r.contentType=function ZC(n,e){return n&&n.contentType||e&&e.type()||"application/octet-stream"}(null,e)),r}class py{constructor(e,t,r,i){this.current=e,this.total=t,this.finalized=!!r,this.metadata=i||null}}function r0(n,e){let t=null;try{t=n.getResponseHeader("X-Goog-Upload-Status")}catch{_u(!1)}return _u(!!t&&-1!==(e||["active"]).indexOf(t)),t}const dg={STATE_CHANGED:"state_changed"},Xo={RUNNING:"running",PAUSED:"paused",SUCCESS:"success",CANCELED:"canceled",ERROR:"error"};function YC(n){switch(n){case"running":case"pausing":case"canceling":return Xo.RUNNING;case"paused":return Xo.PAUSED;case"success":return Xo.SUCCESS;case"canceled":return Xo.CANCELED;default:return Xo.ERROR}}class PR{constructor(e,t,r){if(function Zv(n){return"function"==typeof n}(e)||null!=t||null!=r)this.next=e,this.error=t??void 0,this.complete=r??void 0;else{const u=e;this.next=u.next,this.error=u.error,this.complete=u.complete}}}function hg(n){return(...e)=>{Promise.resolve().then(()=>n(...e))}}let OS=null;class kR{constructor(){this.sent_=!1,this.xhr_=new XMLHttpRequest,this.initXhr(),this.errorCode_=xs.NO_ERROR,this.sendPromise_=new Promise(e=>{this.xhr_.addEventListener("abort",()=>{this.errorCode_=xs.ABORT,e()}),this.xhr_.addEventListener("error",()=>{this.errorCode_=xs.NETWORK_ERROR,e()}),this.xhr_.addEventListener("load",()=>{e()})})}send(e,t,r,i){if(this.sent_)throw Zl("cannot .send() more than once");if(this.sent_=!0,this.xhr_.open(t,e,!0),void 0!==i)for(const u in i)i.hasOwnProperty(u)&&this.xhr_.setRequestHeader(u,i[u].toString());return void 0!==r?this.xhr_.send(r):this.xhr_.send(),this.sendPromise_}getErrorCode(){if(!this.sent_)throw Zl("cannot .getErrorCode() before sending");return this.errorCode_}getStatus(){if(!this.sent_)throw Zl("cannot .getStatus() before sending");try{return this.xhr_.status}catch{return-1}}getResponse(){if(!this.sent_)throw Zl("cannot .getResponse() before sending");return this.xhr_.response}getErrorText(){if(!this.sent_)throw Zl("cannot .getErrorText() before sending");return this.xhr_.statusText}abort(){this.xhr_.abort()}getResponseHeader(e){return this.xhr_.getResponseHeader(e)}addUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.addEventListener("progress",e)}removeUploadProgressListener(e){null!=this.xhr_.upload&&this.xhr_.upload.removeEventListener("progress",e)}}class QC extends kR{initXhr(){this.xhr_.responseType="text"}}function zu(){return OS?OS():new QC}class Ec{constructor(e,t,r=null){this._transferred=0,this._needToFetchStatus=!1,this._needToFetchMetadata=!1,this._observers=[],this._error=void 0,this._uploadUrl=void 0,this._request=void 0,this._chunkMultiplier=1,this._resolve=void 0,this._reject=void 0,this._ref=e,this._blob=t,this._metadata=r,this._mappings=Xl(),this._resumable=this._shouldDoResumable(this._blob),this._state="running",this._errorHandler=i=>{if(this._request=void 0,this._chunkMultiplier=1,i._codeEquals(on.CANCELED))this._needToFetchStatus=!0,this.completeTransitions_();else{const u=this.isExponentialBackoffExpired();if(ag(i.status,[])){if(!u)return this.sleepTime=Math.max(2*this.sleepTime,1e3),this._needToFetchStatus=!0,void this.completeTransitions_();i=th()}this._error=i,this._transition("error")}},this._metadataErrorHandler=i=>{this._request=void 0,i._codeEquals(on.CANCELED)?this.completeTransitions_():(this._error=i,this._transition("error"))},this.sleepTime=0,this.maxSleepTime=this._ref.storage.maxUploadRetryTime,this._promise=new Promise((i,u)=>{this._resolve=i,this._reject=u,this._start()}),this._promise.then(null,()=>{})}isExponentialBackoffExpired(){return this.sleepTime>this.maxSleepTime}_makeProgressCallback(){const e=this._transferred;return t=>this._updateProgress(e+t)}_shouldDoResumable(e){return e.size()>262144}_start(){"running"===this._state&&void 0===this._request&&(this._resumable?void 0===this._uploadUrl?this._createResumable():this._needToFetchStatus?this._fetchStatus():this._needToFetchMetadata?this._fetchMetadata():this.pendingTimeout=setTimeout(()=>{this.pendingTimeout=void 0,this._continueUpload()},this.sleepTime):this._oneShotUpload())}_resolveToken(e){Promise.all([this._ref.storage._getAuthToken(),this._ref.storage._getAppCheckToken()]).then(([t,r])=>{switch(this._state){case"running":e(t,r);break;case"canceling":this._transition("canceled");break;case"pausing":this._transition("paused")}})}_createResumable(){this._resolveToken((e,t)=>{const r=function RS(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c=t0(e,r,i),p={name:c.fullPath},m=Ms(u,n.host,n._protocol),O={"X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${r.size()}`,"X-Goog-Upload-Header-Content-Type":c.contentType,"Content-Type":"application/json; charset=utf-8"},U=Xv(c,t),we=new $a(m,"POST",function ce(Ve){let Ye;r0(Ve);try{Ye=Ve.getResponseHeader("X-Goog-Upload-URL")}catch{_u(!1)}return _u(As(Ye)),Ye},n.maxUploadRetryTime);return we.urlParams=p,we.headers=O,we.body=U,we.errorHandler=cg(e),we}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._uploadUrl=u,this._needToFetchStatus=!1,this.completeTransitions_()},this._errorHandler)})}_fetchStatus(){const e=this._uploadUrl;this._resolveToken((t,r)=>{const i=function NS(n,e,t,r){const m=new $a(t,"POST",function u(b){const O=r0(b,["active","final"]);let U=null;try{U=b.getResponseHeader("X-Goog-Upload-Size-Received")}catch{_u(!1)}U||_u(!1);const J=Number(U);return _u(!isNaN(J)),new py(J,r.size(),"final"===O)},n.maxUploadRetryTime);return m.headers={"X-Goog-Upload-Command":"query"},m.errorHandler=cg(e),m}(this._ref.storage,this._ref._location,e,this._blob),u=this._ref.storage._makeRequest(i,zu,t,r);this._request=u,u.getPromise().then(c=>{this._request=void 0,this._updateProgress(c.current),this._needToFetchStatus=!1,c.finalized&&(this._needToFetchMetadata=!0),this.completeTransitions_()},this._errorHandler)})}_continueUpload(){const e=262144*this._chunkMultiplier,t=new py(this._transferred,this._blob.size()),r=this._uploadUrl;this._resolveToken((i,u)=>{let c;try{c=function ed(n,e,t,r,i,u,c,p){const m=new py(0,0);if(c?(m.current=c.current,m.total=c.total):(m.current=0,m.total=r.size()),r.size()!==m.total)throw function Jo(){return new ii(on.SERVER_FILE_WRONG_SIZE,"Server recorded incorrect upload file size, please retry the upload.")}();const b=m.total-m.current;let O=b;i>0&&(O=Math.min(O,i));const U=m.current;let ce="";ce=0===O?"finalize":b===O?"upload, finalize":"upload";const we={"X-Goog-Upload-Command":ce,"X-Goog-Upload-Offset":`${m.current}`},Ve=r.slice(U,U+O);if(null===Ve)throw sg();const It=new $a(t,"POST",function Ye(Kt,Mn){const Fn=r0(Kt,["active","final"]),ho=m.current+O,Xu=r.size();let kv;return kv="final"===Fn?sl(e,u)(Kt,Mn):null,new py(ho,Xu,"final"===Fn,kv)},e.maxUploadRetryTime);return It.headers=we,It.body=Ve.uploadData(),It.progressCallback=p||null,It.errorHandler=cg(n),It}(this._ref._location,this._ref.storage,r,this._blob,e,this._mappings,t,this._makeProgressCallback())}catch(m){return this._error=m,void this._transition("error")}const p=this._ref.storage._makeRequest(c,zu,i,u,!1);this._request=p,p.getPromise().then(m=>{this._increaseMultiplier(),this._request=void 0,this._updateProgress(m.current),m.finalized?(this._metadata=m.metadata,this._transition("success")):this.completeTransitions_()},this._errorHandler)})}_increaseMultiplier(){262144*this._chunkMultiplier*2<33554432&&(this._chunkMultiplier*=2)}_fetchMetadata(){this._resolveToken((e,t)=>{const r=hy(this._ref.storage,this._ref._location,this._mappings),i=this._ref.storage._makeRequest(r,zu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._transition("success")},this._metadataErrorHandler)})}_oneShotUpload(){this._resolveToken((e,t)=>{const r=function n0(n,e,t,r,i){const u=e.bucketOnlyServerUrl(),c={"X-Goog-Upload-Protocol":"multipart"},m=function p(){let It="";for(let Kt=0;Kt<2;Kt++)It+=Math.random().toString().slice(2);return It}();c["Content-Type"]="multipart/related; boundary="+m;const b=t0(e,r,i),O=Xv(b,t),ce=Da.getBlob("--"+m+"\r\nContent-Type: application/json; charset=utf-8\r\n\r\n"+O+"\r\n--"+m+"\r\nContent-Type: "+b.contentType+"\r\n\r\n",r,"\r\n--"+m+"--");if(null===ce)throw sg();const we={name:b.fullPath},Ve=Ms(u,n.host,n._protocol),Ot=n.maxUploadRetryTime,en=new $a(Ve,"POST",sl(n,t),Ot);return en.urlParams=we,en.headers=c,en.body=ce.uploadData(),en.errorHandler=cg(e),en}(this._ref.storage,this._ref._location,this._mappings,this._blob,this._metadata),i=this._ref.storage._makeRequest(r,zu,e,t);this._request=i,i.getPromise().then(u=>{this._request=void 0,this._metadata=u,this._updateProgress(this._blob.size()),this._transition("success")},this._errorHandler)})}_updateProgress(e){const t=this._transferred;this._transferred=e,this._transferred!==t&&this._notifyObservers()}_transition(e){if(this._state!==e)switch(e){case"canceling":case"pausing":this._state=e,void 0!==this._request?this._request.cancel():this.pendingTimeout&&(clearTimeout(this.pendingTimeout),this.pendingTimeout=void 0,this.completeTransitions_());break;case"running":const t="paused"===this._state;this._state=e,t&&(this._notifyObservers(),this._start());break;case"paused":case"error":case"success":this._state=e,this._notifyObservers();break;case"canceled":this._error=Wl(),this._state=e,this._notifyObservers()}}completeTransitions_(){switch(this._state){case"pausing":this._transition("paused");break;case"canceling":this._transition("canceled");break;case"running":this._start()}}get snapshot(){const e=YC(this._state);return{bytesTransferred:this._transferred,totalBytes:this._blob.size(),state:e,metadata:this._metadata,task:this,ref:this._ref}}on(e,t,r,i){const u=new PR(t||void 0,r||void 0,i||void 0);return this._addObserver(u),()=>{this._removeObserver(u)}}then(e,t){return this._promise.then(e,t)}catch(e){return this.then(null,e)}_addObserver(e){this._observers.push(e),this._notifyObserver(e)}_removeObserver(e){const t=this._observers.indexOf(e);-1!==t&&this._observers.splice(t,1)}_notifyObservers(){this._finishPromise(),this._observers.slice().forEach(t=>{this._notifyObserver(t)})}_finishPromise(){if(void 0!==this._resolve){let e=!0;switch(YC(this._state)){case Xo.SUCCESS:hg(this._resolve.bind(null,this.snapshot))();break;case Xo.CANCELED:case Xo.ERROR:hg(this._reject.bind(null,this._error))();break;default:e=!1}e&&(this._resolve=void 0,this._reject=void 0)}}_notifyObserver(e){switch(YC(this._state)){case Xo.RUNNING:case Xo.PAUSED:e.next&&hg(e.next.bind(e,this.snapshot))();break;case Xo.SUCCESS:e.complete&&hg(e.complete.bind(e))();break;default:e.error&&hg(e.error.bind(e,this._error))()}}resume(){const e="paused"===this._state||"pausing"===this._state;return e&&this._transition("running"),e}pause(){const e="running"===this._state;return e&&this._transition("pausing"),e}cancel(){const e="running"===this._state||"pausing"===this._state;return e&&this._transition("canceling"),e}}class Wu{constructor(e,t){this._service=e,this._location=t instanceof Ss?t:Ss.makeFromUrl(t,e.host)}toString(){return"gs://"+this._location.bucket+"/"+this._location.path}_newRef(e,t){return new Wu(e,t)}get root(){const e=new Ss(this._location.bucket,"");return this._newRef(this._service,e)}get bucket(){return this._location.bucket}get fullPath(){return this._location.path}get name(){return il(this._location.path)}get storage(){return this._service}get parent(){const e=function _f(n){if(0===n.length)return null;const e=n.lastIndexOf("/");return-1===e?"":n.slice(0,e)}(this._location.path);if(null===e)return null;const t=new Ss(this._location.bucket,e);return new Wu(this._service,t)}_throwIfRoot(e){if(""===this._location.path)throw rh(e)}}function gy(n,e,t){return fg.apply(this,arguments)}function fg(){return(fg=(0,qe.Z)(function*(n,e,t){const i=yield LS(n,{pageToken:t});e.prefixes.push(...i.prefixes),e.items.push(...i.items),null!=i.nextPageToken&&(yield gy(n,e,i.nextPageToken))})).apply(this,arguments)}function LS(n,e){null!=e&&"number"==typeof e.maxResults&&Kl("options.maxResults",1,1e3,e.maxResults);const t=e||{},r=xS(n.storage,n._location,"/",t.pageToken,t.maxResults);return n.storage.makeRequestWithTokens(r,zu)}function US(n){n._throwIfRoot("getDownloadURL");const e=function fy(n,e,t){const i=Ms(e.fullServerUrl(),n.host,n._protocol),c=n.maxOperationRetryTime,p=new $a(i,"GET",function MS(n,e){return function t(r,i){const u=jC(n,i,e);return _u(null!==u),function HC(n,e,t,r){const i=Ql(e);if(null===i||!As(i.downloadTokens))return null;const u=i.downloadTokens;if(0===u.length)return null;const c=encodeURIComponent;return u.split(",").map(b=>{const U=n.fullPath;return Ms("/b/"+c(n.bucket)+"/o/"+c(U),t,r)+_c({alt:"media",token:b})})[0]}(u,i,n.host,n._protocol)}}(n,t),c);return p.errorHandler=lg(e),p}(n.storage,n._location,Xl());return n.storage.makeRequestWithTokens(e,zu).then(t=>{if(null===t)throw function ql(){return new ii(on.NO_DOWNLOAD_URL,"The given file does not have any download URLs.")}();return t})}function tI(n,e){const t=function ug(n,e){const t=e.split("/").filter(r=>r.length>0).join("/");return 0===n.length?t:n+"/"+t}(n._location.path,e),r=new Ss(n._location.bucket,t);return new Wu(n.storage,r)}function pg(n,e){if(n instanceof ns){const t=n;if(null==t._bucket)throw function mf(){return new ii(on.NO_DEFAULT_BUCKET,"No default bucket found. Did you set the '"+rg+"' property when initializing the app?")}();const r=new Wu(t,t._bucket);return null!=e?pg(r,e):r}return void 0!==e?tI(n,e):n}function jS(n,e){if(e&&function BS(n){return/^[A-Za-z]+:\/\//.test(n)}(e)){if(n instanceof ns)return function nI(n,e){return new Wu(n,e)}(n,e);throw rl("To use ref(service, url), the first argument must be a Storage instance.")}return pg(n,e)}function my(n,e){const t=e?.[rg];return null==t?null:Ss.makeFromBucketSpec(t,n)}class ns{constructor(e,t,r,i,u){this.app=e,this._authProvider=t,this._appCheckProvider=r,this._url=i,this._firebaseVersion=u,this._bucket=null,this._host=ja,this._protocol="https",this._appId=null,this._deleted=!1,this._maxOperationRetryTime=12e4,this._maxUploadRetryTime=6e5,this._requests=new Set,this._bucket=null!=i?Ss.makeFromBucketSpec(i,this._host):my(this._host,this.app.options)}get host(){return this._host}set host(e){this._host=e,this._bucket=null!=this._url?Ss.makeFromBucketSpec(this._url,e):my(e,this.app.options)}get maxUploadRetryTime(){return this._maxUploadRetryTime}set maxUploadRetryTime(e){Kl("time",0,Number.POSITIVE_INFINITY,e),this._maxUploadRetryTime=e}get maxOperationRetryTime(){return this._maxOperationRetryTime}set maxOperationRetryTime(e){Kl("time",0,Number.POSITIVE_INFINITY,e),this._maxOperationRetryTime=e}_getAuthToken(){var e=this;return(0,qe.Z)(function*(){if(e._overrideAuthToken)return e._overrideAuthToken;const t=e._authProvider.getImmediate({optional:!0});if(t){const r=yield t.getToken();if(null!==r)return r.accessToken}return null})()}_getAppCheckToken(){var e=this;return(0,qe.Z)(function*(){const t=e._appCheckProvider.getImmediate({optional:!0});return t?(yield t.getToken()).token:null})()}_delete(){return this._deleted||(this._deleted=!0,this._requests.forEach(e=>e.cancel()),this._requests.clear()),Promise.resolve()}_makeStorageReference(e){return new Wu(this,e)}_makeRequest(e,t,r,i,u=!0){if(this._deleted)return new mu(yf());{const c=function _(n,e,t,r,i,u,c=!0){const p=_c(n.urlParams),m=n.url+p,b=Object.assign({},n.headers);return function Jv(n,e){e&&(n["X-Firebase-GMPID"]=e)}(b,e),function Yv(n,e){null!==e&&e.length>0&&(n.Authorization="Firebase "+e)}(b,t),function Qv(n,e){n["X-Firebase-Storage-Version"]="webjs/"+(e??"AppManager")}(b,u),function dy(n,e){null!==e&&(n["X-Firebase-AppCheck"]=e)}(b,r),new Kv(m,n.method,b,n.body,n.successCodes,n.additionalRetryCodes,n.handler,n.errorHandler,n.timeout,n.progressCallback,i,c)}(e,this._appId,r,i,t,this._firebaseVersion,u);return this._requests.add(c),c.getPromise().then(()=>this._requests.delete(c),()=>this._requests.delete(c)),c}}makeRequestWithTokens(e,t){var r=this;return(0,qe.Z)(function*(){const[i,u]=yield Promise.all([r._getAuthToken(),r._getAppCheckToken()]);return r._makeRequest(e,t,i,u).getPromise()})()}}const a0="@firebase/storage";function Ef(n,e){return jS(n=(0,ee.m9)(n),e)}function aI(n,{instanceIdentifier:e}){const t=n.getProvider("app").getImmediate(),r=n.getProvider("auth-internal"),i=n.getProvider("app-check-internal");return new ns(t,r,i,e,br.SDK_VERSION)}!function uI(){(0,br._registerComponent)(new ri.wA("storage",aI,"PUBLIC").setMultipleInstances(!0)),(0,br.registerVersion)(a0,"0.11.2",""),(0,br.registerVersion)(a0,"0.11.2","esm2017")}();class wf{constructor(e,t,r){this._delegate=e,this.task=t,this.ref=r}get bytesTransferred(){return this._delegate.bytesTransferred}get metadata(){return this._delegate.metadata}get state(){return this._delegate.state}get totalBytes(){return this._delegate.totalBytes}}class qS{constructor(e,t){this._delegate=e,this._ref=t,this.cancel=this._delegate.cancel.bind(this._delegate),this.catch=this._delegate.catch.bind(this._delegate),this.pause=this._delegate.pause.bind(this._delegate),this.resume=this._delegate.resume.bind(this._delegate)}get snapshot(){return new wf(this._delegate.snapshot,this,this._ref)}then(e,t){return this._delegate.then(r=>{if(e)return e(new wf(r,this,this._ref))},t)}on(e,t,r,i){let u;return t&&(u="function"==typeof t?c=>t(new wf(c,this,this._ref)):{next:t.next?c=>t.next(new wf(c,this,this._ref)):void 0,complete:t.complete||void 0,error:t.error||void 0}),this._delegate.on(e,u,r||void 0,i||void 0)}}class _y{constructor(e,t){this._delegate=e,this._service=t}get prefixes(){return this._delegate.prefixes.map(e=>new ol(e,this._service))}get items(){return this._delegate.items.map(e=>new ol(e,this._service))}get nextPageToken(){return this._delegate.nextPageToken||null}}class ol{constructor(e,t){this._delegate=e,this.storage=t}get name(){return this._delegate.name}get bucket(){return this._delegate.bucket}get fullPath(){return this._delegate.fullPath}toString(){return this._delegate.toString()}child(e){const t=function sI(n,e){return tI(n,e)}(this._delegate,e);return new ol(t,this.storage)}get root(){return new ol(this._delegate.root,this.storage)}get parent(){const e=this._delegate.parent;return null==e?null:new ol(e,this.storage)}put(e,t){return this._throwIfRoot("put"),new qS(function GS(n,e,t){return function FR(n,e,t){return n._throwIfRoot("uploadBytesResumable"),new Ec(n,new Da(e),t)}(n=(0,ee.m9)(n),e,t)}(this._delegate,e,t),this)}putString(e,t=H.RAW,r){this._throwIfRoot("putString");const i=Ie(t,e),u=Object.assign({},r);return null==u.contentType&&null!=i.contentType&&(u.contentType=i.contentType),new qS(new Ec(this._delegate,new Da(i.data,!0),u),this)}listAll(){return function $R(n){return function UR(n){const e={prefixes:[],items:[]};return gy(n,e).then(()=>e)}(n=(0,ee.m9)(n))}(this._delegate).then(e=>new _y(e,this.storage))}list(e){return function HR(n,e){return LS(n=(0,ee.m9)(n),e)}(this._delegate,e||void 0).then(t=>new _y(t,this.storage))}getMetadata(){return function zS(n){return function VR(n){n._throwIfRoot("getMetadata");const e=hy(n.storage,n._location,Xl());return n.storage.makeRequestWithTokens(e,zu)}(n=(0,ee.m9)(n))}(this._delegate)}updateMetadata(e){return function iI(n,e){return function eI(n,e){n._throwIfRoot("updateMetadata");const t=function e0(n,e,t,r){const u=Ms(e.fullServerUrl(),n.host,n._protocol),p=Xv(t,r),b=n.maxOperationRetryTime,O=new $a(u,"PATCH",sl(n,r),b);return O.headers={"Content-Type":"application/json; charset=utf-8"},O.body=p,O.errorHandler=lg(e),O}(n.storage,n._location,e,Xl());return n.storage.makeRequestWithTokens(t,zu)}(n=(0,ee.m9)(n),e)}(this._delegate,e)}getDownloadURL(){return function gg(n){return US(n=(0,ee.m9)(n))}(this._delegate)}delete(){return this._throwIfRoot("delete"),function Pr(n){return function VS(n){n._throwIfRoot("deleteObject");const e=function qC(n,e){const r=Ms(e.fullServerUrl(),n.host,n._protocol),p=new $a(r,"DELETE",function c(m,b){},n.maxOperationRetryTime);return p.successCodes=[200,204],p.errorHandler=lg(e),p}(n.storage,n._location);return n.storage.makeRequestWithTokens(e,zu)}(n=(0,ee.m9)(n))}(this._delegate)}_throwIfRoot(e){if(""===this._delegate._location.path)throw rh(e)}}class vy{constructor(e,t){this.app=e,this._delegate=t}get maxOperationRetryTime(){return this._delegate.maxOperationRetryTime}get maxUploadRetryTime(){return this._delegate.maxUploadRetryTime}ref(e){if(c0(e))throw rl("ref() expected a child path but got a URL, use refFromURL instead.");return new ol(Ef(this._delegate,e),this)}refFromURL(e){if(!c0(e))throw rl("refFromURL() expected a full URL but got a child path, use ref() instead.");try{Ss.makeFromUrl(e,this._delegate.host)}catch{throw rl("refFromUrl() expected a valid full URL but got an invalid one.")}return new ol(Ef(this._delegate,e),this)}setMaxUploadRetryTime(e){this._delegate.maxUploadRetryTime=e}setMaxOperationRetryTime(e){this._delegate.maxOperationRetryTime=e}useEmulator(e,t,r={}){!function u0(n,e,t,r={}){!function HS(n,e,t,r={}){n.host=`${e}:${t}`,n._protocol="http";const{mockUserToken:i}=r;i&&(n._overrideAuthToken="string"==typeof i?i:(0,ee.Sg)(i,n.app.options.projectId))}(n,e,t,r)}(this._delegate,e,t,r)}}function c0(n){return/^[A-Za-z]+:\/\//.test(n)}function l0(n,{instanceIdentifier:e}){const t=n.getProvider("app-compat").getImmediate(),r=n.getProvider("storage").getImmediate({identifier:e});return new vy(t,r)}function wy(n){const e=function KS(n){return new de.y(e=>{const t=c=>e.next(c);t(n.snapshot);const u=n.on("state_changed",t);return n.then(c=>{t(c),e.complete()},c=>{t(n.snapshot),(c=>{e.error(c)})(c)}),function(){u()}}).pipe(function Yp(n,e=Ll.z){return(0,Qo.e)((t,r)=>{let i=null,u=null,c=null;const p=()=>{if(i){i.unsubscribe(),i=null;const b=u;u=null,r.next(b)}};function m(){const b=c+n,O=e.now();if(O<b)return i=this.schedule(void 0,b-O),void r.add(i);p()}t.subscribe((0,oe.x)(r,b=>{u=b,c=e.now(),i||(i=e.schedule(m,n),r.add(i))},()=>{p(),r.complete()},void 0,()=>{u=i=null}))})}(0))}(n);return{task:n,then:n.then.bind(n),catch:n.catch.bind(n),pause:n.pause.bind(n),cancel:n.cancel.bind(n),resume:n.resume.bind(n),snapshotChanges:()=>e,percentageChanges:()=>e.pipe((0,Be.U)(t=>t.bytesTransferred/t.totalBytes*100))}}function hh(n){return{getDownloadURL:()=>(0,bs.of)(void 0).pipe(Cn.fc,(0,_i.w)(()=>n.getDownloadURL()),Cn.iC),getMetadata:()=>(0,bs.of)(void 0).pipe(Cn.fc,(0,_i.w)(()=>n.getMetadata()),Cn.iC),delete:()=>(0,ae.D)(n.delete()),child:e=>hh(n.child(e)),updateMetadata:e=>(0,ae.D)(n.updateMetadata(e)),put:(e,t)=>wy(n.put(e,t)),putString:(e,t,r)=>wy(n.putString(e,t,r)),list:e=>(0,ae.D)(n.list(e)),listAll:()=>(0,ae.D)(n.listAll())}}!function Ey(n){const e={TaskState:Xo,TaskEvent:dg,StringFormat:H,Storage:vy,Reference:ol};n.INTERNAL.registerComponent(new ri.wA("storage-compat",l0,"PUBLIC").setServiceProps(e).setMultipleInstances(!0)),n.registerVersion("@firebase/storage-compat","0.3.2")}(ff);const fh=new w.OlP("angularfire2.storageBucket"),d0=new w.OlP("angularfire2.storage.maxUploadRetryTime"),h0=new w.OlP("angularfire2.storage.maxOperationRetryTime"),YS=new w.OlP("angularfire2.storage.use-emulator");let QS=(()=>{class n{constructor(t,r,i,u,c,p,m,b,O,U){const J=(0,gr.on)(t,c,r);this.storage=(0,gr.cc)(`${J.name}.storage.${i}`,"AngularFireStorage",J.name,()=>{const ce=c.runOutsideAngular(()=>J.storage(i||void 0)),we=O;return we&&ce.useEmulator(...we),m&&ce.setMaxUploadRetryTime(m),b&&ce.setMaxOperationRetryTime(b),ce},[m,b])}ref(t){return hh(this.storage.ref(t))}refFromURL(t){return hh(this.storage.refFromURL(t))}upload(t,r,i){return hh(this.storage.ref(t)).put(r,i)}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(gr.Dh),w.LFG(gr.xv,8),w.LFG(fh,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Cn.HU),w.LFG(d0,8),w.LFG(h0,8),w.LFG(YS,8),w.LFG(Lo,8))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),Cf=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({}),n})(),XS=(()=>{class n{constructor(){Ua.Z.registerVersion("angularfire",Cn.q4.full,"gcs-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[QS],imports:[Cf]}),n})();var f0=j(7921);function p0(){return(0,Qo.e)((n,e)=>{let t,r=!1;n.subscribe((0,oe.x)(e,i=>{const u=t;t=i,r&&e.next([u,i]),r=!0}))})}var kt,ph=j(6699),g0=j(3997),m0=(j(8977),j(3399)),wc=j(1571),WR=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Cc={},y0=y0||{},Rn=WR||self;function _0(n){var e=typeof n;return"array"==(e="object"!=e?e:n?Array.isArray(n)?"array":e:"null")||"object"==e&&"number"==typeof n.length}function td(n){var e=typeof n;return"object"==e&&null!=n||"function"==e}var mg="closure_uid_"+(1e9*Math.random()>>>0),v0=0;function yg(n,e,t){return n.call.apply(n.bind,arguments)}function E0(n,e,t){if(!n)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),n.apply(e,i)}}return function(){return n.apply(e,arguments)}}function to(n,e,t){return(to=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?yg:E0).apply(null,arguments)}function nd(n,e){var t=Array.prototype.slice.call(arguments,1);return function(){var r=t.slice();return r.push.apply(r,arguments),n.apply(this,r)}}function _s(n,e){function t(){}t.prototype=e.prototype,n.$=e.prototype,n.prototype=new t,n.prototype.constructor=n,n.ac=function(r,i,u){for(var c=Array(arguments.length-2),p=2;p<arguments.length;p++)c[p-2]=arguments[p];return e.prototype[i].apply(r,c)}}function vu(){this.s=this.s,this.o=this.o}vu.prototype.s=!1,vu.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),0)&&function eA(n){Object.prototype.hasOwnProperty.call(n,mg)&&n[mg]||(n[mg]=++v0)}(this)},vu.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const Cy=Array.prototype.indexOf?function(n,e){return Array.prototype.indexOf.call(n,e,void 0)}:function(n,e){if("string"==typeof n)return"string"!=typeof e||1!=e.length?-1:n.indexOf(e,0);for(let t=0;t<n.length;t++)if(t in n&&n[t]===e)return t;return-1};function If(n){const e=n.length;if(0<e){const t=Array(e);for(let r=0;r<e;r++)t[r]=n[r];return t}return[]}function tA(n,e){for(let t=1;t<arguments.length;t++){const r=arguments[t];if(_0(r)){const i=n.length||0,u=r.length||0;n.length=i+u;for(let c=0;c<u;c++)n[i+c]=r[c]}else n.push(r)}}function no(n,e){this.type=n,this.g=this.target=e,this.defaultPrevented=!1}no.prototype.h=function(){this.defaultPrevented=!0};var w0=function(){if(!Rn.addEventListener||!Object.defineProperty)return!1;var n=!1,e=Object.defineProperty({},"passive",{get:function(){n=!0}});try{Rn.addEventListener("test",()=>{},e),Rn.removeEventListener("test",()=>{},e)}catch{}return n}();function bf(n){return/^[\s\xa0]*$/.test(n)}function Iy(){var n=Rn.navigator;return n&&(n=n.userAgent)?n:""}function Ic(n){return-1!=Iy().indexOf(n)}function by(n){return by[" "](n),n}by[" "]=function(){};var Ty,n,nA=Ic("Opera"),Df=Ic("Trident")||Ic("MSIE"),rA=Ic("Edge"),C0=rA||Df,Dy=Ic("Gecko")&&!(-1!=Iy().toLowerCase().indexOf("webkit")&&!Ic("Edge"))&&!(Ic("Trident")||Ic("MSIE"))&&!Ic("Edge"),I0=-1!=Iy().toLowerCase().indexOf("webkit")&&!Ic("Edge");function hI(){var n=Rn.document;return n?n.documentMode:void 0}e:{var _g="",Tf=(n=Iy(),Dy?/rv:([^\);]+)(\)|;)/.exec(n):rA?/Edge\/([\d\.]+)/.exec(n):Df?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(n):I0?/WebKit\/(\S+)/.exec(n):nA?/(?:Version)[ \/]?(\S+)/.exec(n):void 0);if(Tf&&(_g=Tf?Tf[1]:""),Df){var b0=hI();if(null!=b0&&b0>parseFloat(_g)){Ty=String(b0);break e}}Ty=_g}var pI=Rn.document&&Df&&(hI()||parseInt(Ty,10))||void 0;function Ay(n,e){if(no.call(this,n?n.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,n){var t=this.type=n.type,r=n.changedTouches&&n.changedTouches.length?n.changedTouches[0]:null;if(this.target=n.target||n.srcElement,this.g=e,e=n.relatedTarget){if(Dy){e:{try{by(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else"mouseover"==t?e=n.fromElement:"mouseout"==t&&(e=n.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==n.clientX?n.clientX:n.pageX,this.clientY=void 0!==n.clientY?n.clientY:n.pageY,this.screenX=n.screenX||0,this.screenY=n.screenY||0),this.button=n.button,this.key=n.key||"",this.ctrlKey=n.ctrlKey,this.altKey=n.altKey,this.shiftKey=n.shiftKey,this.metaKey=n.metaKey,this.pointerId=n.pointerId||0,this.pointerType="string"==typeof n.pointerType?n.pointerType:iA[n.pointerType]||"",this.state=n.state,this.i=n,n.defaultPrevented&&Ay.$.h.call(this)}}_s(Ay,no);var iA={2:"touch",3:"pen",4:"mouse"};Ay.prototype.h=function(){Ay.$.h.call(this);var n=this.i;n.preventDefault?n.preventDefault():n.returnValue=!1};var rd="closure_listenable_"+(1e6*Math.random()|0),sA=0;function Sf(n,e,t,r,i){this.listener=n,this.proxy=null,this.src=e,this.type=t,this.capture=!!r,this.la=i,this.key=++sA,this.fa=this.ia=!1}function id(n){n.fa=!0,n.listener=null,n.proxy=null,n.src=null,n.la=null}function D0(n,e,t){for(const r in n)e.call(t,n[r],r,n)}function mI(n){const e={};for(const t in n)e[t]=n[t];return e}const yI="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function _I(n,e){let t,r;for(let i=1;i<arguments.length;i++){for(t in r=arguments[i],r)n[t]=r[t];for(let u=0;u<yI.length;u++)t=yI[u],Object.prototype.hasOwnProperty.call(r,t)&&(n[t]=r[t])}}function vg(n){this.src=n,this.g={},this.h=0}function My(n,e){var t=e.type;if(t in n.g){var u,r=n.g[t],i=Cy(r,e);(u=0<=i)&&Array.prototype.splice.call(r,i,1),u&&(id(e),0==n.g[t].length&&(delete n.g[t],n.h--))}}function Eg(n,e,t,r){for(var i=0;i<n.length;++i){var u=n[i];if(!u.fa&&u.listener==e&&u.capture==!!t&&u.la==r)return i}return-1}vg.prototype.add=function(n,e,t,r,i){var u=n.toString();(n=this.g[u])||(n=this.g[u]=[],this.h++);var c=Eg(n,e,r,i);return-1<c?(e=n[c],t||(e.ia=!1)):((e=new Sf(e,this.src,u,!!r,i)).ia=t,n.push(e)),e};var gh="closure_lm_"+(1e6*Math.random()|0),xy={};function oA(n,e,t,r,i){if(r&&r.once)return wg(n,e,t,r,i);if(Array.isArray(e)){for(var u=0;u<e.length;u++)oA(n,e[u],t,r,i);return null}return t=M0(t),n&&n[rd]?n.O(e,t,td(r)?!!r.capture:!!r,i):Ry(n,e,t,!1,r,i)}function Ry(n,e,t,r,i,u){if(!e)throw Error("Invalid event type");var c=td(i)?!!i.capture:!!i,p=S0(n);if(p||(n[gh]=p=new vg(n)),(t=p.add(e,t,r,c,u)).proxy)return t;if(r=function Af(){const e=aA;return function n(t){return e.call(n.src,n.listener,t)}}(),t.proxy=r,r.src=n,r.listener=t,n.addEventListener)w0||(i=c),void 0===i&&(i=!1),n.addEventListener(e.toString(),r,i);else if(n.attachEvent)n.attachEvent(vI(e.toString()),r);else{if(!n.addListener||!n.removeListener)throw Error("addEventListener and attachEvent are unavailable.");n.addListener(r)}return t}function wg(n,e,t,r,i){if(Array.isArray(e)){for(var u=0;u<e.length;u++)wg(n,e[u],t,r,i);return null}return t=M0(t),n&&n[rd]?n.P(e,t,td(r)?!!r.capture:!!r,i):Ry(n,e,t,!0,r,i)}function T0(n,e,t,r,i){if(Array.isArray(e))for(var u=0;u<e.length;u++)T0(n,e[u],t,r,i);else r=td(r)?!!r.capture:!!r,t=M0(t),n&&n[rd]?(n=n.i,(e=String(e).toString())in n.g&&-1<(t=Eg(u=n.g[e],t,r,i))&&(id(u[t]),Array.prototype.splice.call(u,t,1),0==u.length&&(delete n.g[e],n.h--))):n&&(n=S0(n))&&(e=n.g[e.toString()],n=-1,e&&(n=Eg(e,t,r,i)),(t=-1<n?e[n]:null)&&Ny(t))}function Ny(n){if("number"!=typeof n&&n&&!n.fa){var e=n.src;if(e&&e[rd])My(e.i,n);else{var t=n.type,r=n.proxy;e.removeEventListener?e.removeEventListener(t,r,n.capture):e.detachEvent?e.detachEvent(vI(t),r):e.addListener&&e.removeListener&&e.removeListener(r),(t=S0(e))?(My(t,n),0==t.h&&(t.src=null,e[gh]=null)):id(n)}}}function vI(n){return n in xy?xy[n]:xy[n]="on"+n}function aA(n,e){if(n.fa)n=!0;else{e=new Ay(e,this);var t=n.listener,r=n.la||n.src;n.ia&&Ny(n),n=t.call(r,e)}return n}function S0(n){return(n=n[gh])instanceof vg?n:null}var A0="__closure_events_fn_"+(1e9*Math.random()>>>0);function M0(n){return"function"==typeof n?n:(n[A0]||(n[A0]=function(e){return n.handleEvent(e)}),n[A0])}function ro(){vu.call(this),this.i=new vg(this),this.S=this,this.J=null}function io(n,e){var t,r=n.J;if(r)for(t=[];r;r=r.J)t.push(r);if(n=n.S,r=e.type||e,"string"==typeof e)e=new no(e,n);else if(e instanceof no)e.target=e.target||n;else{var i=e;_I(e=new no(r,n),i)}if(i=!0,t)for(var u=t.length-1;0<=u;u--){var c=e.g=t[u];i=al(c,r,!0,e)&&i}if(i=al(c=e.g=n,r,!0,e)&&i,i=al(c,r,!1,e)&&i,t)for(u=0;u<t.length;u++)i=al(c=e.g=t[u],r,!1,e)&&i}function al(n,e,t,r){if(!(e=n.i.g[String(e)]))return!0;e=e.concat();for(var i=!0,u=0;u<e.length;++u){var c=e[u];if(c&&!c.fa&&c.capture==t){var p=c.listener,m=c.la||c.src;c.ia&&My(n.i,c),i=!1!==p.call(m,r)&&i}}return i&&!r.defaultPrevented}_s(ro,vu),ro.prototype[rd]=!0,ro.prototype.removeEventListener=function(n,e,t,r){T0(this,n,e,t,r)},ro.prototype.N=function(){if(ro.$.N.call(this),this.i){var e,n=this.i;for(e in n.g){for(var t=n.g[e],r=0;r<t.length;r++)id(t[r]);delete n.g[e],n.h--}}this.J=null},ro.prototype.O=function(n,e,t,r){return this.i.add(String(n),e,!1,t,r)},ro.prototype.P=function(n,e,t,r){return this.i.add(String(n),e,!0,t,r)};var qu=Rn.JSON.stringify;function qR(){var n=xf;let e=null;return n.g&&(e=n.g,n.g=n.g.next,n.g||(n.h=null),e.next=null),e}var cA=new class EI{constructor(e,t){this.i=e,this.j=t,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}(()=>new ZR,n=>n.reset());class ZR{constructor(){this.next=this.g=this.h=null}set(e,t){this.h=e,this.g=t,this.next=null}reset(){this.next=this.g=this.h=null}}function wI(n){var e=1;n=n.split(":");const t=[];for(;0<e&&n.length;)t.push(n.shift()),e--;return n.length&&t.push(n.join(":")),t}function CI(n){Rn.setTimeout(()=>{throw n},0)}let Oy,Mf=!1,xf=new class uA{constructor(){this.h=this.g=null}add(e,t){const r=cA.get();r.set(e,t),this.h?this.h.next=r:this.g=r,this.h=r}},x0=()=>{const n=Rn.Promise.resolve(void 0);Oy=()=>{n.then(II)}};var II=()=>{for(var n;n=qR();){try{n.h.call(n.g)}catch(t){CI(t)}var e=cA;e.j(n),100>e.h&&(e.h++,n.next=e.g,e.g=n)}Mf=!1};function Cg(n,e){ro.call(this),this.h=n||1,this.g=e||Rn,this.j=to(this.qb,this),this.l=Date.now()}function Dn(n){n.ga=!1,n.T&&(n.g.clearTimeout(n.T),n.T=null)}function Py(n,e,t){if("function"==typeof n)t&&(n=to(n,t));else{if(!n||"function"!=typeof n.handleEvent)throw Error("Invalid listener argument");n=to(n.handleEvent,n)}return 2147483647<Number(e)?-1:Rn.setTimeout(n,e||0)}function R0(n){n.g=Py(()=>{n.g=null,n.i&&(n.i=!1,R0(n))},n.j);const e=n.h;n.h=null,n.m.apply(null,e)}_s(Cg,ro),(kt=Cg.prototype).ga=!1,kt.T=null,kt.qb=function(){if(this.ga){var n=Date.now()-this.l;0<n&&n<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-n):(this.T&&(this.g.clearTimeout(this.T),this.T=null),io(this,"tick"),this.ga&&(Dn(this),this.start()))}},kt.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())},kt.N=function(){Cg.$.N.call(this),Dn(this),delete this.g};class KR extends vu{constructor(e,t){super(),this.m=e,this.j=t,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:R0(this)}N(){super.N(),this.g&&(Rn.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Ig(n){vu.call(this),this.h=n,this.g={}}_s(Ig,vu);var N0=[];function bI(n,e,t,r){Array.isArray(t)||(t&&(N0[0]=t.toString()),t=N0);for(var i=0;i<t.length;i++){var u=oA(e,t[i],r||n.handleEvent,!1,n.h||n);if(!u)break;n.g[u.key]=u}}function DI(n){D0(n.g,function(e,t){this.g.hasOwnProperty(t)&&Ny(e)},n),n.g={}}function bg(){this.g=!0}function Rf(n,e,t,r){n.info(function(){return"XMLHTTP TEXT ("+e+"): "+function YR(n,e){if(!n.g)return e;if(!e)return null;try{var t=JSON.parse(e);if(t)for(n=0;n<t.length;n++)if(Array.isArray(t[n])){var r=t[n];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var u=i[0];if("noop"!=u&&"stop"!=u&&"close"!=u)for(var c=1;c<i.length;c++)i[c]=""}}}return qu(t)}catch{return e}}(n,t)+(r?" "+r:"")})}Ig.prototype.N=function(){Ig.$.N.call(this),DI(this)},Ig.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},bg.prototype.Ea=function(){this.g=!1},bg.prototype.info=function(){};var sd={},O0=null;function Zu(){return O0=O0||new ro}function mh(n){no.call(this,sd.Ta,n)}function Nf(n){const e=Zu();io(e,new mh(e))}function SI(n,e){no.call(this,sd.STAT_EVENT,n),this.stat=e}function so(n){const e=Zu();io(e,new SI(e,n))}function yh(n,e){no.call(this,sd.Ua,n),this.size=e}function _h(n,e){if("function"!=typeof n)throw Error("Fn must not be null and must be a function");return Rn.setTimeout(function(){n()},e)}sd.Ta="serverreachability",_s(mh,no),sd.STAT_EVENT="statevent",_s(SI,no),sd.Ua="timingevent",_s(yh,no);var od={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},P0={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Dg(){}function Fy(){}Dg.prototype.h=null;var F0,Of={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Tg(){no.call(this,"d")}function k0(){no.call(this,"c")}function Ly(){}function Pf(n,e,t,r){this.l=n,this.j=e,this.m=t,this.W=r||1,this.U=new Ig(this),this.P=hA,this.V=new Cg(n=C0?125:void 0),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new AI}function AI(){this.i=null,this.g="",this.h=!1}_s(Tg,no),_s(k0,no),_s(Ly,Dg),Ly.prototype.g=function(){return new XMLHttpRequest},Ly.prototype.i=function(){return{}},F0=new Ly;var hA=45e3,L0={},Uy={};function Vy(n,e,t){n.L=1,n.v=za(cl(e)),n.s=t,n.S=!0,U0(n,null)}function U0(n,e){n.G=Date.now(),Sg(n),n.A=cl(n.v);var t=n.A,r=n.W;Array.isArray(r)||(r=[String(r)]),z0(t.i,"t",r),n.C=0,t=n.l.J,n.h=new AI,n.g=tb(n.l,t?e:null,!n.s),0<n.O&&(n.M=new KR(to(n.Pa,n,n.g),n.O)),bI(n.U,n.g,"readystatechange",n.nb),e=n.I?mI(n.I):{},n.s?(n.u||(n.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",n.g.ha(n.A,n.u,n.s,e)):(n.u="GET",n.g.ha(n.A,n.u,null,e)),Nf(),function lA(n,e,t,r,i,u){n.info(function(){if(n.g)if(u)for(var c="",p=u.split("&"),m=0;m<p.length;m++){var b=p[m].split("=");if(1<b.length){var O=b[0];b=b[1];var U=O.split("_");c=2<=U.length&&"type"==U[1]?c+(O+"=")+b+"&":c+(O+"=redacted&")}}else c=null;else c=u;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+t+"\n"+c})}(n.j,n.u,n.A,n.m,n.W,n.s)}function MI(n){return!!n.g&&"GET"==n.u&&2!=n.L&&n.l.Ha}function xI(n,e,t){let i,r=!0;for(;!n.J&&n.C<t.length;){if(i=Ga(n,t),i==Uy){4==e&&(n.o=4,so(14),r=!1),Rf(n.j,n.m,null,"[Incomplete Response]");break}if(i==L0){n.o=4,so(15),Rf(n.j,n.m,t,"[Invalid Chunk]"),r=!1;break}Rf(n.j,n.m,i,null),B0(n,i)}MI(n)&&i!=Uy&&i!=L0&&(n.h.g="",n.C=0),4!=e||0!=t.length||n.h.h||(n.o=1,so(16),r=!1),n.i=n.i&&r,r?0<t.length&&!n.ba&&(n.ba=!0,(e=n.l).g==n&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+t.length),Qy(e),e.M=!0,so(11))):(Rf(n.j,n.m,t,"[Invalid Chunked Response]"),ad(n),vh(n))}function Ga(n,e){var t=n.C,r=e.indexOf("\n",t);return-1==r?Uy:(t=Number(e.substring(t,r)),isNaN(t)?L0:(r+=1)+t>e.length?Uy:(e=e.slice(r,r+t),n.C=r+t,e))}function Sg(n){n.Y=Date.now()+n.P,RI(n,n.P)}function RI(n,e){if(null!=n.B)throw Error("WatchDog timer not null");n.B=_h(to(n.lb,n),e)}function V0(n){n.B&&(Rn.clearTimeout(n.B),n.B=null)}function vh(n){0==n.l.H||n.J||eE(n.l,n)}function ad(n){V0(n);var e=n.M;e&&"function"==typeof e.sa&&e.sa(),n.M=null,Dn(n.V),DI(n.U),n.g&&(e=n.g,n.g=null,e.abort(),e.sa())}function B0(n,e){try{var t=n.l;if(0!=t.H&&(t.g==n||q0(t.i,n)))if(!n.K&&q0(t.i,n)&&3==t.H){try{var r=t.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){e:if(!t.u){if(t.g){if(!(t.g.G+3e3<n.G))break e;X0(t),wh(t)}Yy(t),so(18)}}else t.Fa=i[1],0<t.Fa-t.V&&37500>i[2]&&t.G&&0==t.A&&!t.v&&(t.v=_h(to(t.ib,t),6e3));if(1>=BI(t.i)&&t.oa){try{t.oa()}catch{}t.oa=void 0}}else Bf(t,11)}else if((n.K||t.g==n)&&X0(t),!bf(e))for(i=t.Ja.g.parse(e),e=0;e<i.length;e++){let b=i[e];if(t.V=b[0],b=b[1],2==t.H)if("c"==b[0]){t.K=b[1],t.pa=b[2];const O=b[3];null!=O&&(t.ra=O,t.l.info("VER="+t.ra));const U=b[4];null!=U&&(t.Ga=U,t.l.info("SVER="+t.Ga));const J=b[5];null!=J&&"number"==typeof J&&0<J&&(t.L=r=1.5*J,t.l.info("backChannelRequestTimeoutMs_="+r)),r=t;const ce=n.g;if(ce){const we=ce.g?ce.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(we){var u=r.i;u.g||-1==we.indexOf("spdy")&&-1==we.indexOf("quic")&&-1==we.indexOf("h2")||(u.j=u.l,u.g=new Set,u.h&&(jI(u,u.h),u.h=null))}if(r.F){const Ve=ce.g?ce.g.getResponseHeader("X-HTTP-Session-Id"):null;Ve&&(r.Da=Ve,wi(r.I,r.F,Ve))}}t.H=3,t.h&&t.h.Ba(),t.ca&&(t.S=Date.now()-n.G,t.l.info("Handshake RTT: "+t.S+"ms"));var c=n;if((r=t).wa=eb(r,r.J?r.pa:null,r.Y),c.K){Z0(r.i,c);var p=c,m=r.L;m&&p.setTimeout(m),p.B&&(V0(p),Sg(p)),r.g=c}else JI(r);0<t.j.length&&Ky(t)}else"stop"!=b[0]&&"close"!=b[0]||Bf(t,7);else 3==t.H&&("stop"==b[0]||"close"==b[0]?"stop"==b[0]?Bf(t,7):J0(t):"noop"!=b[0]&&t.h&&t.h.Aa(b),t.A=0)}Nf()}catch{}}function j0(n,e){if(n.forEach&&"function"==typeof n.forEach)n.forEach(e,void 0);else if(_0(n)||"string"==typeof n)Array.prototype.forEach.call(n,e,void 0);else for(var t=function pA(n){if(n.ta&&"function"==typeof n.ta)return n.ta();if(!n.Z||"function"!=typeof n.Z){if(typeof Map<"u"&&n instanceof Map)return Array.from(n.keys());if(!(typeof Set<"u"&&n instanceof Set)){if(_0(n)||"string"==typeof n){var e=[];n=n.length;for(var t=0;t<n;t++)e.push(t);return e}e=[],t=0;for(const r in n)e[t++]=r;return e}}}(n),r=function fA(n){if(n.Z&&"function"==typeof n.Z)return n.Z();if(typeof Map<"u"&&n instanceof Map||typeof Set<"u"&&n instanceof Set)return Array.from(n.values());if("string"==typeof n)return n.split("");if(_0(n)){for(var e=[],t=n.length,r=0;r<t;r++)e.push(n[r]);return e}for(r in e=[],t=0,n)e[t++]=n[r];return e}(n),i=r.length,u=0;u<i;u++)e.call(void 0,r[u],t&&t[u],n)}(kt=Pf.prototype).setTimeout=function(n){this.P=n},kt.nb=function(n){n=n.target;const e=this.M;e&&3==bc(n)?e.l():this.Pa(n)},kt.Pa=function(n){try{if(n==this.g)e:{const O=bc(this.g);var e=this.g.Ia();if(this.g.da(),!(3>O)&&(3!=O||C0||this.g&&(this.h.h||this.g.ja()||qI(this.g)))){this.J||4!=O||7==e||Nf(),V0(this);var t=this.g.da();this.ca=t;t:if(MI(this)){var r=qI(this.g);n="";var i=r.length,u=4==bc(this.g);if(!this.h.i){if(typeof TextDecoder>"u"){ad(this),vh(this);var c="";break t}this.h.i=new Rn.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,n+=this.h.i.decode(r[e],{stream:u&&e==i-1});r.splice(0,i),this.h.g+=n,this.C=0,c=this.h.g}else c=this.g.ja();if(this.i=200==t,function TI(n,e,t,r,i,u,c){n.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+t+"\n"+u+" "+c})}(this.j,this.u,this.A,this.m,this.W,O,t),this.i){if(this.aa&&!this.K){t:{if(this.g){var p,m=this.g;if((p=m.g?m.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!bf(p)){var b=p;break t}}b=null}if(!(t=b)){this.i=!1,this.o=3,so(12),ad(this),vh(this);break e}Rf(this.j,this.m,t,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,B0(this,t)}this.S?(xI(this,O,c),C0&&this.i&&3==O&&(bI(this.U,this.V,"tick",this.mb),this.V.start())):(Rf(this.j,this.m,c,null),B0(this,c)),4==O&&ad(this),this.i&&!this.J&&(4==O?eE(this.l,this):(this.i=!1,Sg(this)))}else(function EA(n){const e={};n=(n.g&&2<=bc(n)&&n.g.getAllResponseHeaders()||"").split("\r\n");for(let r=0;r<n.length;r++){if(bf(n[r]))continue;var t=wI(n[r]);const i=t[0];if("string"!=typeof(t=t[1]))continue;t=t.trim();const u=e[i]||[];e[i]=u,u.push(t)}!function gI(n,e){for(const t in n)e.call(void 0,n[t],t,n)}(e,function(r){return r.join(", ")})})(this.g),400==t&&0<c.indexOf("Unknown SID")?(this.o=3,so(12)):(this.o=0,so(13)),ad(this),vh(this)}}}catch{}},kt.mb=function(){if(this.g){var n=bc(this.g),e=this.g.ja();this.C<e.length&&(V0(this),xI(this,n,e),this.i&&4!=n&&Sg(this))}},kt.cancel=function(){this.J=!0,ad(this)},kt.lb=function(){this.B=null;const n=Date.now();0<=n-this.Y?(function dA(n,e){n.info(function(){return"TIMEOUT: "+e})}(this.j,this.A),2!=this.L&&(Nf(),so(17)),ad(this),this.o=2,vh(this)):RI(this,this.Y-n)};var NI=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function ul(n){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,n instanceof ul){this.h=n.h,By(this,n.j),this.s=n.s,this.g=n.g,jy(this,n.m),this.l=n.l;var e=n.i,t=new $y;t.i=e.i,e.g&&(t.g=new Map(e.g),t.h=e.h),OI(this,t),this.o=n.o}else n&&(e=String(n).match(NI))?(this.h=!1,By(this,e[1]||"",!0),this.s=Eh(e[2]||""),this.g=Eh(e[3]||"",!0),jy(this,e[4]),this.l=Eh(e[5]||"",!0),OI(this,e[6]||"",!0),this.o=Eh(e[7]||"")):(this.h=!1,this.i=new $y(null,this.h))}function cl(n){return new ul(n)}function By(n,e,t){n.j=t?Eh(e,!0):e,n.j&&(n.j=n.j.replace(/:$/,""))}function jy(n,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);n.m=e}else n.m=null}function OI(n,e,t){e instanceof $y?(n.i=e,function dl(n,e){e&&!n.j&&(ll(n),n.i=null,n.g.forEach(function(t,r){var i=r.toLowerCase();r!=i&&($0(this,r),z0(this,i,t))},n)),n.j=e}(n.i,n.h)):(t||(e=Ag(e,Hy)),n.i=new $y(e,n.h))}function wi(n,e,t){n.i.set(e,t)}function za(n){return wi(n,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),n}function Eh(n,e){return n?e?decodeURI(n.replace(/%25/g,"%2525")):decodeURIComponent(n):""}function Ag(n,e,t){return"string"==typeof n?(n=encodeURI(n).replace(e,PI),t&&(n=n.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n):null}function PI(n){return"%"+((n=n.charCodeAt(0))>>4&15).toString(16)+(15&n).toString(16)}ul.prototype.toString=function(){var n=[],e=this.j;e&&n.push(Ag(e,kI,!0),":");var t=this.g;return(t||"file"==e)&&(n.push("//"),(e=this.s)&&n.push(Ag(e,kI,!0),"@"),n.push(encodeURIComponent(String(t)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(t=this.m)&&n.push(":",String(t))),(t=this.l)&&(this.g&&"/"!=t.charAt(0)&&n.push("/"),n.push(Ag(t,"/"==t.charAt(0)?LI:FI,!0))),(t=this.i.toString())&&n.push("?",t),(t=this.o)&&n.push("#",Ag(t,H0)),n.join("")};var kI=/[#\/\?@]/g,FI=/[#\?:]/g,LI=/[#\?]/g,Hy=/[#\?@]/g,H0=/#/g;function $y(n,e){this.h=this.g=null,this.i=n||null,this.j=!!e}function ll(n){n.g||(n.g=new Map,n.h=0,n.i&&function gA(n,e){if(n){n=n.split("&");for(var t=0;t<n.length;t++){var r=n[t].indexOf("="),i=null;if(0<=r){var u=n[t].substring(0,r);i=n[t].substring(r+1)}else u=n[t];e(u,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(n.i,function(e,t){n.add(decodeURIComponent(e.replace(/\+/g," ")),t)}))}function $0(n,e){ll(n),e=ud(n,e),n.g.has(e)&&(n.i=null,n.h-=n.g.get(e).length,n.g.delete(e))}function G0(n,e){return ll(n),e=ud(n,e),n.g.has(e)}function z0(n,e,t){$0(n,e),0<t.length&&(n.i=null,n.g.set(ud(n,e),If(t)),n.h+=t.length)}function ud(n,e){return e=String(e),n.j&&(e=e.toLowerCase()),e}function UI(n){this.l=n||W0,n=Rn.PerformanceNavigationTiming?0<(n=Rn.performance.getEntriesByType("navigation")).length&&("hq"==n[0].nextHopProtocol||"h2"==n[0].nextHopProtocol):!!(Rn.g&&Rn.g.Ka&&Rn.g.Ka()&&Rn.g.Ka().ec),this.j=n?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}(kt=$y.prototype).add=function(n,e){ll(this),this.i=null,n=ud(this,n);var t=this.g.get(n);return t||this.g.set(n,t=[]),t.push(e),this.h+=1,this},kt.forEach=function(n,e){ll(this),this.g.forEach(function(t,r){t.forEach(function(i){n.call(e,i,r,this)},this)},this)},kt.ta=function(){ll(this);const n=Array.from(this.g.values()),e=Array.from(this.g.keys()),t=[];for(let r=0;r<e.length;r++){const i=n[r];for(let u=0;u<i.length;u++)t.push(e[r])}return t},kt.Z=function(n){ll(this);let e=[];if("string"==typeof n)G0(this,n)&&(e=e.concat(this.g.get(ud(this,n))));else{n=Array.from(this.g.values());for(let t=0;t<n.length;t++)e=e.concat(n[t])}return e},kt.set=function(n,e){return ll(this),this.i=null,G0(this,n=ud(this,n))&&(this.h-=this.g.get(n).length),this.g.set(n,[e]),this.h+=1,this},kt.get=function(n,e){return n&&0<(n=this.Z(n)).length?String(n[0]):e},kt.toString=function(){if(this.i)return this.i;if(!this.g)return"";const n=[],e=Array.from(this.g.keys());for(var t=0;t<e.length;t++){var r=e[t];const u=encodeURIComponent(String(r)),c=this.Z(r);for(r=0;r<c.length;r++){var i=u;""!==c[r]&&(i+="="+encodeURIComponent(String(c[r]))),n.push(i)}}return this.i=n.join("&")};var W0=10;function VI(n){return!!n.h||!!n.g&&n.g.size>=n.j}function BI(n){return n.h?1:n.g?n.g.size:0}function q0(n,e){return n.h?n.h==e:!!n.g&&n.g.has(e)}function jI(n,e){n.g?n.g.add(e):n.h=e}function Z0(n,e){n.h&&n.h==e?n.h=null:n.g&&n.g.has(e)&&n.g.delete(e)}function HI(n){if(null!=n.h)return n.i.concat(n.h.F);if(null!=n.g&&0!==n.g.size){let e=n.i;for(const t of n.g.values())e=e.concat(t.F);return e}return If(n.i)}UI.prototype.cancel=function(){if(this.i=HI(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&0!==this.g.size){for(const n of this.g.values())n.cancel();this.g.clear()}};var Gy=class{stringify(n){return Rn.JSON.stringify(n,void 0)}parse(n){return Rn.JSON.parse(n,void 0)}};function Mg(){this.g=new Gy}function zy(n,e,t){const r=t||"";try{j0(n,function(i,u){let c=i;td(i)&&(c=qu(i)),e.push(r+u+"="+encodeURIComponent(c))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function Wy(n,e,t,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function kf(n){this.l=n.fc||null,this.j=n.ob||!1}function xg(n,e){ro.call(this),this.F=n,this.u=e,this.m=void 0,this.readyState=K0,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}_s(kf,Dg),kf.prototype.g=function(){return new xg(this.l,this.j)},kf.prototype.i=function(n){return function(){return n}}({}),_s(xg,ro);var K0=0;function $I(n){n.j.read().then(n.Xa.bind(n)).catch(n.ka.bind(n))}function Ff(n){n.readyState=4,n.l=null,n.j=null,n.A=null,Lf(n)}function Lf(n){n.onreadystatechange&&n.onreadystatechange.call(n)}(kt=xg.prototype).open=function(n,e){if(this.readyState!=K0)throw this.abort(),Error("Error reopening a connection");this.C=n,this.B=e,this.readyState=1,Lf(this)},kt.send=function(n){if(1!=this.readyState)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};n&&(e.body=n),(this.F||Rn).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))},kt.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&4!=this.readyState&&(this.g=!1,Ff(this)),this.readyState=K0},kt.$a=function(n){if(this.g&&(this.l=n,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=n.headers,this.readyState=2,Lf(this)),this.g&&(this.readyState=3,Lf(this),this.g)))if("arraybuffer"===this.responseType)n.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof Rn.ReadableStream<"u"&&"body"in n){if(this.j=n.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$I(this)}else n.text().then(this.Za.bind(this),this.ka.bind(this))},kt.Xa=function(n){if(this.g){if(this.u&&n.value)this.response.push(n.value);else if(!this.u){var e=n.value?n.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!n.done}))&&(this.response=this.responseText+=e)}n.done?Ff(this):Lf(this),3==this.readyState&&$I(this)}},kt.Za=function(n){this.g&&(this.response=this.responseText=n,Ff(this))},kt.Ya=function(n){this.g&&(this.response=n,Ff(this))},kt.ka=function(){this.g&&Ff(this)},kt.setRequestHeader=function(n,e){this.v.append(n,e)},kt.getResponseHeader=function(n){return this.h&&this.h.get(n.toLowerCase())||""},kt.getAllResponseHeaders=function(){if(!this.h)return"";const n=[],e=this.h.entries();for(var t=e.next();!t.done;)n.push((t=t.value)[0]+": "+t[1]),t=e.next();return n.join("\r\n")},Object.defineProperty(xg.prototype,"withCredentials",{get:function(){return"include"===this.m},set:function(n){this.m=n?"include":"same-origin"}});var Rg=Rn.JSON.parse;function rs(n){ro.call(this),this.headers=new Map,this.u=n||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Y0,this.L=this.M=!1}_s(rs,ro);var Y0="",GI=/^https?$/i,yA=["POST","PUT"];function Uf(n,e){n.h=!1,n.g&&(n.l=!0,n.g.abort(),n.l=!1),n.j=e,n.m=5,zI(n),qy(n)}function zI(n){n.F||(n.F=!0,io(n,"complete"),io(n,"error"))}function vA(n){if(n.h&&typeof y0<"u"&&(!n.C[1]||4!=bc(n)||2!=n.da()))if(n.v&&4==bc(n))Py(n.La,0,n);else if(io(n,"readystatechange"),4==bc(n)){n.h=!1;try{const c=n.da();e:switch(c){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var t;if(!(t=e)){var r;if(r=0===c){var i=String(n.I).match(NI)[1]||null;!i&&Rn.self&&Rn.self.location&&(i=Rn.self.location.protocol.slice(0,-1)),r=!GI.test(i?i.toLowerCase():"")}t=r}if(t)io(n,"complete"),io(n,"success");else{n.m=6;try{var u=2<bc(n)?n.g.statusText:""}catch{u=""}n.j=u+" ["+n.da()+"]",zI(n)}}finally{qy(n)}}}function qy(n,e){if(n.g){WI(n);const t=n.g,r=n.C[0]?()=>{}:null;n.g=null,n.C=null,e||io(n,"ready");try{t.onreadystatechange=r}catch{}}}function WI(n){n.g&&n.L&&(n.g.ontimeout=null),n.A&&(Rn.clearTimeout(n.A),n.A=null)}function bc(n){return n.g?n.g.readyState:0}function qI(n){try{if(!n.g)return null;if("response"in n.g)return n.g.response;switch(n.K){case Y0:case"text":return n.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in n.g)return n.g.mozResponseArrayBuffer}return null}catch{return null}}function ZI(n){let e="";return D0(n,function(t,r){e+=r,e+=":",e+=t,e+="\r\n"}),e}function Q0(n,e,t){e:{for(r in t){var r=!1;break e}r=!0}r||(t=ZI(t),"string"==typeof n?null!=t&&encodeURIComponent(String(t)):wi(n,e,t))}function Vf(n,e,t){return t&&t.internalChannelParams&&t.internalChannelParams[n]||e}function Zy(n){this.Ga=0,this.j=[],this.l=new bg,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Vf("failFast",!1,n),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Vf("baseRetryDelayMs",5e3,n),this.hb=Vf("retryDelaySeedMs",1e4,n),this.eb=Vf("forwardChannelMaxRetries",2,n),this.xa=Vf("forwardChannelRequestTimeoutMs",2e4,n),this.va=n&&n.xmlHttpFactory||void 0,this.Ha=n&&n.dc||!1,this.L=void 0,this.J=n&&n.supportsCrossDomainXhr||!1,this.K="",this.i=new UI(n&&n.concurrentRequestLimit),this.Ja=new Mg,this.P=n&&n.fastHandshake||!1,this.O=n&&n.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=n&&n.bc||!1,n&&n.Ea&&this.l.Ea(),n&&n.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&n&&n.detectBufferingProxy||!1,this.qa=void 0,n&&n.longPollingTimeout&&0<n.longPollingTimeout&&(this.qa=n.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}function J0(n){if(KI(n),3==n.H){var e=n.W++,t=cl(n.I);if(wi(t,"SID",n.K),wi(t,"RID",e),wi(t,"TYPE","terminate"),Ng(n,t),(e=new Pf(n,n.l,e)).L=2,e.v=za(cl(t)),t=!1,Rn.navigator&&Rn.navigator.sendBeacon)try{t=Rn.navigator.sendBeacon(e.v.toString(),"")}catch{}!t&&Rn.Image&&((new Image).src=e.v,t=!0),t||(e.g=tb(e.l,null),e.g.ha(e.v)),e.G=Date.now(),Sg(e)}Og(n)}function wh(n){n.g&&(Qy(n),n.g.cancel(),n.g=null)}function KI(n){wh(n),n.u&&(Rn.clearTimeout(n.u),n.u=null),X0(n),n.i.cancel(),n.m&&("number"==typeof n.m&&Rn.clearTimeout(n.m),n.m=null)}function Ky(n){if(!VI(n.i)&&!n.m){n.m=!0;var e=n.Na;Oy||x0(),Mf||(Oy(),Mf=!0),xf.add(e,n),n.C=0}}function YI(n,e){var t;t=e?e.m:n.W++;const r=cl(n.I);wi(r,"SID",n.K),wi(r,"RID",t),wi(r,"AID",n.V),Ng(n,r),n.o&&n.s&&Q0(r,n.o,n.s),t=new Pf(n,n.l,t,n.C+1),null===n.o&&(t.I=n.s),e&&(n.j=e.F.concat(n.j)),e=QI(n,t,1e3),t.setTimeout(Math.round(.5*n.xa)+Math.round(.5*n.xa*Math.random())),jI(n.i,t),Vy(t,r,e)}function Ng(n,e){n.na&&D0(n.na,function(t,r){wi(e,r,t)}),n.h&&j0({},function(t,r){wi(e,r,t)})}function QI(n,e,t){t=Math.min(n.j.length,t);var r=n.h?to(n.h.Va,n.h,n):null;e:{var i=n.j;let u=-1;for(;;){const c=["count="+t];-1==u?0<t?(u=i[0].g,c.push("ofs="+u)):u=0:c.push("ofs="+u);let p=!0;for(let m=0;m<t;m++){let b=i[m].g;const O=i[m].map;if(b-=u,0>b)u=Math.max(0,i[m].g-100),p=!1;else try{zy(O,c,"req"+b+"_")}catch{r&&r(O)}}if(p){r=c.join("&");break e}}}return n=n.j.splice(0,t),e.F=n,r}function JI(n){if(!n.g&&!n.u){n.ba=1;var e=n.Ma;Oy||x0(),Mf||(Oy(),Mf=!0),xf.add(e,n),n.A=0}}function Yy(n){return!(n.g||n.u||3<=n.A||(n.ba++,n.u=_h(to(n.Ma,n),tE(n,n.A)),n.A++,0))}function Qy(n){null!=n.B&&(Rn.clearTimeout(n.B),n.B=null)}function XI(n){n.g=new Pf(n,n.l,"rpc",n.ba),null===n.o&&(n.g.I=n.s),n.g.O=0;var e=cl(n.wa);wi(e,"RID","rpc"),wi(e,"SID",n.K),wi(e,"AID",n.V),wi(e,"CI",n.G?"0":"1"),!n.G&&n.qa&&wi(e,"TO",n.qa),wi(e,"TYPE","xmlhttp"),Ng(n,e),n.o&&n.s&&Q0(e,n.o,n.s),n.L&&n.g.setTimeout(n.L);var t=n.g;n=n.pa,t.L=1,t.v=za(cl(e)),t.s=null,t.S=!0,U0(t,n)}function X0(n){null!=n.v&&(Rn.clearTimeout(n.v),n.v=null)}function eE(n,e){var t=null;if(n.g==e){X0(n),Qy(n),n.g=null;var r=2}else{if(!q0(n.i,e))return;t=e.F,Z0(n.i,e),r=1}if(0!=n.H)if(e.i)if(1==r){t=e.s?e.s.length:0,e=Date.now()-e.G;var i=n.C;io(r=Zu(),new yh(r,t)),Ky(n)}else JI(n);else if(3==(i=e.o)||0==i&&0<e.ca||!(1==r&&function wA(n,e){return!(BI(n.i)>=n.i.j-(n.m?1:0)||(n.m?(n.j=e.F.concat(n.j),0):1==n.H||2==n.H||n.C>=(n.cb?0:n.eb)||(n.m=_h(to(n.Na,n,e),tE(n,n.C)),n.C++,0)))}(n,e)||2==r&&Yy(n)))switch(t&&0<t.length&&(e=n.i,e.i=e.i.concat(t)),i){case 1:Bf(n,5);break;case 4:Bf(n,10);break;case 3:Bf(n,6);break;default:Bf(n,2)}}function tE(n,e){let t=n.ab+Math.floor(Math.random()*n.hb);return n.isActive()||(t*=2),t*e}function Bf(n,e){if(n.l.info("Error code "+e),2==e){var t=null;n.h&&(t=null);var r=to(n.pb,n);t||(t=new ul("//www.google.com/images/cleardot.gif"),Rn.location&&"http"==Rn.location.protocol||By(t,"https"),za(t)),function QR(n,e){const t=new bg;if(Rn.Image){const r=new Image;r.onload=nd(Wy,t,r,"TestLoadImage: loaded",!0,e),r.onerror=nd(Wy,t,r,"TestLoadImage: error",!1,e),r.onabort=nd(Wy,t,r,"TestLoadImage: abort",!1,e),r.ontimeout=nd(Wy,t,r,"TestLoadImage: timeout",!1,e),Rn.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=n}else e(!1)}(t.toString(),r)}else so(2);n.H=0,n.h&&n.h.za(e),Og(n),KI(n)}function Og(n){if(n.H=0,n.ma=[],n.h){const e=HI(n.i);(0!=e.length||0!=n.j.length)&&(tA(n.ma,e),tA(n.ma,n.j),n.i.i.length=0,If(n.j),n.j.length=0),n.h.ya()}}function eb(n,e,t){var r=t instanceof ul?cl(t):new ul(t);if(""!=r.g)e&&(r.g=e+"."+r.g),jy(r,r.m);else{var i=Rn.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var u=new ul(null);r&&By(u,r),e&&(u.g=e),i&&jy(u,i),t&&(u.l=t),r=u}return e=n.Da,(t=n.F)&&e&&wi(r,t,e),wi(r,"VER",n.ra),Ng(n,r),r}function tb(n,e,t){if(e&&!n.J)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new rs(t&&n.Ha&&!n.va?new kf({ob:!0}):n.va)).Oa(n.J),e}function Jy(){}function Xy(){if(Df&&!(10<=Number(pI)))throw Error("Environmental error: no available transport.")}function is(n,e){ro.call(this),this.g=new Zy(e),this.l=n,this.h=e&&e.messageUrlParams||null,n=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(n?n["X-Client-Protocol"]="webchannel":n={"X-Client-Protocol":"webchannel"}),this.g.s=n,n=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(n?n["X-WebChannel-Content-Type"]=e.messageContentType:n={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(n?n["X-WebChannel-Client-Profile"]=e.Ca:n={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=n,(n=e&&e.cc)&&!bf(n)&&(this.g.o=n),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!bf(e)&&(this.g.F=e,null!==(n=this.h)&&e in n&&e in(n=this.h)&&delete n[e]),this.j=new Eu(this)}function jf(n){Tg.call(this),n.__headers__&&(this.headers=n.__headers__,this.statusCode=n.__status__,delete n.__headers__,delete n.__status__);var e=n.__sm__;if(e){e:{for(const t in e){n=t;break e}n=void 0}(this.i=n)&&(n=this.i,e=null!==e&&n in e?e[n]:void 0),this.data=e}else this.data=n}function Io(){k0.call(this),this.status=1}function Eu(n){this.g=n}function ss(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}function Pg(n,e,t){t||(t=0);var r=Array(16);if("string"==typeof e)for(var i=0;16>i;++i)r[i]=e.charCodeAt(t++)|e.charCodeAt(t++)<<8|e.charCodeAt(t++)<<16|e.charCodeAt(t++)<<24;else for(i=0;16>i;++i)r[i]=e[t++]|e[t++]<<8|e[t++]<<16|e[t++]<<24;var u=n.g[3],c=(e=n.g[0])+(u^(t=n.g[1])&((i=n.g[2])^u))+r[0]+3614090360&4294967295;c=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=(t=(i=(u=(e=t+(c<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[1]+3905402710&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[2]+606105819&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[3]+3250441966&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[4]+4118548399&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[5]+1200080426&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[6]+2821735955&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[7]+4249261313&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[8]+1770035416&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[9]+2336552879&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[10]+4294925233&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[11]+2304563134&4294967295)<<22&4294967295|c>>>10))+((c=e+(u^t&(i^u))+r[12]+1804603682&4294967295)<<7&4294967295|c>>>25))+((c=u+(i^e&(t^i))+r[13]+4254626195&4294967295)<<12&4294967295|c>>>20))+((c=i+(t^u&(e^t))+r[14]+2792965006&4294967295)<<17&4294967295|c>>>15))+((c=t+(e^i&(u^e))+r[15]+1236535329&4294967295)<<22&4294967295|c>>>10))+((c=e+(i^u&(t^i))+r[1]+4129170786&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[6]+3225465664&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[11]+643717713&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[0]+3921069994&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[5]+3593408605&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[10]+38016083&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[15]+3634488961&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[4]+3889429448&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[9]+568446438&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[14]+3275163606&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[3]+4107603335&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[8]+1163531501&4294967295)<<20&4294967295|c>>>12))+((c=e+(i^u&(t^i))+r[13]+2850285829&4294967295)<<5&4294967295|c>>>27))+((c=u+(t^i&(e^t))+r[2]+4243563512&4294967295)<<9&4294967295|c>>>23))+((c=i+(e^t&(u^e))+r[7]+1735328473&4294967295)<<14&4294967295|c>>>18))+((c=t+(u^e&(i^u))+r[12]+2368359562&4294967295)<<20&4294967295|c>>>12))+((c=e+(t^i^u)+r[5]+4294588738&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[8]+2272392833&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[11]+1839030562&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[14]+4259657740&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[1]+2763975236&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[4]+1272893353&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[7]+4139469664&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[10]+3200236656&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[13]+681279174&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[0]+3936430074&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[3]+3572445317&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[6]+76029189&4294967295)<<23&4294967295|c>>>9))+((c=e+(t^i^u)+r[9]+3654602809&4294967295)<<4&4294967295|c>>>28))+((c=u+(e^t^i)+r[12]+3873151461&4294967295)<<11&4294967295|c>>>21))+((c=i+(u^e^t)+r[15]+530742520&4294967295)<<16&4294967295|c>>>16))+((c=t+(i^u^e)+r[2]+3299628645&4294967295)<<23&4294967295|c>>>9))+((c=e+(i^(t|~u))+r[0]+4096336452&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[7]+1126891415&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[14]+2878612391&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[5]+4237533241&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[12]+1700485571&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[3]+2399980690&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[10]+4293915773&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[1]+2240044497&4294967295)<<21&4294967295|c>>>11))+((c=e+(i^(t|~u))+r[8]+1873313359&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[15]+4264355552&4294967295)<<10&4294967295|c>>>22))+((c=i+(e^(u|~t))+r[6]+2734768916&4294967295)<<15&4294967295|c>>>17))+((c=t+(u^(i|~e))+r[13]+1309151649&4294967295)<<21&4294967295|c>>>11))+((u=(e=t+((c=e+(i^(t|~u))+r[4]+4149444226&4294967295)<<6&4294967295|c>>>26))+((c=u+(t^(e|~i))+r[11]+3174756917&4294967295)<<10&4294967295|c>>>22))^((i=u+((c=i+(e^(u|~t))+r[2]+718787259&4294967295)<<15&4294967295|c>>>17))|~e))+r[9]+3951481745&4294967295,n.g[0]=n.g[0]+e&4294967295,n.g[1]=n.g[1]+(i+(c<<21&4294967295|c>>>11))&4294967295,n.g[2]=n.g[2]+i&4294967295,n.g[3]=n.g[3]+u&4294967295}function yr(n,e){this.h=e;for(var t=[],r=!0,i=n.length-1;0<=i;i--){var u=0|n[i];r&&u==e||(t[i]=u,r=!1)}this.g=t}(kt=rs.prototype).Oa=function(n){this.M=n},kt.ha=function(n,e,t,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+n);e=e?e.toUpperCase():"GET",this.I=n,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():F0.g(),this.C=function ky(n){return n.h||(n.h=n.i())}(this.u?this.u:F0),this.g.onreadystatechange=to(this.La,this);try{this.G=!0,this.g.open(e,String(n),!0),this.G=!1}catch(u){return void Uf(this,u)}if(n=t||"",t=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)t.set(i,r[i]);else{if("function"!=typeof r.keys||"function"!=typeof r.get)throw Error("Unknown input type for opt_headers: "+String(r));for(const u of r.keys())t.set(u,r.get(u))}r=Array.from(t.keys()).find(u=>"content-type"==u.toLowerCase()),i=Rn.FormData&&n instanceof Rn.FormData,!(0<=Cy(yA,e))||r||i||t.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[u,c]of t)this.g.setRequestHeader(u,c);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{WI(this),0<this.B&&((this.L=function _A(n){return Df&&"number"==typeof n.timeout&&void 0!==n.ontimeout}(this.g))?(this.g.timeout=this.B,this.g.ontimeout=to(this.ua,this)):this.A=Py(this.ua,this.B,this)),this.v=!0,this.g.send(n),this.v=!1}catch(u){Uf(this,u)}},kt.ua=function(){typeof y0<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,io(this,"timeout"),this.abort(8))},kt.abort=function(n){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=n||7,io(this,"complete"),io(this,"abort"),qy(this))},kt.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),qy(this,!0)),rs.$.N.call(this)},kt.La=function(){this.s||(this.G||this.v||this.l?vA(this):this.kb())},kt.kb=function(){vA(this)},kt.isActive=function(){return!!this.g},kt.da=function(){try{return 2<bc(this)?this.g.status:-1}catch{return-1}},kt.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}},kt.Wa=function(n){if(this.g){var e=this.g.responseText;return n&&0==e.indexOf(n)&&(e=e.substring(n.length)),Rg(e)}},kt.Ia=function(){return this.m},kt.Sa=function(){return"string"==typeof this.j?this.j:String(this.j)},(kt=Zy.prototype).ra=8,kt.H=1,kt.Na=function(n){if(this.m)if(this.m=null,1==this.H){if(!n){this.W=Math.floor(1e5*Math.random()),n=this.W++;const i=new Pf(this,this.l,n);let u=this.s;if(this.U&&(u?(u=mI(u),_I(u,this.U)):u=this.U),null!==this.o||this.O||(i.I=u,u=null),this.P)e:{for(var e=0,t=0;t<this.j.length;t++){var r=this.j[t];if(void 0===(r="__data__"in r.map&&"string"==typeof(r=r.map.__data__)?r.length:void 0))break;if(4096<(e+=r)){e=t;break e}if(4096===e||t===this.j.length-1){e=t+1;break e}}e=1e3}else e=1e3;e=QI(this,i,e),wi(t=cl(this.I),"RID",n),wi(t,"CVER",22),this.F&&wi(t,"X-HTTP-Session-Id",this.F),Ng(this,t),u&&(this.O?e="headers="+encodeURIComponent(String(ZI(u)))+"&"+e:this.o&&Q0(t,this.o,u)),jI(this.i,i),this.bb&&wi(t,"TYPE","init"),this.P?(wi(t,"$req",e),wi(t,"SID","null"),i.aa=!0,Vy(i,t,null)):Vy(i,t,e),this.H=2}}else 3==this.H&&(n?YI(this,n):0==this.j.length||VI(this.i)||YI(this))},kt.Ma=function(){if(this.u=null,XI(this),this.ca&&!(this.M||null==this.g||0>=this.S)){var n=2*this.S;this.l.info("BP detection timer enabled: "+n),this.B=_h(to(this.jb,this),n)}},kt.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,so(10),wh(this),XI(this))},kt.ib=function(){null!=this.v&&(this.v=null,wh(this),Yy(this),so(19))},kt.pb=function(n){n?(this.l.info("Successfully pinged google.com"),so(2)):(this.l.info("Failed to ping google.com"),so(1))},kt.isActive=function(){return!!this.h&&this.h.isActive(this)},(kt=Jy.prototype).Ba=function(){},kt.Aa=function(){},kt.za=function(){},kt.ya=function(){},kt.isActive=function(){return!0},kt.Va=function(){},Xy.prototype.g=function(n,e){return new is(n,e)},_s(is,ro),is.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var n=this.g,e=this.l,t=this.h||void 0;so(0),n.Y=e,n.na=t||{},n.G=n.aa,n.I=eb(n,null,n.Y),Ky(n)},is.prototype.close=function(){J0(this.g)},is.prototype.u=function(n){var e=this.g;if("string"==typeof n){var t={};t.__data__=n,n=t}else this.v&&((t={}).__data__=qu(n),n=t);e.j.push(new class{constructor(n,e){this.g=n,this.map=e}}(e.fb++,n)),3==e.H&&Ky(e)},is.prototype.N=function(){this.g.h=null,delete this.j,J0(this.g),delete this.g,is.$.N.call(this)},_s(jf,Tg),_s(Io,k0),_s(Eu,Jy),Eu.prototype.Ba=function(){io(this.g,"a")},Eu.prototype.Aa=function(n){io(this.g,new jf(n))},Eu.prototype.za=function(n){io(this.g,new Io)},Eu.prototype.ya=function(){io(this.g,"b")},_s(ss,function e_(){this.blockSize=-1}),ss.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0},ss.prototype.j=function(n,e){void 0===e&&(e=n.length);for(var t=e-this.blockSize,r=this.m,i=this.h,u=0;u<e;){if(0==i)for(;u<=t;)Pg(this,n,u),u+=this.blockSize;if("string"==typeof n){for(;u<e;)if(r[i++]=n.charCodeAt(u++),i==this.blockSize){Pg(this,r),i=0;break}}else for(;u<e;)if(r[i++]=n[u++],i==this.blockSize){Pg(this,r),i=0;break}}this.h=i,this.i+=e},ss.prototype.l=function(){var n=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);n[0]=128;for(var e=1;e<n.length-8;++e)n[e]=0;var t=8*this.i;for(e=n.length-8;e<n.length;++e)n[e]=255&t,t/=256;for(this.j(n),n=Array(16),e=t=0;4>e;++e)for(var r=0;32>r;r+=8)n[t++]=this.g[e]>>>r&255;return n};var Hf={};function cd(n){return-128<=n&&128>n?function dI(n,e){var t=Hf;return Object.prototype.hasOwnProperty.call(t,n)?t[n]:t[n]=e(n)}(n,function(e){return new yr([0|e],0>e?-1:0)}):new yr([0|n],0>n?-1:0)}function ea(n){if(isNaN(n)||!isFinite(n))return Ku;if(0>n)return oo(ea(-n));for(var e=[],t=1,r=0;n>=t;r++)e[r]=n/t|0,t*=ld;return new yr(e,0)}var ld=4294967296,Ku=cd(0),dd=cd(1),Ih=cd(16777216);function Dc(n){if(0!=n.h)return!1;for(var e=0;e<n.g.length;e++)if(0!=n.g[e])return!1;return!0}function Wa(n){return-1==n.h}function oo(n){for(var e=n.g.length,t=[],r=0;r<e;r++)t[r]=~n.g[r];return new yr(t,~n.h).add(dd)}function kg(n,e){return n.add(oo(e))}function Fg(n,e){for(;(65535&n[e])!=n[e];)n[e+1]+=n[e]>>>16,n[e]&=65535,e++}function $f(n,e){this.g=n,this.h=e}function Lg(n,e){if(Dc(e))throw Error("division by zero");if(Dc(n))return new $f(Ku,Ku);if(Wa(n))return e=Lg(oo(n),e),new $f(oo(e.g),oo(e.h));if(Wa(e))return e=Lg(n,oo(e)),new $f(oo(e.g),e.h);if(30<n.g.length){if(Wa(n)||Wa(e))throw Error("slowDivide_ only works with positive integers.");for(var t=dd,r=e;0>=r.X(n);)t=nE(t),r=nE(r);var i=bh(t,1),u=bh(r,1);for(r=bh(r,2),t=bh(t,2);!Dc(r);){var c=u.add(r);0>=c.X(n)&&(i=i.add(t),u=c),r=bh(r,1),t=bh(t,1)}return e=kg(n,i.R(e)),new $f(i,e)}for(i=Ku;0<=n.X(e);){for(t=Math.max(1,Math.floor(n.ea()/e.ea())),r=48>=(r=Math.ceil(Math.log(t)/Math.LN2))?1:Math.pow(2,r-48),c=(u=ea(t)).R(e);Wa(c)||0<c.X(n);)c=(u=ea(t-=r)).R(e);Dc(u)&&(u=dd),i=i.add(u),n=kg(n,c)}return new $f(i,n)}function nE(n){for(var e=n.g.length+1,t=[],r=0;r<e;r++)t[r]=n.D(r)<<1|n.D(r-1)>>>31;return new yr(t,n.h)}function bh(n,e){var t=e>>5;e%=32;for(var r=n.g.length-t,i=[],u=0;u<r;u++)i[u]=0<e?n.D(u+t)>>>e|n.D(u+t+1)<<32-e:n.D(u+t);return new yr(i,n.h)}(kt=yr.prototype).ea=function(){if(Wa(this))return-oo(this).ea();for(var n=0,e=1,t=0;t<this.g.length;t++){var r=this.D(t);n+=(0<=r?r:ld+r)*e,e*=ld}return n},kt.toString=function(n){if(2>(n=n||10)||36<n)throw Error("radix out of range: "+n);if(Dc(this))return"0";if(Wa(this))return"-"+oo(this).toString(n);for(var e=ea(Math.pow(n,6)),t=this,r="";;){var i=Lg(t,e).g,u=((0<(t=kg(t,i.R(e))).g.length?t.g[0]:t.h)>>>0).toString(n);if(Dc(t=i))return u+r;for(;6>u.length;)u="0"+u;r=u+r}},kt.D=function(n){return 0>n?0:n<this.g.length?this.g[n]:this.h},kt.X=function(n){return Wa(n=kg(this,n))?-1:Dc(n)?0:1},kt.abs=function(){return Wa(this)?oo(this):this},kt.add=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0,i=0;i<=e;i++){var u=r+(65535&this.D(i))+(65535&n.D(i)),c=(u>>>16)+(this.D(i)>>>16)+(n.D(i)>>>16);r=c>>>16,t[i]=(c&=65535)<<16|(u&=65535)}return new yr(t,-2147483648&t[t.length-1]?-1:0)},kt.R=function(n){if(Dc(this)||Dc(n))return Ku;if(Wa(this))return Wa(n)?oo(this).R(oo(n)):oo(oo(this).R(n));if(Wa(n))return oo(this.R(oo(n)));if(0>this.X(Ih)&&0>n.X(Ih))return ea(this.ea()*n.ea());for(var e=this.g.length+n.g.length,t=[],r=0;r<2*e;r++)t[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<n.g.length;i++){var u=this.D(r)>>>16,c=65535&this.D(r),p=n.D(i)>>>16,m=65535&n.D(i);t[2*r+2*i]+=c*m,Fg(t,2*r+2*i),t[2*r+2*i+1]+=u*m,Fg(t,2*r+2*i+1),t[2*r+2*i+1]+=c*p,Fg(t,2*r+2*i+1),t[2*r+2*i+2]+=u*p,Fg(t,2*r+2*i+2)}for(r=0;r<e;r++)t[r]=t[2*r+1]<<16|t[2*r];for(r=e;r<2*e;r++)t[r]=0;return new yr(t,0)},kt.gb=function(n){return Lg(this,n).h},kt.and=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)&n.D(r);return new yr(t,this.h&n.h)},kt.or=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)|n.D(r);return new yr(t,this.h|n.h)},kt.xor=function(n){for(var e=Math.max(this.g.length,n.g.length),t=[],r=0;r<e;r++)t[r]=this.D(r)^n.D(r);return new yr(t,this.h^n.h)},Xy.prototype.createWebChannel=Xy.prototype.g,is.prototype.send=is.prototype.u,is.prototype.open=is.prototype.m,is.prototype.close=is.prototype.close,od.NO_ERROR=0,od.TIMEOUT=8,od.HTTP_ERROR=6,P0.COMPLETE="complete",Fy.EventType=Of,Of.OPEN="a",Of.CLOSE="b",Of.ERROR="c",Of.MESSAGE="d",ro.prototype.listen=ro.prototype.O,rs.prototype.listenOnce=rs.prototype.P,rs.prototype.getLastError=rs.prototype.Sa,rs.prototype.getLastErrorCode=rs.prototype.Ia,rs.prototype.getStatus=rs.prototype.da,rs.prototype.getResponseJson=rs.prototype.Wa,rs.prototype.getResponseText=rs.prototype.ja,rs.prototype.send=rs.prototype.ha,rs.prototype.setWithCredentials=rs.prototype.Oa,ss.prototype.digest=ss.prototype.l,ss.prototype.reset=ss.prototype.reset,ss.prototype.update=ss.prototype.j,yr.prototype.add=yr.prototype.add,yr.prototype.multiply=yr.prototype.R,yr.prototype.modulo=yr.prototype.gb,yr.prototype.compare=yr.prototype.X,yr.prototype.toNumber=yr.prototype.ea,yr.prototype.toString=yr.prototype.toString,yr.prototype.getBits=yr.prototype.D,yr.fromNumber=ea,yr.fromString=function Ch(n,e){if(0==n.length)throw Error("number format error: empty string");if(2>(e=e||10)||36<e)throw Error("radix out of range: "+e);if("-"==n.charAt(0))return oo(Ch(n.substring(1),e));if(0<=n.indexOf("-"))throw Error('number format error: interior "-" character');for(var t=ea(Math.pow(e,8)),r=Ku,i=0;i<n.length;i+=8){var u=Math.min(8,n.length-i),c=parseInt(n.substring(i,i+u),e);8>u?(u=ea(Math.pow(e,u)),r=r.R(u).add(ea(c))):r=(r=r.R(t)).add(ea(c))}return r};var rE=Cc.createWebChannelTransport=function(){return new Xy},CA=Cc.getStatEventTarget=function(){return Zu()},nb=Cc.ErrorCode=od,JR=Cc.EventType=P0,IA=Cc.Event=sd,rb=Cc.Stat={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XR=Cc.FetchXmlHttpFactory=kf,t_=Cc.WebChannel=Fy,eN=Cc.XhrIo=rs,bA=Cc.Md5=ss,Gf=Cc.Integer=yr;const ib="@firebase/firestore";class Rs{constructor(e){this.uid=e}isAuthenticated(){return null!=this.uid}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rs.UNAUTHENTICATED=new Rs(null),Rs.GOOGLE_CREDENTIALS=new Rs("google-credentials-uid"),Rs.FIRST_PARTY=new Rs("first-party-uid"),Rs.MOCK_USER=new Rs("mock-user");let Tc="9.23.0";const Sc=new Xi.Yd("@firebase/firestore");function zf(){return Sc.logLevel}function ft(n,...e){if(Sc.logLevel<=Xi.in.DEBUG){const t=e.map(Dh);Sc.debug(`Firestore (${Tc}): ${n}`,...t)}}function os(n,...e){if(Sc.logLevel<=Xi.in.ERROR){const t=e.map(Dh);Sc.error(`Firestore (${Tc}): ${n}`,...t)}}function wu(n,...e){if(Sc.logLevel<=Xi.in.WARN){const t=e.map(Dh);Sc.warn(`Firestore (${Tc}): ${n}`,...t)}}function Dh(n){if("string"==typeof n)return n;try{return JSON.stringify(n)}catch{return n}}function $t(n="Unexpected state"){const e=`FIRESTORE (${Tc}) INTERNAL ASSERTION FAILED: `+n;throw os(e),new Error(e)}function nn(n,e){n||$t()}function Nt(n,e){return n}const je={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class dt extends ee.ZR{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}class as{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}class TA{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class SA{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rs.UNAUTHENTICATED))}shutdown(){}}class AA{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class iE{constructor(e){this.t=e,this.currentUser=Rs.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){var r=this;let i=this.i;const u=b=>this.i!==i?(i=this.i,t(b)):Promise.resolve();let c=new as;this.o=()=>{this.i++,this.currentUser=this.u(),c.resolve(),c=new as,e.enqueueRetryable(()=>u(this.currentUser))};const p=()=>{const b=c;e.enqueueRetryable((0,qe.Z)(function*(){yield b.promise,yield u(r.currentUser)}))},m=b=>{ft("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=b,this.auth.addAuthTokenListener(this.o),p()};this.t.onInit(b=>m(b)),setTimeout(()=>{if(!this.auth){const b=this.t.getImmediate({optional:!0});b?m(b):(ft("FirebaseAuthCredentialsProvider","Auth not yet detected"),c.resolve(),c=new as)}},0),p()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(r=>this.i!==e?(ft("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(nn("string"==typeof r.accessToken),new TA(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return nn(null===e||"string"==typeof e),new Rs(e)}}class MA{constructor(e,t,r){this.h=e,this.l=t,this.m=r,this.type="FirstParty",this.user=Rs.FIRST_PARTY,this.g=new Map}p(){return this.m?this.m():null}get headers(){this.g.set("X-Goog-AuthUser",this.h);const e=this.p();return e&&this.g.set("Authorization",e),this.l&&this.g.set("X-Goog-Iam-Authorization-Token",this.l),this.g}}class ob{constructor(e,t,r){this.h=e,this.l=t,this.m=r}getToken(){return Promise.resolve(new MA(this.h,this.l,this.m))}start(e,t){e.enqueueRetryable(()=>t(Rs.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class ab{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class xA{constructor(e){this.I=e,this.forceRefresh=!1,this.appCheck=null,this.T=null}start(e,t){const r=u=>{null!=u.error&&ft("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${u.error.message}`);const c=u.token!==this.T;return this.T=u.token,ft("FirebaseAppCheckTokenProvider",`Received ${c?"new":"existing"} token.`),c?t(u.token):Promise.resolve()};this.o=u=>{e.enqueueRetryable(()=>r(u))};const i=u=>{ft("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=u,this.appCheck.addTokenListener(this.o)};this.I.onInit(u=>i(u)),setTimeout(()=>{if(!this.appCheck){const u=this.I.getImmediate({optional:!0});u?i(u):ft("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(nn("string"==typeof t.token),this.T=t.token,new ab(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}function ub(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(t);else for(let r=0;r<n;r++)t[r]=Math.floor(256*Math.random());return t}class sE{static A(){const t=62*Math.floor(256/62);let r="";for(;r.length<20;){const i=ub(40);for(let u=0;u<i.length;++u)r.length<20&&i[u]<t&&(r+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789".charAt(i[u]%62))}return r}}function Tn(n,e){return n<e?-1:n>e?1:0}function Wf(n,e,t){return n.length===e.length&&n.every((r,i)=>t(r,e[i]))}function cb(n){return n+"\0"}class Ci{constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new dt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new dt(je.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new dt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new dt(je.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ci.fromMillis(Date.now())}static fromDate(e){return Ci.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*t));return new Ci(t,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?Tn(this.nanoseconds,e.nanoseconds):Tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}class Xt{constructor(e){this.timestamp=e}static fromTimestamp(e){return new Xt(e)}static min(){return new Xt(new Ci(0,0))}static max(){return new Xt(new Ci(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}class Th{constructor(e,t,r){void 0===t?t=0:t>e.length&&$t(),void 0===r?r=e.length-t:r>e.length-t&&$t(),this.segments=e,this.offset=t,this.len=r}get length(){return this.len}isEqual(e){return 0===Th.comparator(this,e)}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Th?e.forEach(r=>{t.push(r)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return this.construct(this.segments,this.offset+(e=void 0===e?1:e),this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return 0===this.length}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,r=this.limit();t<r;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const r=Math.min(e.length,t.length);for(let i=0;i<r;i++){const u=e.get(i),c=t.get(i);if(u<c)return-1;if(u>c)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class _r extends Th{construct(e,t,r){return new _r(e,t,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const t=[];for(const r of e){if(r.indexOf("//")>=0)throw new dt(je.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);t.push(...r.split("/").filter(i=>i.length>0))}return new _r(t)}static emptyPath(){return new _r([])}}const n_=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Ii extends Th{construct(e,t,r){return new Ii(e,t,r)}static isValidIdentifier(e){return n_.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Ii.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return 1===this.length&&"__name__"===this.get(0)}static keyField(){return new Ii(["__name__"])}static fromServerFormat(e){const t=[];let r="",i=0;const u=()=>{if(0===r.length)throw new dt(je.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(r),r=""};let c=!1;for(;i<e.length;){const p=e[i];if("\\"===p){if(i+1===e.length)throw new dt(je.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const m=e[i+1];if("\\"!==m&&"."!==m&&"`"!==m)throw new dt(je.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=m,i+=2}else"`"===p?(c=!c,i++):"."!==p||c?(r+=p,i++):(u(),i++)}if(u(),c)throw new dt(je.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Ii(t)}static emptyPath(){return new Ii([])}}class St{constructor(e){this.path=e}static fromPath(e){return new St(_r.fromString(e))}static fromName(e){return new St(_r.fromString(e).popFirst(5))}static empty(){return new St(_r.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return null!==e&&0===_r.comparator(this.path,e.path)}toString(){return this.path.toString()}static comparator(e,t){return _r.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new St(new _r(e.slice()))}}class Ug{constructor(e,t,r,i){this.indexId=e,this.collectionGroup=t,this.fields=r,this.indexState=i}}function oE(n){return n.fields.find(e=>2===e.kind)}function Sh(n){return n.fields.filter(e=>2!==e.kind)}Ug.UNKNOWN_ID=-1;class qf{constructor(e,t){this.fieldPath=e,this.kind=t}}class Zf{constructor(e,t){this.sequenceNumber=e,this.offset=t}static empty(){return new Zf(0,qa.min())}}function uE(n,e){const t=n.toTimestamp().seconds,r=n.toTimestamp().nanoseconds+1,i=Xt.fromTimestamp(1e9===r?new Ci(t+1,0):new Ci(t,r));return new qa(i,St.empty(),e)}function lb(n){return new qa(n.readTime,n.key,-1)}class qa{constructor(e,t,r){this.readTime=e,this.documentKey=t,this.largestBatchId=r}static min(){return new qa(Xt.min(),St.empty(),-1)}static max(){return new qa(Xt.max(),St.empty(),-1)}}function r_(n,e){let t=n.readTime.compareTo(e.readTime);return 0!==t?t:(t=St.comparator(n.documentKey,e.documentKey),0!==t?t:Tn(n.largestBatchId,e.largestBatchId))}const i_="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class cE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}function Ac(n){return s_.apply(this,arguments)}function s_(){return s_=(0,qe.Z)(function*(n){if(n.code!==je.FAILED_PRECONDITION||n.message!==i_)throw n;ft("LocalStore","Unexpectedly lost primary lease")}),s_.apply(this,arguments)}class ke{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&$t(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new ke((r,i)=>{this.nextCallback=u=>{this.wrapSuccess(e,u).next(r,i)},this.catchCallback=u=>{this.wrapFailure(t,u).next(r,i)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof ke?t:ke.resolve(t)}catch(t){return ke.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):ke.reject(t)}static resolve(e){return new ke((t,r)=>{t(e)})}static reject(e){return new ke((t,r)=>{r(e)})}static waitFor(e){return new ke((t,r)=>{let i=0,u=0,c=!1;e.forEach(p=>{++i,p.next(()=>{++u,c&&u===i&&t()},m=>r(m))}),c=!0,u===i&&t()})}static or(e){let t=ke.resolve(!1);for(const r of e)t=t.next(i=>i?ke.resolve(i):r());return t}static forEach(e,t){const r=[];return e.forEach((i,u)=>{r.push(t.call(this,i,u))}),this.waitFor(r)}static mapArray(e,t){return new ke((r,i)=>{const u=e.length,c=new Array(u);let p=0;for(let m=0;m<u;m++){const b=m;t(e[b]).next(O=>{c[b]=O,++p,p===u&&r(c)},O=>i(O))}})}static doWhile(e,t){return new ke((r,i)=>{const u=()=>{!0===e()?t().next(()=>{u()},i):r()};u()})}}class Vg{constructor(e,t){this.action=e,this.transaction=t,this.aborted=!1,this.v=new as,this.transaction.oncomplete=()=>{this.v.resolve()},this.transaction.onabort=()=>{t.error?this.v.reject(new Bg(e,t.error)):this.v.resolve()},this.transaction.onerror=r=>{const i=jg(r.target.error);this.v.reject(new Bg(e,i))}}static open(e,t,r,i){try{return new Vg(t,e.transaction(i,r))}catch(u){throw new Bg(t,u)}}get R(){return this.v.promise}abort(e){e&&this.v.reject(e),this.aborted||(ft("SimpleDb","Aborting transaction:",e?e.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())}P(){const e=this.transaction;this.aborted||"function"!=typeof e.commit||e.commit()}store(e){const t=this.transaction.objectStore(e);return new OA(t)}}class Cu{constructor(e,t,r){this.name=e,this.version=t,this.V=r,12.2===Cu.S((0,ee.z$)())&&os("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}static delete(e){return ft("SimpleDb","Removing database:",e),Ah(window.indexedDB.deleteDatabase(e)).toPromise()}static D(){if(!(0,ee.hl)())return!1;if(Cu.C())return!0;const e=(0,ee.z$)(),t=Cu.S(e),r=0<t&&t<10,i=Cu.N(e),u=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||u)}static C(){var e;return typeof process<"u"&&"YES"===(null===(e=process.env)||void 0===e?void 0:e.k)}static M(e,t){return e.store(t)}static S(e){const t=e.match(/i(?:phone|pad|pod) os ([\d_]+)/i),r=t?t[1].split("_").slice(0,2).join("."):"-1";return Number(r)}static N(e){const t=e.match(/Android ([\d.]+)/i),r=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(r)}$(e){var t=this;return(0,qe.Z)(function*(){return t.db||(ft("SimpleDb","Opening database:",t.name),t.db=yield new Promise((r,i)=>{const u=indexedDB.open(t.name,t.version);u.onsuccess=c=>{r(c.target.result)},u.onblocked=()=>{i(new Bg(e,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},u.onerror=c=>{const p=c.target.error;i("VersionError"===p.name?new dt(je.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):"InvalidStateError"===p.name?new dt(je.FAILED_PRECONDITION,"Unable to open an IndexedDB connection. This could be due to running in a private browsing session on a browser whose private browsing sessions do not support IndexedDB: "+p):new Bg(e,p))},u.onupgradeneeded=c=>{ft("SimpleDb",'Database "'+t.name+'" requires upgrade from version:',c.oldVersion),t.V.O(c.target.result,u.transaction,c.oldVersion,t.version).next(()=>{ft("SimpleDb","Database upgrade to version "+t.version+" complete")})}})),t.F&&(t.db.onversionchange=r=>t.F(r)),t.db})()}B(e){this.F=e,this.db&&(this.db.onversionchange=t=>e(t))}runTransaction(e,t,r,i){var u=this;return(0,qe.Z)(function*(){const c="readonly"===t;let p=0;for(;;){++p;try{u.db=yield u.$(e);const m=Vg.open(u.db,e,c?"readonly":"readwrite",r),b=i(m).next(O=>(m.P(),O)).catch(O=>(m.abort(O),ke.reject(O))).toPromise();return b.catch(()=>{}),yield m.R,b}catch(m){const b=m,O="FirebaseError"!==b.name&&p<3;if(ft("SimpleDb","Transaction failed with error:",b.message,"Retrying:",O),u.close(),!O)return Promise.reject(b)}}})()}close(){this.db&&this.db.close(),this.db=void 0}}class db{constructor(e){this.L=e,this.q=!1,this.U=null}get isDone(){return this.q}get K(){return this.U}set cursor(e){this.L=e}done(){this.q=!0}G(e){this.U=e}delete(){return Ah(this.L.delete())}}class Bg extends dt{constructor(e,t){super(je.UNAVAILABLE,`IndexedDB transaction '${e}' failed: ${t}`),this.name="IndexedDbTransactionError"}}function hd(n){return"IndexedDbTransactionError"===n.name}class OA{constructor(e){this.store=e}put(e,t){let r;return void 0!==t?(ft("SimpleDb","PUT",this.store.name,e,t),r=this.store.put(t,e)):(ft("SimpleDb","PUT",this.store.name,"<auto-key>",e),r=this.store.put(e)),Ah(r)}add(e){return ft("SimpleDb","ADD",this.store.name,e,e),Ah(this.store.add(e))}get(e){return Ah(this.store.get(e)).next(t=>(void 0===t&&(t=null),ft("SimpleDb","GET",this.store.name,e,t),t))}delete(e){return ft("SimpleDb","DELETE",this.store.name,e),Ah(this.store.delete(e))}count(){return ft("SimpleDb","COUNT",this.store.name),Ah(this.store.count())}j(e,t){const r=this.options(e,t);if(r.index||"function"!=typeof this.store.getAll){const i=this.cursor(r),u=[];return this.W(i,(c,p)=>{u.push(p)}).next(()=>u)}{const i=this.store.getAll(r.range);return new ke((u,c)=>{i.onerror=p=>{c(p.target.error)},i.onsuccess=p=>{u(p.target.result)}})}}H(e,t){const r=this.store.getAll(e,null===t?void 0:t);return new ke((i,u)=>{r.onerror=c=>{u(c.target.error)},r.onsuccess=c=>{i(c.target.result)}})}J(e,t){ft("SimpleDb","DELETE ALL",this.store.name);const r=this.options(e,t);r.Y=!1;const i=this.cursor(r);return this.W(i,(u,c,p)=>p.delete())}X(e,t){let r;t?r=e:(r={},t=e);const i=this.cursor(r);return this.W(i,t)}Z(e){const t=this.cursor({});return new ke((r,i)=>{t.onerror=u=>{const c=jg(u.target.error);i(c)},t.onsuccess=u=>{const c=u.target.result;c?e(c.primaryKey,c.value).next(p=>{p?c.continue():r()}):r()}})}W(e,t){const r=[];return new ke((i,u)=>{e.onerror=c=>{u(c.target.error)},e.onsuccess=c=>{const p=c.target.result;if(!p)return void i();const m=new db(p),b=t(p.primaryKey,p.value,m);if(b instanceof ke){const O=b.catch(U=>(m.done(),ke.reject(U)));r.push(O)}m.isDone?i():null===m.K?p.continue():p.continue(m.K)}}).next(()=>ke.waitFor(r))}options(e,t){let r;return void 0!==e&&("string"==typeof e?r=e:t=e),{index:r,range:t}}cursor(e){let t="next";if(e.reverse&&(t="prev"),e.index){const r=this.store.index(e.index);return e.Y?r.openKeyCursor(e.range,t):r.openCursor(e.range,t)}return this.store.openCursor(e.range,t)}}function Ah(n){return new ke((e,t)=>{n.onsuccess=r=>{e(r.target.result)},n.onerror=r=>{const i=jg(r.target.error);t(i)}})}let o_=!1;function jg(n){const e=Cu.S((0,ee.z$)());if(e>=12.2&&e<13){const t="An internal error was encountered in the Indexed Database server";if(n.message.indexOf(t)>=0){const r=new dt("internal",`IOS_INDEXEDDB_BUG1: IndexedDb has thrown '${t}'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.`);return o_||(o_=!0,setTimeout(()=>{throw r},0)),r}}return n}class hb{constructor(e,t){this.asyncQueue=e,this.tt=t,this.task=null}start(){this.et(15e3)}stop(){this.task&&(this.task.cancel(),this.task=null)}get started(){return null!==this.task}et(e){var t=this;ft("IndexBackiller",`Scheduled in ${e}ms`),this.task=this.asyncQueue.enqueueAfterDelay("index_backfill",e,(0,qe.Z)(function*(){t.task=null;try{ft("IndexBackiller",`Documents written: ${yield t.tt.nt()}`)}catch(r){hd(r)?ft("IndexBackiller","Ignoring IndexedDB error during index backfill: ",r):yield Ac(r)}yield t.et(6e4)}))}}class fb{constructor(e,t){this.localStore=e,this.persistence=t}nt(e=50){var t=this;return(0,qe.Z)(function*(){return t.persistence.runTransaction("Backfill Indexes","readwrite-primary",r=>t.st(r,e))})()}st(e,t){const r=new Set;let i=t,u=!0;return ke.doWhile(()=>!0===u&&i>0,()=>this.localStore.indexManager.getNextCollectionGroupToUpdate(e).next(c=>{if(null!==c&&!r.has(c))return ft("IndexBackiller",`Processing collection: ${c}`),this.it(e,c,i).next(p=>{i-=p,r.add(c)});u=!1})).next(()=>t-i)}it(e,t,r){return this.localStore.indexManager.getMinOffsetFromCollectionGroup(e,t).next(i=>this.localStore.localDocuments.getNextDocuments(e,t,i,r).next(u=>{const c=u.changes;return this.localStore.indexManager.updateIndexEntries(e,c).next(()=>this.rt(i,u)).next(p=>(ft("IndexBackiller",`Updating offset: ${p}`),this.localStore.indexManager.updateCollectionGroup(e,t,p))).next(()=>c.size)}))}rt(e,t){let r=e;return t.changes.forEach((i,u)=>{const c=lb(u);r_(c,r)>0&&(r=c)}),new qa(r.readTime,r.documentKey,Math.max(t.batchId,e.largestBatchId))}}let Ta=(()=>{class n{constructor(t,r){this.previousValue=t,r&&(r.sequenceNumberHandler=i=>this.ot(i),this.ut=i=>r.writeSequenceNumber(i))}ot(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ut&&this.ut(t),t}}return n.ct=-1,n})();function Kf(n){return null==n}function Yf(n){return 0===n&&1/n==-1/0}function lE(n){return"number"==typeof n&&Number.isInteger(n)&&!Yf(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}function bo(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=Hg(e)),e=pb(n.get(t),e);return Hg(e)}function pb(n,e){let t=e;const r=n.length;for(let i=0;i<r;i++){const u=n.charAt(i);switch(u){case"\0":t+="\x01\x10";break;case"\x01":t+="\x01\x11";break;default:t+=u}}return t}function Hg(n){return n+"\x01\x01"}function Do(n){const e=n.length;if(nn(e>=2),2===e)return nn("\x01"===n.charAt(0)&&"\x01"===n.charAt(1)),_r.emptyPath();const t=e-2,r=[];let i="";for(let u=0;u<e;){const c=n.indexOf("\x01",u);switch((c<0||c>t)&&$t(),n.charAt(c+1)){case"\x01":const p=n.substring(u,c);let m;0===i.length?m=p:(i+=p,m=i,i=""),r.push(m);break;case"\x10":i+=n.substring(u,c),i+="\0";break;case"\x11":i+=n.substring(u,c+1);break;default:$t()}u=c+2}return new _r(r)}const gb=["userId","batchId"];function a_(n,e){return[n,bo(e)]}function u_(n,e,t){return[n,bo(e),t]}const Mh={},dE=["prefixPath","collectionGroup","readTime","documentId"],PA=["prefixPath","collectionGroup","documentId"],hE=["collectionGroup","readTime","prefixPath","documentId"],tN=["canonicalId","targetId"],nN=["targetId","path"],kA=["path","targetId"],FA=["collectionId","parent"],mb=["indexId","uid"],LA=["uid","sequenceNumber"],Gs=["indexId","uid","arrayValue","directionalValue","orderedDocumentKey","documentKey"],yb=["indexId","uid","orderedDocumentKey"],UA=["userId","collectionPath","documentId"],VA=["userId","collectionPath","largestBatchId"],_b=["userId","collectionGroup","largestBatchId"],vb=["mutationQueues","mutations","documentMutations","remoteDocuments","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries"],Eb=[...vb,"documentOverlays"],fE=["mutationQueues","mutations","documentMutations","remoteDocumentsV14","targets","owner","targetGlobal","targetDocuments","clientMetadata","remoteDocumentGlobal","collectionParents","bundles","namedQueries","documentOverlays"],xh=fE,BA=[...xh,"indexConfiguration","indexState","indexEntries"];class pE extends cE{constructor(e,t){super(),this.ht=e,this.currentSequenceNumber=t}}function zs(n,e){const t=Nt(n);return Cu.M(t.ht,e)}function wb(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function hl(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function jA(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}class si{constructor(e,t){this.comparator=e,this.root=t||ci.EMPTY}insert(e,t){return new si(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,ci.BLACK,null,null))}remove(e){return new si(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ci.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const r=this.comparator(e,t.key);if(0===r)return t.value;r<0?t=t.left:r>0&&(t=t.right)}return null}indexOf(e){let t=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(0===i)return t+r.left.size;i<0?r=r.left:(t+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,r)=>(e(t,r),!1))}toString(){const e=[];return this.inorderTraversal((t,r)=>(e.push(`${t}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new Qf(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new Qf(this.root,e,this.comparator,!1)}getReverseIterator(){return new Qf(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new Qf(this.root,e,this.comparator,!0)}}class Qf{constructor(e,t,r,i){this.isReverse=i,this.nodeStack=[];let u=1;for(;!e.isEmpty();)if(u=t?r(e.key,t):1,t&&i&&(u*=-1),u<0)e=this.isReverse?e.left:e.right;else{if(0===u){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(0===this.nodeStack.length)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ci{constructor(e,t,r,i,u){this.key=e,this.value=t,this.color=r??ci.RED,this.left=i??ci.EMPTY,this.right=u??ci.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,r,i,u){return new ci(e??this.key,t??this.value,r??this.color,i??this.left,u??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,r){let i=this;const u=r(e,i.key);return i=u<0?i.copy(null,null,null,i.left.insert(e,t,r),null):0===u?i.copy(null,t,null,null,null):i.copy(null,null,null,null,i.right.insert(e,t,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ci.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let r,i=this;if(t(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,t),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===t(e,i.key)){if(i.right.isEmpty())return ci.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,t))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ci.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ci.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw $t();const e=this.left.check();if(e!==this.right.check())throw $t();return e+(this.isRed()?0:1)}}ci.EMPTY=null,ci.RED=!0,ci.BLACK=!1,ci.EMPTY=new class{constructor(){this.size=0}get key(){throw $t()}get value(){throw $t()}get color(){throw $t()}get left(){throw $t()}get right(){throw $t()}copy(n,e,t,r,i){return this}insert(n,e,t){return new ci(n,e)}remove(n,e){return this}isEmpty(){return!0}inorderTraversal(n){return!1}reverseTraversal(n){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};class bi{constructor(e){this.comparator=e,this.data=new si(this.comparator)}has(e){return null!==this.data.get(e)}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,r)=>(e(t),!1))}forEachInRange(e,t){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;t(i.key)}}forEachWhile(e,t){let r;for(r=void 0!==t?this.data.getIteratorFrom(t):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new Cb(this.data.getIterator())}getIteratorFrom(e){return new Cb(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(r=>{t=t.add(r)}),t}isEqual(e){if(!(e instanceof bi)||this.size!==e.size)return!1;const t=this.data.getIterator(),r=e.data.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(0!==this.comparator(i,u))return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new bi(this.comparator);return t.data=e,t}}class Cb{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}function ta(n){return n.hasNext()?n.getNext():void 0}class Oi{constructor(e){this.fields=e,e.sort(Ii.comparator)}static empty(){return new Oi([])}unionWith(e){let t=new bi(Ii.comparator);for(const r of this.fields)t=t.add(r);for(const r of e)t=t.add(r);return new Oi(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Wf(this.fields,e.fields,(t,r)=>t.isEqual(r))}}class Iu extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}class Ns{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new Iu("Invalid base64 string: "+i):i}}(e);return new Ns(t)}static fromUint8Array(e){const t=function(r){let i="";for(let u=0;u<r.length;++u)i+=String.fromCharCode(r[u]);return i}(e);return new Ns(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return btoa(this.binaryString)}toUint8Array(){return function(e){const t=new Uint8Array(e.length);for(let r=0;r<e.length;r++)t[r]=e.charCodeAt(r);return t}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Ns.EMPTY_BYTE_STRING=new Ns("");const HA=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function fd(n){if(nn(!!n),"string"==typeof n){let e=0;const t=HA.exec(n);if(nn(!!t),t[1]){let i=t[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(n);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:us(n.seconds),nanos:us(n.nanos)}}function us(n){return"number"==typeof n?n:"string"==typeof n?Number(n):0}function fl(n){return"string"==typeof n?Ns.fromBase64String(n):Ns.fromUint8Array(n)}function Jf(n){var e,t;return"server_timestamp"===(null===(t=((null===(e=n?.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===t?void 0:t.stringValue)}function pd(n){const e=n.mapValue.fields.__previous_value__;return Jf(e)?pd(e):e}function $g(n){const e=fd(n.mapValue.fields.__local_write_time__.timestampValue);return new Ci(e.seconds,e.nanos)}class bb{constructor(e,t,r,i,u,c,p,m,b){this.databaseId=e,this.appId=t,this.persistenceKey=r,this.host=i,this.ssl=u,this.forceLongPolling=c,this.autoDetectLongPolling=p,this.longPollingOptions=m,this.useFetchStreams=b}}class gd{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new gd("","")}get isDefaultDatabase(){return"(default)"===this.database}isEqual(e){return e instanceof gd&&e.projectId===this.projectId&&e.database===this.database}}const md={mapValue:{fields:{__type__:{stringValue:"__max__"}}}},Gg={nullValue:"NULL_VALUE"};function pl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?Jf(n)?4:vE(n)?9007199254740991:10:$t()}function Za(n,e){if(n===e)return!0;const t=pl(n);if(t!==pl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return $g(n).isEqual($g(e));case 3:return function(r,i){if("string"==typeof r.timestampValue&&"string"==typeof i.timestampValue&&r.timestampValue.length===i.timestampValue.length)return r.timestampValue===i.timestampValue;const u=fd(r.timestampValue),c=fd(i.timestampValue);return u.seconds===c.seconds&&u.nanos===c.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return i=e,fl(n.bytesValue).isEqual(fl(i.bytesValue));case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,i){return us(r.geoPointValue.latitude)===us(i.geoPointValue.latitude)&&us(r.geoPointValue.longitude)===us(i.geoPointValue.longitude)}(n,e);case 2:return function(r,i){if("integerValue"in r&&"integerValue"in i)return us(r.integerValue)===us(i.integerValue);if("doubleValue"in r&&"doubleValue"in i){const u=us(r.doubleValue),c=us(i.doubleValue);return u===c?Yf(u)===Yf(c):isNaN(u)&&isNaN(c)}return!1}(n,e);case 9:return Wf(n.arrayValue.values||[],e.arrayValue.values||[],Za);case 10:return function(r,i){const u=r.mapValue.fields||{},c=i.mapValue.fields||{};if(wb(u)!==wb(c))return!1;for(const p in u)if(u.hasOwnProperty(p)&&(void 0===c[p]||!Za(u[p],c[p])))return!1;return!0}(n,e);default:return $t()}var i}function zg(n,e){return void 0!==(n.values||[]).find(t=>Za(t,e))}function gl(n,e){if(n===e)return 0;const t=pl(n),r=pl(e);if(t!==r)return Tn(t,r);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tn(n.booleanValue,e.booleanValue);case 2:return function(i,u){const c=us(i.integerValue||i.doubleValue),p=us(u.integerValue||u.doubleValue);return c<p?-1:c>p?1:c===p?0:isNaN(c)?isNaN(p)?0:-1:1}(n,e);case 3:return gE(n.timestampValue,e.timestampValue);case 4:return gE($g(n),$g(e));case 5:return Tn(n.stringValue,e.stringValue);case 6:return function(i,u){const c=fl(i),p=fl(u);return c.compareTo(p)}(n.bytesValue,e.bytesValue);case 7:return function(i,u){const c=i.split("/"),p=u.split("/");for(let m=0;m<c.length&&m<p.length;m++){const b=Tn(c[m],p[m]);if(0!==b)return b}return Tn(c.length,p.length)}(n.referenceValue,e.referenceValue);case 8:return function(i,u){const c=Tn(us(i.latitude),us(u.latitude));return 0!==c?c:Tn(us(i.longitude),us(u.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return function(i,u){const c=i.values||[],p=u.values||[];for(let m=0;m<c.length&&m<p.length;++m){const b=gl(c[m],p[m]);if(b)return b}return Tn(c.length,p.length)}(n.arrayValue,e.arrayValue);case 10:return function(i,u){if(i===md.mapValue&&u===md.mapValue)return 0;if(i===md.mapValue)return 1;if(u===md.mapValue)return-1;const c=i.fields||{},p=Object.keys(c),m=u.fields||{},b=Object.keys(m);p.sort(),b.sort();for(let O=0;O<p.length&&O<b.length;++O){const U=Tn(p[O],b[O]);if(0!==U)return U;const J=gl(c[p[O]],m[b[O]]);if(0!==J)return J}return Tn(p.length,b.length)}(n.mapValue,e.mapValue);default:throw $t()}}function gE(n,e){if("string"==typeof n&&"string"==typeof e&&n.length===e.length)return Tn(n,e);const t=fd(n),r=fd(e),i=Tn(t.seconds,r.seconds);return 0!==i?i:Tn(t.nanos,r.nanos)}function Rh(n){return mE(n)}function mE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(r){const i=fd(r);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?fl(n.bytesValue).toBase64():"referenceValue"in n?St.fromName(n.referenceValue).toString():"geoPointValue"in n?`geo(${(e=n.geoPointValue).latitude},${e.longitude})`:"arrayValue"in n?function(r){let i="[",u=!0;for(const c of r.values||[])u?u=!1:i+=",",i+=mE(c);return i+"]"}(n.arrayValue):"mapValue"in n?function(r){const i=Object.keys(r.fields||{}).sort();let u="{",c=!0;for(const p of i)c?c=!1:u+=",",u+=`${p}:${mE(r.fields[p])}`;return u+"}"}(n.mapValue):$t();var e}function ml(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function Xf(n){return!!n&&"integerValue"in n}function ep(n){return!!n&&"arrayValue"in n}function yE(n){return!!n&&"nullValue"in n}function _E(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Wg(n){return!!n&&"mapValue"in n}function tp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&"object"==typeof n.timestampValue)return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return hl(n.mapValue.fields,(t,r)=>e.mapValue.fields[t]=tp(r)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=tp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function vE(n){return"__max__"===(((n.mapValue||{}).fields||{}).__type__||{}).stringValue}function Db(n){return"nullValue"in n?Gg:"booleanValue"in n?{booleanValue:!1}:"integerValue"in n||"doubleValue"in n?{doubleValue:NaN}:"timestampValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"stringValue"in n?{stringValue:""}:"bytesValue"in n?{bytesValue:""}:"referenceValue"in n?ml(gd.empty(),St.empty()):"geoPointValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"arrayValue"in n?{arrayValue:{}}:"mapValue"in n?{mapValue:{}}:$t()}function Tb(n){return"nullValue"in n?{booleanValue:!1}:"booleanValue"in n?{doubleValue:NaN}:"integerValue"in n||"doubleValue"in n?{timestampValue:{seconds:Number.MIN_SAFE_INTEGER}}:"timestampValue"in n?{stringValue:""}:"stringValue"in n?{bytesValue:""}:"bytesValue"in n?ml(gd.empty(),St.empty()):"referenceValue"in n?{geoPointValue:{latitude:-90,longitude:-180}}:"geoPointValue"in n?{arrayValue:{}}:"arrayValue"in n?{mapValue:{}}:"mapValue"in n?md:$t()}function Sb(n,e){const t=gl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?-1:!n.inclusive&&e.inclusive?1:0}function Ab(n,e){const t=gl(n.value,e.value);return 0!==t?t:n.inclusive&&!e.inclusive?1:!n.inclusive&&e.inclusive?-1:0}class To{constructor(e){this.value=e}static empty(){return new To({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let r=0;r<e.length-1;++r)if(t=(t.mapValue.fields||{})[e.get(r)],!Wg(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=tp(t)}setAll(e){let t=Ii.emptyPath(),r={},i=[];e.forEach((c,p)=>{if(!t.isImmediateParentOf(p)){const m=this.getFieldsMap(t);this.applyChanges(m,r,i),r={},i=[],t=p.popLast()}c?r[p.lastSegment()]=tp(c):i.push(p.lastSegment())});const u=this.getFieldsMap(t);this.applyChanges(u,r,i)}delete(e){const t=this.field(e.popLast());Wg(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return Za(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=t.mapValue.fields[e.get(r)];Wg(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},t.mapValue.fields[e.get(r)]=i),t=i}return t.mapValue.fields}applyChanges(e,t,r){hl(t,(i,u)=>e[i]=u);for(const i of r)delete e[i]}clone(){return new To(tp(this.value))}}function Mb(n){const e=[];return hl(n.fields,(t,r)=>{const i=new Ii([t]);if(Wg(r)){const u=Mb(r.mapValue).fields;if(0===u.length)e.push(i);else for(const c of u)e.push(i.child(c))}else e.push(i)}),new Oi(e)}class Di{constructor(e,t,r,i,u,c,p){this.key=e,this.documentType=t,this.version=r,this.readTime=i,this.createTime=u,this.data=c,this.documentState=p}static newInvalidDocument(e){return new Di(e,0,Xt.min(),Xt.min(),Xt.min(),To.empty(),0)}static newFoundDocument(e,t,r,i){return new Di(e,1,t,Xt.min(),r,i,0)}static newNoDocument(e,t){return new Di(e,2,t,Xt.min(),Xt.min(),To.empty(),0)}static newUnknownDocument(e,t){return new Di(e,3,t,Xt.min(),Xt.min(),To.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xt.min())||2!==this.documentType&&0!==this.documentType||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=To.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=To.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return 1===this.documentState}get hasCommittedMutations(){return 2===this.documentState}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return 0!==this.documentType}isFoundDocument(){return 1===this.documentType}isNoDocument(){return 2===this.documentType}isUnknownDocument(){return 3===this.documentType}isEqual(e){return e instanceof Di&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Di(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}class yd{constructor(e,t){this.position=e,this.inclusive=t}}function xb(n,e,t){let r=0;for(let i=0;i<n.position.length;i++){const u=e[i],c=n.position[i];if(r=u.field.isKeyField()?St.comparator(St.fromName(c.referenceValue),t.key):gl(c,t.data.field(u.field)),"desc"===u.dir&&(r*=-1),0!==r)break}return r}function Rb(n,e){if(null===n)return null===e;if(null===e||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!Za(n.position[t],e.position[t]))return!1;return!0}class np{constructor(e,t="asc"){this.field=e,this.dir=t}}function $A(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}class Nb{}class ur extends Nb{constructor(e,t,r){super(),this.field=e,this.op=t,this.value=r}static create(e,t,r){return e.isKeyField()?"in"===t||"not-in"===t?this.createKeyFieldInFilter(e,t,r):new Pb(e,t,r):"array-contains"===t?new Lb(e,r):"in"===t?new SE(e,r):"not-in"===t?new Ub(e,r):"array-contains-any"===t?new Vb(e,r):new ur(e,t,r)}static createKeyFieldInFilter(e,t,r){return"in"===t?new kb(e,r):new Fb(e,r)}matches(e){const t=e.data.field(this.field);return"!="===this.op?null!==t&&this.matchesComparison(gl(t,this.value)):null!==t&&pl(this.value)===pl(t)&&this.matchesComparison(gl(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return 0===e;case"!=":return 0!==e;case">":return e>0;case">=":return e>=0;default:return $t()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class $r extends Nb{constructor(e,t){super(),this.filters=e,this.op=t,this.lt=null}static create(e,t){return new $r(e,t)}matches(e){return rp(this)?void 0===this.filters.find(t=>!t.matches(e)):void 0!==this.filters.find(t=>t.matches(e))}getFlattenedFilters(){return null!==this.lt||(this.lt=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.lt}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.ft(t=>t.isInequality());return null!==e?e.field:null}ft(e){for(const t of this.getFlattenedFilters())if(e(t))return t;return null}}function rp(n){return"and"===n.op}function EE(n){return"or"===n.op}function wE(n){return Ob(n)&&rp(n)}function Ob(n){for(const e of n.filters)if(e instanceof $r)return!1;return!0}function CE(n){if(n instanceof ur)return n.field.canonicalString()+n.op.toString()+Rh(n.value);if(wE(n))return n.filters.map(e=>CE(e)).join(",");{const e=n.filters.map(t=>CE(t)).join(",");return`${n.op}(${e})`}}function IE(n,e){return n instanceof ur?(t=n,(r=e)instanceof ur&&t.op===r.op&&t.field.isEqual(r.field)&&Za(t.value,r.value)):n instanceof $r?function(t,r){return r instanceof $r&&t.op===r.op&&t.filters.length===r.filters.length&&t.filters.reduce((i,u,c)=>i&&IE(u,r.filters[c]),!0)}(n,e):void $t();var t,r}function bE(n,e){const t=n.filters.concat(e);return $r.create(t,n.op)}function DE(n){return n instanceof ur?`${(e=n).field.canonicalString()} ${e.op} ${Rh(e.value)}`:n instanceof $r?function(e){return e.op.toString()+" {"+e.getFilters().map(DE).join(" ,")+"}"}(n):"Filter";var e}class Pb extends ur{constructor(e,t,r){super(e,t,r),this.key=St.fromName(r.referenceValue)}matches(e){const t=St.comparator(e.key,this.key);return this.matchesComparison(t)}}class kb extends ur{constructor(e,t){super(e,"in",t),this.keys=TE(0,t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class Fb extends ur{constructor(e,t){super(e,"not-in",t),this.keys=TE(0,t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function TE(n,e){var t;return((null===(t=e.arrayValue)||void 0===t?void 0:t.values)||[]).map(r=>St.fromName(r.referenceValue))}class Lb extends ur{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return ep(t)&&zg(t.arrayValue,this.value)}}class SE extends ur{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return null!==t&&zg(this.value.arrayValue,t)}}class Ub extends ur{constructor(e,t){super(e,"not-in",t)}matches(e){if(zg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return null!==t&&!zg(this.value.arrayValue,t)}}class Vb extends ur{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!ep(t)||!t.arrayValue.values)&&t.arrayValue.values.some(r=>zg(this.value.arrayValue,r))}}class Nh{constructor(e,t=null,r=[],i=[],u=null,c=null,p=null){this.path=e,this.collectionGroup=t,this.orderBy=r,this.filters=i,this.limit=u,this.startAt=c,this.endAt=p,this.dt=null}}function AE(n,e=null,t=[],r=[],i=null,u=null,c=null){return new Nh(n,e,t,r,i,u,c)}function Oh(n){const e=Nt(n);if(null===e.dt){let t=e.path.canonicalString();null!==e.collectionGroup&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(r=>CE(r)).join(","),t+="|ob:",t+=e.orderBy.map(r=>{return(i=r).field.canonicalString()+i.dir;var i}).join(","),Kf(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rh(r)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rh(r)).join(",")),e.dt=t}return e.dt}function Mc(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!$A(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!IE(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!Rb(n.startAt,e.startAt)&&Rb(n.endAt,e.endAt)}function ME(n){return St.isDocumentKey(n.path)&&null===n.collectionGroup&&0===n.filters.length}function ip(n,e){return n.filters.filter(t=>t instanceof ur&&t.field.isEqual(e))}function GA(n,e,t){let r=Gg,i=!0;for(const u of ip(n,e)){let c=Gg,p=!0;switch(u.op){case"<":case"<=":c=Db(u.value);break;case"==":case"in":case">=":c=u.value;break;case">":c=u.value,p=!1;break;case"!=":case"not-in":c=Gg}Sb({value:r,inclusive:i},{value:c,inclusive:p})<0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Sb({value:r,inclusive:i},{value:c,inclusive:t.inclusive})<0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}function xE(n,e,t){let r=md,i=!0;for(const u of ip(n,e)){let c=md,p=!0;switch(u.op){case">=":case">":c=Tb(u.value),p=!1;break;case"==":case"in":case"<=":c=u.value;break;case"<":c=u.value,p=!1;break;case"!=":case"not-in":c=md}Ab({value:r,inclusive:i},{value:c,inclusive:p})>0&&(r=c,i=p)}if(null!==t)for(let u=0;u<n.orderBy.length;++u)if(n.orderBy[u].field.isEqual(e)){const c=t.position[u];Ab({value:r,inclusive:i},{value:c,inclusive:t.inclusive})>0&&(r=c,i=t.inclusive);break}return{value:r,inclusive:i}}class xc{constructor(e,t=null,r=[],i=[],u=null,c="F",p=null,m=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=r,this.filters=i,this.limit=u,this.limitType=c,this.startAt=p,this.endAt=m,this.wt=null,this._t=null}}function zA(n,e,t,r,i,u,c,p){return new xc(n,e,t,r,i,u,c,p)}function an(n){return new xc(n)}function Bb(n){return 0===n.filters.length&&null===n.limit&&null==n.startAt&&null==n.endAt&&(0===n.explicitOrderBy.length||1===n.explicitOrderBy.length&&n.explicitOrderBy[0].field.isKeyField())}function RE(n){return n.explicitOrderBy.length>0?n.explicitOrderBy[0].field:null}function l_(n){for(const e of n.filters){const t=e.getFirstInequalityField();if(null!==t)return t}return null}function _d(n){return null!==n.collectionGroup}function Ph(n){const e=Nt(n);if(null===e.wt){e.wt=[];const t=l_(e),r=RE(e);if(null!==t&&null===r)t.isKeyField()||e.wt.push(new np(t)),e.wt.push(new np(Ii.keyField(),"asc"));else{let i=!1;for(const u of e.explicitOrderBy)e.wt.push(u),u.field.isKeyField()&&(i=!0);if(!i){const u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.wt.push(new np(Ii.keyField(),u))}}}return e.wt}function ao(n){const e=Nt(n);if(!e._t)if("F"===e.limitType)e._t=AE(e.path,e.collectionGroup,Ph(e),e.filters,e.limit,e.startAt,e.endAt);else{const t=[];for(const u of Ph(e))t.push(new np(u.field,"desc"===u.dir?"asc":"desc"));const r=e.endAt?new yd(e.endAt.position,e.endAt.inclusive):null,i=e.startAt?new yd(e.startAt.position,e.startAt.inclusive):null;e._t=AE(e.path,e.collectionGroup,t,e.filters,e.limit,r,i)}return e._t}function sp(n,e){e.getFirstInequalityField(),l_(n);const t=n.filters.concat([e]);return new xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function Ti(n,e,t){return new xc(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function d_(n,e){return Mc(ao(n),ao(e))&&n.limitType===e.limitType}function NE(n){return`${Oh(ao(n))}|lt:${n.limitType}`}function h_(n){return`Query(target=${function(e){let t=e.path.canonicalString();return null!==e.collectionGroup&&(t+=" collectionGroup="+e.collectionGroup),e.filters.length>0&&(t+=`, filters: [${e.filters.map(r=>DE(r)).join(", ")}]`),Kf(e.limit)||(t+=", limit: "+e.limit),e.orderBy.length>0&&(t+=`, orderBy: [${e.orderBy.map(r=>{return`${(i=r).field.canonicalString()} (${i.dir})`;var i}).join(", ")}]`),e.startAt&&(t+=", startAt: ",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(r=>Rh(r)).join(",")),e.endAt&&(t+=", endAt: ",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(r=>Rh(r)).join(",")),`Target(${t})`}(ao(n))}; limitType=${n.limitType})`}function qg(n,e){return e.isFoundDocument()&&function(t,r){const i=r.key.path;return null!==t.collectionGroup?r.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(i):St.isDocumentKey(t.path)?t.path.isEqual(i):t.path.isImmediateParentOf(i)}(n,e)&&function(t,r){for(const i of Ph(t))if(!i.field.isKeyField()&&null===r.data.field(i.field))return!1;return!0}(n,e)&&function(t,r){for(const i of t.filters)if(!i.matches(r))return!1;return!0}(n,e)&&(r=e,!((t=n).startAt&&!function(i,u,c){const p=xb(i,u,c);return i.inclusive?p<=0:p<0}(t.startAt,Ph(t),r)||t.endAt&&!function(i,u,c){const p=xb(i,u,c);return i.inclusive?p>=0:p>0}(t.endAt,Ph(t),r)));var t,r}function OE(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function PE(n){return(e,t)=>{let r=!1;for(const i of Ph(n)){const u=jb(i,e,t);if(0!==u)return u;r=r||i.field.isKeyField()}return 0}}function jb(n,e,t){const r=n.field.isKeyField()?St.comparator(e.key,t.key):function(i,u,c){const p=u.data.field(i),m=c.data.field(i);return null!==p&&null!==m?gl(p,m):$t()}(n.field,e,t);switch(n.dir){case"asc":return r;case"desc":return-1*r;default:return $t()}}class Rc{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0!==r)for(const[i,u]of r)if(this.equalsFn(i,e))return u}has(e){return void 0!==this.get(e)}set(e,t){const r=this.mapKeyFn(e),i=this.inner[r];if(void 0===i)return this.inner[r]=[[e,t]],void this.innerSize++;for(let u=0;u<i.length;u++)if(this.equalsFn(i[u][0],e))return void(i[u]=[e,t]);i.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),r=this.inner[t];if(void 0===r)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return 1===r.length?delete this.inner[t]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){hl(this.inner,(t,r)=>{for(const[i,u]of r)e(i,u)})}isEmpty(){return jA(this.inner)}size(){return this.innerSize}}const WA=new si(St.comparator);function Sa(){return WA}const Hb=new si(St.comparator);function yl(...n){let e=Hb;for(const t of n)e=e.insert(t.key,t);return e}function $b(n){let e=Hb;return n.forEach((t,r)=>e=e.insert(t,r.overlayedDocument)),e}function Nc(){return vd()}function Gb(){return vd()}function vd(){return new Rc(n=>n.toString(),(n,e)=>n.isEqual(e))}const zb=new si(St.comparator),Wb=new bi(St.comparator);function kn(...n){let e=Wb;for(const t of n)e=e.add(t);return e}const qA=new bi(Tn);function kh(){return qA}function op(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yf(e)?"-0":e}}function qb(n){return{integerValue:""+n}}function Zb(n,e){return lE(e)?qb(e):op(n,e)}class f_{constructor(){this._=void 0}}function Kb(n,e,t){return n instanceof ap?function(r,i){const u={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return i&&Jf(i)&&(i=pd(i)),i&&(u.fields.__previous_value__=i),{mapValue:u}}(t,e):n instanceof Ed?Qb(n,e):n instanceof Fh?ZA(n,e):function(r,i){const u=kE(r,i),c=KA(u)+KA(r.gt);return Xf(u)&&Xf(r.gt)?qb(c):op(r.serializer,c)}(n,e)}function Yb(n,e,t){return n instanceof Ed?Qb(n,e):n instanceof Fh?ZA(n,e):t}function kE(n,e){return n instanceof Zg?Xf(t=e)||(r=t)&&"doubleValue"in r?e:{integerValue:0}:null;var r,t}class ap extends f_{}class Ed extends f_{constructor(e){super(),this.elements=e}}function Qb(n,e){const t=YA(e);for(const r of n.elements)t.some(i=>Za(i,r))||t.push(r);return{arrayValue:{values:t}}}class Fh extends f_{constructor(e){super(),this.elements=e}}function ZA(n,e){let t=YA(e);for(const r of n.elements)t=t.filter(i=>!Za(i,r));return{arrayValue:{values:t}}}class Zg extends f_{constructor(e,t){super(),this.serializer=e,this.gt=t}}function KA(n){return us(n.integerValue||n.doubleValue)}function YA(n){return ep(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}class up{constructor(e,t){this.field=e,this.transform=t}}class QA{constructor(e,t){this.version=e,this.transformResults=t}}class Pi{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Pi}static exists(e){return new Pi(void 0,e)}static updateTime(e){return new Pi(e)}get isNone(){return void 0===this.updateTime&&void 0===this.exists}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Kg(n,e){return void 0!==n.updateTime?e.isFoundDocument()&&e.version.isEqual(n.updateTime):void 0===n.exists||n.exists===e.isFoundDocument()}class wd{}function Jb(n,e){if(!n.hasLocalMutations||e&&0===e.fields.length)return null;if(null===e)return n.isNoDocument()?new dp(n.key,Pi.none()):new cp(n.key,n.data,Pi.none());{const t=n.data,r=To.empty();let i=new bi(Ii.comparator);for(let u of e.fields)if(!i.has(u)){let c=t.field(u);null===c&&u.length>1&&(u=u.popLast(),c=t.field(u)),null===c?r.delete(u):r.set(u,c),i=i.add(u)}return new Oc(n.key,r,new Oi(i.toArray()),Pi.none())}}function JA(n,e,t){n instanceof cp?function(r,i,u){const c=r.value.clone(),p=eD(r.fieldTransforms,i,u.transformResults);c.setAll(p),i.convertToFoundDocument(u.version,c).setHasCommittedMutations()}(n,e,t):n instanceof Oc?function(r,i,u){if(!Kg(r.precondition,i))return void i.convertToUnknownDocument(u.version);const c=eD(r.fieldTransforms,i,u.transformResults),p=i.data;p.setAll(Xb(r)),p.setAll(c),i.convertToFoundDocument(u.version,p).setHasCommittedMutations()}(n,e,t):e.convertToNoDocument(t.version).setHasCommittedMutations()}function Yg(n,e,t,r){return n instanceof cp?function(i,u,c,p){if(!Kg(i.precondition,u))return c;const m=i.value.clone(),b=lp(i.fieldTransforms,p,u);return m.setAll(b),u.convertToFoundDocument(u.version,m).setHasLocalMutations(),null}(n,e,t,r):n instanceof Oc?function(i,u,c,p){if(!Kg(i.precondition,u))return c;const m=lp(i.fieldTransforms,p,u),b=u.data;return b.setAll(Xb(i)),b.setAll(m),u.convertToFoundDocument(u.version,b).setHasLocalMutations(),null===c?null:c.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(O=>O.field))}(n,e,t,r):(c=t,Kg(n.precondition,u=e)?(u.convertToNoDocument(u.version).setHasLocalMutations(),null):c);var u,c}function XA(n,e){let t=null;for(const r of n.fieldTransforms){const i=e.data.field(r.field),u=kE(r.transform,i||null);null!=u&&(null===t&&(t=To.empty()),t.set(r.field,u))}return t||null}function eM(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&(r=e.fieldTransforms,!!(void 0===(t=n.fieldTransforms)&&void 0===r||t&&r&&Wf(t,r,(i,u)=>function p_(n,e){return n.field.isEqual(e.field)&&(r=e.transform,(t=n.transform)instanceof Ed&&r instanceof Ed||t instanceof Fh&&r instanceof Fh?Wf(t.elements,r.elements,Za):t instanceof Zg&&r instanceof Zg?Za(t.gt,r.gt):t instanceof ap&&r instanceof ap);var t,r}(i,u))))&&(0===n.type?n.value.isEqual(e.value):1!==n.type||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask));var t,r}class cp extends wd{constructor(e,t,r,i=[]){super(),this.key=e,this.value=t,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Oc extends wd{constructor(e,t,r,i,u=[]){super(),this.key=e,this.data=t,this.fieldMask=r,this.precondition=i,this.fieldTransforms=u,this.type=1}getFieldMask(){return this.fieldMask}}function Xb(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const r=n.data.field(t);e.set(t,r)}}),e}function eD(n,e,t){const r=new Map;nn(n.length===t.length);for(let i=0;i<t.length;i++){const u=n[i],c=u.transform,p=e.data.field(u.field);r.set(u.field,Yb(c,p,t[i]))}return r}function lp(n,e,t){const r=new Map;for(const i of n){const u=i.transform,c=t.data.field(i.field);r.set(i.field,Kb(u,c,e))}return r}class dp extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class g_ extends wd{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}class FE{constructor(e,t,r,i){this.batchId=e,this.localWriteTime=t,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,t){const r=t.mutationResults;for(let i=0;i<this.mutations.length;i++){const u=this.mutations[i];u.key.isEqual(e.key)&&JA(u,e,r[i])}}applyToLocalView(e,t){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(t=Yg(r,e,t,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(t=Yg(r,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const r=Gb();return this.mutations.forEach(i=>{const u=e.get(i.key),c=u.overlayedDocument;let p=this.applyToLocalView(c,u.mutatedFields);p=t.has(i.key)?null:p;const m=Jb(c,p);null!==m&&r.set(i.key,m),c.isValidDocument()||c.convertToNoDocument(Xt.min())}),r}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),kn())}isEqual(e){return this.batchId===e.batchId&&Wf(this.mutations,e.mutations,(t,r)=>eM(t,r))&&Wf(this.baseMutations,e.baseMutations,(t,r)=>eM(t,r))}}class m_{constructor(e,t,r,i){this.batch=e,this.commitVersion=t,this.mutationResults=r,this.docVersions=i}static from(e,t,r){nn(e.mutations.length===r.length);let i=zb;const u=e.mutations;for(let c=0;c<u.length;c++)i=i.insert(u[c].key,r[c].version);return new m_(e,t,r,i)}}class LE{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return null!==e&&this.mutation===e.mutation}toString(){return`Overlay{\n      largestBatchId: ${this.largestBatchId},\n      mutation: ${this.mutation.toString()}\n    }`}}class tM{constructor(e,t){this.count=e,this.unchangedNames=t}}var cs,vr;function UE(n){switch(n){default:return $t();case je.CANCELLED:case je.UNKNOWN:case je.DEADLINE_EXCEEDED:case je.RESOURCE_EXHAUSTED:case je.INTERNAL:case je.UNAVAILABLE:case je.UNAUTHENTICATED:return!1;case je.INVALID_ARGUMENT:case je.NOT_FOUND:case je.ALREADY_EXISTS:case je.PERMISSION_DENIED:case je.FAILED_PRECONDITION:case je.ABORTED:case je.OUT_OF_RANGE:case je.UNIMPLEMENTED:case je.DATA_LOSS:return!0}}function VE(n){if(void 0===n)return os("GRPC error has no .code"),je.UNKNOWN;switch(n){case cs.OK:return je.OK;case cs.CANCELLED:return je.CANCELLED;case cs.UNKNOWN:return je.UNKNOWN;case cs.DEADLINE_EXCEEDED:return je.DEADLINE_EXCEEDED;case cs.RESOURCE_EXHAUSTED:return je.RESOURCE_EXHAUSTED;case cs.INTERNAL:return je.INTERNAL;case cs.UNAVAILABLE:return je.UNAVAILABLE;case cs.UNAUTHENTICATED:return je.UNAUTHENTICATED;case cs.INVALID_ARGUMENT:return je.INVALID_ARGUMENT;case cs.NOT_FOUND:return je.NOT_FOUND;case cs.ALREADY_EXISTS:return je.ALREADY_EXISTS;case cs.PERMISSION_DENIED:return je.PERMISSION_DENIED;case cs.FAILED_PRECONDITION:return je.FAILED_PRECONDITION;case cs.ABORTED:return je.ABORTED;case cs.OUT_OF_RANGE:return je.OUT_OF_RANGE;case cs.UNIMPLEMENTED:return je.UNIMPLEMENTED;case cs.DATA_LOSS:return je.DATA_LOSS;default:return $t()}}(vr=cs||(cs={}))[vr.OK=0]="OK",vr[vr.CANCELLED=1]="CANCELLED",vr[vr.UNKNOWN=2]="UNKNOWN",vr[vr.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",vr[vr.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",vr[vr.NOT_FOUND=5]="NOT_FOUND",vr[vr.ALREADY_EXISTS=6]="ALREADY_EXISTS",vr[vr.PERMISSION_DENIED=7]="PERMISSION_DENIED",vr[vr.UNAUTHENTICATED=16]="UNAUTHENTICATED",vr[vr.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",vr[vr.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",vr[vr.ABORTED=10]="ABORTED",vr[vr.OUT_OF_RANGE=11]="OUT_OF_RANGE",vr[vr.UNIMPLEMENTED=12]="UNIMPLEMENTED",vr[vr.INTERNAL=13]="INTERNAL",vr[vr.UNAVAILABLE=14]="UNAVAILABLE",vr[vr.DATA_LOSS=15]="DATA_LOSS";class BE{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return y_}static getOrCreateInstance(){return null===y_&&(y_=new BE),y_}onExistenceFilterMismatch(e){const t=Symbol();return this.onExistenceFilterMismatchCallbacks.set(t,e),()=>this.onExistenceFilterMismatchCallbacks.delete(t)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(t=>t(e))}}let y_=null;function nD(){return new TextEncoder}const jE=new Gf([4294967295,4294967295],0);function rD(n){const e=nD().encode(n),t=new bA;return t.update(e),new Uint8Array(t.digest())}function HE(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),u=e.getUint32(12,!0);return[new Gf([t,r],0),new Gf([i,u],0)]}class $E{constructor(e,t,r){if(this.bitmap=e,this.padding=t,this.hashCount=r,t<0||t>=8)throw new Qg(`Invalid padding: ${t}`);if(r<0)throw new Qg(`Invalid hash count: ${r}`);if(e.length>0&&0===this.hashCount)throw new Qg(`Invalid hash count: ${r}`);if(0===e.length&&0!==t)throw new Qg(`Invalid padding when bitmap length is 0: ${t}`);this.It=8*e.length-t,this.Tt=Gf.fromNumber(this.It)}Et(e,t,r){let i=e.add(t.multiply(Gf.fromNumber(r)));return 1===i.compare(jE)&&(i=new Gf([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Tt).toNumber()}At(e){return 0!=(this.bitmap[Math.floor(e/8)]&1<<e%8)}vt(e){if(0===this.It)return!1;const t=rD(e),[r,i]=HE(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);if(!this.At(c))return!1}return!0}static create(e,t,r){const i=e%8==0?0:8-e%8,u=new Uint8Array(Math.ceil(e/8)),c=new $E(u,i,t);return r.forEach(p=>c.insert(p)),c}insert(e){if(0===this.It)return;const t=rD(e),[r,i]=HE(t);for(let u=0;u<this.hashCount;u++){const c=this.Et(r,i,u);this.Rt(c)}}Rt(e){const t=Math.floor(e/8);this.bitmap[t]|=1<<e%8}}class Qg extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}class Jg{constructor(e,t,r,i,u){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=u}static createSynthesizedRemoteEventForCurrentChange(e,t,r){const i=new Map;return i.set(e,Xg.createSynthesizedTargetChangeForCurrentChange(e,t,r)),new Jg(Xt.min(),i,new si(Tn),Sa(),kn())}}class Xg{constructor(e,t,r,i,u){this.resumeToken=e,this.current=t,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=u}static createSynthesizedTargetChangeForCurrentChange(e,t,r){return new Xg(r,t,kn(),kn(),kn())}}class __{constructor(e,t,r,i){this.Pt=e,this.removedTargetIds=t,this.key=r,this.bt=i}}class iD{constructor(e,t){this.targetId=e,this.Vt=t}}class sD{constructor(e,t,r=Ns.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=t,this.resumeToken=r,this.cause=i}}class oD{constructor(){this.St=0,this.Dt=uD(),this.Ct=Ns.EMPTY_BYTE_STRING,this.xt=!1,this.Nt=!0}get current(){return this.xt}get resumeToken(){return this.Ct}get kt(){return 0!==this.St}get Mt(){return this.Nt}$t(e){e.approximateByteSize()>0&&(this.Nt=!0,this.Ct=e)}Ot(){let e=kn(),t=kn(),r=kn();return this.Dt.forEach((i,u)=>{switch(u){case 0:e=e.add(i);break;case 2:t=t.add(i);break;case 1:r=r.add(i);break;default:$t()}}),new Xg(this.Ct,this.xt,e,t,r)}Ft(){this.Nt=!1,this.Dt=uD()}Bt(e,t){this.Nt=!0,this.Dt=this.Dt.insert(e,t)}Lt(e){this.Nt=!0,this.Dt=this.Dt.remove(e)}qt(){this.St+=1}Ut(){this.St-=1}Kt(){this.Nt=!0,this.xt=!0}}class aD{constructor(e){this.Gt=e,this.Qt=new Map,this.jt=Sa(),this.zt=GE(),this.Wt=new si(Tn)}Ht(e){for(const t of e.Pt)e.bt&&e.bt.isFoundDocument()?this.Jt(t,e.bt):this.Yt(t,e.key,e.bt);for(const t of e.removedTargetIds)this.Yt(t,e.key,e.bt)}Xt(e){this.forEachTarget(e,t=>{const r=this.Zt(t);switch(e.state){case 0:this.te(t)&&r.$t(e.resumeToken);break;case 1:r.Ut(),r.kt||r.Ft(),r.$t(e.resumeToken);break;case 2:r.Ut(),r.kt||this.removeTarget(t);break;case 3:this.te(t)&&(r.Kt(),r.$t(e.resumeToken));break;case 4:this.te(t)&&(this.ee(t),r.$t(e.resumeToken));break;default:$t()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Qt.forEach((r,i)=>{this.te(i)&&t(i)})}ne(e){var t;const r=e.targetId,i=e.Vt.count,u=this.se(r);if(u){const c=u.target;if(ME(c))if(0===i){const p=new St(c.path);this.Yt(r,p,Di.newNoDocument(p,Xt.min()))}else nn(1===i);else{const p=this.ie(r);if(p!==i){const m=this.re(e,p);0!==m&&(this.ee(r),this.Wt=this.Wt.insert(r,2===m?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch")),null===(t=BE.instance)||void 0===t||t.notifyOnExistenceFilterMismatch(function(b,O,U){var J,ce,we,Ve,Ye,Ot;const en={localCacheCount:O,existenceFilterCount:U.count},It=U.unchangedNames;return It&&(en.bloomFilter={applied:0===b,hashCount:null!==(J=It?.hashCount)&&void 0!==J?J:0,bitmapLength:null!==(Ve=null===(we=null===(ce=It?.bits)||void 0===ce?void 0:ce.bitmap)||void 0===we?void 0:we.length)&&void 0!==Ve?Ve:0,padding:null!==(Ot=null===(Ye=It?.bits)||void 0===Ye?void 0:Ye.padding)&&void 0!==Ot?Ot:0}),en}(m,p,e.Vt))}}}}re(e,t){const{unchangedNames:r,count:i}=e.Vt;if(!r||!r.bits)return 1;const{bits:{bitmap:u="",padding:c=0},hashCount:p=0}=r;let m,b;try{m=fl(u).toUint8Array()}catch(O){if(O instanceof Iu)return wu("Decoding the base64 bloom filter in existence filter failed ("+O.message+"); ignoring the bloom filter and falling back to full re-query."),1;throw O}try{b=new $E(m,c,p)}catch(O){return wu(O instanceof Qg?"BloomFilter error: ":"Applying bloom filter failed: ",O),1}return 0===b.It?1:i!==t-this.oe(e.targetId,b)?2:0}oe(e,t){const r=this.Gt.getRemoteKeysForTarget(e);let i=0;return r.forEach(u=>{const c=this.Gt.ue(),p=`projects/${c.projectId}/databases/${c.database}/documents/${u.path.canonicalString()}`;t.vt(p)||(this.Yt(e,u,null),i++)}),i}ce(e){const t=new Map;this.Qt.forEach((u,c)=>{const p=this.se(c);if(p){if(u.current&&ME(p.target)){const m=new St(p.target.path);null!==this.jt.get(m)||this.ae(c,m)||this.Yt(c,m,Di.newNoDocument(m,e))}u.Mt&&(t.set(c,u.Ot()),u.Ft())}});let r=kn();this.zt.forEach((u,c)=>{let p=!0;c.forEachWhile(m=>{const b=this.se(m);return!b||"TargetPurposeLimboResolution"===b.purpose||(p=!1,!1)}),p&&(r=r.add(u))}),this.jt.forEach((u,c)=>c.setReadTime(e));const i=new Jg(e,t,this.Wt,this.jt,r);return this.jt=Sa(),this.zt=GE(),this.Wt=new si(Tn),i}Jt(e,t){if(!this.te(e))return;const r=this.ae(e,t.key)?2:0;this.Zt(e).Bt(t.key,r),this.jt=this.jt.insert(t.key,t),this.zt=this.zt.insert(t.key,this.he(t.key).add(e))}Yt(e,t,r){if(!this.te(e))return;const i=this.Zt(e);this.ae(e,t)?i.Bt(t,1):i.Lt(t),this.zt=this.zt.insert(t,this.he(t).delete(e)),r&&(this.jt=this.jt.insert(t,r))}removeTarget(e){this.Qt.delete(e)}ie(e){const t=this.Zt(e).Ot();return this.Gt.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}qt(e){this.Zt(e).qt()}Zt(e){let t=this.Qt.get(e);return t||(t=new oD,this.Qt.set(e,t)),t}he(e){let t=this.zt.get(e);return t||(t=new bi(Tn),this.zt=this.zt.insert(e,t)),t}te(e){const t=null!==this.se(e);return t||ft("WatchChangeAggregator","Detected inactive target",e),t}se(e){const t=this.Qt.get(e);return t&&t.kt?null:this.Gt.le(e)}ee(e){this.Qt.set(e,new oD),this.Gt.getRemoteKeysForTarget(e).forEach(t=>{this.Yt(e,t,null)})}ae(e,t){return this.Gt.getRemoteKeysForTarget(e).has(t)}}function GE(){return new si(St.comparator)}function uD(){return new si(St.comparator)}const nM={asc:"ASCENDING",desc:"DESCENDING"},cD={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},rM={and:"AND",or:"OR"};class iM{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function zE(n,e){return n.useProto3Json||Kf(e)?e:{value:e}}function Cd(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function v_(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function lD(n,e){return Cd(n,e.toTimestamp())}function zi(n){return nn(!!n),Xt.fromTimestamp(function(e){const t=fd(e);return new Ci(t.seconds,t.nanos)}(n))}function WE(n,e){return(t=n,new _r(["projects",t.projectId,"databases",t.database])).child("documents").child(e).canonicalString();var t}function dD(n){const e=_r.fromString(n);return nn(JE(e)),e}function Lh(n,e){return WE(n.databaseId,e.path)}function Pc(n,e){const t=dD(e);if(t.get(1)!==n.databaseId.projectId)throw new dt(je.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new dt(je.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new St(hD(t))}function E_(n,e){return WE(n.databaseId,e)}function Uh(n){const e=dD(n);return 4===e.length?_r.emptyPath():hD(e)}function hp(n){return new _r(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function hD(n){return nn(n.length>4&&"documents"===n.get(4)),n.popFirst(5)}function sM(n,e,t){return{name:Lh(n,e),fields:t.value.mapValue.fields}}function w_(n,e,t){const r=Pc(n,e.name),i=zi(e.updateTime),u=e.createTime?zi(e.createTime):Xt.min(),c=new To({mapValue:{fields:e.fields}}),p=Di.newFoundDocument(r,i,u,c);return t&&p.setHasCommittedMutations(),t?p.setHasCommittedMutations():p}function fp(n,e){let t;if(e instanceof cp)t={update:sM(n,e.key,e.value)};else if(e instanceof dp)t={delete:Lh(n,e.key)};else if(e instanceof Oc)t={update:sM(n,e.key,e.data),updateMask:rN(e.fieldMask)};else{if(!(e instanceof g_))return $t();t={verify:Lh(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(r=>function(i,u){const c=u.transform;if(c instanceof ap)return{fieldPath:u.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(c instanceof Ed)return{fieldPath:u.field.canonicalString(),appendMissingElements:{values:c.elements}};if(c instanceof Fh)return{fieldPath:u.field.canonicalString(),removeAllFromArray:{values:c.elements}};if(c instanceof Zg)return{fieldPath:u.field.canonicalString(),increment:c.gt};throw $t()}(0,r))),e.precondition.isNone||(t.currentDocument=void 0!==(i=e.precondition).updateTime?{updateTime:lD(n,i.updateTime)}:void 0!==i.exists?{exists:i.exists}:$t()),t;var i}function C_(n,e){const t=e.currentDocument?void 0!==(i=e.currentDocument).updateTime?Pi.updateTime(zi(i.updateTime)):void 0!==i.exists?Pi.exists(i.exists):Pi.none():Pi.none(),r=e.updateTransforms?e.updateTransforms.map(i=>function(u,c){let p=null;"setToServerValue"in c?(nn("REQUEST_TIME"===c.setToServerValue),p=new ap):"appendMissingElements"in c?p=new Ed(c.appendMissingElements.values||[]):"removeAllFromArray"in c?p=new Fh(c.removeAllFromArray.values||[]):"increment"in c?p=new Zg(u,c.increment):$t();const m=Ii.fromServerFormat(c.fieldPath);return new up(m,p)}(n,i)):[];var i;if(e.update){const i=Pc(n,e.update.name),u=new To({mapValue:{fields:e.update.fields}});if(e.updateMask){const c=new Oi((e.updateMask.fieldPaths||[]).map(b=>Ii.fromServerFormat(b)));return new Oc(i,u,c,t,r)}return new cp(i,u,t,r)}if(e.delete){const i=Pc(n,e.delete);return new dp(i,t)}if(e.verify){const i=Pc(n,e.verify);return new g_(i,t)}return $t()}function ZE(n,e){return{documents:[E_(n,e.path)]}}function em(n,e){const t={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(t.parent=E_(n,r),t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(t.parent=E_(n,r.popLast()),t.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(m){if(0!==m.length)return QE($r.create(m,"and"))}(e.filters);i&&(t.structuredQuery.where=i);const u=function(m){if(0!==m.length)return m.map(b=>{return{field:Id((O=b).field),direction:pD(O.dir)};var O})}(e.orderBy);u&&(t.structuredQuery.orderBy=u);const c=zE(n,e.limit);var p,m;return null!==c&&(t.structuredQuery.limit=c),e.startAt&&(t.structuredQuery.startAt={before:(p=e.startAt).inclusive,values:p.position}),e.endAt&&(t.structuredQuery.endAt={before:!(m=e.endAt).inclusive,values:m.position}),t}function KE(n){let e=Uh(n.parent);const t=n.structuredQuery,r=t.from?t.from.length:0;let i=null;if(r>0){nn(1===r);const O=t.from[0];O.allDescendants?i=O.collectionId:e=e.child(O.collectionId)}let u=[];t.where&&(u=function(O){const U=YE(O);return U instanceof $r&&wE(U)?U.getFilters():[U]}(t.where));let c=[];t.orderBy&&(c=t.orderBy.map(O=>{return new np(pp((U=O).field),function(J){switch(J){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(U.direction));var U}));let p=null;t.limit&&(p=function(O){let U;return U="object"==typeof O?O.value:O,Kf(U)?null:U}(t.limit));let m=null;var O;t.startAt&&(m=new yd((O=t.startAt).values||[],!!O.before));let b=null;return t.endAt&&(b=function(O){return new yd(O.values||[],!O.before)}(t.endAt)),zA(e,i,c,u,p,"F",m,b)}function YE(n){return void 0!==n.unaryFilter?function(e){switch(e.unaryFilter.op){case"IS_NAN":const t=pp(e.unaryFilter.field);return ur.create(t,"==",{doubleValue:NaN});case"IS_NULL":const r=pp(e.unaryFilter.field);return ur.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=pp(e.unaryFilter.field);return ur.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const u=pp(e.unaryFilter.field);return ur.create(u,"!=",{nullValue:"NULL_VALUE"});default:return $t()}}(n):void 0!==n.fieldFilter?ur.create(pp((e=n).fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return $t()}}(e.fieldFilter.op),e.fieldFilter.value):void 0!==n.compositeFilter?function(e){return $r.create(e.compositeFilter.filters.map(t=>YE(t)),function(t){switch(t){case"AND":return"and";case"OR":return"or";default:return $t()}}(e.compositeFilter.op))}(n):$t();var e}function pD(n){return nM[n]}function uM(n){return cD[n]}function cM(n){return rM[n]}function Id(n){return{fieldPath:n.canonicalString()}}function pp(n){return Ii.fromServerFormat(n.fieldPath)}function QE(n){return n instanceof ur?function(e){if("=="===e.op){if(_E(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NAN"}};if(yE(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NULL"}}}else if("!="===e.op){if(_E(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NOT_NAN"}};if(yE(e.value))return{unaryFilter:{field:Id(e.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Id(e.field),op:uM(e.op),value:e.value}}}(n):n instanceof $r?function(e){const t=e.getFilters().map(r=>QE(r));return 1===t.length?t[0]:{compositeFilter:{op:cM(e.op),filters:t}}}(n):$t()}function rN(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function JE(n){return n.length>=4&&"projects"===n.get(0)&&"databases"===n.get(2)}class _l{constructor(e,t,r,i,u=Xt.min(),c=Xt.min(),p=Ns.EMPTY_BYTE_STRING,m=null){this.target=e,this.targetId=t,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=u,this.lastLimboFreeSnapshotVersion=c,this.resumeToken=p,this.expectedCount=m}withSequenceNumber(e){return new _l(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new _l(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}class gD{constructor(e){this.fe=e}}function mD(n,e){const t=e.key,r={prefixPath:t.getCollectionPath().popLast().toArray(),collectionGroup:t.collectionGroup,documentId:t.path.lastSegment(),readTime:I_(e.readTime),hasCommittedMutations:e.hasCommittedMutations};if(e.isFoundDocument())r.document={name:Lh(i=n.fe,(u=e).key),fields:u.data.value.mapValue.fields,updateTime:Cd(i,u.version.toTimestamp()),createTime:Cd(i,u.createTime.toTimestamp())};else if(e.isNoDocument())r.noDocument={path:t.path.toArray(),readTime:bd(e.version)};else{if(!e.isUnknownDocument())return $t();r.unknownDocument={path:t.path.toArray(),version:bd(e.version)}}var i,u;return r}function I_(n){const e=n.toTimestamp();return[e.seconds,e.nanoseconds]}function bd(n){const e=n.toTimestamp();return{seconds:e.seconds,nanoseconds:e.nanoseconds}}function Vh(n){const e=new Ci(n.seconds,n.nanoseconds);return Xt.fromTimestamp(e)}function Bh(n,e){const t=(e.baseMutations||[]).map(u=>C_(n.fe,u));for(let u=0;u<e.mutations.length-1;++u)u+1<e.mutations.length&&void 0!==e.mutations[u+1].transform&&(e.mutations[u].updateTransforms=e.mutations[u+1].transform.fieldTransforms,e.mutations.splice(u+1,1),++u);const r=e.mutations.map(u=>C_(n.fe,u)),i=Ci.fromMillis(e.localWriteTimeMs);return new FE(e.batchId,i,t,r)}function tm(n){const e=Vh(n.readTime),t=void 0!==n.lastLimboFreeSnapshotVersion?Vh(n.lastLimboFreeSnapshotVersion):Xt.min();let r;var i;return void 0!==n.query.documents?(nn(1===(i=n.query).documents.length),r=ao(an(Uh(i.documents[0])))):r=ao(KE(n.query)),new _l(r,n.targetId,"TargetPurposeListen",n.lastListenSequenceNumber,e,t,Ns.fromBase64String(n.resumeToken))}function yD(n,e){const t=bd(e.snapshotVersion),r=bd(e.lastLimboFreeSnapshotVersion);let i;i=ME(e.target)?ZE(n.fe,e.target):em(n.fe,e.target);const u=e.resumeToken.toBase64();return{targetId:e.targetId,canonicalId:Oh(e.target),readTime:t,resumeToken:u,lastListenSequenceNumber:e.sequenceNumber,lastLimboFreeSnapshotVersion:r,query:i}}function XE(n){const e=KE({parent:n.parent,structuredQuery:n.structuredQuery});return"LAST"===n.limitType?Ti(e,e.limit,"L"):e}function ew(n,e){return new LE(e.largestBatchId,C_(n.fe,e.overlayMutation))}function _D(n,e){const t=e.path.lastSegment();return[n,bo(e.path.popLast()),t]}function vD(n,e,t,r){return{indexId:n,uid:e.uid||"",sequenceNumber:t,readTime:bd(r.readTime),documentKey:bo(r.documentKey.path),largestBatchId:r.largestBatchId}}class lM{getBundleMetadata(e,t){return gp(e).get(t).next(r=>{if(r)return{id:(i=r).bundleId,createTime:Vh(i.createTime),version:i.version};var i})}saveBundleMetadata(e,t){return gp(e).put({bundleId:(r=t).id,createTime:bd(zi(r.createTime)),version:r.version});var r}getNamedQuery(e,t){return tw(e).get(t).next(r=>{if(r)return{name:(i=r).name,query:XE(i.bundledQuery),readTime:Vh(i.readTime)};var i})}saveNamedQuery(e,t){return tw(e).put({name:(r=t).name,readTime:bd(zi(r.readTime)),bundledQuery:r.bundledQuery});var r}}function gp(n){return zs(n,"bundles")}function tw(n){return zs(n,"namedQueries")}class nm{constructor(e,t){this.serializer=e,this.userId=t}static de(e,t){return new nm(e,t.uid||"")}getOverlay(e,t){return mp(e).get(_D(this.userId,t)).next(r=>r?ew(this.serializer,r):null)}getOverlays(e,t){const r=Nc();return ke.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){const i=[];return r.forEach((u,c)=>{const p=new LE(t,c);i.push(this.we(e,p))}),ke.waitFor(i)}removeOverlaysForBatchId(e,t,r){const i=new Set;t.forEach(c=>i.add(bo(c.getCollectionPath())));const u=[];return i.forEach(c=>{const p=IDBKeyRange.bound([this.userId,c,r],[this.userId,c,r+1],!1,!0);u.push(mp(e).J("collectionPathOverlayIndex",p))}),ke.waitFor(u)}getOverlaysForCollection(e,t,r){const i=Nc(),u=bo(t),c=IDBKeyRange.bound([this.userId,u,r],[this.userId,u,Number.POSITIVE_INFINITY],!0);return mp(e).j("collectionPathOverlayIndex",c).next(p=>{for(const m of p){const b=ew(this.serializer,m);i.set(b.getKey(),b)}return i})}getOverlaysForCollectionGroup(e,t,r,i){const u=Nc();let c;const p=IDBKeyRange.bound([this.userId,t,r],[this.userId,t,Number.POSITIVE_INFINITY],!0);return mp(e).X({index:"collectionGroupOverlayIndex",range:p},(m,b,O)=>{const U=ew(this.serializer,b);u.size()<i||U.largestBatchId===c?(u.set(U.getKey(),U),c=U.largestBatchId):O.done()}).next(()=>u)}we(e,t){return mp(e).put(function(r,i,u){const[c,p,m]=_D(i,u.mutation.key);return{userId:i,collectionPath:p,documentId:m,collectionGroup:u.mutation.key.getCollectionGroup(),largestBatchId:u.largestBatchId,overlayMutation:fp(r.fe,u.mutation)}}(this.serializer,this.userId,t))}}function mp(n){return zs(n,"documentOverlays")}class Dd{constructor(){}_e(e,t){this.me(e,t),t.ge()}me(e,t){if("nullValue"in e)this.ye(t,5);else if("booleanValue"in e)this.ye(t,10),t.pe(e.booleanValue?1:0);else if("integerValue"in e)this.ye(t,15),t.pe(us(e.integerValue));else if("doubleValue"in e){const r=us(e.doubleValue);isNaN(r)?this.ye(t,13):(this.ye(t,15),Yf(r)?t.pe(0):t.pe(r))}else if("timestampValue"in e){const r=e.timestampValue;this.ye(t,20),"string"==typeof r?t.Ie(r):(t.Ie(`${r.seconds||""}`),t.pe(r.nanos||0))}else if("stringValue"in e)this.Te(e.stringValue,t),this.Ee(t);else if("bytesValue"in e)this.ye(t,30),t.Ae(fl(e.bytesValue)),this.Ee(t);else if("referenceValue"in e)this.ve(e.referenceValue,t);else if("geoPointValue"in e){const r=e.geoPointValue;this.ye(t,45),t.pe(r.latitude||0),t.pe(r.longitude||0)}else"mapValue"in e?vE(e)?this.ye(t,Number.MAX_SAFE_INTEGER):(this.Re(e.mapValue,t),this.Ee(t)):"arrayValue"in e?(this.Pe(e.arrayValue,t),this.Ee(t)):$t()}Te(e,t){this.ye(t,25),this.be(e,t)}be(e,t){t.Ie(e)}Re(e,t){const r=e.fields||{};this.ye(t,55);for(const i of Object.keys(r))this.Te(i,t),this.me(r[i],t)}Pe(e,t){const r=e.values||[];this.ye(t,50);for(const i of r)this.me(i,t)}ve(e,t){this.ye(t,37),St.fromName(e).path.forEach(r=>{this.ye(t,60),this.be(r,t)})}ye(e,t){e.pe(t)}Ee(e){e.pe(2)}}function ED(n){if(0===n)return 8;let e=0;return!(n>>4)&&(e+=4,n<<=4),!(n>>6)&&(e+=2,n<<=2),!(n>>7)&&(e+=1),e}function wD(n){const e=64-function(t){let r=0;for(let i=0;i<8;++i){const u=ED(255&t[i]);if(r+=u,8!==u)break}return r}(n);return Math.ceil(e/8)}Dd.Ve=new Dd;class dM{constructor(){this.buffer=new Uint8Array(1024),this.position=0}Se(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.De(r.value),r=t.next();this.Ce()}xe(e){const t=e[Symbol.iterator]();let r=t.next();for(;!r.done;)this.Ne(r.value),r=t.next();this.ke()}Me(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.De(r);else if(r<2048)this.De(960|r>>>6),this.De(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.De(480|r>>>12),this.De(128|63&r>>>6),this.De(128|63&r);else{const i=t.codePointAt(0);this.De(240|i>>>18),this.De(128|63&i>>>12),this.De(128|63&i>>>6),this.De(128|63&i)}}this.Ce()}$e(e){for(const t of e){const r=t.charCodeAt(0);if(r<128)this.Ne(r);else if(r<2048)this.Ne(960|r>>>6),this.Ne(128|63&r);else if(t<"\ud800"||"\udbff"<t)this.Ne(480|r>>>12),this.Ne(128|63&r>>>6),this.Ne(128|63&r);else{const i=t.codePointAt(0);this.Ne(240|i>>>18),this.Ne(128|63&i>>>12),this.Ne(128|63&i>>>6),this.Ne(128|63&i)}}this.ke()}Oe(e){const t=this.Fe(e),r=wD(t);this.Be(1+r),this.buffer[this.position++]=255&r;for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=255&t[i]}Le(e){const t=this.Fe(e),r=wD(t);this.Be(1+r),this.buffer[this.position++]=~(255&r);for(let i=t.length-r;i<t.length;++i)this.buffer[this.position++]=~(255&t[i])}qe(){this.Ue(255),this.Ue(255)}Ke(){this.Ge(255),this.Ge(255)}reset(){this.position=0}seed(e){this.Be(e.length),this.buffer.set(e,this.position),this.position+=e.length}Qe(){return this.buffer.slice(0,this.position)}Fe(e){const t=function(i){const u=new DataView(new ArrayBuffer(8));return u.setFloat64(0,i,!1),new Uint8Array(u.buffer)}(e),r=0!=(128&t[0]);t[0]^=r?255:128;for(let i=1;i<t.length;++i)t[i]^=r?255:0;return t}De(e){const t=255&e;0===t?(this.Ue(0),this.Ue(255)):255===t?(this.Ue(255),this.Ue(0)):this.Ue(t)}Ne(e){const t=255&e;0===t?(this.Ge(0),this.Ge(255)):255===t?(this.Ge(255),this.Ge(0)):this.Ge(e)}Ce(){this.Ue(0),this.Ue(1)}ke(){this.Ge(0),this.Ge(1)}Ue(e){this.Be(1),this.buffer[this.position++]=e}Ge(e){this.Be(1),this.buffer[this.position++]=~e}Be(e){const t=e+this.position;if(t<=this.buffer.length)return;let r=2*this.buffer.length;r<t&&(r=t);const i=new Uint8Array(r);i.set(this.buffer),this.buffer=i}}class sN{constructor(e){this.je=e}Ae(e){this.je.Se(e)}Ie(e){this.je.Me(e)}pe(e){this.je.Oe(e)}ge(){this.je.qe()}}class oN{constructor(e){this.je=e}Ae(e){this.je.xe(e)}Ie(e){this.je.$e(e)}pe(e){this.je.Le(e)}ge(){this.je.Ke()}}class rm{constructor(){this.je=new dM,this.ze=new sN(this.je),this.We=new oN(this.je)}seed(e){this.je.seed(e)}He(e){return 0===e?this.ze:this.We}Qe(){return this.je.Qe()}reset(){this.je.reset()}}class jh{constructor(e,t,r,i){this.indexId=e,this.documentKey=t,this.arrayValue=r,this.directionalValue=i}Je(){const e=this.directionalValue.length,t=0===e||255===this.directionalValue[e-1]?e+1:e,r=new Uint8Array(t);return r.set(this.directionalValue,0),t!==e?r.set([0],this.directionalValue.length):++r[r.length-1],new jh(this.indexId,this.documentKey,this.arrayValue,r)}}function Td(n,e){let t=n.indexId-e.indexId;return 0!==t?t:(t=CD(n.arrayValue,e.arrayValue),0!==t?t:(t=CD(n.directionalValue,e.directionalValue),0!==t?t:St.comparator(n.documentKey,e.documentKey)))}function CD(n,e){for(let t=0;t<n.length&&t<e.length;++t){const r=n[t]-e[t];if(0!==r)return r}return n.length-e.length}class hM{constructor(e){this.collectionId=null!=e.collectionGroup?e.collectionGroup:e.path.lastSegment(),this.Ye=e.orderBy,this.Xe=[];for(const t of e.filters){const r=t;r.isInequality()?this.Ze=r:this.Xe.push(r)}}tn(e){nn(e.collectionGroup===this.collectionId);const t=oE(e);if(void 0!==t&&!this.en(t))return!1;const r=Sh(e);let i=new Set,u=0,c=0;for(;u<r.length&&this.en(r[u]);++u)i=i.add(r[u].fieldPath.canonicalString());if(u===r.length)return!0;if(void 0!==this.Ze){if(!i.has(this.Ze.field.canonicalString())){const p=r[u];if(!this.nn(this.Ze,p)||!this.sn(this.Ye[c++],p))return!1}++u}for(;u<r.length;++u)if(c>=this.Ye.length||!this.sn(this.Ye[c++],r[u]))return!1;return!0}en(e){for(const t of this.Xe)if(this.nn(t,e))return!0;return!1}nn(e,t){return!(void 0===e||!e.field.isEqual(t.fieldPath))&&2===t.kind==("array-contains"===e.op||"array-contains-any"===e.op)}sn(e,t){return!!e.field.isEqual(t.fieldPath)&&(0===t.kind&&"asc"===e.dir||1===t.kind&&"desc"===e.dir)}}function yp(n){var e,t;if(nn(n instanceof ur||n instanceof $r),n instanceof ur){if(n instanceof SE){const i=(null===(t=null===(e=n.value.arrayValue)||void 0===e?void 0:e.values)||void 0===t?void 0:t.map(u=>ur.create(n.field,"==",u)))||[];return $r.create(i,"or")}return n}const r=n.filters.map(i=>yp(i));return $r.create(r,n.op)}function fM(n){if(0===n.getFilters().length)return[];const e=sm(yp(n));return nn(ID(e)),im(e)||bu(e)?[e]:e.getFilters()}function im(n){return n instanceof ur}function bu(n){return n instanceof $r&&wE(n)}function ID(n){return im(n)||bu(n)||function(e){if(e instanceof $r&&EE(e)){for(const t of e.getFilters())if(!im(t)&&!bu(t))return!1;return!0}return!1}(n)}function sm(n){if(nn(n instanceof ur||n instanceof $r),n instanceof ur)return n;if(1===n.filters.length)return sm(n.filters[0]);const e=n.filters.map(r=>sm(r));let t=$r.create(e,n.op);return t=b_(t),ID(t)?t:(nn(t instanceof $r),nn(rp(t)),nn(t.filters.length>1),t.filters.reduce((r,i)=>Hh(r,i)))}function Hh(n,e){let t;return nn(n instanceof ur||n instanceof $r),nn(e instanceof ur||e instanceof $r),t=n instanceof ur?e instanceof ur?$r.create([n,e],"and"):bD(n,e):e instanceof ur?bD(e,n):function(r,i){if(nn(r.filters.length>0&&i.filters.length>0),rp(r)&&rp(i))return bE(r,i.getFilters());const u=EE(r)?r:i,c=EE(r)?i:r,p=u.filters.map(m=>Hh(m,c));return $r.create(p,"or")}(n,e),b_(t)}function bD(n,e){if(rp(e))return bE(e,n.getFilters());{const t=e.filters.map(r=>Hh(n,r));return $r.create(t,"or")}}function b_(n){if(nn(n instanceof ur||n instanceof $r),n instanceof ur)return n;const e=n.getFilters();if(1===e.length)return b_(e[0]);if(Ob(n))return n;const t=e.map(i=>b_(i)),r=[];return t.forEach(i=>{i instanceof ur?r.push(i):i instanceof $r&&(i.op===n.op?r.push(...i.filters):r.push(i))}),1===r.length?r[0]:$r.create(r,n.op)}class pM{constructor(){this.rn=new _p}addToCollectionParentIndex(e,t){return this.rn.add(t),ke.resolve()}getCollectionParents(e,t){return ke.resolve(this.rn.getEntries(t))}addFieldIndex(e,t){return ke.resolve()}deleteFieldIndex(e,t){return ke.resolve()}getDocumentsMatchingTarget(e,t){return ke.resolve(null)}getIndexType(e,t){return ke.resolve(0)}getFieldIndexes(e,t){return ke.resolve([])}getNextCollectionGroupToUpdate(e){return ke.resolve(null)}getMinOffset(e,t){return ke.resolve(qa.min())}getMinOffsetFromCollectionGroup(e,t){return ke.resolve(qa.min())}updateCollectionGroup(e,t,r){return ke.resolve()}updateIndexEntries(e,t){return ke.resolve()}}class _p{constructor(){this.index={}}add(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t]||new bi(_r.comparator),u=!i.has(r);return this.index[t]=i.add(r),u}has(e){const t=e.lastSegment(),r=e.popLast(),i=this.index[t];return i&&i.has(r)}getEntries(e){return(this.index[e]||new bi(_r.comparator)).toArray()}}const om=new Uint8Array(0);class gM{constructor(e,t){this.user=e,this.databaseId=t,this.on=new _p,this.un=new Rc(r=>Oh(r),(r,i)=>Mc(r,i)),this.uid=e.uid||""}addToCollectionParentIndex(e,t){if(!this.on.has(t)){const r=t.lastSegment(),i=t.popLast();e.addOnCommittedListener(()=>{this.on.add(t)});const u={collectionId:r,parent:bo(i)};return DD(e).put(u)}return ke.resolve()}getCollectionParents(e,t){const r=[],i=IDBKeyRange.bound([t,""],[cb(t),""],!1,!0);return DD(e).j(i).next(u=>{for(const c of u){if(c.collectionId!==t)break;r.push(Do(c.parent))}return r})}addFieldIndex(e,t){const r=D_(e),i={indexId:(c=t).indexId,collectionGroup:c.collectionGroup,fields:c.fields.map(p=>[p.fieldPath.canonicalString(),p.kind])};var c;delete i.indexId;const u=r.add(i);if(t.indexState){const c=am(e);return u.next(p=>{c.put(vD(p,this.user,t.indexState.sequenceNumber,t.indexState.offset))})}return u.next()}deleteFieldIndex(e,t){const r=D_(e),i=am(e),u=$h(e);return r.delete(t.indexId).next(()=>i.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0))).next(()=>u.delete(IDBKeyRange.bound([t.indexId],[t.indexId+1],!1,!0)))}getDocumentsMatchingTarget(e,t){const r=$h(e);let i=!0;const u=new Map;return ke.forEach(this.cn(t),c=>this.an(e,c).next(p=>{i&&(i=!!p),u.set(c,p)})).next(()=>{if(i){let c=kn();const p=[];return ke.forEach(u,(m,b)=>{var O;ft("IndexedDbIndexManager",`Using index ${O=m,`id=${O.indexId}|cg=${O.collectionGroup}|f=${O.fields.map(It=>`${It.fieldPath}:${It.kind}`).join(",")}`} to execute ${Oh(t)}`);const U=function(It,Kt){const Mn=oE(Kt);if(void 0===Mn)return null;for(const Fn of ip(It,Mn.fieldPath))switch(Fn.op){case"array-contains-any":return Fn.value.arrayValue.values||[];case"array-contains":return[Fn.value]}return null}(b,m),J=function(It,Kt){const Mn=new Map;for(const Fn of Sh(Kt))for(const ho of ip(It,Fn.fieldPath))switch(ho.op){case"==":case"in":Mn.set(Fn.fieldPath.canonicalString(),ho.value);break;case"not-in":case"!=":return Mn.set(Fn.fieldPath.canonicalString(),ho.value),Array.from(Mn.values())}return null}(b,m),ce=function(It,Kt){const Mn=[];let Fn=!0;for(const ho of Sh(Kt)){const Xu=0===ho.kind?GA(It,ho.fieldPath,It.startAt):xE(It,ho.fieldPath,It.startAt);Mn.push(Xu.value),Fn&&(Fn=Xu.inclusive)}return new yd(Mn,Fn)}(b,m),we=function(It,Kt){const Mn=[];let Fn=!0;for(const ho of Sh(Kt)){const Xu=0===ho.kind?xE(It,ho.fieldPath,It.endAt):GA(It,ho.fieldPath,It.endAt);Mn.push(Xu.value),Fn&&(Fn=Xu.inclusive)}return new yd(Mn,Fn)}(b,m),Ve=this.hn(m,b,ce),Ye=this.hn(m,b,we),Ot=this.ln(m,b,J),en=this.fn(m.indexId,U,Ve,ce.inclusive,Ye,we.inclusive,Ot);return ke.forEach(en,It=>r.H(It,t.limit).next(Kt=>{Kt.forEach(Mn=>{const Fn=St.fromSegments(Mn.documentKey);c.has(Fn)||(c=c.add(Fn),p.push(Fn))})}))}).next(()=>p)}return ke.resolve(null)})}cn(e){let t=this.un.get(e);return t||(t=0===e.filters.length?[e]:fM($r.create(e.filters,"and")).map(r=>AE(e.path,e.collectionGroup,e.orderBy,r.getFilters(),e.limit,e.startAt,e.endAt)),this.un.set(e,t),t)}fn(e,t,r,i,u,c,p){const m=(null!=t?t.length:1)*Math.max(r.length,u.length),b=m/(null!=t?t.length:1),O=[];for(let U=0;U<m;++U){const J=t?this.dn(t[U/b]):om,ce=this.wn(e,J,r[U%b],i),we=this._n(e,J,u[U%b],c),Ve=p.map(Ye=>this.wn(e,J,Ye,!0));O.push(...this.createRange(ce,we,Ve))}return O}wn(e,t,r,i){const u=new jh(e,St.empty(),t,r);return i?u:u.Je()}_n(e,t,r,i){const u=new jh(e,St.empty(),t,r);return i?u.Je():u}an(e,t){const r=new hM(t),i=null!=t.collectionGroup?t.collectionGroup:t.path.lastSegment();return this.getFieldIndexes(e,i).next(u=>{let c=null;for(const p of u)r.tn(p)&&(!c||p.fields.length>c.fields.length)&&(c=p);return c})}getIndexType(e,t){let r=2;const i=this.cn(t);return ke.forEach(i,u=>this.an(e,u).next(c=>{c?0!==r&&c.fields.length<function(p){let m=new bi(Ii.comparator),b=!1;for(const O of p.filters)for(const U of O.getFlattenedFilters())U.field.isKeyField()||("array-contains"===U.op||"array-contains-any"===U.op?b=!0:m=m.add(U.field));for(const O of p.orderBy)O.field.isKeyField()||(m=m.add(O.field));return m.size+(b?1:0)}(u)&&(r=1):r=0})).next(()=>null!==t.limit&&i.length>1&&2===r?1:r)}mn(e,t){const r=new rm;for(const i of Sh(e)){const u=t.data.field(i.fieldPath);if(null==u)return null;const c=r.He(i.kind);Dd.Ve._e(u,c)}return r.Qe()}dn(e){const t=new rm;return Dd.Ve._e(e,t.He(0)),t.Qe()}gn(e,t){const r=new rm;return Dd.Ve._e(ml(this.databaseId,t),r.He(function(i){const u=Sh(i);return 0===u.length?0:u[u.length-1].kind}(e))),r.Qe()}ln(e,t,r){if(null===r)return[];let i=[];i.push(new rm);let u=0;for(const c of Sh(e)){const p=r[u++];for(const m of i)if(this.yn(t,c.fieldPath)&&ep(p))i=this.pn(i,c,p);else{const b=m.He(c.kind);Dd.Ve._e(p,b)}}return this.In(i)}hn(e,t,r){return this.ln(e,t,r.position)}In(e){const t=[];for(let r=0;r<e.length;++r)t[r]=e[r].Qe();return t}pn(e,t,r){const i=[...e],u=[];for(const c of r.arrayValue.values||[])for(const p of i){const m=new rm;m.seed(p.Qe()),Dd.Ve._e(c,m.He(t.kind)),u.push(m)}return u}yn(e,t){return!!e.filters.find(r=>r instanceof ur&&r.field.isEqual(t)&&("in"===r.op||"not-in"===r.op))}getFieldIndexes(e,t){const r=D_(e),i=am(e);return(t?r.j("collectionGroupIndex",IDBKeyRange.bound(t,t)):r.j()).next(u=>{const c=[];return ke.forEach(u,p=>i.get([p.indexId,this.uid]).next(m=>{c.push(function(b,O){const U=O?new Zf(O.sequenceNumber,new qa(Vh(O.readTime),new St(Do(O.documentKey)),O.largestBatchId)):Zf.empty(),J=b.fields.map(([ce,we])=>new qf(Ii.fromServerFormat(ce),we));return new Ug(b.indexId,b.collectionGroup,J,U)}(p,m))})).next(()=>c)})}getNextCollectionGroupToUpdate(e){return this.getFieldIndexes(e).next(t=>0===t.length?null:(t.sort((r,i)=>{const u=r.indexState.sequenceNumber-i.indexState.sequenceNumber;return 0!==u?u:Tn(r.collectionGroup,i.collectionGroup)}),t[0].collectionGroup))}updateCollectionGroup(e,t,r){const i=D_(e),u=am(e);return this.Tn(e).next(c=>i.j("collectionGroupIndex",IDBKeyRange.bound(t,t)).next(p=>ke.forEach(p,m=>u.put(vD(m.indexId,this.user,c,r)))))}updateIndexEntries(e,t){const r=new Map;return ke.forEach(t,(i,u)=>{const c=r.get(i.collectionGroup);return(c?ke.resolve(c):this.getFieldIndexes(e,i.collectionGroup)).next(p=>(r.set(i.collectionGroup,p),ke.forEach(p,m=>this.En(e,i,m).next(b=>{const O=this.An(u,m);return b.isEqual(O)?ke.resolve():this.vn(e,u,m,b,O)}))))})}Rn(e,t,r,i){return $h(e).put({indexId:i.indexId,uid:this.uid,arrayValue:i.arrayValue,directionalValue:i.directionalValue,orderedDocumentKey:this.gn(r,t.key),documentKey:t.key.path.toArray()})}Pn(e,t,r,i){return $h(e).delete([i.indexId,this.uid,i.arrayValue,i.directionalValue,this.gn(r,t.key),t.key.path.toArray()])}En(e,t,r){const i=$h(e);let u=new bi(Td);return i.X({index:"documentKeyIndex",range:IDBKeyRange.only([r.indexId,this.uid,this.gn(r,t)])},(c,p)=>{u=u.add(new jh(r.indexId,t,p.arrayValue,p.directionalValue))}).next(()=>u)}An(e,t){let r=new bi(Td);const i=this.mn(t,e);if(null==i)return r;const u=oE(t);if(null!=u){const c=e.data.field(u.fieldPath);if(ep(c))for(const p of c.arrayValue.values||[])r=r.add(new jh(t.indexId,e.key,this.dn(p),i))}else r=r.add(new jh(t.indexId,e.key,om,i));return r}vn(e,t,r,i,u){ft("IndexedDbIndexManager","Updating index entries for document '%s'",t.key);const c=[];return function(p,m,b,O,U){const J=p.getIterator(),ce=m.getIterator();let we=ta(J),Ve=ta(ce);for(;we||Ve;){let Ye=!1,Ot=!1;if(we&&Ve){const en=b(we,Ve);en<0?Ot=!0:en>0&&(Ye=!0)}else null!=we?Ot=!0:Ye=!0;Ye?(O(Ve),Ve=ta(ce)):Ot?(U(we),we=ta(J)):(we=ta(J),Ve=ta(ce))}}(i,u,Td,p=>{c.push(this.Rn(e,t,r,p))},p=>{c.push(this.Pn(e,t,r,p))}),ke.waitFor(c)}Tn(e){let t=1;return am(e).X({index:"sequenceNumberIndex",reverse:!0,range:IDBKeyRange.upperBound([this.uid,Number.MAX_SAFE_INTEGER])},(r,i,u)=>{u.done(),t=i.sequenceNumber+1}).next(()=>t)}createRange(e,t,r){r=r.sort((c,p)=>Td(c,p)).filter((c,p,m)=>!p||0!==Td(c,m[p-1]));const i=[];i.push(e);for(const c of r){const p=Td(c,e),m=Td(c,t);if(0===p)i[0]=e.Je();else if(p>0&&m<0)i.push(c),i.push(c.Je());else if(m>0)break}i.push(t);const u=[];for(let c=0;c<i.length;c+=2){if(this.bn(i[c],i[c+1]))return[];u.push(IDBKeyRange.bound([i[c].indexId,this.uid,i[c].arrayValue,i[c].directionalValue,om,[]],[i[c+1].indexId,this.uid,i[c+1].arrayValue,i[c+1].directionalValue,om,[]]))}return u}bn(e,t){return Td(e,t)>0}getMinOffsetFromCollectionGroup(e,t){return this.getFieldIndexes(e,t).next(nw)}getMinOffset(e,t){return ke.mapArray(this.cn(t),r=>this.an(e,r).next(i=>i||$t())).next(nw)}}function DD(n){return zs(n,"collectionParents")}function $h(n){return zs(n,"indexEntries")}function D_(n){return zs(n,"indexConfiguration")}function am(n){return zs(n,"indexState")}function nw(n){nn(0!==n.length);let e=n[0].indexState.offset,t=e.largestBatchId;for(let r=1;r<n.length;r++){const i=n[r].indexState.offset;r_(i,e)<0&&(e=i),t<i.largestBatchId&&(t=i.largestBatchId)}return new qa(e.readTime,e.documentKey,t)}const TD={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class Vo{constructor(e,t,r){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=r}static withCacheSize(e){return new Vo(e,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}}function rw(n,e,t){const r=n.store("mutations"),i=n.store("documentMutations"),u=[],c=IDBKeyRange.only(t.batchId);let p=0;const m=r.X({range:c},(O,U,J)=>(p++,J.delete()));u.push(m.next(()=>{nn(1===p)}));const b=[];for(const O of t.mutations){const U=u_(e,O.key.path,t.batchId);u.push(i.delete(U)),b.push(O.key)}return ke.waitFor(u).next(()=>b)}function Gh(n){if(!n)return 0;let e;if(n.document)e=n.document;else if(n.unknownDocument)e=n.unknownDocument;else{if(!n.noDocument)throw $t();e=n.noDocument}return JSON.stringify(e).length}Vo.DEFAULT_COLLECTION_PERCENTILE=10,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Vo.DEFAULT=new Vo(41943040,Vo.DEFAULT_COLLECTION_PERCENTILE,Vo.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Vo.DISABLED=new Vo(-1,0,0);class T_{constructor(e,t,r,i){this.userId=e,this.serializer=t,this.indexManager=r,this.referenceDelegate=i,this.Vn={}}static de(e,t,r,i){nn(""!==e.uid);const u=e.isAuthenticated()?e.uid:"";return new T_(u,t,r,i)}checkEmpty(e){let t=!0;const r=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).X({index:"userMutationsIndex",range:r},(i,u,c)=>{t=!1,c.done()}).next(()=>t)}addMutationBatch(e,t,r,i){const u=zh(e),c=vl(e);return c.add({}).next(p=>{nn("number"==typeof p);const m=new FE(p,t,r,i),b=function(J,ce,we){const Ve=we.baseMutations.map(Ot=>fp(J.fe,Ot)),Ye=we.mutations.map(Ot=>fp(J.fe,Ot));return{userId:ce,batchId:we.batchId,localWriteTimeMs:we.localWriteTime.toMillis(),baseMutations:Ve,mutations:Ye}}(this.serializer,this.userId,m),O=[];let U=new bi((J,ce)=>Tn(J.canonicalString(),ce.canonicalString()));for(const J of i){const ce=u_(this.userId,J.key.path,p);U=U.add(J.key.path.popLast()),O.push(c.put(b)),O.push(u.put(ce,Mh))}return U.forEach(J=>{O.push(this.indexManager.addToCollectionParentIndex(e,J))}),e.addOnCommittedListener(()=>{this.Vn[p]=m.keys()}),ke.waitFor(O).next(()=>m)})}lookupMutationBatch(e,t){return vl(e).get(t).next(r=>r?(nn(r.userId===this.userId),Bh(this.serializer,r)):null)}Sn(e,t){return this.Vn[t]?ke.resolve(this.Vn[t]):this.lookupMutationBatch(e,t).next(r=>{if(r){const i=r.keys();return this.Vn[t]=i,i}return null})}getNextMutationBatchAfterBatchId(e,t){const r=t+1,i=IDBKeyRange.lowerBound([this.userId,r]);let u=null;return vl(e).X({index:"userMutationsIndex",range:i},(c,p,m)=>{p.userId===this.userId&&(nn(p.batchId>=r),u=Bh(this.serializer,p)),m.done()}).next(()=>u)}getHighestUnacknowledgedBatchId(e){const t=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]);let r=-1;return vl(e).X({index:"userMutationsIndex",range:t,reverse:!0},(i,u,c)=>{r=u.batchId,c.done()}).next(()=>r)}getAllMutationBatches(e){const t=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return vl(e).j("userMutationsIndex",t).next(r=>r.map(i=>Bh(this.serializer,i)))}getAllMutationBatchesAffectingDocumentKey(e,t){const r=a_(this.userId,t.path),i=IDBKeyRange.lowerBound(r),u=[];return zh(e).X({range:i},(c,p,m)=>{const[b,O,U]=c,J=Do(O);if(b===this.userId&&t.path.isEqual(J))return vl(e).get(U).next(ce=>{if(!ce)throw $t();nn(ce.userId===this.userId),u.push(Bh(this.serializer,ce))});m.done()}).next(()=>u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bi(Tn);const i=[];return t.forEach(u=>{const c=a_(this.userId,u.path),p=IDBKeyRange.lowerBound(c),m=zh(e).X({range:p},(b,O,U)=>{const[J,ce,we]=b,Ve=Do(ce);J===this.userId&&u.path.isEqual(Ve)?r=r.add(we):U.done()});i.push(m)}),ke.waitFor(i).next(()=>this.Dn(e,r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1,u=a_(this.userId,r),c=IDBKeyRange.lowerBound(u);let p=new bi(Tn);return zh(e).X({range:c},(m,b,O)=>{const[U,J,ce]=m,we=Do(J);U===this.userId&&r.isPrefixOf(we)?we.length===i&&(p=p.add(ce)):O.done()}).next(()=>this.Dn(e,p))}Dn(e,t){const r=[],i=[];return t.forEach(u=>{i.push(vl(e).get(u).next(c=>{if(null===c)throw $t();nn(c.userId===this.userId),r.push(Bh(this.serializer,c))}))}),ke.waitFor(i).next(()=>r)}removeMutationBatch(e,t){return rw(e.ht,this.userId,t).next(r=>(e.addOnCommittedListener(()=>{this.Cn(t.batchId)}),ke.forEach(r,i=>this.referenceDelegate.markPotentiallyOrphaned(e,i))))}Cn(e){delete this.Vn[e]}performConsistencyCheck(e){return this.checkEmpty(e).next(t=>{if(!t)return ke.resolve();const r=IDBKeyRange.lowerBound([this.userId]),i=[];return zh(e).X({range:r},(u,c,p)=>{if(u[0]===this.userId){const m=Do(u[1]);i.push(m)}else p.done()}).next(()=>{nn(0===i.length)})})}containsKey(e,t){return SD(e,this.userId,t)}xn(e){return S_(e).get(this.userId).next(t=>t||{userId:this.userId,lastAcknowledgedBatchId:-1,lastStreamToken:""})}}function SD(n,e,t){const r=a_(e,t.path),i=r[1],u=IDBKeyRange.lowerBound(r);let c=!1;return zh(n).X({range:u,Y:!0},(p,m,b)=>{const[O,U,J]=p;O===e&&U===i&&(c=!0),b.done()}).next(()=>c)}function vl(n){return zs(n,"mutations")}function zh(n){return zs(n,"documentMutations")}function S_(n){return zs(n,"mutationQueues")}class Sd{constructor(e){this.Nn=e}next(){return this.Nn+=2,this.Nn}static kn(){return new Sd(0)}static Mn(){return new Sd(-1)}}class mM{constructor(e,t){this.referenceDelegate=e,this.serializer=t}allocateTargetId(e){return this.$n(e).next(t=>{const r=new Sd(t.highestTargetId);return t.highestTargetId=r.next(),this.On(e,t).next(()=>t.highestTargetId)})}getLastRemoteSnapshotVersion(e){return this.$n(e).next(t=>Xt.fromTimestamp(new Ci(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds)))}getHighestSequenceNumber(e){return this.$n(e).next(t=>t.highestListenSequenceNumber)}setTargetsMetadata(e,t,r){return this.$n(e).next(i=>(i.highestListenSequenceNumber=t,r&&(i.lastRemoteSnapshotVersion=r.toTimestamp()),t>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=t),this.On(e,i)))}addTargetData(e,t){return this.Fn(e,t).next(()=>this.$n(e).next(r=>(r.targetCount+=1,this.Bn(t,r),this.On(e,r))))}updateTargetData(e,t){return this.Fn(e,t)}removeTargetData(e,t){return this.removeMatchingKeysForTargetId(e,t.targetId).next(()=>Wh(e).delete(t.targetId)).next(()=>this.$n(e)).next(r=>(nn(r.targetCount>0),r.targetCount-=1,this.On(e,r)))}removeTargets(e,t,r){let i=0;const u=[];return Wh(e).X((c,p)=>{const m=tm(p);m.sequenceNumber<=t&&null===r.get(m.targetId)&&(i++,u.push(this.removeTargetData(e,m)))}).next(()=>ke.waitFor(u)).next(()=>i)}forEachTarget(e,t){return Wh(e).X((r,i)=>{const u=tm(i);t(u)})}$n(e){return iw(e).get("targetGlobalKey").next(t=>(nn(null!==t),t))}On(e,t){return iw(e).put("targetGlobalKey",t)}Fn(e,t){return Wh(e).put(yD(this.serializer,t))}Bn(e,t){let r=!1;return e.targetId>t.highestTargetId&&(t.highestTargetId=e.targetId,r=!0),e.sequenceNumber>t.highestListenSequenceNumber&&(t.highestListenSequenceNumber=e.sequenceNumber,r=!0),r}getTargetCount(e){return this.$n(e).next(t=>t.targetCount)}getTargetData(e,t){const r=Oh(t),i=IDBKeyRange.bound([r,Number.NEGATIVE_INFINITY],[r,Number.POSITIVE_INFINITY]);let u=null;return Wh(e).X({range:i,index:"queryTargetsIndex"},(c,p,m)=>{const b=tm(p);Mc(t,b.target)&&(u=b,m.done())}).next(()=>u)}addMatchingKeys(e,t,r){const i=[],u=Ad(e);return t.forEach(c=>{const p=bo(c.path);i.push(u.put({targetId:r,path:p})),i.push(this.referenceDelegate.addReference(e,r,c))}),ke.waitFor(i)}removeMatchingKeys(e,t,r){const i=Ad(e);return ke.forEach(t,u=>{const c=bo(u.path);return ke.waitFor([i.delete([r,c]),this.referenceDelegate.removeReference(e,r,u)])})}removeMatchingKeysForTargetId(e,t){const r=Ad(e),i=IDBKeyRange.bound([t],[t+1],!1,!0);return r.delete(i)}getMatchingKeysForTargetId(e,t){const r=IDBKeyRange.bound([t],[t+1],!1,!0),i=Ad(e);let u=kn();return i.X({range:r,Y:!0},(c,p,m)=>{const b=Do(c[1]),O=new St(b);u=u.add(O)}).next(()=>u)}containsKey(e,t){const r=bo(t.path),i=IDBKeyRange.bound([r],[cb(r)],!1,!0);let u=0;return Ad(e).X({index:"documentTargetsIndex",Y:!0,range:i},([c,p],m,b)=>{0!==c&&(u++,b.done())}).next(()=>u>0)}le(e,t){return Wh(e).get(t).next(r=>r?tm(r):null)}}function Wh(n){return zs(n,"targets")}function iw(n){return zs(n,"targetGlobal")}function Ad(n){return zs(n,"targetDocuments")}function AD([n,e],[t,r]){const i=Tn(n,t);return 0===i?Tn(e,r):i}class sw{constructor(e){this.Ln=e,this.buffer=new bi(AD),this.qn=0}Un(){return++this.qn}Kn(e){const t=[e,this.Un()];if(this.buffer.size<this.Ln)this.buffer=this.buffer.add(t);else{const r=this.buffer.last();AD(t,r)<0&&(this.buffer=this.buffer.delete(r).add(t))}}get maxValue(){return this.buffer.last()[0]}}class A_{constructor(e,t,r){this.garbageCollector=e,this.asyncQueue=t,this.localStore=r,this.Gn=null}start(){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.Qn(6e4)}stop(){this.Gn&&(this.Gn.cancel(),this.Gn=null)}get started(){return null!==this.Gn}Qn(e){var t=this;ft("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Gn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,(0,qe.Z)(function*(){t.Gn=null;try{yield t.localStore.collectGarbage(t.garbageCollector)}catch(r){hd(r)?ft("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",r):yield Ac(r)}yield t.Qn(3e5)}))}}class MD{constructor(e,t){this.jn=e,this.params=t}calculateTargetCount(e,t){return this.jn.zn(e).next(r=>Math.floor(t/100*r))}nthSequenceNumber(e,t){if(0===t)return ke.resolve(Ta.ct);const r=new sw(t);return this.jn.forEachTarget(e,i=>r.Kn(i.sequenceNumber)).next(()=>this.jn.Wn(e,i=>r.Kn(i))).next(()=>r.maxValue)}removeTargets(e,t,r){return this.jn.removeTargets(e,t,r)}removeOrphanedDocuments(e,t){return this.jn.removeOrphanedDocuments(e,t)}collect(e,t){return-1===this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector","Garbage collection skipped; disabled"),ke.resolve(TD)):this.getCacheSize(e).next(r=>r<this.params.cacheSizeCollectionThreshold?(ft("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),TD):this.Hn(e,t))}getCacheSize(e){return this.jn.getCacheSize(e)}Hn(e,t){let r,i,u,c,p,m,b;const O=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(U=>(U>this.params.maximumSequenceNumbersToCollect?(ft("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${U}`),i=this.params.maximumSequenceNumbersToCollect):i=U,c=Date.now(),this.nthSequenceNumber(e,i))).next(U=>(r=U,p=Date.now(),this.removeTargets(e,r,t))).next(U=>(u=U,m=Date.now(),this.removeOrphanedDocuments(e,r))).next(U=>(b=Date.now(),zf()<=Xi.in.DEBUG&&ft("LruGarbageCollector",`LRU Garbage Collection\n\tCounted targets in ${c-O}ms\n\tDetermined least recently used ${i} in `+(p-c)+`ms\n\tRemoved ${u} targets in `+(m-p)+`ms\n\tRemoved ${U} documents in `+(b-m)+`ms\nTotal Duration: ${b-O}ms`),ke.resolve({didRun:!0,sequenceNumbersCollected:i,targetsRemoved:u,documentsRemoved:U})))}}class ow{constructor(e,t){this.db=e,this.garbageCollector=function M_(n,e){return new MD(n,e)}(this,t)}zn(e){const t=this.Jn(e);return this.db.getTargetCache().getTargetCount(e).next(r=>t.next(i=>r+i))}Jn(e){let t=0;return this.Wn(e,r=>{t++}).next(()=>t)}forEachTarget(e,t){return this.db.getTargetCache().forEachTarget(e,t)}Wn(e,t){return this.Yn(e,(r,i)=>t(i))}addReference(e,t,r){return x_(e,r)}removeReference(e,t,r){return x_(e,r)}removeTargets(e,t,r){return this.db.getTargetCache().removeTargets(e,t,r)}markPotentiallyOrphaned(e,t){return x_(e,t)}Xn(e,t){return function(r,i){let u=!1;return S_(r).Z(c=>SD(r,c,i).next(p=>(p&&(u=!0),ke.resolve(!p)))).next(()=>u)}(e,t)}removeOrphanedDocuments(e,t){const r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[];let u=0;return this.Yn(e,(c,p)=>{if(p<=t){const m=this.Xn(e,c).next(b=>{if(!b)return u++,r.getEntry(e,c).next(()=>(r.removeEntry(c,Xt.min()),Ad(e).delete([0,bo(c.path)])))});i.push(m)}}).next(()=>ke.waitFor(i)).next(()=>r.apply(e)).next(()=>u)}removeTarget(e,t){const r=t.withSequenceNumber(e.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(e,r)}updateLimboDocument(e,t){return x_(e,t)}Yn(e,t){const r=Ad(e);let i,u=Ta.ct;return r.X({index:"documentTargetsIndex"},([c,p],{path:m,sequenceNumber:b})=>{0===c?(u!==Ta.ct&&t(new St(Do(i)),u),u=b,i=m):u=Ta.ct}).next(()=>{u!==Ta.ct&&t(new St(Do(i)),u)})}getCacheSize(e){return this.db.getRemoteDocumentCache().getSize(e)}}function x_(n,e){return Ad(n).put((r=n.currentSequenceNumber,{targetId:0,path:bo(e.path),sequenceNumber:r}));var r}class xD{constructor(){this.changes=new Rc(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Di.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const r=this.changes.get(t);return void 0!==r?ke.resolve(r):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}class yM{constructor(e){this.serializer=e}setIndexManager(e){this.indexManager=e}addEntry(e,t,r){return Md(e).put(r)}removeEntry(e,t,r){return Md(e).delete(function(i,u){const c=i.path.toArray();return[c.slice(0,c.length-2),c[c.length-2],I_(u),c[c.length-1]]}(t,r))}updateMetadata(e,t){return this.getMetadata(e).next(r=>(r.byteSize+=t,this.Zn(e,r)))}getEntry(e,t){let r=Di.newInvalidDocument(t);return Md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(um(t))},(i,u)=>{r=this.ts(t,u)}).next(()=>r)}es(e,t){let r={size:0,document:Di.newInvalidDocument(t)};return Md(e).X({index:"documentKeyIndex",range:IDBKeyRange.only(um(t))},(i,u)=>{r={document:this.ts(t,u),size:Gh(u)}}).next(()=>r)}getEntries(e,t){let r=Sa();return this.ns(e,t,(i,u)=>{const c=this.ts(i,u);r=r.insert(i,c)}).next(()=>r)}ss(e,t){let r=Sa(),i=new si(St.comparator);return this.ns(e,t,(u,c)=>{const p=this.ts(u,c);r=r.insert(u,p),i=i.insert(u,Gh(c))}).next(()=>({documents:r,rs:i}))}ns(e,t,r){if(t.isEmpty())return ke.resolve();let i=new bi(uw);t.forEach(m=>i=i.add(m));const u=IDBKeyRange.bound(um(i.first()),um(i.last())),c=i.getIterator();let p=c.getNext();return Md(e).X({index:"documentKeyIndex",range:u},(m,b,O)=>{const U=St.fromSegments([...b.prefixPath,b.collectionGroup,b.documentId]);for(;p&&uw(p,U)<0;)r(p,null),p=c.getNext();p&&p.isEqual(U)&&(r(p,b),p=c.hasNext()?c.getNext():null),p?O.G(um(p)):O.done()}).next(()=>{for(;p;)r(p,null),p=c.hasNext()?c.getNext():null})}getDocumentsMatchingQuery(e,t,r,i){const u=t.path,c=[u.popLast().toArray(),u.lastSegment(),I_(r.readTime),r.documentKey.path.isEmpty()?"":r.documentKey.path.lastSegment()],p=[u.popLast().toArray(),u.lastSegment(),[Number.MAX_SAFE_INTEGER,Number.MAX_SAFE_INTEGER],""];return Md(e).j(IDBKeyRange.bound(c,p,!0)).next(m=>{let b=Sa();for(const O of m){const U=this.ts(St.fromSegments(O.prefixPath.concat(O.collectionGroup,O.documentId)),O);U.isFoundDocument()&&(qg(t,U)||i.has(U.key))&&(b=b.insert(U.key,U))}return b})}getAllFromCollectionGroup(e,t,r,i){let u=Sa();const c=aw(t,r),p=aw(t,qa.max());return Md(e).X({index:"collectionGroupIndex",range:IDBKeyRange.bound(c,p,!0)},(m,b,O)=>{const U=this.ts(St.fromSegments(b.prefixPath.concat(b.collectionGroup,b.documentId)),b);u=u.insert(U.key,U),u.size===i&&O.done()}).next(()=>u)}newChangeBuffer(e){return new ND(this,!!e&&e.trackRemovals)}getSize(e){return this.getMetadata(e).next(t=>t.byteSize)}getMetadata(e){return R_(e).get("remoteDocumentGlobalKey").next(t=>(nn(!!t),t))}Zn(e,t){return R_(e).put("remoteDocumentGlobalKey",t)}ts(e,t){if(t){const r=function iN(n,e){let t;if(e.document)t=w_(n.fe,e.document,!!e.hasCommittedMutations);else if(e.noDocument){const r=St.fromSegments(e.noDocument.path),i=Vh(e.noDocument.readTime);t=Di.newNoDocument(r,i),e.hasCommittedMutations&&t.setHasCommittedMutations()}else{if(!e.unknownDocument)return $t();{const r=St.fromSegments(e.unknownDocument.path),i=Vh(e.unknownDocument.version);t=Di.newUnknownDocument(r,i)}}return e.readTime&&t.setReadTime(function(r){const i=new Ci(r[0],r[1]);return Xt.fromTimestamp(i)}(e.readTime)),t}(this.serializer,t);if(!r.isNoDocument()||!r.version.isEqual(Xt.min()))return r}return Di.newInvalidDocument(e)}}function RD(n){return new yM(n)}class ND extends xD{constructor(e,t){super(),this.os=e,this.trackRemovals=t,this.us=new Rc(r=>r.toString(),(r,i)=>r.isEqual(i))}applyChanges(e){const t=[];let r=0,i=new bi((u,c)=>Tn(u.canonicalString(),c.canonicalString()));return this.changes.forEach((u,c)=>{const p=this.us.get(u);if(t.push(this.os.removeEntry(e,u,p.readTime)),c.isValidDocument()){const m=mD(this.os.serializer,c);i=i.add(u.path.popLast());const b=Gh(m);r+=b-p.size,t.push(this.os.addEntry(e,u,m))}else if(r-=p.size,this.trackRemovals){const m=mD(this.os.serializer,c.convertToNoDocument(Xt.min()));t.push(this.os.addEntry(e,u,m))}}),i.forEach(u=>{t.push(this.os.indexManager.addToCollectionParentIndex(e,u))}),t.push(this.os.updateMetadata(e,r)),ke.waitFor(t)}getFromCache(e,t){return this.os.es(e,t).next(r=>(this.us.set(t,{size:r.size,readTime:r.document.readTime}),r.document))}getAllFromCache(e,t){return this.os.ss(e,t).next(({documents:r,rs:i})=>(i.forEach((u,c)=>{this.us.set(u,{size:c,readTime:r.get(u).readTime})}),r))}}function R_(n){return zs(n,"remoteDocumentGlobal")}function Md(n){return zs(n,"remoteDocumentsV14")}function um(n){const e=n.path.toArray();return[e.slice(0,e.length-2),e[e.length-2],e[e.length-1]]}function aw(n,e){const t=e.documentKey.path.toArray();return[n,I_(e.readTime),t.slice(0,t.length-2),t.length>0?t[t.length-1]:""]}function uw(n,e){const t=n.path.toArray(),r=e.path.toArray();let i=0;for(let u=0;u<t.length-2&&u<r.length-2;++u)if(i=Tn(t[u],r[u]),i)return i;return i=Tn(t.length,r.length),i||(i=Tn(t[t.length-2],r[r.length-2]),i||Tn(t[t.length-1],r[r.length-1]))}class _M{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}class cw{constructor(e,t,r,i){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,t){let r=null;return this.documentOverlayCache.getOverlay(e,t).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,t))).next(i=>(null!==r&&Yg(r.mutation,i,Oi.empty(),Ci.now()),i))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.getLocalViewOfDocuments(e,r,kn()).next(()=>r))}getLocalViewOfDocuments(e,t,r=kn()){const i=Nc();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,r).next(u=>{let c=yl();return u.forEach((p,m)=>{c=c.insert(p,m.overlayedDocument)}),c}))}getOverlayedDocuments(e,t){const r=Nc();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,kn()))}populateOverlays(e,t,r){const i=[];return r.forEach(u=>{t.has(u)||i.push(u)}),this.documentOverlayCache.getOverlays(e,i).next(u=>{u.forEach((c,p)=>{t.set(c,p)})})}computeViews(e,t,r,i){let u=Sa();const c=vd(),p=vd();return t.forEach((m,b)=>{const O=r.get(b.key);i.has(b.key)&&(void 0===O||O.mutation instanceof Oc)?u=u.insert(b.key,b):void 0!==O?(c.set(b.key,O.mutation.getFieldMask()),Yg(O.mutation,b,O.mutation.getFieldMask(),Ci.now())):c.set(b.key,Oi.empty())}),this.recalculateAndSaveOverlays(e,u).next(m=>(m.forEach((b,O)=>c.set(b,O)),t.forEach((b,O)=>{var U;return p.set(b,new _M(O,null!==(U=c.get(b))&&void 0!==U?U:null))}),p))}recalculateAndSaveOverlays(e,t){const r=vd();let i=new si((c,p)=>c-p),u=kn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(c=>{for(const p of c)p.keys().forEach(m=>{const b=t.get(m);if(null===b)return;let O=r.get(m)||Oi.empty();O=p.applyToLocalView(b,O),r.set(m,O);const U=(i.get(p.batchId)||kn()).add(m);i=i.insert(p.batchId,U)})}).next(()=>{const c=[],p=i.getReverseIterator();for(;p.hasNext();){const m=p.getNext(),b=m.key,O=m.value,U=Gb();O.forEach(J=>{if(!u.has(J)){const ce=Jb(t.get(J),r.get(J));null!==ce&&U.set(J,ce),u=u.add(J)}}),c.push(this.documentOverlayCache.saveOverlays(e,b,U))}return ke.waitFor(c)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,t,r){return St.isDocumentKey((i=t).path)&&null===i.collectionGroup&&0===i.filters.length?this.getDocumentsMatchingDocumentQuery(e,t.path):_d(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,r):this.getDocumentsMatchingCollectionQuery(e,t,r);var i}getNextDocuments(e,t,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,r,i).next(u=>{const c=i-u.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,r.largestBatchId,i-u.size):ke.resolve(Nc());let p=-1,m=u;return c.next(b=>ke.forEach(b,(O,U)=>(p<U.largestBatchId&&(p=U.largestBatchId),u.get(O)?ke.resolve():this.remoteDocumentCache.getEntry(e,O).next(J=>{m=m.insert(O,J)}))).next(()=>this.populateOverlays(e,b,u)).next(()=>this.computeViews(e,m,b,kn())).next(O=>({batchId:p,changes:$b(O)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new St(t)).next(r=>{let i=yl();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,t,r){const i=t.collectionGroup;let u=yl();return this.indexManager.getCollectionParents(e,i).next(c=>ke.forEach(c,p=>{const m=(b=t,O=p.child(i),new xc(O,null,b.explicitOrderBy.slice(),b.filters.slice(),b.limit,b.limitType,b.startAt,b.endAt));var b,O;return this.getDocumentsMatchingCollectionQuery(e,m,r).next(b=>{b.forEach((O,U)=>{u=u.insert(O,U)})})}).next(()=>u))}getDocumentsMatchingCollectionQuery(e,t,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,r.largestBatchId).next(u=>(i=u,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,r,i))).next(u=>{i.forEach((p,m)=>{const b=m.getKey();null===u.get(b)&&(u=u.insert(b,Di.newInvalidDocument(b)))});let c=yl();return u.forEach((p,m)=>{const b=i.get(p);void 0!==b&&Yg(b.mutation,m,Oi.empty(),Ci.now()),qg(t,m)&&(c=c.insert(p,m))}),c})}}class OD{constructor(e){this.serializer=e,this.cs=new Map,this.hs=new Map}getBundleMetadata(e,t){return ke.resolve(this.cs.get(t))}saveBundleMetadata(e,t){var r;return this.cs.set(t.id,{id:(r=t).id,version:r.version,createTime:zi(r.createTime)}),ke.resolve()}getNamedQuery(e,t){return ke.resolve(this.hs.get(t))}saveNamedQuery(e,t){return this.hs.set(t.name,{name:(r=t).name,query:XE(r.bundledQuery),readTime:zi(r.readTime)}),ke.resolve();var r}}class vM{constructor(){this.overlays=new si(St.comparator),this.ls=new Map}getOverlay(e,t){return ke.resolve(this.overlays.get(t))}getOverlays(e,t){const r=Nc();return ke.forEach(t,i=>this.getOverlay(e,i).next(u=>{null!==u&&r.set(i,u)})).next(()=>r)}saveOverlays(e,t,r){return r.forEach((i,u)=>{this.we(e,t,u)}),ke.resolve()}removeOverlaysForBatchId(e,t,r){const i=this.ls.get(r);return void 0!==i&&(i.forEach(u=>this.overlays=this.overlays.remove(u)),this.ls.delete(r)),ke.resolve()}getOverlaysForCollection(e,t,r){const i=Nc(),u=t.length+1,c=new St(t.child("")),p=this.overlays.getIteratorFrom(c);for(;p.hasNext();){const m=p.getNext().value,b=m.getKey();if(!t.isPrefixOf(b.path))break;b.path.length===u&&m.largestBatchId>r&&i.set(m.getKey(),m)}return ke.resolve(i)}getOverlaysForCollectionGroup(e,t,r,i){let u=new si((b,O)=>b-O);const c=this.overlays.getIterator();for(;c.hasNext();){const b=c.getNext().value;if(b.getKey().getCollectionGroup()===t&&b.largestBatchId>r){let O=u.get(b.largestBatchId);null===O&&(O=Nc(),u=u.insert(b.largestBatchId,O)),O.set(b.getKey(),b)}}const p=Nc(),m=u.getIterator();for(;m.hasNext()&&(m.getNext().value.forEach((b,O)=>p.set(b,O)),!(p.size()>=i)););return ke.resolve(p)}we(e,t,r){const i=this.overlays.get(r.key);if(null!==i){const c=this.ls.get(i.largestBatchId).delete(r.key);this.ls.set(i.largestBatchId,c)}this.overlays=this.overlays.insert(r.key,new LE(t,r));let u=this.ls.get(t);void 0===u&&(u=kn(),this.ls.set(t,u)),this.ls.set(t,u.add(r.key))}}class N_{constructor(){this.fs=new bi(uo.ds),this.ws=new bi(uo._s)}isEmpty(){return this.fs.isEmpty()}addReference(e,t){const r=new uo(e,t);this.fs=this.fs.add(r),this.ws=this.ws.add(r)}gs(e,t){e.forEach(r=>this.addReference(r,t))}removeReference(e,t){this.ys(new uo(e,t))}ps(e,t){e.forEach(r=>this.removeReference(r,t))}Is(e){const t=new St(new _r([])),r=new uo(t,e),i=new uo(t,e+1),u=[];return this.ws.forEachInRange([r,i],c=>{this.ys(c),u.push(c.key)}),u}Ts(){this.fs.forEach(e=>this.ys(e))}ys(e){this.fs=this.fs.delete(e),this.ws=this.ws.delete(e)}Es(e){const t=new St(new _r([])),r=new uo(t,e),i=new uo(t,e+1);let u=kn();return this.ws.forEachInRange([r,i],c=>{u=u.add(c.key)}),u}containsKey(e){const t=new uo(e,0),r=this.fs.firstAfterOrEqual(t);return null!==r&&e.isEqual(r.key)}}class uo{constructor(e,t){this.key=e,this.As=t}static ds(e,t){return St.comparator(e.key,t.key)||Tn(e.As,t.As)}static _s(e,t){return Tn(e.As,t.As)||St.comparator(e.key,t.key)}}class na{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.vs=1,this.Rs=new bi(uo.ds)}checkEmpty(e){return ke.resolve(0===this.mutationQueue.length)}addMutationBatch(e,t,r,i){const u=this.vs;this.vs++;const c=new FE(u,t,r,i);this.mutationQueue.push(c);for(const p of i)this.Rs=this.Rs.add(new uo(p.key,u)),this.indexManager.addToCollectionParentIndex(e,p.key.path.popLast());return ke.resolve(c)}lookupMutationBatch(e,t){return ke.resolve(this.Ps(t))}getNextMutationBatchAfterBatchId(e,t){const i=this.bs(t+1),u=i<0?0:i;return ke.resolve(this.mutationQueue.length>u?this.mutationQueue[u]:null)}getHighestUnacknowledgedBatchId(){return ke.resolve(0===this.mutationQueue.length?-1:this.vs-1)}getAllMutationBatches(e){return ke.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const r=new uo(t,0),i=new uo(t,Number.POSITIVE_INFINITY),u=[];return this.Rs.forEachInRange([r,i],c=>{const p=this.Ps(c.As);u.push(p)}),ke.resolve(u)}getAllMutationBatchesAffectingDocumentKeys(e,t){let r=new bi(Tn);return t.forEach(i=>{const u=new uo(i,0),c=new uo(i,Number.POSITIVE_INFINITY);this.Rs.forEachInRange([u,c],p=>{r=r.add(p.As)})}),ke.resolve(this.Vs(r))}getAllMutationBatchesAffectingQuery(e,t){const r=t.path,i=r.length+1;let u=r;St.isDocumentKey(u)||(u=u.child(""));const c=new uo(new St(u),0);let p=new bi(Tn);return this.Rs.forEachWhile(m=>{const b=m.key.path;return!!r.isPrefixOf(b)&&(b.length===i&&(p=p.add(m.As)),!0)},c),ke.resolve(this.Vs(p))}Vs(e){const t=[];return e.forEach(r=>{const i=this.Ps(r);null!==i&&t.push(i)}),t}removeMutationBatch(e,t){nn(0===this.Ss(t.batchId,"removed")),this.mutationQueue.shift();let r=this.Rs;return ke.forEach(t.mutations,i=>{const u=new uo(i.key,t.batchId);return r=r.delete(u),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.Rs=r})}Cn(e){}containsKey(e,t){const r=new uo(t,0),i=this.Rs.firstAfterOrEqual(r);return ke.resolve(t.isEqual(i&&i.key))}performConsistencyCheck(e){return ke.resolve()}Ss(e,t){return this.bs(e)}bs(e){return 0===this.mutationQueue.length?0:e-this.mutationQueue[0].batchId}Ps(e){const t=this.bs(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}class vp{constructor(e){this.Ds=e,this.docs=new si(St.comparator),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const r=t.key,i=this.docs.get(r),u=i?i.size:0,c=this.Ds(t);return this.docs=this.docs.insert(r,{document:t.mutableCopy(),size:c}),this.size+=c-u,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const r=this.docs.get(t);return ke.resolve(r?r.document.mutableCopy():Di.newInvalidDocument(t))}getEntries(e,t){let r=Sa();return t.forEach(i=>{const u=this.docs.get(i);r=r.insert(i,u?u.document.mutableCopy():Di.newInvalidDocument(i))}),ke.resolve(r)}getDocumentsMatchingQuery(e,t,r,i){let u=Sa();const c=t.path,p=new St(c.child("")),m=this.docs.getIteratorFrom(p);for(;m.hasNext();){const{key:b,value:{document:O}}=m.getNext();if(!c.isPrefixOf(b.path))break;b.path.length>c.length+1||r_(lb(O),r)<=0||(i.has(O.key)||qg(t,O))&&(u=u.insert(O.key,O.mutableCopy()))}return ke.resolve(u)}getAllFromCollectionGroup(e,t,r,i){$t()}Cs(e,t){return ke.forEach(this.docs,r=>t(r))}newChangeBuffer(e){return new EM(this)}getSize(e){return ke.resolve(this.size)}}class EM extends xD{constructor(e){super(),this.os=e}applyChanges(e){const t=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?t.push(this.os.addEntry(e,i)):this.os.removeEntry(r)}),ke.waitFor(t)}getFromCache(e,t){return this.os.getEntry(e,t)}getAllFromCache(e,t){return this.os.getEntries(e,t)}}class wM{constructor(e){this.persistence=e,this.xs=new Rc(t=>Oh(t),Mc),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.Ns=0,this.ks=new N_,this.targetCount=0,this.Ms=Sd.kn()}forEachTarget(e,t){return this.xs.forEach((r,i)=>t(i)),ke.resolve()}getLastRemoteSnapshotVersion(e){return ke.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return ke.resolve(this.Ns)}allocateTargetId(e){return this.highestTargetId=this.Ms.next(),ke.resolve(this.highestTargetId)}setTargetsMetadata(e,t,r){return r&&(this.lastRemoteSnapshotVersion=r),t>this.Ns&&(this.Ns=t),ke.resolve()}Fn(e){this.xs.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ms=new Sd(t),this.highestTargetId=t),e.sequenceNumber>this.Ns&&(this.Ns=e.sequenceNumber)}addTargetData(e,t){return this.Fn(t),this.targetCount+=1,ke.resolve()}updateTargetData(e,t){return this.Fn(t),ke.resolve()}removeTargetData(e,t){return this.xs.delete(t.target),this.ks.Is(t.targetId),this.targetCount-=1,ke.resolve()}removeTargets(e,t,r){let i=0;const u=[];return this.xs.forEach((c,p)=>{p.sequenceNumber<=t&&null===r.get(p.targetId)&&(this.xs.delete(c),u.push(this.removeMatchingKeysForTargetId(e,p.targetId)),i++)}),ke.waitFor(u).next(()=>i)}getTargetCount(e){return ke.resolve(this.targetCount)}getTargetData(e,t){const r=this.xs.get(t)||null;return ke.resolve(r)}addMatchingKeys(e,t,r){return this.ks.gs(t,r),ke.resolve()}removeMatchingKeys(e,t,r){this.ks.ps(t,r);const i=this.persistence.referenceDelegate,u=[];return i&&t.forEach(c=>{u.push(i.markPotentiallyOrphaned(e,c))}),ke.waitFor(u)}removeMatchingKeysForTargetId(e,t){return this.ks.Is(t),ke.resolve()}getMatchingKeysForTargetId(e,t){const r=this.ks.Es(t);return ke.resolve(r)}containsKey(e,t){return ke.resolve(this.ks.containsKey(t))}}class PD{constructor(e,t){this.$s={},this.overlays={},this.Os=new Ta(0),this.Fs=!1,this.Fs=!0,this.referenceDelegate=e(this),this.Bs=new wM(this),this.indexManager=new pM,this.remoteDocumentCache=new vp(r=>this.referenceDelegate.Ls(r)),this.serializer=new gD(t),this.qs=new OD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Fs=!1,Promise.resolve()}get started(){return this.Fs}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new vM,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let r=this.$s[e.toKey()];return r||(r=new na(t,this.referenceDelegate),this.$s[e.toKey()]=r),r}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.qs}runTransaction(e,t,r){ft("MemoryPersistence","Starting transaction:",e);const i=new aN(this.Os.next());return this.referenceDelegate.Us(),r(i).next(u=>this.referenceDelegate.Ks(i).next(()=>u)).toPromise().then(u=>(i.raiseOnCommittedEvent(),u))}Gs(e,t){return ke.or(Object.values(this.$s).map(r=>()=>r.containsKey(e,t)))}}class aN extends cE{constructor(e){super(),this.currentSequenceNumber=e}}class cm{constructor(e){this.persistence=e,this.Qs=new N_,this.js=null}static zs(e){return new cm(e)}get Ws(){if(this.js)return this.js;throw $t()}addReference(e,t,r){return this.Qs.addReference(r,t),this.Ws.delete(r.toString()),ke.resolve()}removeReference(e,t,r){return this.Qs.removeReference(r,t),this.Ws.add(r.toString()),ke.resolve()}markPotentiallyOrphaned(e,t){return this.Ws.add(t.toString()),ke.resolve()}removeTarget(e,t){this.Qs.Is(t.targetId).forEach(i=>this.Ws.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,t.targetId).next(i=>{i.forEach(u=>this.Ws.add(u.toString()))}).next(()=>r.removeTargetData(e,t))}Us(){this.js=new Set}Ks(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return ke.forEach(this.Ws,r=>{const i=St.fromPath(r);return this.Hs(e,i).next(u=>{u||t.removeEntry(i,Xt.min())})}).next(()=>(this.js=null,t.apply(e)))}updateLimboDocument(e,t){return this.Hs(e,t).next(r=>{r?this.Ws.delete(t.toString()):this.Ws.add(t.toString())})}Ls(e){return 0}Hs(e,t){return ke.or([()=>ke.resolve(this.Qs.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Gs(e,t)])}}class lm{constructor(e){this.serializer=e}O(e,t,r,i){const u=new Vg("createOrUpgrade",t);var p;r<1&&i>=1&&(e.createObjectStore("owner"),(p=e).createObjectStore("mutationQueues",{keyPath:"userId"}),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gb,{unique:!0}),p.createObjectStore("documentMutations"),kD(e),function(p){p.createObjectStore("remoteDocuments")}(e));let c=ke.resolve();return r<3&&i>=3&&(0!==r&&(function(p){p.deleteObjectStore("targetDocuments"),p.deleteObjectStore("targets"),p.deleteObjectStore("targetGlobal")}(e),kD(e)),c=c.next(()=>function(p){const m=p.store("targetGlobal"),b={highestTargetId:0,highestListenSequenceNumber:0,lastRemoteSnapshotVersion:Xt.min().toTimestamp(),targetCount:0};return m.put("targetGlobalKey",b)}(u))),r<4&&i>=4&&(0!==r&&(c=c.next(()=>function(p,m){return m.store("mutations").j().next(b=>{p.deleteObjectStore("mutations"),p.createObjectStore("mutations",{keyPath:"batchId",autoIncrement:!0}).createIndex("userMutationsIndex",gb,{unique:!0});const O=m.store("mutations"),U=b.map(J=>O.put(J));return ke.waitFor(U)})}(e,u))),c=c.next(()=>{!function(p){p.createObjectStore("clientMetadata",{keyPath:"clientId"})}(e)})),r<5&&i>=5&&(c=c.next(()=>this.Ys(u))),r<6&&i>=6&&(c=c.next(()=>(function(p){p.createObjectStore("remoteDocumentGlobal")}(e),this.Xs(u)))),r<7&&i>=7&&(c=c.next(()=>this.Zs(u))),r<8&&i>=8&&(c=c.next(()=>this.ti(e,u))),r<9&&i>=9&&(c=c.next(()=>{!function(p){p.objectStoreNames.contains("remoteDocumentChanges")&&p.deleteObjectStore("remoteDocumentChanges")}(e)})),r<10&&i>=10&&(c=c.next(()=>this.ei(u))),r<11&&i>=11&&(c=c.next(()=>{(function(p){p.createObjectStore("bundles",{keyPath:"bundleId"})})(e),function(p){p.createObjectStore("namedQueries",{keyPath:"name"})}(e)})),r<12&&i>=12&&(c=c.next(()=>{!function(p){const m=p.createObjectStore("documentOverlays",{keyPath:UA});m.createIndex("collectionPathOverlayIndex",VA,{unique:!1}),m.createIndex("collectionGroupOverlayIndex",_b,{unique:!1})}(e)})),r<13&&i>=13&&(c=c.next(()=>function(p){const m=p.createObjectStore("remoteDocumentsV14",{keyPath:dE});m.createIndex("documentKeyIndex",PA),m.createIndex("collectionGroupIndex",hE)}(e)).next(()=>this.ni(e,u)).next(()=>e.deleteObjectStore("remoteDocuments"))),r<14&&i>=14&&(c=c.next(()=>this.si(e,u))),r<15&&i>=15&&(c=c.next(()=>function(p){p.createObjectStore("indexConfiguration",{keyPath:"indexId",autoIncrement:!0}).createIndex("collectionGroupIndex","collectionGroup",{unique:!1}),p.createObjectStore("indexState",{keyPath:mb}).createIndex("sequenceNumberIndex",LA,{unique:!1}),p.createObjectStore("indexEntries",{keyPath:Gs}).createIndex("documentKeyIndex",yb,{unique:!1})}(e))),c}Xs(e){let t=0;return e.store("remoteDocuments").X((r,i)=>{t+=Gh(i)}).next(()=>{const r={byteSize:t};return e.store("remoteDocumentGlobal").put("remoteDocumentGlobalKey",r)})}Ys(e){const t=e.store("mutationQueues"),r=e.store("mutations");return t.j().next(i=>ke.forEach(i,u=>{const c=IDBKeyRange.bound([u.userId,-1],[u.userId,u.lastAcknowledgedBatchId]);return r.j("userMutationsIndex",c).next(p=>ke.forEach(p,m=>{nn(m.userId===u.userId);const b=Bh(this.serializer,m);return rw(e,u.userId,b).next(()=>{})}))}))}Zs(e){const t=e.store("targetDocuments"),r=e.store("remoteDocuments");return e.store("targetGlobal").get("targetGlobalKey").next(i=>{const u=[];return r.X((c,p)=>{const m=new _r(c),b=[0,bo(m)];u.push(t.get(b).next(O=>O?ke.resolve():t.put({targetId:0,path:bo(m),sequenceNumber:i.highestListenSequenceNumber})))}).next(()=>ke.waitFor(u))})}ti(e,t){e.createObjectStore("collectionParents",{keyPath:FA});const r=t.store("collectionParents"),i=new _p,u=c=>{if(i.add(c)){const p=c.lastSegment(),m=c.popLast();return r.put({collectionId:p,parent:bo(m)})}};return t.store("remoteDocuments").X({Y:!0},(c,p)=>{const m=new _r(c);return u(m.popLast())}).next(()=>t.store("documentMutations").X({Y:!0},([c,p,m],b)=>{const O=Do(p);return u(O.popLast())}))}ei(e){const t=e.store("targets");return t.X((r,i)=>{const u=tm(i),c=yD(this.serializer,u);return t.put(c)})}ni(e,t){const r=t.store("remoteDocuments"),i=[];return r.X((u,c)=>{const p=t.store("remoteDocumentsV14"),m=(b=c,b.document?new St(_r.fromString(b.document.name).popFirst(5)):b.noDocument?St.fromSegments(b.noDocument.path):b.unknownDocument?St.fromSegments(b.unknownDocument.path):$t()).path.toArray();var b;const O={prefixPath:m.slice(0,m.length-2),collectionGroup:m[m.length-2],documentId:m[m.length-1],readTime:c.readTime||[0,0],unknownDocument:c.unknownDocument,noDocument:c.noDocument,document:c.document,hasCommittedMutations:!!c.hasCommittedMutations};i.push(p.put(O))}).next(()=>ke.waitFor(i))}si(e,t){const r=t.store("mutations"),i=RD(this.serializer),u=new PD(cm.zs,this.serializer.fe);return r.j().next(c=>{const p=new Map;return c.forEach(m=>{var b;let O=null!==(b=p.get(m.userId))&&void 0!==b?b:kn();Bh(this.serializer,m).keys().forEach(U=>O=O.add(U)),p.set(m.userId,O)}),ke.forEach(p,(m,b)=>{const O=new Rs(b),U=nm.de(this.serializer,O),J=u.getIndexManager(O),ce=T_.de(O,this.serializer,J,u.referenceDelegate);return new cw(i,ce,U,J).recalculateAndSaveOverlaysForDocumentKeys(new pE(t,Ta.ct),m).next()})})}}function kD(n){n.createObjectStore("targetDocuments",{keyPath:nN}).createIndex("documentTargetsIndex",kA,{unique:!0}),n.createObjectStore("targets",{keyPath:"targetId"}).createIndex("queryTargetsIndex",tN,{unique:!0}),n.createObjectStore("targetGlobal")}const dm="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.";class lw{constructor(e,t,r,i,u,c,p,m,b,O,U=15){if(this.allowTabSynchronization=e,this.persistenceKey=t,this.clientId=r,this.ii=u,this.window=c,this.document=p,this.ri=b,this.oi=O,this.ui=U,this.Os=null,this.Fs=!1,this.isPrimary=!1,this.networkEnabled=!0,this.ci=null,this.inForeground=!1,this.ai=null,this.hi=null,this.li=Number.NEGATIVE_INFINITY,this.fi=J=>Promise.resolve(),!lw.D())throw new dt(je.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new ow(this,i),this.di=t+"main",this.serializer=new gD(m),this.wi=new Cu(this.di,this.ui,new lm(this.serializer)),this.Bs=new mM(this.referenceDelegate,this.serializer),this.remoteDocumentCache=RD(this.serializer),this.qs=new lM,this.window&&this.window.localStorage?this._i=this.window.localStorage:(this._i=null,!1===O&&os("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}start(){return this.mi().then(()=>{if(!this.isPrimary&&!this.allowTabSynchronization)throw new dt(je.FAILED_PRECONDITION,dm);return this.gi(),this.yi(),this.pi(),this.runTransaction("getHighestListenSequenceNumber","readonly",e=>this.Bs.getHighestSequenceNumber(e))}).then(e=>{this.Os=new Ta(e,this.ri)}).then(()=>{this.Fs=!0}).catch(e=>(this.wi&&this.wi.close(),Promise.reject(e)))}Ii(e){var t=this;return this.fi=function(){var r=(0,qe.Z)(function*(i){if(t.started)return e(i)});return function(i){return r.apply(this,arguments)}}(),e(this.isPrimary)}setDatabaseDeletedListener(e){this.wi.B(function(){var t=(0,qe.Z)(function*(r){null===r.newVersion&&(yield e())});return function(r){return t.apply(this,arguments)}}())}setNetworkEnabled(e){var t=this;this.networkEnabled!==e&&(this.networkEnabled=e,this.ii.enqueueAndForget((0,qe.Z)(function*(){t.started&&(yield t.mi())})))}mi(){return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",e=>O_(e).put({clientId:this.clientId,updateTimeMs:Date.now(),networkEnabled:this.networkEnabled,inForeground:this.inForeground}).next(()=>{if(this.isPrimary)return this.Ti(e).next(t=>{t||(this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)))})}).next(()=>this.Ei(e)).next(t=>this.isPrimary&&!t?this.Ai(e).next(()=>!1):!!t&&this.vi(e).next(()=>!0))).catch(e=>{if(hd(e))return ft("IndexedDbPersistence","Failed to extend owner lease: ",e),this.isPrimary;if(!this.allowTabSynchronization)throw e;return ft("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(e=>{this.isPrimary!==e&&this.ii.enqueueRetryable(()=>this.fi(e)),this.isPrimary=e})}Ti(e){return wp(e).get("owner").next(t=>ke.resolve(this.Ri(t)))}Pi(e){return O_(e).delete(this.clientId)}bi(){var e=this;return(0,qe.Z)(function*(){if(e.isPrimary&&!e.Vi(e.li,18e5)){e.li=Date.now();const t=yield e.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",r=>{const i=zs(r,"clientMetadata");return i.j().next(u=>{const c=e.Si(u,18e5),p=u.filter(m=>-1===c.indexOf(m));return ke.forEach(p,m=>i.delete(m.clientId)).next(()=>p)})}).catch(()=>[]);if(e._i)for(const r of t)e._i.removeItem(e.Di(r.clientId))}})()}pi(){this.hi=this.ii.enqueueAfterDelay("client_metadata_refresh",4e3,()=>this.mi().then(()=>this.bi()).then(()=>this.pi()))}Ri(e){return!!e&&e.ownerId===this.clientId}Ei(e){return this.oi?ke.resolve(!0):wp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)){if(this.Ri(t)&&this.networkEnabled)return!0;if(!this.Ri(t)){if(!t.allowTabSynchronization)throw new dt(je.FAILED_PRECONDITION,dm);return!1}}return!(!this.networkEnabled||!this.inForeground)||O_(e).j().next(r=>void 0===this.Si(r,5e3).find(i=>!(this.clientId===i.clientId||!(!this.networkEnabled&&i.networkEnabled||!this.inForeground&&i.inForeground&&this.networkEnabled===i.networkEnabled))))}).next(t=>(this.isPrimary!==t&&ft("IndexedDbPersistence",`Client ${t?"is":"is not"} eligible for a primary lease.`),t))}shutdown(){var e=this;return(0,qe.Z)(function*(){e.Fs=!1,e.xi(),e.hi&&(e.hi.cancel(),e.hi=null),e.Ni(),e.ki(),yield e.wi.runTransaction("shutdown","readwrite",["owner","clientMetadata"],t=>{const r=new pE(t,Ta.ct);return e.Ai(r).next(()=>e.Pi(r))}),e.wi.close(),e.Mi()})()}Si(e,t){return e.filter(r=>this.Vi(r.updateTimeMs,t)&&!this.Ci(r.clientId))}$i(){return this.runTransaction("getActiveClients","readonly",e=>O_(e).j().next(t=>this.Si(t,18e5).map(r=>r.clientId)))}get started(){return this.Fs}getMutationQueue(e,t){return T_.de(e,this.serializer,t,this.referenceDelegate)}getTargetCache(){return this.Bs}getRemoteDocumentCache(){return this.remoteDocumentCache}getIndexManager(e){return new gM(e,this.serializer.fe.databaseId)}getDocumentOverlayCache(e){return nm.de(this.serializer,e)}getBundleCache(){return this.qs}runTransaction(e,t,r){ft("IndexedDbPersistence","Starting transaction:",e);const i="readonly"===t?"readonly":"readwrite",u=15===(c=this.ui)?BA:14===c?xh:13===c?fE:12===c?Eb:11===c?vb:void $t();var c;let p;return this.wi.runTransaction(e,i,u,m=>(p=new pE(m,this.Os?this.Os.next():Ta.ct),"readwrite-primary"===t?this.Ti(p).next(b=>!!b||this.Ei(p)).next(b=>{if(!b)throw os(`Failed to obtain primary lease for action '${e}'.`),this.isPrimary=!1,this.ii.enqueueRetryable(()=>this.fi(!1)),new dt(je.FAILED_PRECONDITION,i_);return r(p)}).next(b=>this.vi(p).next(()=>b)):this.Oi(p).next(()=>r(p)))).then(m=>(p.raiseOnCommittedEvent(),m))}Oi(e){return wp(e).get("owner").next(t=>{if(null!==t&&this.Vi(t.leaseTimestampMs,5e3)&&!this.Ci(t.ownerId)&&!this.Ri(t)&&!(this.oi||this.allowTabSynchronization&&t.allowTabSynchronization))throw new dt(je.FAILED_PRECONDITION,dm)})}vi(e){const t={ownerId:this.clientId,allowTabSynchronization:this.allowTabSynchronization,leaseTimestampMs:Date.now()};return wp(e).put("owner",t)}static D(){return Cu.D()}Ai(e){const t=wp(e);return t.get("owner").next(r=>this.Ri(r)?(ft("IndexedDbPersistence","Releasing primary lease."),t.delete("owner")):ke.resolve())}Vi(e,t){const r=Date.now();return!(e<r-t||e>r&&(os(`Detected an update time that is in the future: ${e} > ${r}`),1))}gi(){null!==this.document&&"function"==typeof this.document.addEventListener&&(this.ai=()=>{this.ii.enqueueAndForget(()=>(this.inForeground="visible"===this.document.visibilityState,this.mi()))},this.document.addEventListener("visibilitychange",this.ai),this.inForeground="visible"===this.document.visibilityState)}Ni(){this.ai&&(this.document.removeEventListener("visibilitychange",this.ai),this.ai=null)}yi(){var e;"function"==typeof(null===(e=this.window)||void 0===e?void 0:e.addEventListener)&&(this.ci=()=>{this.xi();const t=/(?:Version|Mobile)\/1[456]/;(0,ee.G6)()&&(navigator.appVersion.match(t)||navigator.userAgent.match(t))&&this.ii.enterRestrictedMode(!0),this.ii.enqueueAndForget(()=>this.shutdown())},this.window.addEventListener("pagehide",this.ci))}ki(){this.ci&&(this.window.removeEventListener("pagehide",this.ci),this.ci=null)}Ci(e){var t;try{const r=null!==(null===(t=this._i)||void 0===t?void 0:t.getItem(this.Di(e)));return ft("IndexedDbPersistence",`Client '${e}' ${r?"is":"is not"} zombied in LocalStorage`),r}catch(r){return os("IndexedDbPersistence","Failed to get zombied client id.",r),!1}}xi(){if(this._i)try{this._i.setItem(this.Di(this.clientId),String(Date.now()))}catch(e){os("Failed to set zombie client id.",e)}}Mi(){if(this._i)try{this._i.removeItem(this.Di(this.clientId))}catch{}}Di(e){return`firestore_zombie_${this.persistenceKey}_${e}`}}function wp(n){return zs(n,"owner")}function O_(n){return zs(n,"clientMetadata")}function dw(n,e){let t=n.projectId;return n.isDefaultDatabase||(t+="."+n.database),"firestore/"+e+"/"+t+"/"}class hw{constructor(e,t,r,i){this.targetId=e,this.fromCache=t,this.Fi=r,this.Bi=i}static Li(e,t){let r=kn(),i=kn();for(const u of t.docChanges)switch(u.type){case 0:r=r.add(u.doc.key);break;case 1:i=i.add(u.doc.key)}return new hw(e,t.fromCache,r,i)}}class P_{constructor(){this.qi=!1}initialize(e,t){this.Ui=e,this.indexManager=t,this.qi=!0}getDocumentsMatchingQuery(e,t,r,i){return this.Ki(e,t).next(u=>u||this.Gi(e,t,i,r)).next(u=>u||this.Qi(e,t))}Ki(e,t){if(Bb(t))return ke.resolve(null);let r=ao(t);return this.indexManager.getIndexType(e,r).next(i=>0===i?null:(null!==t.limit&&1===i&&(t=Ti(t,null,"F"),r=ao(t)),this.indexManager.getDocumentsMatchingTarget(e,r).next(u=>{const c=kn(...u);return this.Ui.getDocuments(e,c).next(p=>this.indexManager.getMinOffset(e,r).next(m=>{const b=this.ji(t,p);return this.zi(t,b,c,m.readTime)?this.Ki(e,Ti(t,null,"F")):this.Wi(e,b,t,m)}))})))}Gi(e,t,r,i){return Bb(t)||i.isEqual(Xt.min())?this.Qi(e,t):this.Ui.getDocuments(e,r).next(u=>{const c=this.ji(t,u);return this.zi(t,c,r,i)?this.Qi(e,t):(zf()<=Xi.in.DEBUG&&ft("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),h_(t)),this.Wi(e,c,t,uE(i,-1)))})}ji(e,t){let r=new bi(PE(e));return t.forEach((i,u)=>{qg(e,u)&&(r=r.add(u))}),r}zi(e,t,r,i){if(null===e.limit)return!1;if(r.size!==t.size)return!0;const u="F"===e.limitType?t.last():t.first();return!!u&&(u.hasPendingWrites||u.version.compareTo(i)>0)}Qi(e,t){return zf()<=Xi.in.DEBUG&&ft("QueryEngine","Using full collection scan to execute query:",h_(t)),this.Ui.getDocumentsMatchingQuery(e,t,qa.min())}Wi(e,t,r,i){return this.Ui.getDocumentsMatchingQuery(e,r,i).next(u=>(t.forEach(c=>{u=u.insert(c.key,c)}),u))}}class FD{constructor(e,t,r,i){this.persistence=e,this.Hi=t,this.serializer=i,this.Ji=new si(Tn),this.Yi=new Rc(u=>Oh(u),Mc),this.Xi=new Map,this.Zi=e.getRemoteDocumentCache(),this.Bs=e.getTargetCache(),this.qs=e.getBundleCache(),this.tr(r)}tr(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new cw(this.Zi,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Zi.setIndexManager(this.indexManager),this.Hi.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ji))}}function LD(n,e,t,r){return new FD(n,e,t,r)}function hm(n,e){return fm.apply(this,arguments)}function fm(){return fm=(0,qe.Z)(function*(n,e){const t=Nt(n);return yield t.persistence.runTransaction("Handle user change","readonly",r=>{let i;return t.mutationQueue.getAllMutationBatches(r).next(u=>(i=u,t.tr(e),t.mutationQueue.getAllMutationBatches(r))).next(u=>{const c=[],p=[];let m=kn();for(const b of i){c.push(b.batchId);for(const O of b.mutations)m=m.add(O.key)}for(const b of u){p.push(b.batchId);for(const O of b.mutations)m=m.add(O.key)}return t.localDocuments.getDocuments(r,m).next(b=>({er:b,removedBatchIds:c,addedBatchIds:p}))})})}),fm.apply(this,arguments)}function fw(n){const e=Nt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Bs.getLastRemoteSnapshotVersion(t))}function pw(n,e,t){let r=kn(),i=kn();return t.forEach(u=>r=r.add(u)),e.getEntries(n,r).next(u=>{let c=Sa();return t.forEach((p,m)=>{const b=u.get(p);m.isFoundDocument()!==b.isFoundDocument()&&(i=i.add(p)),m.isNoDocument()&&m.version.isEqual(Xt.min())?(e.removeEntry(p,m.readTime),c=c.insert(p,m)):!b.isValidDocument()||m.version.compareTo(b.version)>0||0===m.version.compareTo(b.version)&&b.hasPendingWrites?(e.addEntry(m),c=c.insert(p,m)):ft("LocalStore","Ignoring outdated watch update for ",p,". Current version:",b.version," Watch version:",m.version)}),{nr:c,sr:i}})}function Cp(n,e){const t=Nt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",r=>(void 0===e&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function Ip(n,e){const t=Nt(n);return t.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return t.Bs.getTargetData(r,e).next(u=>u?(i=u,ke.resolve(i)):t.Bs.allocateTargetId(r).next(c=>(i=new _l(e,c,"TargetPurposeListen",r.currentSequenceNumber),t.Bs.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=t.Ji.get(r.targetId);return(null===i||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(t.Ji=t.Ji.insert(r.targetId,r),t.Yi.set(e,r.targetId)),r})}function qh(n,e,t){return pm.apply(this,arguments)}function pm(){return pm=(0,qe.Z)(function*(n,e,t){const r=Nt(n),i=r.Ji.get(e),u=t?"readwrite":"readwrite-primary";try{t||(yield r.persistence.runTransaction("Release target",u,c=>r.persistence.referenceDelegate.removeTarget(c,i)))}catch(c){if(!hd(c))throw c;ft("LocalStore",`Failed to update sequence numbers for target ${e}: ${c}`)}r.Ji=r.Ji.remove(e),r.Yi.delete(i.target)}),pm.apply(this,arguments)}function gw(n,e,t){const r=Nt(n);let i=Xt.min(),u=kn();return r.persistence.runTransaction("Execute query","readonly",c=>function(p,m,b){const O=Nt(p),U=O.Yi.get(b);return void 0!==U?ke.resolve(O.Ji.get(U)):O.Bs.getTargetData(m,b)}(r,c,ao(e)).next(p=>{if(p)return i=p.lastLimboFreeSnapshotVersion,r.Bs.getMatchingKeysForTargetId(c,p.targetId).next(m=>{u=m})}).next(()=>r.Hi.getDocumentsMatchingQuery(c,e,t?i:Xt.min(),t?u:kn())).next(p=>(VD(r,OE(e),p),{documents:p,ir:u})))}function UD(n,e){const t=Nt(n),r=Nt(t.Bs),i=t.Ji.get(e);return i?Promise.resolve(i.target):t.persistence.runTransaction("Get target data","readonly",u=>r.le(u,e).next(c=>c?c.target:null))}function IM(n,e){const t=Nt(n),r=t.Xi.get(e)||Xt.min();return t.persistence.runTransaction("Get new document changes","readonly",i=>t.Zi.getAllFromCollectionGroup(i,e,uE(r,-1),Number.MAX_SAFE_INTEGER)).then(i=>(VD(t,e,i),i))}function VD(n,e,t){let r=n.Xi.get(e)||Xt.min();t.forEach((i,u)=>{u.readTime.compareTo(r)>0&&(r=u.readTime)}),n.Xi.set(e,r)}function mw(){return mw=(0,qe.Z)(function*(n,e,t,r){const i=Nt(n);let u=kn(),c=Sa();for(const b of t){const O=e.rr(b.metadata.name);b.document&&(u=u.add(O));const U=e.ur(b);U.setReadTime(e.cr(b.metadata.readTime)),c=c.insert(O,U)}const p=i.Zi.newChangeBuffer({trackRemovals:!0}),m=yield Ip(i,(b=r,ao(an(_r.fromString(`__bundle__/docs/${b}`)))));var b;return i.persistence.runTransaction("Apply bundle documents","readwrite",b=>pw(b,p,c).next(O=>(p.apply(b),O)).next(O=>i.Bs.removeMatchingKeysForTargetId(b,m.targetId).next(()=>i.Bs.addMatchingKeys(b,u,m.targetId)).next(()=>i.localDocuments.getLocalViewOfDocuments(b,O.nr,O.sr)).next(()=>O.nr)))}),mw.apply(this,arguments)}function BD(n,e){return k_.apply(this,arguments)}function k_(){return k_=(0,qe.Z)(function*(n,e,t=kn()){const r=yield Ip(n,ao(XE(e.bundledQuery))),i=Nt(n);return i.persistence.runTransaction("Save named query","readwrite",u=>{const c=zi(e.readTime);if(r.snapshotVersion.compareTo(c)>=0)return i.qs.saveNamedQuery(u,e);const p=r.withResumeToken(Ns.EMPTY_BYTE_STRING,c);return i.Ji=i.Ji.insert(p.targetId,p),i.Bs.updateTargetData(u,p).next(()=>i.Bs.removeMatchingKeysForTargetId(u,r.targetId)).next(()=>i.Bs.addMatchingKeys(u,t,r.targetId)).next(()=>i.qs.saveNamedQuery(u,e))})}),k_.apply(this,arguments)}function jD(n,e){return`firestore_clients_${n}_${e}`}function yw(n,e,t){let r=`firestore_mutations_${n}_${t}`;return e.isAuthenticated()&&(r+=`_${e.uid}`),r}function F_(n,e){return`firestore_targets_${n}_${e}`}class L_{constructor(e,t,r,i){this.user=e,this.batchId=t,this.state=r,this.error=i}static ar(e,t,r){const i=JSON.parse(r);let u,c="object"==typeof i&&-1!==["pending","acknowledged","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return c&&i.error&&(c="string"==typeof i.error.message&&"string"==typeof i.error.code,c&&(u=new dt(i.error.code,i.error.message))),c?new L_(e,t,i.state,u):(os("SharedClientState",`Failed to parse mutation state for ID '${t}': ${r}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class gm{constructor(e,t,r){this.targetId=e,this.state=t,this.error=r}static ar(e,t){const r=JSON.parse(t);let i,u="object"==typeof r&&-1!==["not-current","current","rejected"].indexOf(r.state)&&(void 0===r.error||"object"==typeof r.error);return u&&r.error&&(u="string"==typeof r.error.message&&"string"==typeof r.error.code,u&&(i=new dt(r.error.code,r.error.message))),u?new gm(e,r.state,i):(os("SharedClientState",`Failed to parse target state for ID '${e}': ${t}`),null)}hr(){const e={state:this.state,updateTimeMs:Date.now()};return this.error&&(e.error={code:this.error.code,message:this.error.message}),JSON.stringify(e)}}class mm{constructor(e,t){this.clientId=e,this.activeTargetIds=t}static ar(e,t){const r=JSON.parse(t);let i="object"==typeof r&&r.activeTargetIds instanceof Array,u=kh();for(let c=0;i&&c<r.activeTargetIds.length;++c)i=lE(r.activeTargetIds[c]),u=u.add(r.activeTargetIds[c]);return i?new mm(e,u):(os("SharedClientState",`Failed to parse client data for instance '${e}': ${t}`),null)}}class _w{constructor(e,t){this.clientId=e,this.onlineState=t}static ar(e){const t=JSON.parse(e);return"object"==typeof t&&-1!==["Unknown","Online","Offline"].indexOf(t.onlineState)&&"string"==typeof t.clientId?new _w(t.clientId,t.onlineState):(os("SharedClientState",`Failed to parse online state: ${e}`),null)}}class U_{constructor(){this.activeTargetIds=kh()}lr(e){this.activeTargetIds=this.activeTargetIds.add(e)}dr(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hr(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class V_{constructor(e,t,r,i,u){this.window=e,this.ii=t,this.persistenceKey=r,this.wr=i,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this._r=this.mr.bind(this),this.gr=new si(Tn),this.started=!1,this.yr=[];const c=r.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=u,this.pr=jD(this.persistenceKey,this.wr),this.Ir=`firestore_sequence_number_${this.persistenceKey}`,this.gr=this.gr.insert(this.wr,new U_),this.Tr=new RegExp(`^firestore_clients_${c}_([^_]*)$`),this.Er=new RegExp(`^firestore_mutations_${c}_(\\d+)(?:_(.*))?$`),this.Ar=new RegExp(`^firestore_targets_${c}_(\\d+)$`),this.vr=`firestore_online_state_${this.persistenceKey}`,this.Rr=function(p){return`firestore_bundle_loaded_v2_${p}`}(this.persistenceKey),this.window.addEventListener("storage",this._r)}static D(e){return!(!e||!e.localStorage)}start(){var e=this;return(0,qe.Z)(function*(){const t=yield e.syncEngine.$i();for(const i of t){if(i===e.wr)continue;const u=e.getItem(jD(e.persistenceKey,i));if(u){const c=mm.ar(i,u);c&&(e.gr=e.gr.insert(c.clientId,c))}}e.Pr();const r=e.storage.getItem(e.vr);if(r){const i=e.br(r);i&&e.Vr(i)}for(const i of e.yr)e.mr(i);e.yr=[],e.window.addEventListener("pagehide",()=>e.shutdown()),e.started=!0})()}writeSequenceNumber(e){this.setItem(this.Ir,JSON.stringify(e))}getAllActiveQueryTargets(){return this.Sr(this.gr)}isActiveQueryTarget(e){let t=!1;return this.gr.forEach((r,i)=>{i.activeTargetIds.has(e)&&(t=!0)}),t}addPendingMutation(e){this.Dr(e,"pending")}updateMutationState(e,t,r){this.Dr(e,t,r),this.Cr(e)}addLocalQueryTarget(e){let t="not-current";if(this.isActiveQueryTarget(e)){const r=this.storage.getItem(F_(this.persistenceKey,e));if(r){const i=gm.ar(e,r);i&&(t=i.state)}}return this.Nr.lr(e),this.Pr(),t}removeLocalQueryTarget(e){this.Nr.dr(e),this.Pr()}isLocalQueryTarget(e){return this.Nr.activeTargetIds.has(e)}clearQueryState(e){this.removeItem(F_(this.persistenceKey,e))}updateQueryState(e,t,r){this.kr(e,t,r)}handleUserChange(e,t,r){t.forEach(i=>{this.Cr(i)}),this.currentUser=e,r.forEach(i=>{this.addPendingMutation(i)})}setOnlineState(e){this.Mr(e)}notifyBundleLoaded(e){this.$r(e)}shutdown(){this.started&&(this.window.removeEventListener("storage",this._r),this.removeItem(this.pr),this.started=!1)}getItem(e){const t=this.storage.getItem(e);return ft("SharedClientState","READ",e,t),t}setItem(e,t){ft("SharedClientState","SET",e,t),this.storage.setItem(e,t)}removeItem(e){ft("SharedClientState","REMOVE",e),this.storage.removeItem(e)}mr(e){var t=this;const r=e;if(r.storageArea===this.storage){if(ft("SharedClientState","EVENT",r.key,r.newValue),r.key===this.pr)return void os("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.ii.enqueueRetryable((0,qe.Z)(function*(){if(t.started){if(null!==r.key)if(t.Tr.test(r.key)){if(null==r.newValue){const i=t.Or(r.key);return t.Fr(i,null)}{const i=t.Br(r.key,r.newValue);if(i)return t.Fr(i.clientId,i)}}else if(t.Er.test(r.key)){if(null!==r.newValue){const i=t.Lr(r.key,r.newValue);if(i)return t.qr(i)}}else if(t.Ar.test(r.key)){if(null!==r.newValue){const i=t.Ur(r.key,r.newValue);if(i)return t.Kr(i)}}else if(r.key===t.vr){if(null!==r.newValue){const i=t.br(r.newValue);if(i)return t.Vr(i)}}else if(r.key===t.Ir){const i=function(u){let c=Ta.ct;if(null!=u)try{const p=JSON.parse(u);nn("number"==typeof p),c=p}catch(p){os("SharedClientState","Failed to read sequence number from WebStorage",p)}return c}(r.newValue);i!==Ta.ct&&t.sequenceNumberHandler(i)}else if(r.key===t.Rr){const i=t.Gr(r.newValue);yield Promise.all(i.map(u=>t.syncEngine.Qr(u)))}}else t.yr.push(r)}))}}get Nr(){return this.gr.get(this.wr)}Pr(){this.setItem(this.pr,this.Nr.hr())}Dr(e,t,r){const i=new L_(this.currentUser,e,t,r),u=yw(this.persistenceKey,this.currentUser,e);this.setItem(u,i.hr())}Cr(e){const t=yw(this.persistenceKey,this.currentUser,e);this.removeItem(t)}Mr(e){this.storage.setItem(this.vr,JSON.stringify({clientId:this.wr,onlineState:e}))}kr(e,t,r){const i=F_(this.persistenceKey,e),u=new gm(e,t,r);this.setItem(i,u.hr())}$r(e){const t=JSON.stringify(Array.from(e));this.setItem(this.Rr,t)}Or(e){const t=this.Tr.exec(e);return t?t[1]:null}Br(e,t){const r=this.Or(e);return mm.ar(r,t)}Lr(e,t){const r=this.Er.exec(e),i=Number(r[1]);return L_.ar(new Rs(void 0!==r[2]?r[2]:null),i,t)}Ur(e,t){const r=this.Ar.exec(e),i=Number(r[1]);return gm.ar(i,t)}br(e){return _w.ar(e)}Gr(e){return JSON.parse(e)}qr(e){var t=this;return(0,qe.Z)(function*(){if(e.user.uid===t.currentUser.uid)return t.syncEngine.jr(e.batchId,e.state,e.error);ft("SharedClientState",`Ignoring mutation for non-active user ${e.user.uid}`)})()}Kr(e){return this.syncEngine.zr(e.targetId,e.state,e.error)}Fr(e,t){const r=t?this.gr.insert(e,t):this.gr.remove(e),i=this.Sr(this.gr),u=this.Sr(r),c=[],p=[];return u.forEach(m=>{i.has(m)||c.push(m)}),i.forEach(m=>{u.has(m)||p.push(m)}),this.syncEngine.Wr(c,p).then(()=>{this.gr=r})}Vr(e){this.gr.get(e.clientId)&&this.onlineStateHandler(e.onlineState)}Sr(e){let t=kh();return e.forEach((r,i)=>{t=t.unionWith(i.activeTargetIds)}),t}}class vw{constructor(){this.Hr=new U_,this.Jr={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,r){}addLocalQueryTarget(e){return this.Hr.lr(e),this.Jr[e]||"not-current"}updateQueryState(e,t,r){this.Jr[e]=t}removeLocalQueryTarget(e){this.Hr.dr(e)}isLocalQueryTarget(e){return this.Hr.activeTargetIds.has(e)}clearQueryState(e){delete this.Jr[e]}getAllActiveQueryTargets(){return this.Hr.activeTargetIds}isActiveQueryTarget(e){return this.Hr.activeTargetIds.has(e)}start(){return this.Hr=new U_,Promise.resolve()}handleUserChange(e,t,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}class HD{Yr(e){}shutdown(){}}class $D{constructor(){this.Xr=()=>this.Zr(),this.eo=()=>this.no(),this.so=[],this.io()}Yr(e){this.so.push(e)}shutdown(){window.removeEventListener("online",this.Xr),window.removeEventListener("offline",this.eo)}io(){window.addEventListener("online",this.Xr),window.addEventListener("offline",this.eo)}Zr(){ft("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.so)e(0)}no(){ft("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.so)e(1)}static D(){return typeof window<"u"&&void 0!==window.addEventListener&&void 0!==window.removeEventListener}}let B_=null;function GD(){return null===B_?B_=268435456+Math.round(2147483648*Math.random()):B_++,"0x"+B_.toString(16)}const zD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class cN{constructor(e){this.ro=e.ro,this.oo=e.oo}uo(e){this.co=e}ao(e){this.ho=e}onMessage(e){this.lo=e}close(){this.oo()}send(e){this.ro(e)}fo(){this.co()}wo(e){this.ho(e)}_o(e){this.lo(e)}}const ra="WebChannelConnection";class lN extends class{constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId,this.mo=(e.ssl?"https":"http")+"://"+e.host,this.yo="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}get po(){return!1}Io(e,t,r,i,u){const c=GD(),p=this.To(e,t);ft("RestConnection",`Sending RPC '${e}' ${c}:`,p,r);const m={};return this.Eo(m,i,u),this.Ao(e,p,m,r).then(b=>(ft("RestConnection",`Received RPC '${e}' ${c}: `,b),b),b=>{throw wu("RestConnection",`RPC '${e}' ${c} failed with error: `,b,"url: ",p,"request:",r),b})}vo(e,t,r,i,u,c){return this.Io(e,t,r,i,u)}Eo(e,t,r){e["X-Goog-Api-Client"]="gl-js/ fire/"+Tc,e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((i,u)=>e[u]=i),r&&r.headers.forEach((i,u)=>e[u]=i)}To(e,t){return`${this.mo}/v1/${t}:${zD[e]}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Ao(e,t,r,i){const u=GD();return new Promise((c,p)=>{const m=new eN;m.setWithCredentials(!0),m.listenOnce(JR.COMPLETE,()=>{try{switch(m.getLastErrorCode()){case nb.NO_ERROR:const O=m.getResponseJson();ft(ra,`XHR for RPC '${e}' ${u} received:`,JSON.stringify(O)),c(O);break;case nb.TIMEOUT:ft(ra,`RPC '${e}' ${u} timed out`),p(new dt(je.DEADLINE_EXCEEDED,"Request time out"));break;case nb.HTTP_ERROR:const U=m.getStatus();if(ft(ra,`RPC '${e}' ${u} failed with status:`,U,"response text:",m.getResponseText()),U>0){let J=m.getResponseJson();Array.isArray(J)&&(J=J[0]);const ce=J?.error;if(ce&&ce.status&&ce.message){const we=function(Ve){const Ye=Ve.toLowerCase().replace(/_/g,"-");return Object.values(je).indexOf(Ye)>=0?Ye:je.UNKNOWN}(ce.status);p(new dt(we,ce.message))}else p(new dt(je.UNKNOWN,"Server responded with status "+m.getStatus()))}else p(new dt(je.UNAVAILABLE,"Connection failed."));break;default:$t()}}finally{ft(ra,`RPC '${e}' ${u} completed.`)}});const b=JSON.stringify(i);ft(ra,`RPC '${e}' ${u} sending request:`,i),m.send(t,"POST",b,r,15)})}Ro(e,t,r){const i=GD(),u=[this.mo,"/","google.firestore.v1.Firestore","/",e,"/channel"],c=rE(),p=CA(),m={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},b=this.longPollingOptions.timeoutSeconds;void 0!==b&&(m.longPollingTimeout=Math.round(1e3*b)),this.useFetchStreams&&(m.xmlHttpFactory=new XR({})),this.Eo(m.initMessageHeaders,t,r),m.encodeInitMessageHeaders=!0;const O=u.join("");ft(ra,`Creating RPC '${e}' stream ${i}: ${O}`,m);const U=c.createWebChannel(O,m);let J=!1,ce=!1;const we=new cN({ro:Ye=>{ce?ft(ra,`Not sending because RPC '${e}' stream ${i} is closed:`,Ye):(J||(ft(ra,`Opening RPC '${e}' stream ${i} transport.`),U.open(),J=!0),ft(ra,`RPC '${e}' stream ${i} sending:`,Ye),U.send(Ye))},oo:()=>U.close()}),Ve=(Ye,Ot,en)=>{Ye.listen(Ot,It=>{try{en(It)}catch(Kt){setTimeout(()=>{throw Kt},0)}})};return Ve(U,t_.EventType.OPEN,()=>{ce||ft(ra,`RPC '${e}' stream ${i} transport opened.`)}),Ve(U,t_.EventType.CLOSE,()=>{ce||(ce=!0,ft(ra,`RPC '${e}' stream ${i} transport closed`),we.wo())}),Ve(U,t_.EventType.ERROR,Ye=>{ce||(ce=!0,wu(ra,`RPC '${e}' stream ${i} transport errored:`,Ye),we.wo(new dt(je.UNAVAILABLE,"The operation could not be completed")))}),Ve(U,t_.EventType.MESSAGE,Ye=>{var Ot;if(!ce){const en=Ye.data[0];nn(!!en);const Kt=en.error||(null===(Ot=en[0])||void 0===Ot?void 0:Ot.error);if(Kt){ft(ra,`RPC '${e}' stream ${i} received error:`,Kt);const Mn=Kt.status;let Fn=function(Xu){const kv=cs[Xu];if(void 0!==kv)return VE(kv)}(Mn),ho=Kt.message;void 0===Fn&&(Fn=je.INTERNAL,ho="Unknown error status: "+Mn+" with message "+Kt.message),ce=!0,we.wo(new dt(Fn,ho)),U.close()}else ft(ra,`RPC '${e}' stream ${i} received:`,en),we._o(en)}}),Ve(p,IA.STAT_EVENT,Ye=>{Ye.stat===rb.PROXY?ft(ra,`RPC '${e}' stream ${i} detected buffering proxy`):Ye.stat===rb.NOPROXY&&ft(ra,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{we.fo()},0),we}}function DM(){return typeof window<"u"?window:null}function Ew(){return typeof document<"u"?document:null}function j_(n){return new iM(n,!0)}class WD{constructor(e,t,r=1e3,i=1.5,u=6e4){this.ii=e,this.timerId=t,this.Po=r,this.bo=i,this.Vo=u,this.So=0,this.Do=null,this.Co=Date.now(),this.reset()}reset(){this.So=0}xo(){this.So=this.Vo}No(e){this.cancel();const t=Math.floor(this.So+this.ko()),r=Math.max(0,Date.now()-this.Co),i=Math.max(0,t-r);i>0&&ft("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.So} ms, delay with jitter: ${t} ms, last attempt: ${r} ms ago)`),this.Do=this.ii.enqueueAfterDelay(this.timerId,i,()=>(this.Co=Date.now(),e())),this.So*=this.bo,this.So<this.Po&&(this.So=this.Po),this.So>this.Vo&&(this.So=this.Vo)}Mo(){null!==this.Do&&(this.Do.skipDelay(),this.Do=null)}cancel(){null!==this.Do&&(this.Do.cancel(),this.Do=null)}ko(){return(Math.random()-.5)*this.So}}class TM{constructor(e,t,r,i,u,c,p,m){this.ii=e,this.$o=r,this.Oo=i,this.connection=u,this.authCredentialsProvider=c,this.appCheckCredentialsProvider=p,this.listener=m,this.state=0,this.Fo=0,this.Bo=null,this.Lo=null,this.stream=null,this.qo=new WD(e,t)}Uo(){return 1===this.state||5===this.state||this.Ko()}Ko(){return 2===this.state||3===this.state}start(){4!==this.state?this.auth():this.Go()}stop(){var e=this;return(0,qe.Z)(function*(){e.Uo()&&(yield e.close(0))})()}Qo(){this.state=0,this.qo.reset()}jo(){this.Ko()&&null===this.Bo&&(this.Bo=this.ii.enqueueAfterDelay(this.$o,6e4,()=>this.zo()))}Wo(e){this.Ho(),this.stream.send(e)}zo(){var e=this;return(0,qe.Z)(function*(){if(e.Ko())return e.close(0)})()}Ho(){this.Bo&&(this.Bo.cancel(),this.Bo=null)}Jo(){this.Lo&&(this.Lo.cancel(),this.Lo=null)}close(e,t){var r=this;return(0,qe.Z)(function*(){r.Ho(),r.Jo(),r.qo.cancel(),r.Fo++,4!==e?r.qo.reset():t&&t.code===je.RESOURCE_EXHAUSTED?(os(t.toString()),os("Using maximum backoff delay to prevent overloading the backend."),r.qo.xo()):t&&t.code===je.UNAUTHENTICATED&&3!==r.state&&(r.authCredentialsProvider.invalidateToken(),r.appCheckCredentialsProvider.invalidateToken()),null!==r.stream&&(r.Yo(),r.stream.close(),r.stream=null),r.state=e,yield r.listener.ao(t)})()}Yo(){}auth(){this.state=1;const e=this.Xo(this.Fo),t=this.Fo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.Fo===t&&this.Zo(r,i)},r=>{e(()=>{const i=new dt(je.UNKNOWN,"Fetching auth token failed: "+r.message);return this.tu(i)})})}Zo(e,t){const r=this.Xo(this.Fo);this.stream=this.eu(e,t),this.stream.uo(()=>{r(()=>(this.state=2,this.Lo=this.ii.enqueueAfterDelay(this.Oo,1e4,()=>(this.Ko()&&(this.state=3),Promise.resolve())),this.listener.uo()))}),this.stream.ao(i=>{r(()=>this.tu(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){var e=this;this.state=5,this.qo.No((0,qe.Z)(function*(){e.state=0,e.start()}))}tu(e){return ft("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}Xo(e){return t=>{this.ii.enqueueAndForget(()=>this.Fo===e?t():(ft("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class dN extends TM{constructor(e,t,r,i,u,c){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u}eu(e,t){return this.connection.Ro("Listen",e,t)}onMessage(e){this.qo.reset();const t=function oM(n,e){let t;if("targetChange"in e){const r="NO_CHANGE"===(m=e.targetChange.targetChangeType||"NO_CHANGE")?0:"ADD"===m?1:"REMOVE"===m?2:"CURRENT"===m?3:"RESET"===m?4:$t(),i=e.targetChange.targetIds||[],u=function(m,b){return m.useProto3Json?(nn(void 0===b||"string"==typeof b),Ns.fromBase64String(b||"")):(nn(void 0===b||b instanceof Uint8Array),Ns.fromUint8Array(b||new Uint8Array))}(n,e.targetChange.resumeToken),c=e.targetChange.cause,p=c&&function(m){const b=void 0===m.code?je.UNKNOWN:VE(m.code);return new dt(b,m.message||"")}(c);t=new sD(r,i,u,p||null)}else if("documentChange"in e){const r=e.documentChange,i=Pc(n,r.document.name),u=zi(r.document.updateTime),c=r.document.createTime?zi(r.document.createTime):Xt.min(),p=new To({mapValue:{fields:r.document.fields}}),m=Di.newFoundDocument(i,u,c,p);t=new __(r.targetIds||[],r.removedTargetIds||[],m.key,m)}else if("documentDelete"in e){const r=e.documentDelete,i=Pc(n,r.document),u=r.readTime?zi(r.readTime):Xt.min(),c=Di.newNoDocument(i,u);t=new __([],r.removedTargetIds||[],c.key,c)}else if("documentRemove"in e){const r=e.documentRemove,i=Pc(n,r.document);t=new __([],r.removedTargetIds||[],i,null)}else{if(!("filter"in e))return $t();{const r=e.filter,{count:i=0,unchangedNames:u}=r,c=new tM(i,u);t=new iD(r.targetId,c)}}var m;return t}(this.serializer,e),r=function(i){if(!("targetChange"in i))return Xt.min();const u=i.targetChange;return u.targetIds&&u.targetIds.length?Xt.min():u.readTime?zi(u.readTime):Xt.min()}(e);return this.listener.nu(t,r)}su(e){const t={};t.database=hp(this.serializer),t.addTarget=function(i,u){let c;const p=u.target;if(c=ME(p)?{documents:ZE(i,p)}:{query:em(i,p)},c.targetId=u.targetId,u.resumeToken.approximateByteSize()>0){c.resumeToken=v_(i,u.resumeToken);const m=zE(i,u.expectedCount);null!==m&&(c.expectedCount=m)}else if(u.snapshotVersion.compareTo(Xt.min())>0){c.readTime=Cd(i,u.snapshotVersion.toTimestamp());const m=zE(i,u.expectedCount);null!==m&&(c.expectedCount=m)}return c}(this.serializer,e);const r=function fD(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return $t()}}(e.purpose);return null==t?null:{"goog-listen-tags":t}}(0,e);r&&(t.labels=r),this.Wo(t)}iu(e){const t={};t.database=hp(this.serializer),t.removeTarget=e,this.Wo(t)}}class qD extends TM{constructor(e,t,r,i,u,c){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,r,i,c),this.serializer=u,this.ru=!1}get ou(){return this.ru}start(){this.ru=!1,this.lastStreamToken=void 0,super.start()}Yo(){this.ru&&this.uu([])}eu(e,t){return this.connection.Ro("Write",e,t)}onMessage(e){if(nn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.ru){this.qo.reset();const t=function aM(n,e){return n&&n.length>0?(nn(void 0!==e),n.map(t=>function(r,i){let u=zi(r.updateTime?r.updateTime:i);return u.isEqual(Xt.min())&&(u=zi(i)),new QA(u,r.transformResults||[])}(t,e))):[]}(e.writeResults,e.commitTime),r=zi(e.commitTime);return this.listener.cu(r,t)}return nn(!e.writeResults||0===e.writeResults.length),this.ru=!0,this.listener.au()}hu(){const e={};e.database=hp(this.serializer),this.Wo(e)}uu(e){const t={streamToken:this.lastStreamToken,writes:e.map(r=>fp(this.serializer,r))};this.Wo(t)}}class ww extends class{}{constructor(e,t,r,i){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=r,this.serializer=i,this.lu=!1}fu(){if(this.lu)throw new dt(je.FAILED_PRECONDITION,"The client has already been terminated.")}Io(e,t,r){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,u])=>this.connection.Io(e,t,r,i,u)).catch(i=>{throw"FirebaseError"===i.name?(i.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new dt(je.UNKNOWN,i.toString())})}vo(e,t,r,i){return this.fu(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([u,c])=>this.connection.vo(e,t,r,u,c,i)).catch(u=>{throw"FirebaseError"===u.name?(u.code===je.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),u):new dt(je.UNKNOWN,u.toString())})}terminate(){this.lu=!0}}class H_{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.wu=0,this._u=null,this.mu=!0}gu(){0===this.wu&&(this.yu("Unknown"),this._u=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this._u=null,this.pu("Backend didn't respond within 10 seconds."),this.yu("Offline"),Promise.resolve())))}Iu(e){"Online"===this.state?this.yu("Unknown"):(this.wu++,this.wu>=1&&(this.Tu(),this.pu(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.yu("Offline")))}set(e){this.Tu(),this.wu=0,"Online"===e&&(this.mu=!1),this.yu(e)}yu(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}pu(e){const t=`Could not reach Cloud Firestore backend. ${e}\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.mu?(os(t),this.mu=!1):ft("OnlineStateTracker",t)}Tu(){null!==this._u&&(this._u.cancel(),this._u=null)}}class SM{constructor(e,t,r,i,u){var c=this;this.localStore=e,this.datastore=t,this.asyncQueue=r,this.remoteSyncer={},this.Eu=[],this.Au=new Map,this.vu=new Set,this.Ru=[],this.Pu=u,this.Pu.Yr(p=>{r.enqueueAndForget((0,qe.Z)(function*(){var m;El(c)&&(ft("RemoteStore","Restarting streams for network reachability change."),yield(m=(0,qe.Z)(function*(b){const O=Nt(b);O.vu.add(4),yield ym(O),O.bu.set("Unknown"),O.vu.delete(4),yield $_(O)}),function(b){return m.apply(this,arguments)})(c))}))}),this.bu=new H_(r,i)}}function $_(n){return KD.apply(this,arguments)}function KD(){return KD=(0,qe.Z)(function*(n){if(El(n))for(const e of n.Ru)yield e(!0)}),KD.apply(this,arguments)}function ym(n){return G_.apply(this,arguments)}function G_(){return G_=(0,qe.Z)(function*(n){for(const e of n.Ru)yield e(!1)}),G_.apply(this,arguments)}function z_(n,e){const t=Nt(n);t.Au.has(e.targetId)||(t.Au.set(e.targetId,e),W_(t)?bw(t):Zh(t).Ko()&&Iw(t,e))}function _m(n,e){const t=Nt(n),r=Zh(t);t.Au.delete(e),r.Ko()&&AM(t,e),0===t.Au.size&&(r.Ko()?r.jo():El(t)&&t.bu.set("Unknown"))}function Iw(n,e){if(n.Vu.qt(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Zh(n).su(e)}function AM(n,e){n.Vu.qt(e),Zh(n).iu(e)}function bw(n){n.Vu=new aD({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),le:e=>n.Au.get(e)||null,ue:()=>n.datastore.serializer.databaseId}),Zh(n).start(),n.bu.gu()}function W_(n){return El(n)&&!Zh(n).Uo()&&n.Au.size>0}function El(n){return 0===Nt(n).vu.size}function MM(n){n.Vu=void 0}function Yu(n){return q_.apply(this,arguments)}function q_(){return q_=(0,qe.Z)(function*(n){n.Au.forEach((e,t)=>{Iw(n,e)})}),q_.apply(this,arguments)}function xM(n,e){return YD.apply(this,arguments)}function YD(){return YD=(0,qe.Z)(function*(n,e){MM(n),W_(n)?(n.bu.Iu(e),bw(n)):n.bu.set("Unknown")}),YD.apply(this,arguments)}function ia(n,e,t){return Dw.apply(this,arguments)}function Dw(){return Dw=(0,qe.Z)(function*(n,e,t){if(n.bu.set("Online"),e instanceof sD&&2===e.state&&e.cause)try{yield(r=(0,qe.Z)(function*(i,u){const c=u.cause;for(const p of u.targetIds)i.Au.has(p)&&(yield i.remoteSyncer.rejectListen(p,c),i.Au.delete(p),i.Vu.removeTarget(p))}),function(i,u){return r.apply(this,arguments)})(n,e)}catch(r){ft("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),yield bp(n,r)}else if(e instanceof __?n.Vu.Ht(e):e instanceof iD?n.Vu.ne(e):n.Vu.Xt(e),!t.isEqual(Xt.min()))try{const r=yield fw(n.localStore);t.compareTo(r)>=0&&(yield function(i,u){const c=i.Vu.ce(u);return c.targetChanges.forEach((p,m)=>{if(p.resumeToken.approximateByteSize()>0){const b=i.Au.get(m);b&&i.Au.set(m,b.withResumeToken(p.resumeToken,u))}}),c.targetMismatches.forEach((p,m)=>{const b=i.Au.get(p);if(!b)return;i.Au.set(p,b.withResumeToken(Ns.EMPTY_BYTE_STRING,b.snapshotVersion)),AM(i,p);const O=new _l(b.target,p,m,b.sequenceNumber);Iw(i,O)}),i.remoteSyncer.applyRemoteEvent(c)}(n,t))}catch(r){ft("RemoteStore","Failed to raise snapshot:",r),yield bp(n,r)}var r}),Dw.apply(this,arguments)}function bp(n,e,t){return Tw.apply(this,arguments)}function Tw(){return Tw=(0,qe.Z)(function*(n,e,t){if(!hd(e))throw e;n.vu.add(1),yield ym(n),n.bu.set("Offline"),t||(t=()=>fw(n.localStore)),n.asyncQueue.enqueueRetryable((0,qe.Z)(function*(){ft("RemoteStore","Retrying IndexedDB access"),yield t(),n.vu.delete(1),yield $_(n)}))}),Tw.apply(this,arguments)}function QD(n,e){return e().catch(t=>bp(n,t,e))}function xd(n){return Z_.apply(this,arguments)}function Z_(){return Z_=(0,qe.Z)(function*(n){const e=Nt(n),t=Nd(e);let r=e.Eu.length>0?e.Eu[e.Eu.length-1].batchId:-1;for(;JD(e);)try{const i=yield Cp(e.localStore,r);if(null===i){0===e.Eu.length&&t.jo();break}r=i.batchId,RM(e,i)}catch(i){yield bp(e,i)}Sw(e)&&Aw(e)}),Z_.apply(this,arguments)}function JD(n){return El(n)&&n.Eu.length<10}function RM(n,e){n.Eu.push(e);const t=Nd(n);t.Ko()&&t.ou&&t.uu(e.mutations)}function Sw(n){return El(n)&&!Nd(n).Uo()&&n.Eu.length>0}function Aw(n){Nd(n).start()}function XD(n){return K_.apply(this,arguments)}function K_(){return K_=(0,qe.Z)(function*(n){Nd(n).hu()}),K_.apply(this,arguments)}function NM(n){return Y_.apply(this,arguments)}function Y_(){return Y_=(0,qe.Z)(function*(n){const e=Nd(n);for(const t of n.Eu)e.uu(t.mutations)}),Y_.apply(this,arguments)}function OM(n,e,t){return vm.apply(this,arguments)}function vm(){return vm=(0,qe.Z)(function*(n,e,t){const r=n.Eu.shift(),i=m_.from(r,e,t);yield QD(n,()=>n.remoteSyncer.applySuccessfulWrite(i)),yield xd(n)}),vm.apply(this,arguments)}function Rd(n,e){return Q_.apply(this,arguments)}function Q_(){return Q_=(0,qe.Z)(function*(n,e){var t;e&&Nd(n).ou&&(yield(t=(0,qe.Z)(function*(r,i){if(UE(u=i.code)&&u!==je.ABORTED){const c=r.Eu.shift();Nd(r).Qo(),yield QD(r,()=>r.remoteSyncer.rejectFailedWrite(c.batchId,i)),yield xd(r)}var u}),function(r,i){return t.apply(this,arguments)})(n,e)),Sw(n)&&Aw(n)}),Q_.apply(this,arguments)}function J_(n,e){return Em.apply(this,arguments)}function Em(){return Em=(0,qe.Z)(function*(n,e){const t=Nt(n);t.asyncQueue.verifyOperationInProgress(),ft("RemoteStore","RemoteStore received new credentials");const r=El(t);t.vu.add(3),yield ym(t),r&&t.bu.set("Unknown"),yield t.remoteSyncer.handleCredentialChange(e),t.vu.delete(3),yield $_(t)}),Em.apply(this,arguments)}function Mw(n,e){return eT.apply(this,arguments)}function eT(){return eT=(0,qe.Z)(function*(n,e){const t=Nt(n);e?(t.vu.delete(2),yield $_(t)):e||(t.vu.add(2),yield ym(t),t.bu.set("Unknown"))}),eT.apply(this,arguments)}function Zh(n){return n.Su||(n.Su=function(e,t,r){const i=Nt(e);return i.fu(),new dN(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:Yu.bind(null,n),ao:xM.bind(null,n),nu:ia.bind(null,n)}),n.Ru.push(function(){var e=(0,qe.Z)(function*(t){t?(n.Su.Qo(),W_(n)?bw(n):n.bu.set("Unknown")):(yield n.Su.stop(),MM(n))});return function(t){return e.apply(this,arguments)}}())),n.Su}function Nd(n){return n.Du||(n.Du=function(e,t,r){const i=Nt(e);return i.fu(),new qD(t,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,r)}(n.datastore,n.asyncQueue,{uo:XD.bind(null,n),ao:Rd.bind(null,n),au:NM.bind(null,n),cu:OM.bind(null,n)}),n.Ru.push(function(){var e=(0,qe.Z)(function*(t){t?(n.Du.Qo(),yield xd(n)):(yield n.Du.stop(),n.Eu.length>0&&(ft("RemoteStore",`Stopping write stream with ${n.Eu.length} pending writes`),n.Eu=[]))});return function(t){return e.apply(this,arguments)}}())),n.Du}class xw{constructor(e,t,r,i,u){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=r,this.op=i,this.removalCallback=u,this.deferred=new as,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(c=>{})}static createAndSchedule(e,t,r,i,u){const c=Date.now()+r,p=new xw(e,t,c,i,u);return p.start(r),p}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new dt(je.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>null!==this.timerHandle?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function Dp(n,e){if(os("AsyncQueue",`${e}: ${n}`),hd(n))return new dt(je.UNAVAILABLE,`${e}: ${n}`);throw n}class Tp{constructor(e){this.comparator=e?(t,r)=>e(t,r)||St.comparator(t.key,r.key):(t,r)=>St.comparator(t.key,r.key),this.keyedMap=yl(),this.sortedSet=new si(this.comparator)}static emptySet(e){return new Tp(e.comparator)}has(e){return null!=this.keyedMap.get(e)}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,r)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Tp)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;t.hasNext();){const i=t.getNext().key,u=r.getNext().key;if(!i.isEqual(u))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),0===e.length?"DocumentSet ()":"DocumentSet (\n  "+e.join("  \n")+"\n)"}copy(e,t){const r=new Tp;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=t,r}}class Rw{constructor(){this.Cu=new si(St.comparator)}track(e){const t=e.doc.key,r=this.Cu.get(t);r?0!==e.type&&3===r.type?this.Cu=this.Cu.insert(t,e):3===e.type&&1!==r.type?this.Cu=this.Cu.insert(t,{type:r.type,doc:e.doc}):2===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):2===e.type&&0===r.type?this.Cu=this.Cu.insert(t,{type:0,doc:e.doc}):1===e.type&&0===r.type?this.Cu=this.Cu.remove(t):1===e.type&&2===r.type?this.Cu=this.Cu.insert(t,{type:1,doc:r.doc}):0===e.type&&1===r.type?this.Cu=this.Cu.insert(t,{type:2,doc:e.doc}):$t():this.Cu=this.Cu.insert(t,e)}xu(){const e=[];return this.Cu.inorderTraversal((t,r)=>{e.push(r)}),e}}class wm{constructor(e,t,r,i,u,c,p,m,b){this.query=e,this.docs=t,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=u,this.fromCache=c,this.syncStateChanged=p,this.excludesMetadataChanges=m,this.hasCachedResults=b}static fromInitialDocuments(e,t,r,i,u){const c=[];return t.forEach(p=>{c.push({type:0,doc:p})}),new wm(e,t,Tp.emptySet(t),c,r,i,!0,!1,u)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&d_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,r=e.docChanges;if(t.length!==r.length)return!1;for(let i=0;i<t.length;i++)if(t[i].type!==r[i].type||!t[i].doc.isEqual(r[i].doc))return!1;return!0}}class tT{constructor(){this.Nu=void 0,this.listeners=[]}}class PM{constructor(){this.queries=new Rc(e=>NE(e),d_),this.onlineState="Unknown",this.ku=new Set}}function X_(n,e){return nT.apply(this,arguments)}function nT(){return nT=(0,qe.Z)(function*(n,e){const t=Nt(n),r=e.query;let i=!1,u=t.queries.get(r);if(u||(i=!0,u=new tT),i)try{u.Nu=yield t.onListen(r)}catch(c){const p=Dp(c,`Initialization of query '${h_(e.query)}' failed`);return void e.onError(p)}t.queries.set(r,u),u.listeners.push(e),e.Mu(t.onlineState),u.Nu&&e.$u(u.Nu)&&tv(t)}),nT.apply(this,arguments)}function Cm(n,e){return ev.apply(this,arguments)}function ev(){return ev=(0,qe.Z)(function*(n,e){const t=Nt(n),r=e.query;let i=!1;const u=t.queries.get(r);if(u){const c=u.listeners.indexOf(e);c>=0&&(u.listeners.splice(c,1),i=0===u.listeners.length)}if(i)return t.queries.delete(r),t.onUnlisten(r)}),ev.apply(this,arguments)}function rT(n,e){const t=Nt(n);let r=!1;for(const i of e){const c=t.queries.get(i.query);if(c){for(const p of c.listeners)p.$u(i)&&(r=!0);c.Nu=i}}r&&tv(t)}function kM(n,e,t){const r=Nt(n),i=r.queries.get(e);if(i)for(const u of i.listeners)u.onError(t);r.queries.delete(e)}function tv(n){n.ku.forEach(e=>{e.next()})}class nv{constructor(e,t,r){this.query=e,this.Ou=t,this.Fu=!1,this.Bu=null,this.onlineState="Unknown",this.options=r||{}}$u(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)3!==i.type&&r.push(i);e=new wm(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.Fu?this.Lu(e)&&(this.Ou.next(e),t=!0):this.qu(e,this.onlineState)&&(this.Uu(e),t=!0),this.Bu=e,t}onError(e){this.Ou.error(e)}Mu(e){this.onlineState=e;let t=!1;return this.Bu&&!this.Fu&&this.qu(this.Bu,e)&&(this.Uu(this.Bu),t=!0),t}qu(e,t){return!e.fromCache||(!this.options.Ku||!("Offline"!==t))&&(!e.docs.isEmpty()||e.hasCachedResults||"Offline"===t)}Lu(e){return e.docChanges.length>0||!!(e.syncStateChanged||this.Bu&&this.Bu.hasPendingWrites!==e.hasPendingWrites)&&!0===this.options.includeMetadataChanges}Uu(e){e=wm.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.Fu=!0,this.Ou.next(e)}}class Sp{constructor(e,t){this.Gu=e,this.byteLength=t}Qu(){return"metadata"in this.Gu}}class Im{constructor(e){this.serializer=e}rr(e){return Pc(this.serializer,e)}ur(e){return e.metadata.exists?w_(this.serializer,e.document,!1):Di.newNoDocument(this.rr(e.metadata.name),this.cr(e.metadata.readTime))}cr(e){return zi(e)}}class iT{constructor(e,t,r){this.ju=e,this.localStore=t,this.serializer=r,this.queries=[],this.documents=[],this.collectionGroups=new Set,this.progress=Nw(e)}zu(e){this.progress.bytesLoaded+=e.byteLength;let t=this.progress.documentsLoaded;if(e.Gu.namedQuery)this.queries.push(e.Gu.namedQuery);else if(e.Gu.documentMetadata){this.documents.push({metadata:e.Gu.documentMetadata}),e.Gu.documentMetadata.exists||++t;const r=_r.fromString(e.Gu.documentMetadata.name);this.collectionGroups.add(r.get(r.length-2))}else e.Gu.document&&(this.documents[this.documents.length-1].document=e.Gu.document,++t);return t!==this.progress.documentsLoaded?(this.progress.documentsLoaded=t,Object.assign({},this.progress)):null}Wu(e){const t=new Map,r=new Im(this.serializer);for(const i of e)if(i.metadata.queries){const u=r.rr(i.metadata.name);for(const c of i.metadata.queries){const p=(t.get(c)||kn()).add(u);t.set(c,p)}}return t}complete(){var e=this;return(0,qe.Z)(function*(){const t=yield function bM(n,e,t,r){return mw.apply(this,arguments)}(e.localStore,new Im(e.serializer),e.documents,e.ju.id),r=e.Wu(e.documents);for(const i of e.queries)yield BD(e.localStore,i,r.get(i.name));return e.progress.taskState="Success",{progress:e.progress,Hu:e.collectionGroups,Ju:t}})()}}function Nw(n){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:n.totalDocuments,totalBytes:n.totalBytes}}class sT{constructor(e){this.key=e}}class oT{constructor(e){this.key=e}}class FM{constructor(e,t){this.query=e,this.Yu=t,this.Xu=null,this.hasCachedResults=!1,this.current=!1,this.Zu=kn(),this.mutatedKeys=kn(),this.tc=PE(e),this.ec=new Tp(this.tc)}get nc(){return this.Yu}sc(e,t){const r=t?t.ic:new Rw,i=t?t.ec:this.ec;let u=t?t.mutatedKeys:this.mutatedKeys,c=i,p=!1;const m="F"===this.query.limitType&&i.size===this.query.limit?i.last():null,b="L"===this.query.limitType&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((O,U)=>{const J=i.get(O),ce=qg(this.query,U)?U:null,we=!!J&&this.mutatedKeys.has(J.key),Ve=!!ce&&(ce.hasLocalMutations||this.mutatedKeys.has(ce.key)&&ce.hasCommittedMutations);let Ye=!1;J&&ce?J.data.isEqual(ce.data)?we!==Ve&&(r.track({type:3,doc:ce}),Ye=!0):this.rc(J,ce)||(r.track({type:2,doc:ce}),Ye=!0,(m&&this.tc(ce,m)>0||b&&this.tc(ce,b)<0)&&(p=!0)):!J&&ce?(r.track({type:0,doc:ce}),Ye=!0):J&&!ce&&(r.track({type:1,doc:J}),Ye=!0,(m||b)&&(p=!0)),Ye&&(ce?(c=c.add(ce),u=Ve?u.add(O):u.delete(O)):(c=c.delete(O),u=u.delete(O)))}),null!==this.query.limit)for(;c.size>this.query.limit;){const O="F"===this.query.limitType?c.last():c.first();c=c.delete(O.key),u=u.delete(O.key),r.track({type:1,doc:O})}return{ec:c,ic:r,zi:p,mutatedKeys:u}}rc(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,r){const i=this.ec;this.ec=e.ec,this.mutatedKeys=e.mutatedKeys;const u=e.ic.xu();u.sort((b,O)=>function(U,J){const ce=we=>{switch(we){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return $t()}};return ce(U)-ce(J)}(b.type,O.type)||this.tc(b.doc,O.doc)),this.oc(r);const c=t?this.uc():[],p=0===this.Zu.size&&this.current?1:0,m=p!==this.Xu;return this.Xu=p,0!==u.length||m?{snapshot:new wm(this.query,e.ec,i,u,e.mutatedKeys,0===p,m,!1,!!r&&r.resumeToken.approximateByteSize()>0),cc:c}:{cc:c}}Mu(e){return this.current&&"Offline"===e?(this.current=!1,this.applyChanges({ec:this.ec,ic:new Rw,mutatedKeys:this.mutatedKeys,zi:!1},!1)):{cc:[]}}ac(e){return!this.Yu.has(e)&&!!this.ec.has(e)&&!this.ec.get(e).hasLocalMutations}oc(e){e&&(e.addedDocuments.forEach(t=>this.Yu=this.Yu.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.Yu=this.Yu.delete(t)),this.current=e.current)}uc(){if(!this.current)return[];const e=this.Zu;this.Zu=kn(),this.ec.forEach(r=>{this.ac(r.key)&&(this.Zu=this.Zu.add(r.key))});const t=[];return e.forEach(r=>{this.Zu.has(r)||t.push(new oT(r))}),this.Zu.forEach(r=>{e.has(r)||t.push(new sT(r))}),t}hc(e){this.Yu=e.ir,this.Zu=kn();const t=this.sc(e.documents);return this.applyChanges(t,!0)}lc(){return wm.fromInitialDocuments(this.query,this.ec,this.mutatedKeys,0===this.Xu,this.hasCachedResults)}}class aT{constructor(e,t,r){this.query=e,this.targetId=t,this.view=r}}class LM{constructor(e){this.key=e,this.fc=!1}}class UM{constructor(e,t,r,i,u,c){this.localStore=e,this.remoteStore=t,this.eventManager=r,this.sharedClientState=i,this.currentUser=u,this.maxConcurrentLimboResolutions=c,this.dc={},this.wc=new Rc(p=>NE(p),d_),this._c=new Map,this.mc=new Set,this.gc=new si(St.comparator),this.yc=new Map,this.Ic=new N_,this.Tc={},this.Ec=new Map,this.Ac=Sd.Mn(),this.onlineState="Unknown",this.vc=void 0}get isPrimaryClient(){return!0===this.vc}}function VM(n,e){return uT.apply(this,arguments)}function uT(){return uT=(0,qe.Z)(function*(n,e){const t=Hw(n);let r,i;const u=t.wc.get(e);if(u)r=u.targetId,t.sharedClientState.addLocalQueryTarget(r),i=u.view.lc();else{const c=yield Ip(t.localStore,ao(e)),p=t.sharedClientState.addLocalQueryTarget(c.targetId);r=c.targetId,i=yield cT(t,e,r,"current"===p,c.resumeToken),t.isPrimaryClient&&z_(t.remoteStore,c)}return i}),uT.apply(this,arguments)}function cT(n,e,t,r,i){return rv.apply(this,arguments)}function rv(){return rv=(0,qe.Z)(function*(n,e,t,r,i){n.Rc=(U,J,ce)=>{return(we=(0,qe.Z)(function*(Ve,Ye,Ot,en){let It=Ye.view.sc(Ot);It.zi&&(It=yield gw(Ve.localStore,Ye.query,!1).then(({documents:Fn})=>Ye.view.sc(Fn,It)));const Kt=en&&en.targetChanges.get(Ye.targetId),Mn=Ye.view.applyChanges(It,Ve.isPrimaryClient,Kt);return Tm(Ve,Ye.targetId,Mn.cc),Mn.snapshot}),function(Ve,Ye,Ot,en){return we.apply(this,arguments)})(n,U,J,ce);var we};const u=yield gw(n.localStore,e,!0),c=new FM(e,u.ir),p=c.sc(u.documents),m=Xg.createSynthesizedTargetChangeForCurrentChange(t,r&&"Offline"!==n.onlineState,i),b=c.applyChanges(p,n.isPrimaryClient,m);Tm(n,t,b.cc);const O=new aT(e,t,c);return n.wc.set(e,O),n._c.has(t)?n._c.get(t).push(e):n._c.set(t,[e]),b.snapshot}),rv.apply(this,arguments)}function BM(n,e){return Ow.apply(this,arguments)}function Ow(){return Ow=(0,qe.Z)(function*(n,e){const t=Nt(n),r=t.wc.get(e),i=t._c.get(r.targetId);if(i.length>1)return t._c.set(r.targetId,i.filter(u=>!d_(u,e))),void t.wc.delete(e);t.isPrimaryClient?(t.sharedClientState.removeLocalQueryTarget(r.targetId),t.sharedClientState.isActiveQueryTarget(r.targetId)||(yield qh(t.localStore,r.targetId,!1).then(()=>{t.sharedClientState.clearQueryState(r.targetId),_m(t.remoteStore,r.targetId),Ap(t,r.targetId)}).catch(Ac))):(Ap(t,r.targetId),yield qh(t.localStore,r.targetId,!0))}),Ow.apply(this,arguments)}function lT(){return lT=(0,qe.Z)(function*(n,e,t){const r=$w(n);try{const i=yield function(u,c){const p=Nt(u),m=Ci.now(),b=c.reduce((J,ce)=>J.add(ce.key),kn());let O,U;return p.persistence.runTransaction("Locally write mutations","readwrite",J=>{let ce=Sa(),we=kn();return p.Zi.getEntries(J,b).next(Ve=>{ce=Ve,ce.forEach((Ye,Ot)=>{Ot.isValidDocument()||(we=we.add(Ye))})}).next(()=>p.localDocuments.getOverlayedDocuments(J,ce)).next(Ve=>{O=Ve;const Ye=[];for(const Ot of c){const en=XA(Ot,O.get(Ot.key).overlayedDocument);null!=en&&Ye.push(new Oc(Ot.key,en,Mb(en.value.mapValue),Pi.exists(!0)))}return p.mutationQueue.addMutationBatch(J,m,Ye,c)}).next(Ve=>{U=Ve;const Ye=Ve.applyToLocalDocumentSet(O,we);return p.documentOverlayCache.saveOverlays(J,Ve.batchId,Ye)})}).then(()=>({batchId:U.batchId,changes:$b(O)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(u,c,p){let m=u.Tc[u.currentUser.toKey()];m||(m=new si(Tn)),m=m.insert(c,p),u.Tc[u.currentUser.toKey()]=m}(r,i.batchId,t),yield Od(r,i.changes),yield xd(r.remoteStore)}catch(i){const u=Dp(i,"Failed to persist write");t.reject(u)}}),lT.apply(this,arguments)}function HM(n,e){return dT.apply(this,arguments)}function dT(){return dT=(0,qe.Z)(function*(n,e){const t=Nt(n);try{const r=yield function CM(n,e){const t=Nt(n),r=e.snapshotVersion;let i=t.Ji;return t.persistence.runTransaction("Apply remote event","readwrite-primary",u=>{const c=t.Zi.newChangeBuffer({trackRemovals:!0});i=t.Ji;const p=[];e.targetChanges.forEach((O,U)=>{const J=i.get(U);if(!J)return;p.push(t.Bs.removeMatchingKeys(u,O.removedDocuments,U).next(()=>t.Bs.addMatchingKeys(u,O.addedDocuments,U)));let ce=J.withSequenceNumber(u.currentSequenceNumber);var we,Ve,Ye;null!==e.targetMismatches.get(U)?ce=ce.withResumeToken(Ns.EMPTY_BYTE_STRING,Xt.min()).withLastLimboFreeSnapshotVersion(Xt.min()):O.resumeToken.approximateByteSize()>0&&(ce=ce.withResumeToken(O.resumeToken,r)),i=i.insert(U,ce),Ve=ce,Ye=O,(0===(we=J).resumeToken.approximateByteSize()||Ve.snapshotVersion.toMicroseconds()-we.snapshotVersion.toMicroseconds()>=3e8||Ye.addedDocuments.size+Ye.modifiedDocuments.size+Ye.removedDocuments.size>0)&&p.push(t.Bs.updateTargetData(u,ce))});let m=Sa(),b=kn();if(e.documentUpdates.forEach(O=>{e.resolvedLimboDocuments.has(O)&&p.push(t.persistence.referenceDelegate.updateLimboDocument(u,O))}),p.push(pw(u,c,e.documentUpdates).next(O=>{m=O.nr,b=O.sr})),!r.isEqual(Xt.min())){const O=t.Bs.getLastRemoteSnapshotVersion(u).next(U=>t.Bs.setTargetsMetadata(u,u.currentSequenceNumber,r));p.push(O)}return ke.waitFor(p).next(()=>c.apply(u)).next(()=>t.localDocuments.getLocalViewOfDocuments(u,m,b)).next(()=>m)}).then(u=>(t.Ji=i,u))}(t.localStore,e);e.targetChanges.forEach((i,u)=>{const c=t.yc.get(u);c&&(nn(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?c.fc=!0:i.modifiedDocuments.size>0?nn(c.fc):i.removedDocuments.size>0&&(nn(c.fc),c.fc=!1))}),yield Od(t,r,e)}catch(r){yield Ac(r)}}),dT.apply(this,arguments)}function $M(n,e,t){const r=Nt(n);if(r.isPrimaryClient&&0===t||!r.isPrimaryClient&&1===t){const i=[];r.wc.forEach((u,c)=>{const p=c.view.Mu(e);p.snapshot&&i.push(p.snapshot)}),function(u,c){const p=Nt(u);p.onlineState=c;let m=!1;p.queries.forEach((b,O)=>{for(const U of O.listeners)U.Mu(c)&&(m=!0)}),m&&tv(p)}(r.eventManager,e),i.length&&r.dc.nu(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function hN(n,e,t){return Pw.apply(this,arguments)}function Pw(){return Pw=(0,qe.Z)(function*(n,e,t){const r=Nt(n);r.sharedClientState.updateQueryState(e,"rejected",t);const i=r.yc.get(e),u=i&&i.key;if(u){let c=new si(St.comparator);c=c.insert(u,Di.newNoDocument(u,Xt.min()));const p=kn().add(u),m=new Jg(Xt.min(),new Map,new si(Tn),c,p);yield HM(r,m),r.gc=r.gc.remove(u),r.yc.delete(e),hT(r)}else yield qh(r.localStore,e,!1).then(()=>Ap(r,e,t)).catch(Ac)}),Pw.apply(this,arguments)}function iv(n,e){return kw.apply(this,arguments)}function kw(){return kw=(0,qe.Z)(function*(n,e){const t=Nt(n),r=e.batch.batchId;try{const i=yield function uN(n,e){const t=Nt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),u=t.Zi.newChangeBuffer({trackRemovals:!0});return function(c,p,m,b){const O=m.batch,U=O.keys();let J=ke.resolve();return U.forEach(ce=>{J=J.next(()=>b.getEntry(p,ce)).next(we=>{const Ve=m.docVersions.get(ce);nn(null!==Ve),we.version.compareTo(Ve)<0&&(O.applyToRemoteDocument(we,m),we.isValidDocument()&&(we.setReadTime(m.commitVersion),b.addEntry(we)))})}),J.next(()=>c.mutationQueue.removeMutationBatch(p,O))}(t,r,e,u).next(()=>u.apply(r)).next(()=>t.mutationQueue.performConsistencyCheck(r)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(c){let p=kn();for(let m=0;m<c.mutationResults.length;++m)c.mutationResults[m].transformResults.length>0&&(p=p.add(c.batch.mutations[m].key));return p}(e))).next(()=>t.localDocuments.getDocuments(r,i))})}(t.localStore,e);Dm(t,r,null),bm(t,r),t.sharedClientState.updateMutationState(r,"acknowledged"),yield Od(t,i)}catch(i){yield Ac(i)}}),kw.apply(this,arguments)}function GM(n,e,t){return sv.apply(this,arguments)}function sv(){return sv=(0,qe.Z)(function*(n,e,t){const r=Nt(n);try{const i=yield function(u,c){const p=Nt(u);return p.persistence.runTransaction("Reject batch","readwrite-primary",m=>{let b;return p.mutationQueue.lookupMutationBatch(m,c).next(O=>(nn(null!==O),b=O.keys(),p.mutationQueue.removeMutationBatch(m,O))).next(()=>p.mutationQueue.performConsistencyCheck(m)).next(()=>p.documentOverlayCache.removeOverlaysForBatchId(m,b,c)).next(()=>p.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(m,b)).next(()=>p.localDocuments.getDocuments(m,b))})}(r.localStore,e);Dm(r,e,t),bm(r,e),r.sharedClientState.updateMutationState(e,"rejected",t),yield Od(r,i)}catch(i){yield Ac(i)}}),sv.apply(this,arguments)}function ov(){return ov=(0,qe.Z)(function*(n,e){const t=Nt(n);El(t.remoteStore)||ft("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled.");try{const r=yield function(u){const c=Nt(u);return c.persistence.runTransaction("Get highest unacknowledged batch id","readonly",p=>c.mutationQueue.getHighestUnacknowledgedBatchId(p))}(t.localStore);if(-1===r)return void e.resolve();const i=t.Ec.get(r)||[];i.push(e),t.Ec.set(r,i)}catch(r){const i=Dp(r,"Initialization of waitForPendingWrites() operation failed");e.reject(i)}}),ov.apply(this,arguments)}function bm(n,e){(n.Ec.get(e)||[]).forEach(t=>{t.resolve()}),n.Ec.delete(e)}function Dm(n,e,t){const r=Nt(n);let i=r.Tc[r.currentUser.toKey()];if(i){const u=i.get(e);u&&(t?u.reject(t):u.resolve(),i=i.remove(e)),r.Tc[r.currentUser.toKey()]=i}}function Ap(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const r of n._c.get(e))n.wc.delete(r),t&&n.dc.Pc(r,t);n._c.delete(e),n.isPrimaryClient&&n.Ic.Is(e).forEach(r=>{n.Ic.containsKey(r)||av(n,r)})}function av(n,e){n.mc.delete(e.path.canonicalString());const t=n.gc.get(e);null!==t&&(_m(n.remoteStore,t),n.gc=n.gc.remove(e),n.yc.delete(t),hT(n))}function Tm(n,e,t){for(const r of t)r instanceof sT?(n.Ic.addReference(r.key,e),uv(n,r)):r instanceof oT?(ft("SyncEngine","Document no longer in limbo: "+r.key),n.Ic.removeReference(r.key,e),n.Ic.containsKey(r.key)||av(n,r.key)):$t()}function uv(n,e){const t=e.key,r=t.path.canonicalString();n.gc.get(t)||n.mc.has(r)||(ft("SyncEngine","New document in limbo: "+t),n.mc.add(r),hT(n))}function hT(n){for(;n.mc.size>0&&n.gc.size<n.maxConcurrentLimboResolutions;){const e=n.mc.values().next().value;n.mc.delete(e);const t=new St(_r.fromString(e)),r=n.Ac.next();n.yc.set(r,new LM(t)),n.gc=n.gc.insert(t,r),z_(n.remoteStore,new _l(ao(an(t.path)),r,"TargetPurposeLimboResolution",Ta.ct))}}function Od(n,e,t){return fT.apply(this,arguments)}function fT(){return fT=(0,qe.Z)(function*(n,e,t){const r=Nt(n),i=[],u=[],c=[];var p;r.wc.isEmpty()||(r.wc.forEach((p,m)=>{c.push(r.Rc(m,e,t).then(b=>{if((b||t)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(m.targetId,b?.fromCache?"not-current":"current"),b){i.push(b);const O=hw.Li(m.targetId,b);u.push(O)}}))}),yield Promise.all(c),r.dc.nu(i),yield(p=(0,qe.Z)(function*(m,b){const O=Nt(m);try{yield O.persistence.runTransaction("notifyLocalViewChanges","readwrite",U=>ke.forEach(b,J=>ke.forEach(J.Fi,ce=>O.persistence.referenceDelegate.addReference(U,J.targetId,ce)).next(()=>ke.forEach(J.Bi,ce=>O.persistence.referenceDelegate.removeReference(U,J.targetId,ce)))))}catch(U){if(!hd(U))throw U;ft("LocalStore","Failed to update sequence numbers: "+U)}for(const U of b){const J=U.targetId;if(!U.fromCache){const ce=O.Ji.get(J),Ve=ce.withLastLimboFreeSnapshotVersion(ce.snapshotVersion);O.Ji=O.Ji.insert(J,Ve)}}}),function(m,b){return p.apply(this,arguments)})(r.localStore,u))}),fT.apply(this,arguments)}function pT(n,e){return Fw.apply(this,arguments)}function Fw(){return Fw=(0,qe.Z)(function*(n,e){const t=Nt(n);if(!t.currentUser.isEqual(e)){ft("SyncEngine","User change. New user:",e.toKey());const r=yield hm(t.localStore,e);t.currentUser=e,(i=t).Ec.forEach(c=>{c.forEach(p=>{p.reject(new dt(je.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),i.Ec.clear(),t.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),yield Od(t,r.er)}var i}),Fw.apply(this,arguments)}function zM(n,e){const t=Nt(n),r=t.yc.get(e);if(r&&r.fc)return kn().add(r.key);{let i=kn();const u=t._c.get(e);if(!u)return i;for(const c of u){const p=t.wc.get(c);i=i.unionWith(p.view.nc)}return i}}function WM(n,e){return Lw.apply(this,arguments)}function Lw(){return Lw=(0,qe.Z)(function*(n,e){const t=Nt(n),r=yield gw(t.localStore,e.query,!0),i=e.view.hc(r);return t.isPrimaryClient&&Tm(t,e.targetId,i.cc),i}),Lw.apply(this,arguments)}function gT(n,e){return cv.apply(this,arguments)}function cv(){return cv=(0,qe.Z)(function*(n,e){const t=Nt(n);return IM(t.localStore,e).then(r=>Od(t,r))}),cv.apply(this,arguments)}function mT(n,e,t,r){return Uw.apply(this,arguments)}function Uw(){return Uw=(0,qe.Z)(function*(n,e,t,r){const i=Nt(n),u=yield function(c,p){const m=Nt(c),b=Nt(m.mutationQueue);return m.persistence.runTransaction("Lookup mutation documents","readonly",O=>b.Sn(O,p).next(U=>U?m.localDocuments.getDocuments(O,U):ke.resolve(null)))}(i.localStore,e);var p;null!==u?("pending"===t?yield xd(i.remoteStore):"acknowledged"===t||"rejected"===t?(Dm(i,e,r||null),bm(i,e),p=e,Nt(Nt(i.localStore).mutationQueue).Cn(p)):$t(),yield Od(i,u)):ft("SyncEngine","Cannot apply mutation batch with id: "+e)}),Uw.apply(this,arguments)}function lv(){return lv=(0,qe.Z)(function*(n,e){const t=Nt(n);if(Hw(t),$w(t),!0===e&&!0!==t.vc){const r=t.sharedClientState.getAllActiveQueryTargets(),i=yield dv(t,r.toArray());t.vc=!0,yield Mw(t.remoteStore,!0);for(const u of i)z_(t.remoteStore,u)}else if(!1===e&&!1!==t.vc){const r=[];let i=Promise.resolve();t._c.forEach((u,c)=>{t.sharedClientState.isLocalQueryTarget(c)?r.push(c):i=i.then(()=>(Ap(t,c),qh(t.localStore,c,!0))),_m(t.remoteStore,c)}),yield i,yield dv(t,r),function(u){const c=Nt(u);c.yc.forEach((p,m)=>{_m(c.remoteStore,m)}),c.Ic.Ts(),c.yc=new Map,c.gc=new si(St.comparator)}(t),t.vc=!1,yield Mw(t.remoteStore,!1)}}),lv.apply(this,arguments)}function dv(n,e,t){return yT.apply(this,arguments)}function yT(){return yT=(0,qe.Z)(function*(n,e,t){const r=Nt(n),i=[],u=[];for(const c of e){let p;const m=r._c.get(c);if(m&&0!==m.length){p=yield Ip(r.localStore,ao(m[0]));for(const b of m){const O=r.wc.get(b),U=yield WM(r,O);U.snapshot&&u.push(U.snapshot)}}else{const b=yield UD(r.localStore,c);p=yield Ip(r.localStore,b),yield cT(r,Vw(b),c,!1,p.resumeToken)}i.push(p)}return r.dc.nu(u),i}),yT.apply(this,arguments)}function Vw(n){return zA(n.path,n.collectionGroup,n.orderBy,n.filters,n.limit,"F",n.startAt,n.endAt)}function Bw(n){const e=Nt(n);return Nt(Nt(e.localStore).persistence).$i()}function ZM(n,e,t,r){return jw.apply(this,arguments)}function jw(){return jw=(0,qe.Z)(function*(n,e,t,r){const i=Nt(n);if(i.vc)return void ft("SyncEngine","Ignoring unexpected query state notification.");const u=i._c.get(e);if(u&&u.length>0)switch(t){case"current":case"not-current":{const c=yield IM(i.localStore,OE(u[0])),p=Jg.createSynthesizedRemoteEventForCurrentChange(e,"current"===t,Ns.EMPTY_BYTE_STRING);yield Od(i,c,p);break}case"rejected":yield qh(i.localStore,e,!0),Ap(i,e,r);break;default:$t()}}),jw.apply(this,arguments)}function fN(n,e,t){return _T.apply(this,arguments)}function _T(){return _T=(0,qe.Z)(function*(n,e,t){const r=Hw(n);if(r.vc){for(const i of e){if(r._c.has(i)){ft("SyncEngine","Adding an already active target "+i);continue}const u=yield UD(r.localStore,i),c=yield Ip(r.localStore,u);yield cT(r,Vw(u),c.targetId,!1,c.resumeToken),z_(r.remoteStore,c)}for(const i of t)r._c.has(i)&&(yield qh(r.localStore,i,!1).then(()=>{_m(r.remoteStore,i),Ap(r,i)}).catch(Ac))}}),_T.apply(this,arguments)}function Hw(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=HM.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=zM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hN.bind(null,e),e.dc.nu=rT.bind(null,e.eventManager),e.dc.Pc=kM.bind(null,e.eventManager),e}function $w(n){const e=Nt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=iv.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=GM.bind(null,e),e}class Sm{constructor(){this.synchronizeTabs=!1}initialize(e){var t=this;return(0,qe.Z)(function*(){t.serializer=j_(e.databaseInfo.databaseId),t.sharedClientState=t.createSharedClientState(e),t.persistence=t.createPersistence(e),yield t.persistence.start(),t.localStore=t.createLocalStore(e),t.gcScheduler=t.createGarbageCollectionScheduler(e,t.localStore),t.indexBackfillerScheduler=t.createIndexBackfillerScheduler(e,t.localStore)})()}createGarbageCollectionScheduler(e,t){return null}createIndexBackfillerScheduler(e,t){return null}createLocalStore(e){return LD(this.persistence,new P_,e.initialUser,this.serializer)}createPersistence(e){return new PD(cm.zs,this.serializer)}createSharedClientState(e){return new vw}terminate(){var e=this;return(0,qe.Z)(function*(){e.gcScheduler&&e.gcScheduler.stop(),yield e.sharedClientState.shutdown(),yield e.persistence.shutdown()})()}}class hv extends Sm{constructor(e,t,r){super(),this.Vc=e,this.cacheSizeBytes=t,this.forceOwnership=r,this.synchronizeTabs=!1}initialize(e){var t=()=>super.initialize,r=this;return(0,qe.Z)(function*(){yield t().call(r,e),yield r.Vc.initialize(r,e),yield $w(r.Vc.syncEngine),yield xd(r.Vc.remoteStore),yield r.persistence.Ii(()=>(r.gcScheduler&&!r.gcScheduler.started&&r.gcScheduler.start(),r.indexBackfillerScheduler&&!r.indexBackfillerScheduler.started&&r.indexBackfillerScheduler.start(),Promise.resolve()))})()}createLocalStore(e){return LD(this.persistence,new P_,e.initialUser,this.serializer)}createGarbageCollectionScheduler(e,t){return new A_(this.persistence.referenceDelegate.garbageCollector,e.asyncQueue,t)}createIndexBackfillerScheduler(e,t){const r=new fb(t,this.persistence);return new hb(e.asyncQueue,r)}createPersistence(e){const t=dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey),r=void 0!==this.cacheSizeBytes?Vo.withCacheSize(this.cacheSizeBytes):Vo.DEFAULT;return new lw(this.synchronizeTabs,t,e.clientId,r,e.asyncQueue,DM(),Ew(),this.serializer,this.sharedClientState,!!this.forceOwnership)}createSharedClientState(e){return new vw}}class YM extends hv{constructor(e,t){super(e,t,!1),this.Vc=e,this.cacheSizeBytes=t,this.synchronizeTabs=!0}initialize(e){var t=()=>super.initialize,r=this;return(0,qe.Z)(function*(){yield t().call(r,e);const i=r.Vc.syncEngine;r.sharedClientState instanceof V_&&(r.sharedClientState.syncEngine={jr:mT.bind(null,i),zr:ZM.bind(null,i),Wr:fN.bind(null,i),$i:Bw.bind(null,i),Qr:gT.bind(null,i)},yield r.sharedClientState.start()),yield r.persistence.Ii(function(){var u=(0,qe.Z)(function*(c){yield function qM(n,e){return lv.apply(this,arguments)}(r.Vc.syncEngine,c),r.gcScheduler&&(c&&!r.gcScheduler.started?r.gcScheduler.start():c||r.gcScheduler.stop()),r.indexBackfillerScheduler&&(c&&!r.indexBackfillerScheduler.started?r.indexBackfillerScheduler.start():c||r.indexBackfillerScheduler.stop())});return function(c){return u.apply(this,arguments)}}())})()}createSharedClientState(e){const t=DM();if(!V_.D(t))throw new dt(je.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");const r=dw(e.databaseInfo.databaseId,e.databaseInfo.persistenceKey);return new V_(t,e.asyncQueue,r,e.clientId,e.initialUser)}}class Mp{initialize(e,t){var r=this;return(0,qe.Z)(function*(){r.localStore||(r.localStore=e.localStore,r.sharedClientState=e.sharedClientState,r.datastore=r.createDatastore(t),r.remoteStore=r.createRemoteStore(t),r.eventManager=r.createEventManager(t),r.syncEngine=r.createSyncEngine(t,!e.synchronizeTabs),r.sharedClientState.onlineStateHandler=i=>$M(r.syncEngine,i,1),r.remoteStore.remoteSyncer.handleCredentialChange=pT.bind(null,r.syncEngine),yield Mw(r.remoteStore,r.syncEngine.isPrimaryClient))})()}createEventManager(e){return new PM}createDatastore(e){const t=j_(e.databaseInfo.databaseId),r=new lN(e.databaseInfo);return new ww(e.authCredentials,e.appCheckCredentials,r,t)}createRemoteStore(e){return t=this.localStore,r=this.datastore,i=e.asyncQueue,u=p=>$M(this.syncEngine,p,0),c=$D.D()?new $D:new HD,new SM(t,r,i,u,c);var t,r,i,u,c}createSyncEngine(e,t){return function(r,i,u,c,p,m,b){const O=new UM(r,i,u,c,p,m);return b&&(O.vc=!0),O}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}terminate(){return(e=(0,qe.Z)(function*(t){const r=Nt(t);ft("RemoteStore","RemoteStore shutting down."),r.vu.add(5),yield ym(r),r.Pu.shutdown(),r.bu.set("Unknown")}),function(t){return e.apply(this,arguments)})(this.remoteStore);var e}}function fv(n,e=10240){let t=0;return{read:()=>(0,qe.Z)(function*(){if(t<n.byteLength){const r={value:n.slice(t,t+e),done:!1};return t+=e,r}return{done:!0}})(),cancel:()=>(0,qe.Z)(function*(){})(),releaseLock(){},closed:Promise.resolve()}}class Am{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Sc(this.observer.next,e)}error(e){this.observer.error?this.Sc(this.observer.error,e):os("Uncaught Error in snapshot listener:",e.toString())}Dc(){this.muted=!0}Sc(e,t){this.muted||setTimeout(()=>{this.muted||e(t)},0)}}class ET{constructor(e,t){this.Cc=e,this.serializer=t,this.metadata=new as,this.buffer=new Uint8Array,this.xc=new TextDecoder("utf-8"),this.Nc().then(r=>{r&&r.Qu()?this.metadata.resolve(r.Gu.metadata):this.metadata.reject(new Error(`The first element of the bundle is not a metadata, it is\n             ${JSON.stringify(r?.Gu)}`))},r=>this.metadata.reject(r))}close(){return this.Cc.cancel()}getMetadata(){var e=this;return(0,qe.Z)(function*(){return e.metadata.promise})()}bc(){var e=this;return(0,qe.Z)(function*(){return yield e.getMetadata(),e.Nc()})()}Nc(){var e=this;return(0,qe.Z)(function*(){const t=yield e.kc();if(null===t)return null;const r=e.xc.decode(t),i=Number(r);isNaN(i)&&e.Mc(`length string (${r}) is not valid number`);const u=yield e.$c(i);return new Sp(JSON.parse(u),t.length+i)})()}Oc(){return this.buffer.findIndex(e=>e==="{".charCodeAt(0))}kc(){var e=this;return(0,qe.Z)(function*(){for(;e.Oc()<0&&!(yield e.Fc()););if(0===e.buffer.length)return null;const t=e.Oc();t<0&&e.Mc("Reached the end of bundle when a length string is expected.");const r=e.buffer.slice(0,t);return e.buffer=e.buffer.slice(t),r})()}$c(e){var t=this;return(0,qe.Z)(function*(){for(;t.buffer.length<e;)(yield t.Fc())&&t.Mc("Reached the end of bundle when more is expected.");const r=t.xc.decode(t.buffer.slice(0,e));return t.buffer=t.buffer.slice(e),r})()}Mc(e){throw this.Cc.cancel(),new Error(`Invalid bundle format: ${e}`)}Fc(){var e=this;return(0,qe.Z)(function*(){const t=yield e.Cc.read();if(!t.done){const r=new Uint8Array(e.buffer.length+t.value.length);r.set(e.buffer),r.set(t.value,e.buffer.length),e.buffer=r}return t.done})()}}class QM{constructor(e){this.datastore=e,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}lookup(e){var t=this;return(0,qe.Z)(function*(){if(t.ensureCommitNotCalled(),t.mutations.length>0)throw new dt(je.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");const r=yield(i=(0,qe.Z)(function*(u,c){const p=Nt(u),m=hp(p.serializer)+"/documents",b={documents:c.map(ce=>Lh(p.serializer,ce))},O=yield p.vo("BatchGetDocuments",m,b,c.length),U=new Map;O.forEach(ce=>{const we=function qE(n,e){return"found"in e?function(t,r){nn(!!r.found);const i=Pc(t,r.found.name),u=zi(r.found.updateTime),c=r.found.createTime?zi(r.found.createTime):Xt.min(),p=new To({mapValue:{fields:r.found.fields}});return Di.newFoundDocument(i,u,c,p)}(n,e):"missing"in e?function(t,r){nn(!!r.missing),nn(!!r.readTime);const i=Pc(t,r.missing),u=zi(r.readTime);return Di.newNoDocument(i,u)}(n,e):$t()}(p.serializer,ce);U.set(we.key.toString(),we)});const J=[];return c.forEach(ce=>{const we=U.get(ce.toString());nn(!!we),J.push(we)}),J}),function(u,c){return i.apply(this,arguments)})(t.datastore,e);var i;return r.forEach(i=>t.recordVersion(i)),r})()}set(e,t){this.write(t.toMutation(e,this.precondition(e))),this.writtenDocs.add(e.toString())}update(e,t){try{this.write(t.toMutation(e,this.preconditionForUpdate(e)))}catch(r){this.lastWriteError=r}this.writtenDocs.add(e.toString())}delete(e){this.write(new dp(e,this.precondition(e))),this.writtenDocs.add(e.toString())}commit(){var e=this;return(0,qe.Z)(function*(){if(e.ensureCommitNotCalled(),e.lastWriteError)throw e.lastWriteError;const t=e.readVersions;var r;e.mutations.forEach(r=>{t.delete(r.key.toString())}),t.forEach((r,i)=>{const u=St.fromPath(i);e.mutations.push(new g_(u,e.precondition(u)))}),yield(r=(0,qe.Z)(function*(i,u){const c=Nt(i),p=hp(c.serializer)+"/documents",m={writes:u.map(b=>fp(c.serializer,b))};yield c.Io("Commit",p,m)}),function(i,u){return r.apply(this,arguments)})(e.datastore,e.mutations),e.committed=!0})()}recordVersion(e){let t;if(e.isFoundDocument())t=e.version;else{if(!e.isNoDocument())throw $t();t=Xt.min()}const r=this.readVersions.get(e.key.toString());if(r){if(!t.isEqual(r))throw new dt(je.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(e.key.toString(),t)}precondition(e){const t=this.readVersions.get(e.toString());return!this.writtenDocs.has(e.toString())&&t?t.isEqual(Xt.min())?Pi.exists(!1):Pi.updateTime(t):Pi.none()}preconditionForUpdate(e){const t=this.readVersions.get(e.toString());if(!this.writtenDocs.has(e.toString())&&t){if(t.isEqual(Xt.min()))throw new dt(je.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Pi.updateTime(t)}return Pi.exists(!0)}write(e){this.ensureCommitNotCalled(),this.mutations.push(e)}ensureCommitNotCalled(){}}class Gw{constructor(e,t,r,i,u){this.asyncQueue=e,this.datastore=t,this.options=r,this.updateFunction=i,this.deferred=u,this.Bc=r.maxAttempts,this.qo=new WD(this.asyncQueue,"transaction_retry")}run(){this.Bc-=1,this.Lc()}Lc(){var e=this;this.qo.No((0,qe.Z)(function*(){const t=new QM(e.datastore),r=e.qc(t);r&&r.then(i=>{e.asyncQueue.enqueueAndForget(()=>t.commit().then(()=>{e.deferred.resolve(i)}).catch(u=>{e.Uc(u)}))}).catch(i=>{e.Uc(i)})}))}qc(e){try{const t=this.updateFunction(e);return!Kf(t)&&t.catch&&t.then?t:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}}Uc(e){this.Bc>0&&this.Kc(e)?(this.Bc-=1,this.asyncQueue.enqueueAndForget(()=>(this.Lc(),Promise.resolve()))):this.deferred.reject(e)}Kc(e){if("FirebaseError"===e.name){const t=e.code;return"aborted"===t||"failed-precondition"===t||"already-exists"===t||!UE(t)}return!1}}class JM{constructor(e,t,r,i){var u=this;this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=r,this.databaseInfo=i,this.user=Rs.UNAUTHENTICATED,this.clientId=sE.A(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,function(){var c=(0,qe.Z)(function*(p){ft("FirestoreClient","Received user=",p.uid),yield u.authCredentialListener(p),u.user=p});return function(p){return c.apply(this,arguments)}}()),this.appCheckCredentials.start(r,c=>(ft("FirestoreClient","Received new app check token=",c),this.appCheckCredentialListener(c,this.user)))}getConfiguration(){var e=this;return(0,qe.Z)(function*(){return{asyncQueue:e.asyncQueue,databaseInfo:e.databaseInfo,clientId:e.clientId,authCredentials:e.authCredentials,appCheckCredentials:e.appCheckCredentials,initialUser:e.user,maxConcurrentLimboResolutions:100}})()}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new dt(je.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){var e=this;this.asyncQueue.enterRestrictedMode();const t=new as;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted((0,qe.Z)(function*(){try{e._onlineComponents&&(yield e._onlineComponents.terminate()),e._offlineComponents&&(yield e._offlineComponents.terminate()),e.authCredentials.shutdown(),e.appCheckCredentials.shutdown(),t.resolve()}catch(r){const i=Dp(r,"Failed to shutdown persistence");t.reject(i)}})),t.promise}}function pv(n,e){return gv.apply(this,arguments)}function gv(){return gv=(0,qe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress(),ft("FirestoreClient","Initializing OfflineComponentProvider");const t=yield n.getConfiguration();yield e.initialize(t);let r=t.initialUser;n.setCredentialChangeListener(function(){var i=(0,qe.Z)(function*(u){r.isEqual(u)||(yield hm(e.localStore,u),r=u)});return function(u){return i.apply(this,arguments)}}()),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}),gv.apply(this,arguments)}function mv(n,e){return wT.apply(this,arguments)}function wT(){return wT=(0,qe.Z)(function*(n,e){n.asyncQueue.verifyOperationInProgress();const t=yield xp(n);ft("FirestoreClient","Initializing OnlineComponentProvider");const r=yield n.getConfiguration();yield e.initialize(t,r),n.setCredentialChangeListener(i=>J_(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,u)=>J_(e.remoteStore,u)),n._onlineComponents=e}),wT.apply(this,arguments)}function CT(n){return"FirebaseError"===n.name?n.code===je.FAILED_PRECONDITION||n.code===je.UNIMPLEMENTED:!(typeof DOMException<"u"&&n instanceof DOMException)||22===n.code||20===n.code||11===n.code}function xp(n){return IT.apply(this,arguments)}function IT(){return IT=(0,qe.Z)(function*(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){ft("FirestoreClient","Using user provided OfflineComponentProvider");try{yield pv(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!CT(t))throw t;wu("Error using user provided cache. Falling back to memory cache: "+t),yield pv(n,new Sm)}}else ft("FirestoreClient","Using default OfflineComponentProvider"),yield pv(n,new Sm);return n._offlineComponents}),IT.apply(this,arguments)}function yv(n){return bT.apply(this,arguments)}function bT(){return bT=(0,qe.Z)(function*(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(ft("FirestoreClient","Using user provided OnlineComponentProvider"),yield mv(n,n._uninitializedComponentsProvider._online)):(ft("FirestoreClient","Using default OnlineComponentProvider"),yield mv(n,new Mp))),n._onlineComponents}),bT.apply(this,arguments)}function XM(n){return xp(n).then(e=>e.persistence)}function _v(n){return xp(n).then(e=>e.localStore)}function ex(n){return yv(n).then(e=>e.remoteStore)}function DT(n){return yv(n).then(e=>e.syncEngine)}function Mm(n){return TT.apply(this,arguments)}function TT(){return TT=(0,qe.Z)(function*(n){const e=yield yv(n),t=e.eventManager;return t.onListen=VM.bind(null,e.syncEngine),t.onUnlisten=BM.bind(null,e.syncEngine),t}),TT.apply(this,arguments)}function rx(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function(i,u,c,p,m){const b=new Am({next:U=>{u.enqueueAndForget(()=>Cm(i,O));const J=U.docs.has(c);!J&&U.fromCache?m.reject(new dt(je.UNAVAILABLE,"Failed to get document because the client is offline.")):J&&U.fromCache&&p&&"server"===p.source?m.reject(new dt(je.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):m.resolve(U)},error:U=>m.reject(U)}),O=new nv(an(c.path),b,{includeMetadataChanges:!0,Ku:!0});return X_(i,O)}(yield Mm(n),n.asyncQueue,e,t,r)})),r.promise}function ix(n,e,t={}){const r=new as;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function(i,u,c,p,m){const b=new Am({next:U=>{u.enqueueAndForget(()=>Cm(i,O)),U.fromCache&&"server"===p.source?m.reject(new dt(je.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):m.resolve(U)},error:U=>m.reject(U)}),O=new nv(c,b,{includeMetadataChanges:!0,Ku:!0});return X_(i,O)}(yield Mm(n),n.asyncQueue,e,t,r)})),r.promise}function a(n){const e={};return void 0!==n.timeoutSeconds&&(e.timeoutSeconds=n.timeoutSeconds),e}const l=new Map;function d(n,e,t){if(!t)throw new dt(je.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function f(n,e,t,r){if(!0===e&&!0===r)throw new dt(je.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function y(n){if(!St.isDocumentKey(n))throw new dt(je.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function D(n){if(St.isDocumentKey(n))throw new dt(je.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function A(n){if(void 0===n)return"undefined";if(null===n)return"null";if("string"==typeof n)return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if("number"==typeof n||"boolean"==typeof n)return""+n;if("object"==typeof n){if(n instanceof Array)return"an array";{const e=(t=n).constructor?t.constructor.name:null;return e?`a custom ${e} object`:"an object"}}var t;return"function"==typeof n?"a function":$t()}function P(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new dt(je.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=A(n);throw new dt(je.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}function q(n,e){if(e<=0)throw new dt(je.INVALID_ARGUMENT,`Function ${n}() requires a positive number, but it was: ${e}.`)}class ie{constructor(e){var t,r;if(void 0===e.host){if(void 0!==e.ssl)throw new dt(je.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=null===(t=e.ssl)||void 0===t||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.cache=e.localCache,void 0===e.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==e.cacheSizeBytes&&e.cacheSizeBytes<1048576)throw new dt(je.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}f("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!(this.experimentalForceLongPolling||void 0!==e.experimentalAutoDetectLongPolling&&!e.experimentalAutoDetectLongPolling),this.experimentalLongPollingOptions=a(null!==(r=e.experimentalLongPollingOptions)&&void 0!==r?r:{}),function(i){if(void 0!==i.timeoutSeconds){if(isNaN(i.timeoutSeconds))throw new dt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new dt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new dt(je.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&this.experimentalLongPollingOptions.timeoutSeconds===e.experimentalLongPollingOptions.timeoutSeconds&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class me{constructor(e,t,r,i){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new ie({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new dt(je.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return void 0!==this._terminateTask}_setSettings(e){if(this._settingsFrozen)throw new dt(je.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new ie(e),void 0!==e.credentials&&(this._authCredentials=function(t){if(!t)return new SA;switch(t.type){case"firstParty":return new ob(t.sessionIndex||"0",t.iamToken||null,t.authTokenFactory||null);case"provider":return t.client;default:throw new dt(je.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(e){const t=l.get(e);t&&(ft("ComponentProvider","Removing Datastore"),l.delete(e),t.terminate())}(this),Promise.resolve()}}class $e{constructor(e,t,r){this.converter=t,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Ct(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new $e(this.firestore,e,this._key)}}class ut{constructor(e,t,r){this.converter=t,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new ut(this.firestore,e,this._query)}}class Ct extends ut{constructor(e,t,r){super(e,t,an(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new $e(this.firestore,null,new St(e))}withConverter(e){return new Ct(this.firestore,e,this._path)}}function Jt(n,e,...t){if(n=(0,ee.m9)(n),d("collection","path",e),n instanceof me){const r=_r.fromString(e,...t);return D(r),new Ct(n,null,r)}{if(!(n instanceof $e||n instanceof Ct))throw new dt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_r.fromString(e,...t));return D(r),new Ct(n.firestore,null,r)}}function En(n,e,...t){if(n=(0,ee.m9)(n),1===arguments.length&&(e=sE.A()),d("doc","path",e),n instanceof me){const r=_r.fromString(e,...t);return y(r),new $e(n,null,new St(r))}{if(!(n instanceof $e||n instanceof Ct))throw new dt(je.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=n._path.child(_r.fromString(e,...t));return y(r),new $e(n.firestore,n instanceof Ct?n.converter:null,new St(r))}}function Yn(n,e){return n=(0,ee.m9)(n),e=(0,ee.m9)(e),(n instanceof $e||n instanceof Ct)&&(e instanceof $e||e instanceof Ct)&&n.firestore===e.firestore&&n.path===e.path&&n.converter===e.converter}function nr(n,e){return n=(0,ee.m9)(n),e=(0,ee.m9)(e),n instanceof ut&&e instanceof ut&&n.firestore===e.firestore&&d_(n._query,e._query)&&n.converter===e.converter}class Bo{constructor(){this.Gc=Promise.resolve(),this.Qc=[],this.jc=!1,this.zc=[],this.Wc=null,this.Hc=!1,this.Jc=!1,this.Yc=[],this.qo=new WD(this,"async_queue_retry"),this.Xc=()=>{const t=Ew();t&&ft("AsyncQueue","Visibility state changed to "+t.visibilityState),this.qo.Mo()};const e=Ew();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.Xc)}get isShuttingDown(){return this.jc}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Zc(),this.ta(e)}enterRestrictedMode(e){if(!this.jc){this.jc=!0,this.Jc=e||!1;const t=Ew();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.Xc)}}enqueue(e){if(this.Zc(),this.jc)return new Promise(()=>{});const t=new as;return this.ta(()=>this.jc&&this.Jc?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Qc.push(e),this.ea()))}ea(){var e=this;return(0,qe.Z)(function*(){if(0!==e.Qc.length){try{yield e.Qc[0](),e.Qc.shift(),e.qo.reset()}catch(t){if(!hd(t))throw t;ft("AsyncQueue","Operation failed with retryable error: "+t)}e.Qc.length>0&&e.qo.No(()=>e.ea())}})()}ta(e){const t=this.Gc.then(()=>(this.Hc=!0,e().catch(r=>{throw this.Wc=r,this.Hc=!1,os("INTERNAL UNHANDLED ERROR: ",function(u){let c=u.message||"";return u.stack&&(c=u.stack.includes(u.message)?u.stack:u.message+"\n"+u.stack),c}(r)),r}).then(r=>(this.Hc=!1,r))));return this.Gc=t,t}enqueueAfterDelay(e,t,r){this.Zc(),this.Yc.indexOf(e)>-1&&(t=0);const i=xw.createAndSchedule(this,e,t,r,u=>this.na(u));return this.zc.push(i),i}Zc(){this.Wc&&$t()}verifyOperationInProgress(){}sa(){var e=this;return(0,qe.Z)(function*(){let t;do{t=e.Gc,yield t}while(t!==e.Gc)})()}ia(e){for(const t of this.zc)if(t.timerId===e)return!0;return!1}ra(e){return this.sa().then(()=>{this.zc.sort((t,r)=>t.targetTimeMs-r.targetTimeMs);for(const t of this.zc)if(t.skipDelay(),"all"!==e&&t.timerId===e)break;return this.sa()})}oa(e){this.Yc.push(e)}na(e){const t=this.zc.indexOf(e);this.zc.splice(t,1)}}function Rp(n){return function(e,t){if("object"!=typeof e||null===e)return!1;const r=e;for(const i of["next","error","complete"])if(i in r&&"function"==typeof r[i])return!0;return!1}(n)}class ox{constructor(){this._progressObserver={},this._taskCompletionResolver=new as,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}onProgress(e,t,r){this._progressObserver={next:e,error:t,complete:r}}catch(e){return this._taskCompletionResolver.promise.catch(e)}then(e,t){return this._taskCompletionResolver.promise.then(e,t)}_completeWith(e){this._updateProgress(e),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(e)}_failWith(e){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(e),this._taskCompletionResolver.reject(e)}_updateProgress(e){this._lastProgress=e,this._progressObserver.next&&this._progressObserver.next(e)}}class Wi extends me{constructor(e,t,r,i){super(e,t,r,i),this.type="firestore",this._queue=new Bo,this._persistenceKey=i?.name||"[DEFAULT]"}_terminate(){return this._firestoreClient||_N(this),this._firestoreClient.terminate()}}function Ws(n){return n._firestoreClient||_N(n),n._firestoreClient.verifyNotTerminated(),n._firestoreClient}function _N(n){var e,t,r;const i=n._freezeSettings(),u=(p=(null===(e=n._app)||void 0===e?void 0:e.options.appId)||"",new bb(n._databaseId,p,n._persistenceKey,(b=i).host,b.ssl,b.experimentalForceLongPolling,b.experimentalAutoDetectLongPolling,a(b.experimentalLongPollingOptions),b.useFetchStreams));var p,b;n._firestoreClient=new JM(n._authCredentials,n._appCheckCredentials,n._queue,u),null!==(t=i.cache)&&void 0!==t&&t._offlineComponentProvider&&null!==(r=i.cache)&&void 0!==r&&r._onlineComponentProvider&&(n._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.cache.kind,_offline:i.cache._offlineComponentProvider,_online:i.cache._onlineComponentProvider})}function vN(n,e,t){const r=new as;return n.asyncQueue.enqueue((0,qe.Z)(function*(){try{yield pv(n,t),yield mv(n,e),r.resolve()}catch(i){const u=i;if(!CT(u))throw u;wu("Error enabling indexeddb cache. Falling back to memory cache: "+u),r.reject(u)}})).then(()=>r.promise)}function EN(n){if(n._initialized||n._terminated)throw new dt(je.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}class Pd{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Pd(Ns.fromBase64String(e))}catch(t){throw new dt(je.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Pd(Ns.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}class Yh{constructor(...e){for(let t=0;t<e.length;++t)if(0===e[t].length)throw new dt(je.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Ii(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}class xm{constructor(e){this._methodName=e}}class ST{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new dt(je.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new dt(je.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tn(this._lat,e._lat)||Tn(this._long,e._long)}}const Yk=/^__.*__$/;class Qk{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return null!==this.fieldMask?new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms):new cp(e,this.data,t,this.fieldTransforms)}}class wN{constructor(e,t,r){this.data=e,this.fieldMask=t,this.fieldTransforms=r}toMutation(e,t){return new Oc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function CN(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw $t()}}class AT{constructor(e,t,r,i,u,c){this.settings=e,this.databaseId=t,this.serializer=r,this.ignoreUndefinedProperties=i,void 0===u&&this.ua(),this.fieldTransforms=u||[],this.fieldMask=c||[]}get path(){return this.settings.path}get ca(){return this.settings.ca}aa(e){return new AT(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}ha(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.fa(e),i}da(e){var t;const r=null===(t=this.path)||void 0===t?void 0:t.child(e),i=this.aa({path:r,la:!1});return i.ua(),i}wa(e){return this.aa({path:void 0,la:!0})}_a(e){return RT(e,this.settings.methodName,this.settings.ma||!1,this.path,this.settings.ga)}contains(e){return void 0!==this.fieldMask.find(t=>e.isPrefixOf(t))||void 0!==this.fieldTransforms.find(t=>e.isPrefixOf(t.field))}ua(){if(this.path)for(let e=0;e<this.path.length;e++)this.fa(this.path.get(e))}fa(e){if(0===e.length)throw this._a("Document fields must not be empty");if(CN(this.ca)&&Yk.test(e))throw this._a('Document fields cannot begin and end with "__"')}}class Jk{constructor(e,t,r){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=r||j_(e)}ya(e,t,r,i=!1){return new AT({ca:e,methodName:t,ga:r,path:Ii.emptyPath(),la:!1,ma:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Rm(n){const e=n._freezeSettings(),t=j_(n._databaseId);return new Jk(n._databaseId,!!e.ignoreUndefinedProperties,t)}function MT(n,e,t,r,i,u={}){const c=n.ya(u.merge||u.mergeFields?2:0,e,t,i);dx("Data must be an object, but it was:",c,r);const p=DN(r,c);let m,b;if(u.merge)m=new Oi(c.fieldMask),b=c.fieldTransforms;else if(u.mergeFields){const O=[];for(const U of u.mergeFields){const J=qw(e,U,t);if(!c.contains(J))throw new dt(je.INVALID_ARGUMENT,`Field '${J}' is specified in your field mask but missing from your input data.`);SN(O,J)||O.push(J)}m=new Oi(O),b=c.fieldTransforms.filter(U=>m.covers(U.field))}else m=null,b=c.fieldTransforms;return new Qk(new To(p),m,b)}class Ww extends xm{_toFieldTransform(e){if(2!==e.ca)throw e._a(1===e.ca?`${this._methodName}() can only appear at the top level of your update data`:`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof Ww}}function IN(n,e,t){return new AT({ca:3,ga:e.settings.ga,methodName:n._methodName,la:t},e.databaseId,e.serializer,e.ignoreUndefinedProperties)}class ux extends xm{_toFieldTransform(e){return new up(e.path,new ap)}isEqual(e){return e instanceof ux}}class Xk extends xm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=IN(this,e,!0),r=this.pa.map(u=>Nm(u,t)),i=new Ed(r);return new up(e.path,i)}isEqual(e){return this===e}}class e1 extends xm{constructor(e,t){super(e),this.pa=t}_toFieldTransform(e){const t=IN(this,e,!0),r=this.pa.map(u=>Nm(u,t)),i=new Fh(r);return new up(e.path,i)}isEqual(e){return this===e}}class t1 extends xm{constructor(e,t){super(e),this.Ia=t}_toFieldTransform(e){const t=new Zg(e.serializer,Zb(e.serializer,this.Ia));return new up(e.path,t)}isEqual(e){return this===e}}function cx(n,e,t,r){const i=n.ya(1,e,t);dx("Data must be an object, but it was:",i,r);const u=[],c=To.empty();hl(r,(m,b)=>{const O=xT(e,m,t);b=(0,ee.m9)(b);const U=i.da(O);if(b instanceof Ww)u.push(O);else{const J=Nm(b,U);null!=J&&(u.push(O),c.set(O,J))}});const p=new Oi(u);return new wN(c,p,i.fieldTransforms)}function lx(n,e,t,r,i,u){const c=n.ya(1,e,t),p=[qw(e,r,t)],m=[i];if(u.length%2!=0)throw new dt(je.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let J=0;J<u.length;J+=2)p.push(qw(e,u[J])),m.push(u[J+1]);const b=[],O=To.empty();for(let J=p.length-1;J>=0;--J)if(!SN(b,p[J])){const ce=p[J];let we=m[J];we=(0,ee.m9)(we);const Ve=c.da(ce);if(we instanceof Ww)b.push(ce);else{const Ye=Nm(we,Ve);null!=Ye&&(b.push(ce),O.set(ce,Ye))}}const U=new Oi(b);return new wN(O,U,c.fieldTransforms)}function bN(n,e,t,r=!1){return Nm(t,n.ya(r?4:3,e))}function Nm(n,e){if(TN(n=(0,ee.m9)(n)))return dx("Unsupported field value:",e,n),DN(n,e);if(n instanceof xm)return function(t,r){if(!CN(r.ca))throw r._a(`${t._methodName}() can only be used with update() and set()`);if(!r.path)throw r._a(`${t._methodName}() is not currently supported inside arrays`);const i=t._toFieldTransform(r);i&&r.fieldTransforms.push(i)}(n,e),null;if(void 0===n&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.la&&4!==e.ca)throw e._a("Nested arrays are not supported");return function(t,r){const i=[];let u=0;for(const c of t){let p=Nm(c,r.wa(u));null==p&&(p={nullValue:"NULL_VALUE"}),i.push(p),u++}return{arrayValue:{values:i}}}(n,e)}return function(t,r){if(null===(t=(0,ee.m9)(t)))return{nullValue:"NULL_VALUE"};if("number"==typeof t)return Zb(r.serializer,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){const i=Ci.fromDate(t);return{timestampValue:Cd(r.serializer,i)}}if(t instanceof Ci){const i=new Ci(t.seconds,1e3*Math.floor(t.nanoseconds/1e3));return{timestampValue:Cd(r.serializer,i)}}if(t instanceof ST)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof Pd)return{bytesValue:v_(r.serializer,t._byteString)};if(t instanceof $e){const i=r.databaseId,u=t.firestore._databaseId;if(!u.isEqual(i))throw r._a(`Document reference is for database ${u.projectId}/${u.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:WE(t.firestore._databaseId||r.databaseId,t._key.path)}}throw r._a(`Unsupported field value: ${A(t)}`)}(n,e)}function DN(n,e){const t={};return jA(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):hl(n,(r,i)=>{const u=Nm(i,e.ha(r));null!=u&&(t[r]=u)}),{mapValue:{fields:t}}}function TN(n){return!("object"!=typeof n||null===n||n instanceof Array||n instanceof Date||n instanceof Ci||n instanceof ST||n instanceof Pd||n instanceof $e||n instanceof xm)}function dx(n,e,t){if(!TN(t)||"object"!=typeof(r=t)||null===r||Object.getPrototypeOf(r)!==Object.prototype&&null!==Object.getPrototypeOf(r)){const r=A(t);throw e._a("an object"===r?n+" a custom object":n+" "+r)}var r}function qw(n,e,t){if((e=(0,ee.m9)(e))instanceof Yh)return e._internalPath;if("string"==typeof e)return xT(n,e);throw RT("Field path arguments must be of type string or ",n,!1,void 0,t)}const n1=new RegExp("[~\\*/\\[\\]]");function xT(n,e,t){if(e.search(n1)>=0)throw RT(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new Yh(...e.split("."))._internalPath}catch{throw RT(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function RT(n,e,t,r,i){const u=r&&!r.isEmpty(),c=void 0!==i;let p=`Function ${e}() called with invalid data`;t&&(p+=" (via `toFirestore()`)"),p+=". ";let m="";return(u||c)&&(m+=" (found",u&&(m+=` in field ${r}`),c&&(m+=` in document ${i}`),m+=")"),new dt(je.INVALID_ARGUMENT,p+n+m)}function SN(n,e){return n.some(t=>t.isEqual(e))}class Zw{constructor(e,t,r,i,u){this._firestore=e,this._userDataWriter=t,this._key=r,this._document=i,this._converter=u}get id(){return this._key.path.lastSegment()}get ref(){return new $e(this._firestore,this._converter,this._key)}exists(){return null!==this._document}data(){if(this._document){if(this._converter){const e=new r1(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(NT("DocumentSnapshot.get",e));if(null!==t)return this._userDataWriter.convertValue(t)}}}class r1 extends Zw{data(){return super.data()}}function NT(n,e){return"string"==typeof e?xT(n,e):e instanceof Yh?e._internalPath:e._delegate._internalPath}function AN(n){if("L"===n.limitType&&0===n.explicitOrderBy.length)throw new dt(je.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class hx{}class Kw extends hx{}function Np(n,e,...t){let r=[];e instanceof hx&&r.push(e),r=r.concat(t),function(i){const u=i.filter(p=>p instanceof vv).length,c=i.filter(p=>p instanceof Yw).length;if(u>1||u>0&&c>0)throw new dt(je.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const i of r)n=i._apply(n);return n}class Yw extends Kw{constructor(e,t,r){super(),this._field=e,this._op=t,this._value=r,this.type="where"}static _create(e,t,r){return new Yw(e,t,r)}_apply(e){const t=this._parse(e);return NN(e._query,t),new ut(e.firestore,e.converter,sp(e._query,t))}_parse(e){const t=Rm(e.firestore);return function(i,u,c,p,m,b,O){let U;if(m.isKeyField()){if("array-contains"===b||"array-contains-any"===b)throw new dt(je.INVALID_ARGUMENT,`Invalid Query. You can't perform '${b}' queries on documentId().`);if("in"===b||"not-in"===b){RN(O,b);const J=[];for(const ce of O)J.push(xN(p,i,ce));U={arrayValue:{values:J}}}else U=xN(p,i,O)}else"in"!==b&&"not-in"!==b&&"array-contains-any"!==b||RN(O,b),U=bN(c,"where",O,"in"===b||"not-in"===b);return ur.create(m,b,U)}(e._query,0,t,e.firestore._databaseId,this._field,this._op,this._value)}}class vv extends hx{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new vv(e,t)}_parse(e){const t=this._queryConstraints.map(r=>r._parse(e)).filter(r=>r.getFilters().length>0);return 1===t.length?t[0]:$r.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return 0===t.getFilters().length?e:(function(r,i){let u=r;const c=i.getFlattenedFilters();for(const p of c)NN(u,p),u=sp(u,p)}(e._query,t),new ut(e.firestore,e.converter,sp(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return"and"===this.type?"and":"or"}}class fx extends Kw{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new fx(e,t)}_apply(e){const t=function(r,i,u){if(null!==r.startAt)throw new dt(je.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==r.endAt)throw new dt(je.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");const c=new np(i,u);return function(p,m){if(null===RE(p)){const b=l_(p);null!==b&&ON(0,b,m.field)}}(r,c),c}(e._query,this._field,this._direction);return new ut(e.firestore,e.converter,function(r,i){const u=r.explicitOrderBy.concat([i]);return new xc(r.path,r.collectionGroup,u,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}class OT extends Kw{constructor(e,t,r){super(),this.type=e,this._limit=t,this._limitType=r}static _create(e,t,r){return new OT(e,t,r)}_apply(e){return new ut(e.firestore,e.converter,Ti(e._query,this._limit,this._limitType))}}class PT extends Kw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new PT(e,t,r)}_apply(e){const t=MN(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,(i=t,new xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,i,r.endAt)));var r,i}}class kT extends Kw{constructor(e,t,r){super(),this.type=e,this._docOrFields=t,this._inclusive=r}static _create(e,t,r){return new kT(e,t,r)}_apply(e){const t=MN(e,this.type,this._docOrFields,this._inclusive);return new ut(e.firestore,e.converter,(i=t,new xc((r=e._query).path,r.collectionGroup,r.explicitOrderBy.slice(),r.filters.slice(),r.limit,r.limitType,r.startAt,i)));var r,i}}function MN(n,e,t,r){if(t[0]=(0,ee.m9)(t[0]),t[0]instanceof Zw)return function(i,u,c,p,m){if(!p)throw new dt(je.NOT_FOUND,`Can't use a DocumentSnapshot that doesn't exist for ${c}().`);const b=[];for(const O of Ph(i))if(O.field.isKeyField())b.push(ml(u,p.key));else{const U=p.data.field(O.field);if(Jf(U))throw new dt(je.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+O.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===U){const J=O.field.canonicalString();throw new dt(je.INVALID_ARGUMENT,`Invalid query. You are trying to start or end a query using a document for which the field '${J}' (used as the orderBy) does not exist.`)}b.push(U)}return new yd(b,m)}(n._query,n.firestore._databaseId,e,t[0]._document,r);{const i=Rm(n.firestore);return function(u,c,p,m,b,O){const U=u.explicitOrderBy;if(b.length>U.length)throw new dt(je.INVALID_ARGUMENT,`Too many arguments provided to ${m}(). The number of arguments must be less than or equal to the number of orderBy() clauses`);const J=[];for(let ce=0;ce<b.length;ce++){const we=b[ce];if(U[ce].field.isKeyField()){if("string"!=typeof we)throw new dt(je.INVALID_ARGUMENT,`Invalid query. Expected a string for document ID in ${m}(), but got a ${typeof we}`);if(!_d(u)&&-1!==we.indexOf("/"))throw new dt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection and ordering by documentId(), the value passed to ${m}() must be a plain document ID, but '${we}' contains a slash.`);const Ve=u.path.child(_r.fromString(we));if(!St.isDocumentKey(Ve))throw new dt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group and ordering by documentId(), the value passed to ${m}() must result in a valid document path, but '${Ve}' is not because it contains an odd number of segments.`);const Ye=new St(Ve);J.push(ml(c,Ye))}else{const Ve=bN(p,m,we);J.push(Ve)}}return new yd(J,O)}(n._query,n.firestore._databaseId,i,e,t,r)}}function xN(n,e,t){if("string"==typeof(t=(0,ee.m9)(t))){if(""===t)throw new dt(je.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!_d(e)&&-1!==t.indexOf("/"))throw new dt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const r=e.path.child(_r.fromString(t));if(!St.isDocumentKey(r))throw new dt(je.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return ml(n,new St(r))}if(t instanceof $e)return ml(n,t._key);throw new dt(je.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${A(t)}.`)}function RN(n,e){if(!Array.isArray(n)||0===n.length)throw new dt(je.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function NN(n,e){if(e.isInequality()){const r=l_(n),i=e.field;if(null!==r&&!r.isEqual(i))throw new dt(je.INVALID_ARGUMENT,`Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '${r.toString()}' and '${i.toString()}'`);const u=RE(n);null!==u&&ON(0,i,u)}const t=function(r,i){for(const u of r)for(const c of u.getFlattenedFilters())if(i.indexOf(c.op)>=0)return c.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==t)throw new dt(je.INVALID_ARGUMENT,t===e.op?`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`:`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}function ON(n,e,t){if(!t.isEqual(e))throw new dt(je.INVALID_ARGUMENT,`Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '${e.toString()}' and so you must also use '${e.toString()}' as your first argument to orderBy(), but your first orderBy() is on field '${t.toString()}' instead.`)}class px{convertValue(e,t="none"){switch(pl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return us(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(fl(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 10:return this.convertObject(e.mapValue,t);default:throw $t()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const r={};return hl(e,(i,u)=>{r[i]=this.convertValue(u,t)}),r}convertGeoPoint(e){return new ST(us(e.latitude),us(e.longitude))}convertArray(e,t){return(e.values||[]).map(r=>this.convertValue(r,t))}convertServerTimestamp(e,t){switch(t){case"previous":const r=pd(e);return null==r?null:this.convertValue(r,t);case"estimate":return this.convertTimestamp($g(e));default:return null}}convertTimestamp(e){const t=fd(e);return new Ci(t.seconds,t.nanos)}convertDocumentKey(e,t){const r=_r.fromString(e);nn(JE(r));const i=new gd(r.get(1),r.get(3)),u=new St(r.popFirst(5));return i.isEqual(t)||os(`Document ${u} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),u}}function FT(n,e,t){let r;return r=n?t&&(t.merge||t.mergeFields)?n.toFirestore(e,t):n.toFirestore(e):e,r}class h1 extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}}class Om{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class Qh extends Zw{constructor(e,t,r,i,u,c){super(e,t,r,i,c),this._firestore=e,this._firestoreImpl=e,this.metadata=u}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Qw(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const r=this._document.data.field(NT("DocumentSnapshot.get",e));if(null!==r)return this._userDataWriter.convertValue(r,t.serverTimestamps)}}}class Qw extends Qh{data(e={}){return super.data(e)}}class Op{constructor(e,t,r,i){this._firestore=e,this._userDataWriter=t,this._snapshot=i,this.metadata=new Om(i.hasPendingWrites,i.fromCache),this.query=r}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return 0===this.size}forEach(e,t){this._snapshot.docs.forEach(r=>{e.call(t,new Qw(this._firestore,this._userDataWriter,r.key,r,new Om(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new dt(je.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,i){if(r._snapshot.oldDocs.isEmpty()){let u=0;return r._snapshot.docChanges.map(c=>({type:"added",doc:new Qw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Om(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter),oldIndex:-1,newIndex:u++}))}{let u=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(c=>i||3!==c.type).map(c=>{const p=new Qw(r._firestore,r._userDataWriter,c.doc.key,c.doc,new Om(r._snapshot.mutatedKeys.has(c.doc.key),r._snapshot.fromCache),r.query.converter);let m=-1,b=-1;return 0!==c.type&&(m=u.indexOf(c.doc.key),u=u.delete(c.doc.key)),1!==c.type&&(u=u.add(c.doc),b=u.indexOf(c.doc.key)),{type:p1(c.type),doc:p,oldIndex:m,newIndex:b}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function p1(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return $t()}}function kN(n,e){return n instanceof Qh&&e instanceof Qh?n._firestore===e._firestore&&n._key.isEqual(e._key)&&(null===n._document?null===e._document:n._document.isEqual(e._document))&&n._converter===e._converter:n instanceof Op&&e instanceof Op&&n._firestore===e._firestore&&nr(n.query,e.query)&&n.metadata.isEqual(e.metadata)&&n._snapshot.isEqual(e._snapshot)}class Pp extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Pd(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new $e(this.firestore,null,t)}}function FN(n,e,t){n=P(n,$e);const r=P(n.firestore,Wi),i=FT(n.converter,e,t);return Ev(r,[MT(Rm(r),"setDoc",n._key,i,null!==n.converter,t).toMutation(n._key,Pi.none())])}function LN(n,e,t,...r){n=P(n,$e);const i=P(n.firestore,Wi),u=Rm(i);let c;return c="string"==typeof(e=(0,ee.m9)(e))||e instanceof Yh?lx(u,"updateDoc",n._key,e,t,r):cx(u,"updateDoc",n._key,e),Ev(i,[c.toMutation(n._key,Pi.exists(!0))])}function UN(n,...e){var t,r,i;n=(0,ee.m9)(n);let u={includeMetadataChanges:!1},c=0;"object"!=typeof e[c]||Rp(e[c])||(u=e[c],c++);const p={includeMetadataChanges:u.includeMetadataChanges};if(Rp(e[c])){const U=e[c];e[c]=null===(t=U.next)||void 0===t?void 0:t.bind(U),e[c+1]=null===(r=U.error)||void 0===r?void 0:r.bind(U),e[c+2]=null===(i=U.complete)||void 0===i?void 0:i.bind(U)}let m,b,O;if(n instanceof $e)b=P(n.firestore,Wi),O=an(n._key.path),m={next:U=>{e[c]&&e[c](gx(b,n,U))},error:e[c+1],complete:e[c+2]};else{const U=P(n,ut);b=P(U.firestore,Wi),O=U._query;const J=new Pp(b);m={next:ce=>{e[c]&&e[c](new Op(b,J,U,ce))},error:e[c+1],complete:e[c+2]},AN(n._query)}return function(U,J,ce,we){const Ve=new Am(we),Ye=new nv(J,Ve,ce);return U.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return X_(yield Mm(U),Ye)})),()=>{Ve.Dc(),U.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return Cm(yield Mm(U),Ye)}))}}(Ws(b),O,p,m)}function Ev(n,e){return function(t,r){const i=new as;return t.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function jM(n,e,t){return lT.apply(this,arguments)}(yield DT(t),r,i)})),i.promise}(Ws(n),e)}function gx(n,e,t){const r=t.docs.get(e._key),i=new Pp(n);return new Qh(n,i,e._key,r,new Om(t.hasPendingWrites,t.fromCache),e.converter)}const N1={maxAttempts:5};class VN{constructor(e,t){this._firestore=e,this._commitHandler=t,this._mutations=[],this._committed=!1,this._dataReader=Rm(e)}set(e,t,r){this._verifyNotCommitted();const i=kp(e,this._firestore),u=FT(i.converter,t,r),c=MT(this._dataReader,"WriteBatch.set",i._key,u,null!==i.converter,r);return this._mutations.push(c.toMutation(i._key,Pi.none())),this}update(e,t,r,...i){this._verifyNotCommitted();const u=kp(e,this._firestore);let c;return c="string"==typeof(t=(0,ee.m9)(t))||t instanceof Yh?lx(this._dataReader,"WriteBatch.update",u._key,t,r,i):cx(this._dataReader,"WriteBatch.update",u._key,t),this._mutations.push(c.toMutation(u._key,Pi.exists(!0))),this}delete(e){this._verifyNotCommitted();const t=kp(e,this._firestore);return this._mutations=this._mutations.concat(new dp(t._key,Pi.none())),this}commit(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()}_verifyNotCommitted(){if(this._committed)throw new dt(je.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")}}function kp(n,e){if((n=(0,ee.m9)(n)).firestore!==e)throw new dt(je.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return n}class O1 extends class{constructor(e,t){this._firestore=e,this._transaction=t,this._dataReader=Rm(e)}get(e){const t=kp(e,this._firestore),r=new h1(this._firestore);return this._transaction.lookup([t._key]).then(i=>{if(!i||1!==i.length)return $t();const u=i[0];if(u.isFoundDocument())return new Zw(this._firestore,r,u.key,u,t.converter);if(u.isNoDocument())return new Zw(this._firestore,r,t._key,null,t.converter);throw $t()})}set(e,t,r){const i=kp(e,this._firestore),u=FT(i.converter,t,r),c=MT(this._dataReader,"Transaction.set",i._key,u,null!==i.converter,r);return this._transaction.set(i._key,c),this}update(e,t,r,...i){const u=kp(e,this._firestore);let c;return c="string"==typeof(t=(0,ee.m9)(t))||t instanceof Yh?lx(this._dataReader,"Transaction.update",u._key,t,r,i):cx(this._dataReader,"Transaction.update",u._key,t),this._transaction.update(u._key,c),this}delete(e){const t=kp(e,this._firestore);return this._transaction.delete(t._key),this}}{constructor(e,t){super(e,t),this._firestore=e}get(e){const t=kp(e,this._firestore),r=new Pp(this._firestore);return super.get(e).then(i=>new Qh(this._firestore,r,t._key,i._document,new Om(!1,!1),t.converter))}}function mx(n,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new dt("invalid-argument",`Invalid options passed to function ${n}(): You cannot specify both "merge" and "mergeFields".`);return e}function jN(){if(typeof Uint8Array>"u")throw new dt("unimplemented","Uint8Arrays are not available in this environment.")}function HN(){if(!function Ib(){return typeof atob<"u"}())throw new dt("unimplemented","Blobs are unavailable in Firestore in this environment.")}!function(n,e=!0){Tc=wc.SDK_VERSION,(0,wc._registerComponent)(new ri.wA("firestore",(t,{instanceIdentifier:r,options:i})=>{const u=t.getProvider("app").getImmediate(),c=new Wi(new iE(t.getProvider("auth-internal")),new xA(t.getProvider("app-check-internal")),function(p,m){if(!Object.prototype.hasOwnProperty.apply(p.options,["projectId"]))throw new dt(je.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new gd(p.options.projectId,m)}(u,r),u);return i=Object.assign({useFetchStreams:e},i),c._setSettings(i),c},"PUBLIC").setMultipleInstances(!0)),(0,wc.registerVersion)(ib,"3.13.0",n),(0,wc.registerVersion)(ib,"3.13.0","esm2017")}();class Jw{constructor(e){this._delegate=e}static fromBase64String(e){return HN(),new Jw(Pd.fromBase64String(e))}static fromUint8Array(e){return jN(),new Jw(Pd.fromUint8Array(e))}toBase64(){return HN(),this._delegate.toBase64()}toUint8Array(){return jN(),this._delegate.toUint8Array()}isEqual(e){return this._delegate.isEqual(e._delegate)}toString(){return"Blob(base64: "+this.toBase64()+")"}}function yx(n){return function H1(n,e){if("object"!=typeof n||null===n)return!1;const t=n;for(const r of e)if(r in t&&"function"==typeof t[r])return!0;return!1}(n,["next","error","complete"])}class $1{enableIndexedDbPersistence(e,t){return function jk(n,e){EN(n=P(n,Wi));const t=Ws(n);if(t._uninitializedComponentsProvider)throw new dt(je.FAILED_PRECONDITION,"SDK cache is already specified.");wu("enableIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const r=n._freezeSettings(),i=new Mp;return vN(t,i,new hv(i,r.cacheSizeBytes,e?.forceOwnership))}(e._delegate,{forceOwnership:t})}enableMultiTabIndexedDbPersistence(e){return function Hk(n){EN(n=P(n,Wi));const e=Ws(n);if(e._uninitializedComponentsProvider)throw new dt(je.FAILED_PRECONDITION,"SDK cache is already specified.");wu("enableMultiTabIndexedDbPersistence() will be deprecated in the future, you can use `FirestoreSettings.cache` instead.");const t=n._freezeSettings(),r=new Mp;return vN(e,r,new YM(r,t.cacheSizeBytes))}(e._delegate)}clearIndexedDbPersistence(e){return function $k(n){if(n._initialized&&!n._terminated)throw new dt(je.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");const e=new as;return n._queue.enqueueAndForgetEvenWhileRestricted((0,qe.Z)(function*(){try{yield(t=(0,qe.Z)(function*(r){if(!Cu.D())return Promise.resolve();const i=r+"main";yield Cu.delete(i)}),function(r){return t.apply(this,arguments)})(dw(n._databaseId,n._persistenceKey)),e.resolve()}catch(t){e.reject(t)}var t})),e.promise}(e._delegate)}}class $N{constructor(e,t,r){this._delegate=t,this._persistenceProvider=r,this.INTERNAL={delete:()=>this.terminate()},e instanceof gd||(this._appCompat=e)}get _databaseId(){return this._delegate._databaseId}settings(e){const t=this._delegate._getSettings();!e.merge&&t.host!==e.host&&wu("You are overriding the original host. If you did not intend to override your settings, use {merge: true}."),e.merge&&delete(e=Object.assign(Object.assign({},t),e)).merge,this._delegate._setSettings(e)}useEmulator(e,t,r={}){!function De(n,e,t,r={}){var i;const u=(n=P(n,me))._getSettings(),c=`${e}:${t}`;if("firestore.googleapis.com"!==u.host&&u.host!==c&&wu("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},u),{host:c,ssl:!1})),r.mockUserToken){let p,m;if("string"==typeof r.mockUserToken)p=r.mockUserToken,m=Rs.MOCK_USER;else{p=(0,ee.Sg)(r.mockUserToken,null===(i=n._app)||void 0===i?void 0:i.options.projectId);const b=r.mockUserToken.sub||r.mockUserToken.user_id;if(!b)throw new dt(je.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");m=new Rs(b)}n._authCredentials=new AA(new TA(p,m))}}(this._delegate,e,t,r)}enableNetwork(){return function zk(n){return function nx(n){return n.asyncQueue.enqueue((0,qe.Z)(function*(){const e=yield XM(n),t=yield ex(n);return e.setNetworkEnabled(!0),function(r){const i=Nt(r);return i.vu.delete(0),$_(i)}(t)}))}(Ws(n=P(n,Wi)))}(this._delegate)}disableNetwork(){return function Wk(n){return function pN(n){return n.asyncQueue.enqueue((0,qe.Z)(function*(){const e=yield XM(n),t=yield ex(n);return e.setNetworkEnabled(!1),(r=(0,qe.Z)(function*(i){const u=Nt(i);u.vu.add(0),yield ym(u),u.bu.set("Offline")}),function(i){return r.apply(this,arguments)})(t);var r}))}(Ws(n=P(n,Wi)))}(this._delegate)}enablePersistence(e){let t=!1,r=!1;return e&&(t=!!e.synchronizeTabs,r=!!e.experimentalForceOwningTab,f("synchronizeTabs",t,"experimentalForceOwningTab",r)),t?this._persistenceProvider.enableMultiTabIndexedDbPersistence(this):this._persistenceProvider.enableIndexedDbPersistence(this,r)}clearPersistence(){return this._persistenceProvider.clearIndexedDbPersistence(this)}terminate(){return this._appCompat&&(this._appCompat._removeServiceInstance("firestore-compat"),this._appCompat._removeServiceInstance("firestore")),this._delegate._delete()}waitForPendingWrites(){return function Gk(n){return function(e){const t=new as;return e.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return function Kh(n,e){return ov.apply(this,arguments)}(yield DT(e),t)})),t.promise}(Ws(n=P(n,Wi)))}(this._delegate)}onSnapshotsInSync(e){return function I1(n,e){return function sx(n,e){const t=new Am(e);return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return r=yield Mm(n),i=t,Nt(r).ku.add(i),void i.next();var r,i})),()=>{t.Dc(),n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return r=yield Mm(n),i=t,void Nt(r).ku.delete(i);var r,i}))}}(Ws(n=P(n,Wi)),Rp(e)?e:{next:e})}(this._delegate,e)}get app(){if(!this._appCompat)throw new dt("failed-precondition","Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._appCompat}collection(e){try{return new wv(this,Jt(this._delegate,e))}catch(t){throw Ka(t,"collection()","Firestore.collection()")}}doc(e){try{return new kc(this,En(this._delegate,e))}catch(t){throw Ka(t,"doc()","Firestore.doc()")}}collectionGroup(e){try{return new Ya(this,function ct(n,e){if(n=P(n,me),d("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new dt(je.INVALID_ARGUMENT,`Invalid collection ID '${e}' passed to function collectionGroup(). Collection IDs must not contain '/'.`);return new ut(n,null,(t=e,new xc(_r.emptyPath(),t)));var t}(this._delegate,e))}catch(t){throw Ka(t,"collectionGroup()","Firestore.collectionGroup()")}}runTransaction(e){return function P1(n,e,t){n=P(n,Wi);const r=Object.assign(Object.assign({},N1),t);return function(i){if(i.maxAttempts<1)throw new dt(je.INVALID_ARGUMENT,"Max attempts must be at least 1")}(r),function(i,u,c){const p=new as;return i.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){const m=yield function tx(n){return yv(n).then(e=>e.datastore)}(i);new Gw(i.asyncQueue,m,c,u,p).run()})),p.promise}(Ws(n),i=>e(new O1(n,i)),r)}(this._delegate,t=>e(new GN(this,t)))}batch(){return Ws(this._delegate),new zN(new VN(this._delegate,e=>Ev(this._delegate,e)))}loadBundle(e){return function qk(n,e){const t=Ws(n=P(n,Wi)),r=new ox;return function yN(n,e,t,r){const i=function(u,c){let p;return p="string"==typeof u?nD().encode(u):u,m=function(m,b){if(m instanceof Uint8Array)return fv(m,b);if(m instanceof ArrayBuffer)return fv(new Uint8Array(m),b);if(m instanceof ReadableStream)return m.getReader();throw new Error("Source of `toByteStreamReader` has to be a ArrayBuffer or ReadableStream")}(p),new ET(m,c);var m}(t,j_(e));n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){!function KM(n,e,t){const r=Nt(n);var i;(i=(0,qe.Z)(function*(u,c,p){try{const m=yield c.getMetadata();if(yield function(J,ce){const we=Nt(J),Ve=zi(ce.createTime);return we.persistence.runTransaction("hasNewerBundle","readonly",Ye=>we.qs.getBundleMetadata(Ye,ce.id)).then(Ye=>!!Ye&&Ye.createTime.compareTo(Ve)>=0)}(u.localStore,m))return yield c.close(),p._completeWith({taskState:"Success",documentsLoaded:(J=m).totalDocuments,bytesLoaded:J.totalBytes,totalDocuments:J.totalDocuments,totalBytes:J.totalBytes}),Promise.resolve(new Set);p._updateProgress(Nw(m));const b=new iT(m,u.localStore,c.serializer);let O=yield c.bc();for(;O;){const J=yield b.zu(O);J&&p._updateProgress(J),O=yield c.bc()}const U=yield b.complete();return yield Od(u,U.Ju,void 0),yield function(J,ce){const we=Nt(J);return we.persistence.runTransaction("Save bundle","readwrite",Ve=>we.qs.saveBundleMetadata(Ve,ce))}(u.localStore,m),p._completeWith(U.progress),Promise.resolve(U.Hu)}catch(m){return wu("SyncEngine",`Loading bundle failed with ${m}`),p._failWith(m),Promise.resolve(new Set)}var J}),function(u,c,p){return i.apply(this,arguments)})(r,e,t).then(i=>{r.sharedClientState.notifyBundleLoaded(i)})}(yield DT(n),i,r)}))}(t,n._databaseId,e,r),r}(this._delegate,e)}namedQuery(e){return function Zk(n,e){return function s(n,e){return n.asyncQueue.enqueue((0,qe.Z)(function*(){return function(t,r){const i=Nt(t);return i.persistence.runTransaction("Get named query","readonly",u=>i.qs.getNamedQuery(u,r))}(yield _v(n),e)}))}(Ws(n=P(n,Wi)),e).then(t=>t?new ut(n,null,t.query):null)}(this._delegate,e).then(t=>t?new Ya(this,t):null)}}class LT extends px{constructor(e){super(),this.firestore=e}convertBytes(e){return new Jw(new Pd(e))}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return kc.forKey(t,this.firestore,null)}}class GN{constructor(e,t){this._firestore=e,this._delegate=t,this._userDataWriter=new LT(e)}get(e){const t=km(e);return this._delegate.get(t).then(r=>new Xw(this._firestore,new Qh(this._firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,t.converter)))}set(e,t,r){const i=km(e);return r?(mx("Transaction.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=km(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=km(e);return this._delegate.delete(t),this}}class zN{constructor(e){this._delegate=e}set(e,t,r){const i=km(e);return r?(mx("WriteBatch.set",r),this._delegate.set(i,t,r)):this._delegate.set(i,t),this}update(e,t,r,...i){const u=km(e);return 2===arguments.length?this._delegate.update(u,t):this._delegate.update(u,t,r,...i),this}delete(e){const t=km(e);return this._delegate.delete(t),this}commit(){return this._delegate.commit()}}class Pm{constructor(e,t,r){this._firestore=e,this._userDataWriter=t,this._delegate=r}fromFirestore(e,t){const r=new Qw(this._firestore._delegate,this._userDataWriter,e._key,e._document,e.metadata,null);return this._delegate.fromFirestore(new eC(this._firestore,r),t??{})}toFirestore(e,t){return t?this._delegate.toFirestore(e,t):this._delegate.toFirestore(e)}static getInstance(e,t){const r=Pm.INSTANCES;let i=r.get(e);i||(i=new WeakMap,r.set(e,i));let u=i.get(t);return u||(u=new Pm(e,new LT(e),t),i.set(t,u)),u}}Pm.INSTANCES=new WeakMap;class kc{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LT(e)}static forPath(e,t,r){if(e.length%2!=0)throw new dt("invalid-argument",`Invalid document reference. Document references must have an even number of segments, but ${e.canonicalString()} has ${e.length}`);return new kc(t,new $e(t._delegate,r,new St(e)))}static forKey(e,t,r){return new kc(t,new $e(t._delegate,r,e))}get id(){return this._delegate.id}get parent(){return new wv(this.firestore,this._delegate.parent)}get path(){return this._delegate.path}collection(e){try{return new wv(this.firestore,Jt(this._delegate,e))}catch(t){throw Ka(t,"collection()","DocumentReference.collection()")}}isEqual(e){return(e=(0,ee.m9)(e))instanceof $e&&Yn(this._delegate,e)}set(e,t){t=mx("DocumentReference.set",t);try{return t?FN(this._delegate,e,t):FN(this._delegate,e)}catch(r){throw Ka(r,"setDoc()","DocumentReference.set()")}}update(e,t,...r){try{return 1===arguments.length?LN(this._delegate,e):LN(this._delegate,e,t,...r)}catch(i){throw Ka(i,"updateDoc()","DocumentReference.update()")}}delete(){return function w1(n){return Ev(P(n.firestore,Wi),[new dp(n._key,Pi.none())])}(this._delegate)}onSnapshot(...e){const t=WN(e),r=qN(e,i=>new Xw(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,i._key,i._document,i.metadata,this._delegate.converter)));return UN(this._delegate,t,r)}get(e){let t;return t="cache"===e?.source?function m1(n){n=P(n,$e);const e=P(n.firestore,Wi),t=Ws(e),r=new Pp(e);return function gN(n,e){const t=new as;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return(r=(0,qe.Z)(function*(i,u,c){try{const p=yield function(m,b){const O=Nt(m);return O.persistence.runTransaction("read document","readonly",U=>O.localDocuments.getDocument(U,b))}(i,u);p.isFoundDocument()?c.resolve(p):p.isNoDocument()?c.resolve(null):c.reject(new dt(je.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)"))}catch(p){const m=Dp(p,`Failed to get document '${u} from cache`);c.reject(m)}}),function(i,u,c){return r.apply(this,arguments)})(yield _v(n),e,t);var r})),t.promise}(t,n._key).then(i=>new Qh(e,r,n._key,i,new Om(null!==i&&i.hasLocalMutations,!0),n.converter))}(this._delegate):"server"===e?.source?function y1(n){n=P(n,$e);const e=P(n.firestore,Wi);return rx(Ws(e),n._key,{source:"server"}).then(t=>gx(e,n,t))}(this._delegate):function g1(n){n=P(n,$e);const e=P(n.firestore,Wi);return rx(Ws(e),n._key).then(t=>gx(e,n,t))}(this._delegate),t.then(r=>new Xw(this.firestore,new Qh(this.firestore._delegate,this._userDataWriter,r._key,r._document,r.metadata,this._delegate.converter)))}withConverter(e){return new kc(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}function Ka(n,e,t){return n.message=n.message.replace(e,t),n}function WN(n){for(const e of n)if("object"==typeof e&&!yx(e))return e;return{}}function qN(n,e){var t,r;let i;return i=yx(n[0])?n[0]:yx(n[1])?n[1]:"function"==typeof n[0]?{next:n[0],error:n[1],complete:n[2]}:{next:n[1],error:n[2],complete:n[3]},{next:u=>{i.next&&i.next(e(u))},error:null===(t=i.error)||void 0===t?void 0:t.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}class Xw{constructor(e,t){this._firestore=e,this._delegate=t}get ref(){return new kc(this._firestore,this._delegate.ref)}get id(){return this._delegate.id}get metadata(){return this._delegate.metadata}get exists(){return this._delegate.exists()}data(e){return this._delegate.data(e)}get(e,t){return this._delegate.get(e,t)}isEqual(e){return kN(this._delegate,e._delegate)}}class eC extends Xw{data(e){const t=this._delegate.data(e);return function DA(n,e){n||$t()}(void 0!==t),t}}class Ya{constructor(e,t){this.firestore=e,this._delegate=t,this._userDataWriter=new LT(e)}where(e,t,r){try{return new Ya(this.firestore,Np(this._delegate,function i1(n,e,t){const r=e,i=NT("where",n);return Yw._create(i,r,t)}(e,t,r)))}catch(i){throw Ka(i,/(orderBy|where)\(\)/,"Query.$1()")}}orderBy(e,t){try{return new Ya(this.firestore,Np(this._delegate,function s1(n,e="asc"){const t=e,r=NT("orderBy",n);return fx._create(r,t)}(e,t)))}catch(r){throw Ka(r,/(orderBy|where)\(\)/,"Query.$1()")}}limit(e){try{return new Ya(this.firestore,Np(this._delegate,function o1(n){return q("limit",n),OT._create("limit",n,"F")}(e)))}catch(t){throw Ka(t,"limit()","Query.limit()")}}limitToLast(e){try{return new Ya(this.firestore,Np(this._delegate,function a1(n){return q("limitToLast",n),OT._create("limitToLast",n,"L")}(e)))}catch(t){throw Ka(t,"limitToLast()","Query.limitToLast()")}}startAt(...e){try{return new Ya(this.firestore,Np(this._delegate,function u1(...n){return PT._create("startAt",n,!0)}(...e)))}catch(t){throw Ka(t,"startAt()","Query.startAt()")}}startAfter(...e){try{return new Ya(this.firestore,Np(this._delegate,function c1(...n){return PT._create("startAfter",n,!1)}(...e)))}catch(t){throw Ka(t,"startAfter()","Query.startAfter()")}}endBefore(...e){try{return new Ya(this.firestore,Np(this._delegate,function l1(...n){return kT._create("endBefore",n,!1)}(...e)))}catch(t){throw Ka(t,"endBefore()","Query.endBefore()")}}endAt(...e){try{return new Ya(this.firestore,Np(this._delegate,function d1(...n){return kT._create("endAt",n,!0)}(...e)))}catch(t){throw Ka(t,"endAt()","Query.endAt()")}}isEqual(e){return nr(this._delegate,e._delegate)}get(e){let t;return t="cache"===e?.source?function v1(n){n=P(n,ut);const e=P(n.firestore,Wi),t=Ws(e),r=new Pp(e);return function mN(n,e){const t=new as;return n.asyncQueue.enqueueAndForget((0,qe.Z)(function*(){return(r=(0,qe.Z)(function*(i,u,c){try{const p=yield gw(i,u,!0),m=new FM(u,p.ir),b=m.sc(p.documents),O=m.applyChanges(b,!1);c.resolve(O.snapshot)}catch(p){const m=Dp(p,`Failed to execute query '${u} against cache`);c.reject(m)}}),function(i,u,c){return r.apply(this,arguments)})(yield _v(n),e,t);var r})),t.promise}(t,n._query).then(i=>new Op(e,r,n,i))}(this._delegate):"server"===e?.source?function E1(n){n=P(n,ut);const e=P(n.firestore,Wi),t=Ws(e),r=new Pp(e);return ix(t,n._query,{source:"server"}).then(i=>new Op(e,r,n,i))}(this._delegate):function _1(n){n=P(n,ut);const e=P(n.firestore,Wi),t=Ws(e),r=new Pp(e);return AN(n._query),ix(t,n._query).then(i=>new Op(e,r,n,i))}(this._delegate),t.then(r=>new _x(this.firestore,new Op(this.firestore._delegate,this._userDataWriter,this._delegate,r._snapshot)))}onSnapshot(...e){const t=WN(e),r=qN(e,i=>new _x(this.firestore,new Op(this.firestore._delegate,this._userDataWriter,this._delegate,i._snapshot)));return UN(this._delegate,t,r)}withConverter(e){return new Ya(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}class z1{constructor(e,t){this._firestore=e,this._delegate=t}get type(){return this._delegate.type}get doc(){return new eC(this._firestore,this._delegate.doc)}get oldIndex(){return this._delegate.oldIndex}get newIndex(){return this._delegate.newIndex}}class _x{constructor(e,t){this._firestore=e,this._delegate=t}get query(){return new Ya(this._firestore,this._delegate.query)}get metadata(){return this._delegate.metadata}get size(){return this._delegate.size}get empty(){return this._delegate.empty}get docs(){return this._delegate.docs.map(e=>new eC(this._firestore,e))}docChanges(e){return this._delegate.docChanges(e).map(t=>new z1(this._firestore,t))}forEach(e,t){this._delegate.forEach(r=>{e.call(t,new eC(this._firestore,r))})}isEqual(e){return kN(this._delegate,e._delegate)}}class wv extends Ya{constructor(e,t){super(e,t),this.firestore=e,this._delegate=t}get id(){return this._delegate.id}get path(){return this._delegate.path}get parent(){const e=this._delegate.parent;return e?new kc(this.firestore,e):null}doc(e){try{return new kc(this.firestore,void 0===e?En(this._delegate):En(this._delegate,e))}catch(t){throw Ka(t,"doc()","CollectionReference.doc()")}}add(e){return function C1(n,e){const t=P(n.firestore,Wi),r=En(n),i=FT(n.converter,e);return Ev(t,[MT(Rm(n.firestore),"addDoc",r._key,i,null!==n.converter,{}).toMutation(r._key,Pi.exists(!1))]).then(()=>r)}(this._delegate,e).then(t=>new kc(this.firestore,t))}isEqual(e){return Yn(this._delegate,e._delegate)}withConverter(e){return new wv(this.firestore,this._delegate.withConverter(e?Pm.getInstance(this.firestore,e):null))}}function km(n){return P(n,$e)}class vx{constructor(...e){this._delegate=new Yh(...e)}static documentId(){return new vx(Ii.keyField().canonicalString())}isEqual(e){return(e=(0,ee.m9)(e))instanceof Yh&&this._delegate._internalPath.isEqual(e._internalPath)}}class Fm{constructor(e){this._delegate=e}static serverTimestamp(){const e=function F1(){return new ux("serverTimestamp")}();return e._methodName="FieldValue.serverTimestamp",new Fm(e)}static delete(){const e=function k1(){return new Ww("deleteField")}();return e._methodName="FieldValue.delete",new Fm(e)}static arrayUnion(...e){const t=function L1(...n){return new Xk("arrayUnion",n)}(...e);return t._methodName="FieldValue.arrayUnion",new Fm(t)}static arrayRemove(...e){const t=function U1(...n){return new e1("arrayRemove",n)}(...e);return t._methodName="FieldValue.arrayRemove",new Fm(t)}static increment(e){const t=function V1(n){return new t1("increment",n)}(e);return t._methodName="FieldValue.increment",new Fm(t)}isEqual(e){return this._delegate.isEqual(e._delegate)}}const W1={Firestore:$N,GeoPoint:ST,Timestamp:Ci,Blob:Jw,Transaction:GN,WriteBatch:zN,DocumentReference:kc,DocumentSnapshot:Xw,Query:Ya,QueryDocumentSnapshot:eC,QuerySnapshot:_x,CollectionReference:wv,FieldPath:vx,FieldValue:Fm,setLogLevel:function G1(n){!function sb(n){Sc.setLogLevel(n)}(n)},CACHE_SIZE_UNLIMITED:-1};function ZN(n,e){return function K1(n,e=Ll.z){return new de.y(t=>{let r;return null!=e?e.schedule(()=>{r=n.onSnapshot({includeMetadataChanges:!0},t)}):r=n.onSnapshot({includeMetadataChanges:!0},t),()=>{r?.()}})}(n,e)}function Ex(n,e){return ZN(n,e).pipe((0,Be.U)(t=>({payload:t,type:"query"})))}function UT(n,e){return Ex(n,e).pipe((0,f0.O)(void 0),p0(),(0,Be.U)(([t,r])=>{const i=r.payload.docChanges(),u=i.map(c=>({type:c.type,payload:c}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(r.payload.metadata)&&r.payload.docs.forEach((c,p)=>{const m=i.find(O=>O.doc.ref.isEqual(c.ref)),b=t?.payload.docs.find(O=>O.ref.isEqual(c.ref));m&&JSON.stringify(m.doc.metadata)===JSON.stringify(c.metadata)||!m&&b&&JSON.stringify(b.metadata)===JSON.stringify(c.metadata)||u.push({type:"modified",payload:{oldIndex:p,newIndex:p,type:"modified",doc:c}})}),u}))}function KN(n,e,t){return UT(n,t).pipe((0,ph.R)((r,i)=>function Q1(n,e,t){return e.forEach(r=>{t.indexOf(r.type)>-1&&(n=function J1(n,e){switch(e.type){case"added":if(!n[e.newIndex]||!n[e.newIndex].doc.ref.isEqual(e.doc.ref))return wx(n,e.newIndex,0,e);break;case"modified":if(null==n[e.oldIndex]||n[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const t=n.slice();return t.splice(e.oldIndex,1),t.splice(e.newIndex,0,e),t}return wx(n,e.newIndex,1,e)}break;case"removed":if(n[e.oldIndex]&&n[e.oldIndex].doc.ref.isEqual(e.doc.ref))return wx(n,e.oldIndex,1)}return n}(n,r))}),n}(r,i.map(u=>u.payload),e),[]),(0,g0.x)(),(0,Be.U)(r=>r.map(i=>({type:i.type,payload:i}))))}function wx(n,e,t,...r){const i=n.slice();return i.splice(e,t,...r),i}function YN(n){return(!n||0===n.length)&&(n=["added","removed","modified"]),n}!function Z1(n){(function q1(n,e){n.INTERNAL.registerComponent(new ri.wA("firestore-compat",t=>{const r=t.getProvider("app-compat").getImmediate(),i=t.getProvider("firestore").getImmediate();return e(r,i)},"PUBLIC").setServiceProps(Object.assign({},W1)))})(n,(e,t)=>new $N(e,t,new $1)),n.registerVersion("@firebase/firestore-compat","0.3.12")}(m0.Z);class QN{constructor(e,t,r){this.ref=e,this.query=t,this.afs=r}stateChanges(e){let t=UT(this.query,this.afs.schedulers.outsideAngular);return e&&e.length>0&&(t=t.pipe((0,Be.U)(r=>r.filter(i=>e.indexOf(i.type)>-1)))),t.pipe((0,f0.O)(void 0),p0(),(0,ma.h)(([r,i])=>i.length>0||!r),(0,Be.U)(([r,i])=>i),Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ph.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YN(e);return KN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return Ex(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.payload.docs.map(r=>e.idField?Object.assign(Object.assign({},r.data()),{[e.idField]:r.id}):r.data())),Cn.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(Cn.iC)}add(e){return this.ref.add(e)}doc(e){return new JN(this.ref.doc(e),this.afs)}}class JN{constructor(e,t){this.ref=e,this.afs=t}set(e,t){return this.ref.set(e,t)}update(e){return this.ref.update(e)}delete(){return this.ref.delete()}collection(e,t){const r=this.ref.collection(e),{ref:i,query:u}=tO(r,t);return new QN(i,u,this.afs)}snapshotChanges(){return function Y1(n,e){return ZN(n,e).pipe((0,f0.O)(void 0),p0(),(0,Be.U)(([t,r])=>r.exists?t?.exists?{payload:r,type:"modified"}:{payload:r,type:"added"}:{payload:r,type:"removed"}))}(this.ref,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return this.snapshotChanges().pipe((0,Be.U)(({payload:t})=>e.idField?Object.assign(Object.assign({},t.data()),{[e.idField]:t.id}):t.data()))}get(e){return(0,ae.D)(this.ref.get(e)).pipe(Cn.iC)}}class X1{constructor(e,t){this.query=e,this.afs=t}stateChanges(e){return e&&0!==e.length?UT(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(t=>t.filter(r=>e.indexOf(r.type)>-1)),(0,ma.h)(t=>t.length>0),Cn.iC):UT(this.query,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}auditTrail(e){return this.stateChanges(e).pipe((0,ph.R)((t,r)=>[...t,...r],[]))}snapshotChanges(e){const t=YN(e);return KN(this.query,t,this.afs.schedulers.outsideAngular).pipe(Cn.iC)}valueChanges(e={}){return Ex(this.query,this.afs.schedulers.outsideAngular).pipe((0,Be.U)(r=>r.payload.docs.map(i=>e.idField?Object.assign({[e.idField]:i.id},i.data()):i.data())),Cn.iC)}get(e){return(0,ae.D)(this.query.get(e)).pipe(Cn.iC)}}const XN=new w.OlP("angularfire2.enableFirestorePersistence"),eO=new w.OlP("angularfire2.firestore.persistenceSettings"),eF=new w.OlP("angularfire2.firestore.settings"),tF=new w.OlP("angularfire2.firestore.use-emulator");function tO(n,e=(t=>t)){return{query:e(n),ref:n}}let nO=(()=>{class n{constructor(t,r,i,u,c,p,m,b,O,U,J,ce,we,Ve,Ye,Ot,en){this.schedulers=m;const It=(0,gr.on)(t,p,r),Kt=O;U&&Va(It,p,J,we,Ve,Ye,ce,Ot),[this.firestore,this.persistenceEnabled$]=(0,gr.cc)(`${It.name}.firestore`,"AngularFirestore",It.name,()=>{const Mn=p.runOutsideAngular(()=>It.firestore());if(u&&Mn.settings(u),Kt&&Mn.useEmulator(...Kt),i&&!(0,Q.PM)(c)){const Fn=()=>{try{return(0,ae.D)(Mn.enablePersistence(b||void 0).then(()=>!0,()=>!1))}catch(ho){return typeof console<"u"&&console.warn(ho),(0,bs.of)(!1)}};return[Mn,p.runOutsideAngular(Fn)]}return[Mn,(0,bs.of)(!1)]},[u,Kt,i])}collection(t,r){let i;i="string"==typeof t?this.firestore.collection(t):t;const{ref:u,query:c}=tO(i,r),p=this.schedulers.ngZone.run(()=>u);return new QN(p,c,this)}collectionGroup(t,r){const i=r||(c=>c),u=this.firestore.collectionGroup(t);return new X1(i(u),this)}doc(t){let r;r="string"==typeof t?this.firestore.doc(t):t;const i=this.schedulers.ngZone.run(()=>r);return new JN(i,this)}createId(){return this.firestore.collection("_").doc().id}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(gr.Dh),w.LFG(gr.xv,8),w.LFG(XN,8),w.LFG(eF,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Cn.HU),w.LFG(eO,8),w.LFG(tF,8),w.LFG(Bu,8),w.LFG(pc,8),w.LFG(Wc,8),w.LFG(qc,8),w.LFG(Zc,8),w.LFG(rf,8),w.LFG(pu,8),w.LFG(Lo,8))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),nF=(()=>{class n{constructor(){Ua.Z.registerVersion("angularfire",Cn.q4.full,"fst-compat")}static enablePersistence(t){return{ngModule:n,providers:[{provide:XN,useValue:!0},{provide:eO,useValue:t}]}}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[nO]}),n})();var rF=j(2737),iF=j(2420);const rO="@firebase/database";let Cx="";function sO(n){Cx=n}class aF{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,t){null==t?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),(0,ee.Wl)(t))}get(e){const t=this.domStorage_.getItem(this.prefixedName_(e));return null==t?null:(0,ee.cI)(t)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}class uF{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,t){null==t?delete this.cache_[e]:this.cache_[e]=t}get(e){return(0,ee.r3)(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}const oO=function(n){try{if(typeof window<"u"&&typeof window[n]<"u"){const e=window[n];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new aF(e)}}catch{}return new uF},Lm=oO("localStorage"),Ix=oO("sessionStorage"),Cv=new Xi.Yd("@firebase/database"),aO=function(){let n=1;return function(){return n++}}(),uO=function(n){const e=(0,ee.dS)(n),t=new ee.gQ;t.update(e);const r=t.digest();return ee.US.encodeByteArray(r)},tC=function(...n){let e="";for(let t=0;t<n.length;t++){const r=n[t];Array.isArray(r)||r&&"object"==typeof r&&"number"==typeof r.length?e+=tC.apply(null,r):e+="object"==typeof r?(0,ee.Wl)(r):r,e+=" "}return e};let Um=null,cO=!0;const lO=function(n,e){(0,ee.hu)(!e||!0===n||!1===n,"Can't turn on custom loggers persistently."),!0===n?(Cv.logLevel=Xi.in.VERBOSE,Um=Cv.log.bind(Cv),e&&Ix.set("logging_enabled",!0)):"function"==typeof n?Um=n:(Um=null,Ix.remove("logging_enabled"))},jo=function(...n){if(!0===cO&&(cO=!1,null===Um&&!0===Ix.get("logging_enabled")&&lO(!0)),Um){const e=tC.apply(null,n);Um(e)}},nC=function(n){return function(...e){jo(n,...e)}},bx=function(...n){const e="FIREBASE INTERNAL ERROR: "+tC(...n);Cv.error(e)},kd=function(...n){const e=`FIREBASE FATAL ERROR: ${tC(...n)}`;throw Cv.error(e),new Error(e)},Aa=function(...n){const e="FIREBASE WARNING: "+tC(...n);Cv.warn(e)},VT=function(n){return"number"==typeof n&&(n!=n||n===Number.POSITIVE_INFINITY||n===Number.NEGATIVE_INFINITY)},Fp="[MIN_NAME]",Jh="[MAX_NAME]",Vm=function(n,e){if(n===e)return 0;if(n===Fp||e===Jh)return-1;if(e===Fp||n===Jh)return 1;{const t=fO(n),r=fO(e);return null!==t?null!==r?t-r==0?n.length-e.length:t-r:-1:null!==r?1:n<e?-1:1}},dF=function(n,e){return n===e?0:n<e?-1:1},rC=function(n,e){if(e&&n in e)return e[n];throw new Error("Missing required key ("+n+") in object: "+(0,ee.Wl)(e))},Dx=function(n){if("object"!=typeof n||null===n)return(0,ee.Wl)(n);const e=[];for(const r in n)e.push(r);e.sort();let t="{";for(let r=0;r<e.length;r++)0!==r&&(t+=","),t+=(0,ee.Wl)(e[r]),t+=":",t+=Dx(n[e[r]]);return t+="}",t},dO=function(n,e){const t=n.length;if(t<=e)return[n];const r=[];for(let i=0;i<t;i+=e)r.push(n.substring(i,i+e>t?t:i+e));return r};function Ho(n,e){for(const t in n)n.hasOwnProperty(t)&&e(t,n[t])}const hO=function(n){(0,ee.hu)(!VT(n),"Invalid JSON number");const r=1023;let i,u,c,p,m;0===n?(u=0,c=0,i=1/n==-1/0?1:0):(i=n<0,(n=Math.abs(n))>=Math.pow(2,1-r)?(p=Math.min(Math.floor(Math.log(n)/Math.LN2),r),u=p+r,c=Math.round(n*Math.pow(2,52-p)-Math.pow(2,52))):(u=0,c=Math.round(n/Math.pow(2,-1074))));const b=[];for(m=52;m;m-=1)b.push(c%2?1:0),c=Math.floor(c/2);for(m=11;m;m-=1)b.push(u%2?1:0),u=Math.floor(u/2);b.push(i?1:0),b.reverse();const O=b.join("");let U="";for(m=0;m<64;m+=8){let J=parseInt(O.substr(m,8),2).toString(16);1===J.length&&(J="0"+J),U+=J}return U.toLowerCase()},gF=new RegExp("^-?(0*)\\d{1,10}$"),fO=function(n){if(gF.test(n)){const e=Number(n);if(e>=-2147483648&&e<=2147483647)return e}return null},Iv=function(n){try{n()}catch(e){setTimeout(()=>{throw Aa("Exception was thrown by user callback.",e.stack||""),e},Math.floor(0))}},iC=function(n,e){const t=setTimeout(n,e);return"number"==typeof t&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(t):"object"==typeof t&&t.unref&&t.unref(),t};class vF{constructor(e,t){this.appName_=e,this.appCheckProvider=t,this.appCheck=t?.getImmediate({optional:!0}),this.appCheck||t?.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((t,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){var t;null===(t=this.appCheckProvider)||void 0===t||t.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Aa(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}class EF{constructor(e,t,r){this.appName_=e,this.firebaseOptions_=t,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(t=>t&&"auth/token-not-initialized"===t.code?(jo("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(t)):new Promise((t,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(t,r):t(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(t=>t.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(t=>t.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';e+="credential"in this.firebaseOptions_?'Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?'Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':'Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Aa(e)}}let sC=(()=>{class n{constructor(t){this.accessToken=t}getToken(t){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(t){t(this.accessToken)}removeTokenChangeListener(t){}notifyForInvalidToken(){}}return n.OWNER="owner",n})();const _O=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,wO="websocket",CO="long_polling";class Sx{constructor(e,t,r,i,u=!1,c="",p=!1,m=!1){this.secure=t,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=u,this.persistenceKey=c,this.includeNamespaceInQueryParams=p,this.isUsingEmulator=m,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Lm.get("host:"+e)||this._host}isCacheableHost(){return"s-"===this.internalHost.substr(0,2)}isCustomHost(){return"firebaseio.com"!==this._domain&&"firebaseio-demo.com"!==this._domain}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Lm.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){return`${this.secure?"https://":"http://"}${this.host}/${this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:""}`}}function IO(n,e,t){let r;if((0,ee.hu)("string"==typeof e,"typeof type must == string"),(0,ee.hu)("object"==typeof t,"typeof params must == object"),e===wO)r=(n.secure?"wss://":"ws://")+n.internalHost+"/.ws?";else{if(e!==CO)throw new Error("Unknown connection type: "+e);r=(n.secure?"https://":"http://")+n.internalHost+"/.lp?"}(function wF(n){return n.host!==n.internalHost||n.isCustomHost()||n.includeNamespaceInQueryParams})(n)&&(t.ns=n.namespace);const i=[];return Ho(t,(u,c)=>{i.push(u+"="+c)}),r+i.join("&")}class CF{constructor(){this.counters_={}}incrementCounter(e,t=1){(0,ee.r3)(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=t}get(){return(0,ee.p$)(this.counters_)}}const Ax={},Mx={};function xx(n){const e=n.toString();return Ax[e]||(Ax[e]=new CF),Ax[e]}class bF{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,t){this.closeAfterResponse=e,this.onClose=t,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,t){for(this.pendingResponses[e]=t;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Iv(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}class Lp{constructor(e,t,r,i,u,c,p){this.connId=e,this.repoInfo=t,this.applicationId=r,this.appCheckToken=i,this.authToken=u,this.transportSessionId=c,this.lastSessionId=p,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=nC(e),this.stats_=xx(t),this.urlFn=m=>(this.appCheckToken&&(m.ac=this.appCheckToken),IO(t,CO,m))}open(e,t){this.curSegmentNum=0,this.onDisconnect_=t,this.myPacketOrderer=new bF(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(3e4)),function(n){if((0,ee.Yr)()||"complete"===document.readyState)n();else{let e=!1;const t=function(){document.body?e||(e=!0,n()):setTimeout(t,Math.floor(10))};document.addEventListener?(document.addEventListener("DOMContentLoaded",t,!1),window.addEventListener("load",t,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{"complete"===document.readyState&&t()}),window.attachEvent("onload",t))}}(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Rx((...u)=>{const[c,p,m,b,O]=u;if(this.incrementIncomingBytes_(u),this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,"start"===c)this.id=p,this.password=m;else{if("close"!==c)throw new Error("Unrecognized command received: "+c);p?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(p,()=>{this.onClosed_()})):this.onClosed_()}},(...u)=>{const[c,p]=u;this.incrementIncomingBytes_(u),this.myPacketOrderer.handleResponse(c,p)},()=>{this.onClosed_()},this.urlFn);const r={start:"t"};r.ser=Math.floor(1e8*Math.random()),this.scriptTagHolder.uniqueCallbackIdentifier&&(r.cb=this.scriptTagHolder.uniqueCallbackIdentifier),r.v="5",this.transportSessionId&&(r.s=this.transportSessionId),this.lastSessionId&&(r.ls=this.lastSessionId),this.applicationId&&(r.p=this.applicationId),this.appCheckToken&&(r.ac=this.appCheckToken),typeof location<"u"&&location.hostname&&_O.test(location.hostname)&&(r.r="f");const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){Lp.forceAllow_=!0}static forceDisallow(){Lp.forceDisallow_=!0}static isAvailable(){return!((0,ee.Yr)()||!Lp.forceAllow_&&(Lp.forceDisallow_||!(typeof document<"u")||null==document.createElement||"object"==typeof window&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href)||"object"==typeof Windows&&"object"==typeof Windows.UI))}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const t=(0,ee.Wl)(e);this.bytesSent+=t.length,this.stats_.incrementCounter("bytes_sent",t.length);const r=(0,ee.h$)(t),i=dO(r,1840);for(let u=0;u<i.length;u++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[u]),this.curSegmentNum++}addDisconnectPingFrame(e,t){if((0,ee.Yr)())return;this.myDisconnFrame=document.createElement("iframe");const r={dframe:"t"};r.id=e,r.pw=t,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const t=(0,ee.Wl)(e).length;this.bytesReceived+=t,this.stats_.incrementCounter("bytes_received",t)}}class Rx{constructor(e,t,r,i){if(this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(1e8*Math.random()),this.sendNewPolls=!0,(0,ee.Yr)())this.commandCB=e,this.onMessageCB=t;else{this.uniqueCallbackIdentifier=aO(),window["pLPCommand"+this.uniqueCallbackIdentifier]=e,window["pRTLPCB"+this.uniqueCallbackIdentifier]=t,this.myIFrame=Rx.createIFrame_();let u="";this.myIFrame.src&&"javascript:"===this.myIFrame.src.substr(0,11)&&(u='<script>document.domain="'+document.domain+'";<\/script>');const c="<html><body>"+u+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(c),this.myIFrame.doc.close()}catch(p){jo("frame writing exception"),p.stack&&jo(p.stack),jo(p)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",!document.body)throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";document.body.appendChild(e);try{e.contentWindow.document||jo("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{null!==this.myIFrame&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,t){for(this.myID=e,this.myPW=t,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e.id=this.myID,e.pw=this.myPW,e.ser=this.currentSerial;let t=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+30+r.length<=1870;){const c=this.pendingSegs.shift();r=r+"&seg"+i+"="+c.seg+"&ts"+i+"="+c.ts+"&d"+i+"="+c.d,i++}return t+=r,this.addLongPollTag_(t,this.currentSerial),!0}return!1}enqueueSegment(e,t,r){this.pendingSegs.push({seg:e,ts:t,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,t){this.outstandingRequests.add(t);const r=()=>{this.outstandingRequests.delete(t),this.newRequest_()},i=setTimeout(r,Math.floor(25e3));this.addTag(e,()=>{clearTimeout(i),r()})}addTag(e,t){(0,ee.Yr)()?this.doNodeLongPoll(e,t):setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||"loaded"===i||"complete"===i)&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),t())},r.onerror=()=>{jo("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}let jT=null;typeof MozWebSocket<"u"?jT=MozWebSocket:typeof WebSocket<"u"&&(jT=WebSocket);let bv=(()=>{class n{constructor(t,r,i,u,c,p,m){this.connId=t,this.applicationId=i,this.appCheckToken=u,this.authToken=c,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=nC(this.connId),this.stats_=xx(r),this.connURL=n.connectionURL_(r,p,m,u,i),this.nodeAdmin=r.nodeAdmin}static connectionURL_(t,r,i,u,c){const p={v:"5"};return!(0,ee.Yr)()&&typeof location<"u"&&location.hostname&&_O.test(location.hostname)&&(p.r="f"),r&&(p.s=r),i&&(p.ls=i),u&&(p.ac=u),c&&(p.p=c),IO(t,wO,p)}open(t,r){this.onDisconnect=r,this.onMessage=t,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Lm.set("previous_websocket_failure",!0);try{let i;if((0,ee.Yr)()){i={headers:{"User-Agent":`Firebase/5/${Cx}/${process.platform}/${this.nodeAdmin?"AdminNode":"Node"}`,"X-Firebase-GMPID":this.applicationId||""}},this.authToken&&(i.headers.Authorization=`Bearer ${this.authToken}`),this.appCheckToken&&(i.headers["X-Firebase-AppCheck"]=this.appCheckToken);const c=process.env,p=0===this.connURL.indexOf("wss://")?c.HTTPS_PROXY||c.https_proxy:c.HTTP_PROXY||c.http_proxy;p&&(i.proxy={origin:p})}this.mySock=new jT(this.connURL,[],i)}catch(i){this.log_("Error instantiating WebSocket.");const u=i.message||i.data;return u&&this.log_(u),void this.onClosed_()}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=i=>{this.handleIncomingFrame(i)},this.mySock.onerror=i=>{this.log_("WebSocket error.  Closing connection.");const u=i.message||i.data;u&&this.log_(u),this.onClosed_()}}start(){}static forceDisallow(){n.forceDisallow_=!0}static isAvailable(){let t=!1;if(typeof navigator<"u"&&navigator.userAgent){const i=navigator.userAgent.match(/Android ([0-9]{0,}\.[0-9]{0,})/);i&&i.length>1&&parseFloat(i[1])<4.4&&(t=!0)}return!t&&null!==jT&&!n.forceDisallow_}static previouslyFailed(){return Lm.isInMemoryStorage||!0===Lm.get("previous_websocket_failure")}markConnectionHealthy(){Lm.remove("previous_websocket_failure")}appendFrame_(t){if(this.frames.push(t),this.frames.length===this.totalFrames){const r=this.frames.join("");this.frames=null;const i=(0,ee.cI)(r);this.onMessage(i)}}handleNewFrameCount_(t){this.totalFrames=t,this.frames=[]}extractFrameCount_(t){if((0,ee.hu)(null===this.frames,"We already have a frame buffer"),t.length<=6){const r=Number(t);if(!isNaN(r))return this.handleNewFrameCount_(r),null}return this.handleNewFrameCount_(1),t}handleIncomingFrame(t){if(null===this.mySock)return;const r=t.data;if(this.bytesReceived+=r.length,this.stats_.incrementCounter("bytes_received",r.length),this.resetKeepAlive(),null!==this.frames)this.appendFrame_(r);else{const i=this.extractFrameCount_(r);null!==i&&this.appendFrame_(i)}}send(t){this.resetKeepAlive();const r=(0,ee.Wl)(t);this.bytesSent+=r.length,this.stats_.incrementCounter("bytes_sent",r.length);const i=dO(r,16384);i.length>1&&this.sendString_(String(i.length));for(let u=0;u<i.length;u++)this.sendString_(i[u])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(45e3))}sendString_(t){try{this.mySock.send(t)}catch(r){this.log_("Exception thrown from WebSocket.send():",r.message||r.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}return n.responsesRequiredToBeHealthy=2,n.healthyTimeout=3e4,n})(),xO=(()=>{class n{constructor(t){this.initTransports_(t)}static get ALL_TRANSPORTS(){return[Lp,bv]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(t){const r=bv&&bv.isAvailable();let i=r&&!bv.previouslyFailed();if(t.webSocketOnly&&(r||Aa("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),i=!0),i)this.transports_=[bv];else{const u=this.transports_=[];for(const c of n.ALL_TRANSPORTS)c&&c.isAvailable()&&u.push(c);n.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}return n.globalTransportInitialized_=!1,n})();class LO{constructor(e,t,r,i,u,c,p,m,b,O){this.id=e,this.repoInfo_=t,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=u,this.onMessage_=c,this.onReady_=p,this.onDisconnect_=m,this.onKill_=b,this.lastSessionId=O,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=nC("c:"+this.id+":"),this.transportManager_=new xO(t),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(t,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=iC(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>102400?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>10240?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return t=>{e===this.conn_?this.onConnectionLost_(t):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return t=>{2!==this.state_&&(e===this.rx_?this.onPrimaryMessageReceived_(t):e===this.secondaryConn_?this.onSecondaryMessageReceived_(t):this.log_("message on old connection"))}}sendRequest(e){this.sendData_({t:"d",d:e})}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if("t"in e){const t=e.t;"a"===t?this.upgradeIfSecondaryHealthy_():"r"===t?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):"o"===t&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const t=rC("t",e),r=rC("d",e);if("c"===t)this.onSecondaryControl_(r);else{if("d"!==t)throw new Error("Unknown protocol layer: "+t);this.pendingDataMessages.push(r)}}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:"p",d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:"a",d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:"n",d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const t=rC("t",e),r=rC("d",e);"c"===t?this.onControl_(r):"d"===t&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const t=rC("t",e);if("d"in e){const r=e.d;if("h"===t){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if("n"===t){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else"s"===t?this.onConnectionShutdown_(r):"r"===t?this.onReset_(r):"e"===t?bx("Server Error: "+r):"o"===t?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):bx("Unknown control packet command: "+t)}}onHandshake_(e){const t=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,0===this.state_&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,t),"5"!==r&&Aa("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const t=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(t,r),iC(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(6e4))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,1===this.state_?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,t){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(t,this.sessionId),this.onReady_=null),0===this.primaryResponsesRequired_?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):iC(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(5e3))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&1===this.state_&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:"p",d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,e||0!==this.state_?1===this.state_&&this.log_("Realtime connection lost."):(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Lm.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(1!==this.state_)throw"Connection is not connected";this.tx_.send(e)}close(){2!==this.state_&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}class UO{put(e,t,r,i){}merge(e,t,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,t,r){}onDisconnectMerge(e,t,r){}onDisconnectCancel(e,t){}reportStats(e){}}class VO{constructor(e){this.allowedEvents_=e,this.listeners_={},(0,ee.hu)(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...t){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,t)}}on(e,t,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:t,context:r});const i=this.getInitialEvent(e);i&&t.apply(r,i)}off(e,t,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let u=0;u<i.length;u++)if(i[u].callback===t&&(!r||r===i[u].context))return void i.splice(u,1)}validateEventType_(e){(0,ee.hu)(this.allowedEvents_.find(t=>t===e),"Unknown event: "+e)}}class HT extends VO{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!(0,ee.uI)()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new HT}getInitialEvent(e){return(0,ee.hu)("online"===e,"Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}class Xr{constructor(e,t){if(void 0===t){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=t}toString(){let e="";for(let t=this.pieceNum_;t<this.pieces_.length;t++)""!==this.pieces_[t]&&(e+="/"+this.pieces_[t]);return e||"/"}}function Lr(){return new Xr("")}function rr(n){return n.pieceNum_>=n.pieces_.length?null:n.pieces_[n.pieceNum_]}function Up(n){return n.pieces_.length-n.pieceNum_}function Si(n){let e=n.pieceNum_;return e<n.pieces_.length&&e++,new Xr(n.pieces_,e)}function Ox(n){return n.pieceNum_<n.pieces_.length?n.pieces_[n.pieces_.length-1]:null}function oC(n,e=0){return n.pieces_.slice(n.pieceNum_+e)}function HO(n){if(n.pieceNum_>=n.pieces_.length)return null;const e=[];for(let t=n.pieceNum_;t<n.pieces_.length-1;t++)e.push(n.pieces_[t]);return new Xr(e,0)}function ls(n,e){const t=[];for(let r=n.pieceNum_;r<n.pieces_.length;r++)t.push(n.pieces_[r]);if(e instanceof Xr)for(let r=e.pieceNum_;r<e.pieces_.length;r++)t.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&t.push(r[i])}return new Xr(t,0)}function ir(n){return n.pieceNum_>=n.pieces_.length}function Qa(n,e){const t=rr(n),r=rr(e);if(null===t)return e;if(t===r)return Qa(Si(n),Si(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+n+")")}function WF(n,e){const t=oC(n,0),r=oC(e,0);for(let i=0;i<t.length&&i<r.length;i++){const u=Vm(t[i],r[i]);if(0!==u)return u}return t.length===r.length?0:t.length<r.length?-1:1}function Px(n,e){if(Up(n)!==Up(e))return!1;for(let t=n.pieceNum_,r=e.pieceNum_;t<=n.pieces_.length;t++,r++)if(n.pieces_[t]!==e.pieces_[r])return!1;return!0}function Fc(n,e){let t=n.pieceNum_,r=e.pieceNum_;if(Up(n)>Up(e))return!1;for(;t<n.pieces_.length;){if(n.pieces_[t]!==e.pieces_[r])return!1;++t,++r}return!0}class qF{constructor(e,t){this.errorPrefix_=t,this.parts_=oC(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=(0,ee.ug)(this.parts_[r]);$O(this)}}function $O(n){if(n.byteLength_>768)throw new Error(n.errorPrefix_+"has a key path longer than 768 bytes ("+n.byteLength_+").");if(n.parts_.length>32)throw new Error(n.errorPrefix_+"path specified exceeds the maximum depth that can be written (32) or object contains a cycle "+Bm(n))}function Bm(n){return 0===n.parts_.length?"":"in property '"+n.parts_.join(".")+"'"}class kx extends VO{constructor(){let e,t;super(["visible"]),typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(t="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(t="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(t="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(t="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,t&&document.addEventListener(t,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new kx}getInitialEvent(e){return(0,ee.hu)("visible"===e,"Unknown event type: "+e),[this.visible_]}}const aC=1e3;let GT,jm=(()=>{class n extends UO{constructor(t,r,i,u,c,p,m,b){if(super(),this.repoInfo_=t,this.applicationId_=r,this.onDataUpdate_=i,this.onConnectStatus_=u,this.onServerInfoUpdate_=c,this.authTokenProvider_=p,this.appCheckTokenProvider_=m,this.authOverride_=b,this.id=n.nextPersistentConnectionId_++,this.log_=nC("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=aC,this.maxReconnectDelay_=3e5,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,b&&!(0,ee.Yr)())throw new Error("Auth override specified in options, but not supported on non Node.js platforms");kx.getInstance().on("visible",this.onVisible_,this),-1===t.host.indexOf("fblocal")&&HT.getInstance().on("online",this.onOnline_,this)}sendRequest(t,r,i){const u=++this.requestNumber_,c={r:u,a:t,b:r};this.log_((0,ee.Wl)(c)),(0,ee.hu)(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(c),i&&(this.requestCBHash_[u]=i)}get(t){this.initConnection_();const r=new ee.BH,u={action:"g",request:{p:t._path.toString(),q:t._queryObject},onComplete:p=>{const m=p.d;"ok"===p.s?r.resolve(m):r.reject(m)}};return this.outstandingGets_.push(u),this.outstandingGetCount_++,this.connected_&&this.sendGet_(this.outstandingGets_.length-1),r.promise}listen(t,r,i,u){this.initConnection_();const c=t._queryIdentifier,p=t._path.toString();this.log_("Listen called for "+p+" "+c),this.listens.has(p)||this.listens.set(p,new Map),(0,ee.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"listen() called for non-default but complete query"),(0,ee.hu)(!this.listens.get(p).has(c),"listen() called twice for same path/queryId.");const m={onComplete:u,hashFn:r,query:t,tag:i};this.listens.get(p).set(c,m),this.connected_&&this.sendListen_(m)}sendGet_(t){const r=this.outstandingGets_[t];this.sendRequest("g",r.request,i=>{delete this.outstandingGets_[t],this.outstandingGetCount_--,0===this.outstandingGetCount_&&(this.outstandingGets_=[]),r.onComplete&&r.onComplete(i)})}sendListen_(t){const r=t.query,i=r._path.toString(),u=r._queryIdentifier;this.log_("Listen on "+i+" for "+u);const c={p:i};t.tag&&(c.q=r._queryObject,c.t=t.tag),c.h=t.hashFn(),this.sendRequest("q",c,m=>{const b=m.d,O=m.s;n.warnOnListenWarnings_(b,r),(this.listens.get(i)&&this.listens.get(i).get(u))===t&&(this.log_("listen response",m),"ok"!==O&&this.removeListen_(i,u),t.onComplete&&t.onComplete(O,b))})}static warnOnListenWarnings_(t,r){if(t&&"object"==typeof t&&(0,ee.r3)(t,"w")){const i=(0,ee.DV)(t,"w");if(Array.isArray(i)&&~i.indexOf("no_index")){const u='".indexOn": "'+r._queryParams.getIndex().toString()+'"',c=r._path.toString();Aa(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${u} at ${c} to your security rules for better performance.`)}}}refreshAuthToken(t){this.authToken_=t,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(t)}reduceReconnectDelayIfAdminCredential_(t){(t&&40===t.length||(0,ee.GJ)(t))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=3e4)}refreshAppCheckToken(t){this.appCheckToken_=t,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const t=this.authToken_,r=(0,ee.w9)(t)?"auth":"gauth",i={cred:t};null===this.authOverride_?i.noauth=!0:"object"==typeof this.authOverride_&&(i.authvar=this.authOverride_),this.sendRequest(r,i,u=>{const c=u.s,p=u.d||"error";this.authToken_===t&&("ok"===c?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(c,p))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},t=>{const r=t.s,i=t.d||"error";"ok"===r?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(r,i)})}unlisten(t,r){const i=t._path.toString(),u=t._queryIdentifier;this.log_("Unlisten called for "+i+" "+u),(0,ee.hu)(t._queryParams.isDefault()||!t._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(i,u)&&this.connected_&&this.sendUnlisten_(i,u,t._queryObject,r)}sendUnlisten_(t,r,i,u){this.log_("Unlisten on "+t+" for "+r);const c={p:t};u&&(c.q=i,c.t=u),this.sendRequest("n",c)}onDisconnectPut(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"o",data:r,onComplete:i})}onDisconnectMerge(t,r,i){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",t,r,i):this.onDisconnectRequestQueue_.push({pathString:t,action:"om",data:r,onComplete:i})}onDisconnectCancel(t,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",t,null,r):this.onDisconnectRequestQueue_.push({pathString:t,action:"oc",data:null,onComplete:r})}sendOnDisconnect_(t,r,i,u){const c={p:r,d:i};this.log_("onDisconnect "+t,c),this.sendRequest(t,c,p=>{u&&setTimeout(()=>{u(p.s,p.d)},Math.floor(0))})}put(t,r,i,u){this.putInternal("p",t,r,i,u)}merge(t,r,i,u){this.putInternal("m",t,r,i,u)}putInternal(t,r,i,u,c){this.initConnection_();const p={p:r,d:i};void 0!==c&&(p.h=c),this.outstandingPuts_.push({action:t,request:p,onComplete:u}),this.outstandingPutCount_++,this.connected_?this.sendPut_(this.outstandingPuts_.length-1):this.log_("Buffering put: "+r)}sendPut_(t){const r=this.outstandingPuts_[t].action,i=this.outstandingPuts_[t].request,u=this.outstandingPuts_[t].onComplete;this.outstandingPuts_[t].queued=this.connected_,this.sendRequest(r,i,c=>{this.log_(r+" response",c),delete this.outstandingPuts_[t],this.outstandingPutCount_--,0===this.outstandingPutCount_&&(this.outstandingPuts_=[]),u&&u(c.s,c.d)})}reportStats(t){if(this.connected_){const r={c:t};this.log_("reportStats",r),this.sendRequest("s",r,i=>{"ok"!==i.s&&this.log_("reportStats","Error sending stats: "+i.d)})}}onDataMessage_(t){if("r"in t){this.log_("from server: "+(0,ee.Wl)(t));const r=t.r,i=this.requestCBHash_[r];i&&(delete this.requestCBHash_[r],i(t.b))}else{if("error"in t)throw"A server-side error has occurred: "+t.error;"a"in t&&this.onDataPush_(t.a,t.b)}}onDataPush_(t,r){this.log_("handleServerMessage",t,r),"d"===t?this.onDataUpdate_(r.p,r.d,!1,r.t):"m"===t?this.onDataUpdate_(r.p,r.d,!0,r.t):"c"===t?this.onListenRevoked_(r.p,r.q):"ac"===t?this.onAuthRevoked_(r.s,r.d):"apc"===t?this.onAppCheckRevoked_(r.s,r.d):"sd"===t?this.onSecurityDebugPacket_(r):bx("Unrecognized action received from server: "+(0,ee.Wl)(t)+"\nAre you using the latest client?")}onReady_(t,r){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=(new Date).getTime(),this.handleTimestamp_(t),this.lastSessionId=r,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(t){(0,ee.hu)(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(t))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(t){t&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=aC,this.realtime_||this.scheduleConnect_(0)),this.visible_=t}onOnline_(t){t?(this.log_("Browser went online."),this.reconnectDelay_=aC,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&((new Date).getTime()-this.lastConnectionEstablishedTime_>3e4&&(this.reconnectDelay_=aC),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=(new Date).getTime());const t=(new Date).getTime()-this.lastConnectionAttemptTime_;let r=Math.max(0,this.reconnectDelay_-t);r=Math.random()*r,this.log_("Trying to reconnect in "+r+"ms"),this.scheduleConnect_(r),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,1.3*this.reconnectDelay_)}this.onConnectStatus_(!1)}establishConnection_(){var t=this;return(0,qe.Z)(function*(){if(t.shouldReconnect_()){t.log_("Making a connection attempt"),t.lastConnectionAttemptTime_=(new Date).getTime(),t.lastConnectionEstablishedTime_=null;const r=t.onDataMessage_.bind(t),i=t.onReady_.bind(t),u=t.onRealtimeDisconnect_.bind(t),c=t.id+":"+n.nextConnectionId_++,p=t.lastSessionId;let m=!1,b=null;const O=function(){b?b.close():(m=!0,u())};t.realtime_={close:O,sendRequest:function(ce){(0,ee.hu)(b,"sendRequest call when we're not connected not allowed."),b.sendRequest(ce)}};const J=t.forceTokenRefresh_;t.forceTokenRefresh_=!1;try{const[ce,we]=yield Promise.all([t.authTokenProvider_.getToken(J),t.appCheckTokenProvider_.getToken(J)]);m?jo("getToken() completed but was canceled"):(jo("getToken() completed. Creating connection."),t.authToken_=ce&&ce.accessToken,t.appCheckToken_=we&&we.token,b=new LO(c,t.repoInfo_,t.applicationId_,t.appCheckToken_,t.authToken_,r,i,u,Ve=>{Aa(Ve+" ("+t.repoInfo_.toString()+")"),t.interrupt("server_kill")},p))}catch(ce){t.log_("Failed to get token: "+ce),m||(t.repoInfo_.nodeAdmin&&Aa(ce),O())}}})()}interrupt(t){jo("Interrupting connection for reason: "+t),this.interruptReasons_[t]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(t){jo("Resuming connection for reason: "+t),delete this.interruptReasons_[t],(0,ee.xb)(this.interruptReasons_)&&(this.reconnectDelay_=aC,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(t){const r=t-(new Date).getTime();this.onServerInfoUpdate_({serverTimeOffset:r})}cancelSentTransactions_(){for(let t=0;t<this.outstandingPuts_.length;t++){const r=this.outstandingPuts_[t];r&&"h"in r.request&&r.queued&&(r.onComplete&&r.onComplete("disconnect"),delete this.outstandingPuts_[t],this.outstandingPutCount_--)}0===this.outstandingPutCount_&&(this.outstandingPuts_=[])}onListenRevoked_(t,r){let i;i=r?r.map(c=>Dx(c)).join("$"):"default";const u=this.removeListen_(t,i);u&&u.onComplete&&u.onComplete("permission_denied")}removeListen_(t,r){const i=new Xr(t).toString();let u;if(this.listens.has(i)){const c=this.listens.get(i);u=c.get(r),c.delete(r),0===c.size&&this.listens.delete(i)}else u=void 0;return u}onAuthRevoked_(t,r){jo("Auth token revoked: "+t+"/"+r),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),("invalid_token"===t||"permission_denied"===t)&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=3&&(this.reconnectDelay_=3e4,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(t,r){jo("App check token revoked: "+t+"/"+r),this.appCheckToken_=null,this.forceTokenRefresh_=!0,("invalid_token"===t||"permission_denied"===t)&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=3&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(t){this.securityDebugCallback_?this.securityDebugCallback_(t):"msg"in t&&console.log("FIREBASE: "+t.msg.replace("\n","\nFIREBASE: "))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const t of this.listens.values())for(const r of t.values())this.sendListen_(r);for(let t=0;t<this.outstandingPuts_.length;t++)this.outstandingPuts_[t]&&this.sendPut_(t);for(;this.onDisconnectRequestQueue_.length;){const t=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(t.action,t.pathString,t.data,t.onComplete)}for(let t=0;t<this.outstandingGets_.length;t++)this.outstandingGets_[t]&&this.sendGet_(t)}sendConnectStats_(){const t={};let r="js";(0,ee.Yr)()&&(r=this.repoInfo_.nodeAdmin?"admin_node":"node"),t["sdk."+r+"."+Cx.replace(/\./g,"-")]=1,(0,ee.uI)()?t["framework.cordova"]=1:(0,ee.b$)()&&(t["framework.reactnative"]=1),this.reportStats(t)}shouldReconnect_(){const t=HT.getInstance().currentlyOnline();return(0,ee.xb)(this.interruptReasons_)&&t}}return n.nextPersistentConnectionId_=0,n.nextConnectionId_=0,n})();class cr{constructor(e,t){this.name=e,this.node=t}static Wrap(e,t){return new cr(e,t)}}class $T{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,t){const r=new cr(Fp,e),i=new cr(Fp,t);return 0!==this.compare(r,i)}minPost(){return cr.MIN}}class WO extends $T{static get __EMPTY_NODE(){return GT}static set __EMPTY_NODE(e){GT=e}compare(e,t){return Vm(e.name,t.name)}isDefinedOn(e){throw(0,ee.g5)("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,t){return!1}minPost(){return cr.MIN}maxPost(){return new cr(Jh,GT)}makePost(e,t){return(0,ee.hu)("string"==typeof e,"KeyIndex indexValue must always be a string."),new cr(e,GT)}toString(){return".key"}}const Fd=new WO;class zT{constructor(e,t,r,i,u=null){this.isReverse_=i,this.resultGenerator_=u,this.nodeStack_=[];let c=1;for(;!e.isEmpty();)if(c=t?r(e.key,t):1,i&&(c*=-1),c<0)e=this.isReverse_?e.left:e.right;else{if(0===c){this.nodeStack_.push(e);break}this.nodeStack_.push(e),e=this.isReverse_?e.right:e.left}}getNext(){if(0===this.nodeStack_.length)return null;let t,e=this.nodeStack_.pop();if(t=this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return t}hasNext(){return this.nodeStack_.length>0}peek(){if(0===this.nodeStack_.length)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}let Lx,wl=(()=>{class n{constructor(t,r,i,u,c){this.key=t,this.value=r,this.color=i??n.RED,this.left=u??Du.EMPTY_NODE,this.right=c??Du.EMPTY_NODE}copy(t,r,i,u,c){return new n(t??this.key,r??this.value,i??this.color,u??this.left,c??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||!!t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,r,i){let u=this;const c=i(t,u.key);return u=c<0?u.copy(null,null,null,u.left.insert(t,r,i),null):0===c?u.copy(null,r,null,null,null):u.copy(null,null,null,null,u.right.insert(t,r,i)),u.fixUp_()}removeMin_(){if(this.left.isEmpty())return Du.EMPTY_NODE;let t=this;return!t.left.isRed_()&&!t.left.left.isRed_()&&(t=t.moveRedLeft_()),t=t.copy(null,null,null,t.left.removeMin_(),null),t.fixUp_()}remove(t,r){let i,u;if(i=this,r(t,i.key)<0)!i.left.isEmpty()&&!i.left.isRed_()&&!i.left.left.isRed_()&&(i=i.moveRedLeft_()),i=i.copy(null,null,null,i.left.remove(t,r),null);else{if(i.left.isRed_()&&(i=i.rotateRight_()),!i.right.isEmpty()&&!i.right.isRed_()&&!i.right.left.isRed_()&&(i=i.moveRedRight_()),0===r(t,i.key)){if(i.right.isEmpty())return Du.EMPTY_NODE;u=i.right.min_(),i=i.copy(u.key,u.value,null,null,i.right.removeMin_())}i=i.copy(null,null,null,null,i.right.remove(t,r))}return i.fixUp_()}isRed_(){return this.color}fixUp_(){let t=this;return t.right.isRed_()&&!t.left.isRed_()&&(t=t.rotateLeft_()),t.left.isRed_()&&t.left.left.isRed_()&&(t=t.rotateRight_()),t.left.isRed_()&&t.right.isRed_()&&(t=t.colorFlip_()),t}moveRedLeft_(){let t=this.colorFlip_();return t.right.left.isRed_()&&(t=t.copy(null,null,null,null,t.right.rotateRight_()),t=t.rotateLeft_(),t=t.colorFlip_()),t}moveRedRight_(){let t=this.colorFlip_();return t.left.left.isRed_()&&(t=t.rotateRight_(),t=t.colorFlip_()),t}rotateLeft_(){const t=this.copy(null,null,n.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight_(){const t=this.copy(null,null,n.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip_(){const t=this.left.copy(null,null,!this.left.color,null,null),r=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,r)}checkMaxDepth_(){const t=this.check_();return Math.pow(2,t)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const t=this.left.check_();if(t!==this.right.check_())throw new Error("Black depths differ");return t+(this.isRed_()?0:1)}}return n.RED=!0,n.BLACK=!1,n})();class Du{constructor(e,t=Du.EMPTY_NODE){this.comparator_=e,this.root_=t}insert(e,t){return new Du(this.comparator_,this.root_.insert(e,t,this.comparator_).copy(null,null,wl.BLACK,null,null))}remove(e){return new Du(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,wl.BLACK,null,null))}get(e){let t,r=this.root_;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t)return r.value;t<0?r=r.left:t>0&&(r=r.right)}return null}getPredecessorKey(e){let t,r=this.root_,i=null;for(;!r.isEmpty();){if(t=this.comparator_(e,r.key),0===t){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}t<0?r=r.left:t>0&&(i=r,r=r.right)}throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new zT(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,t){return new zT(this.root_,e,this.comparator_,!1,t)}getReverseIteratorFrom(e,t){return new zT(this.root_,e,this.comparator_,!0,t)}getReverseIterator(e){return new zT(this.root_,null,this.comparator_,!0,e)}}function tL(n,e){return Vm(n.name,e.name)}function Fx(n,e){return Vm(n,e)}Du.EMPTY_NODE=new class eL{copy(e,t,r,i,u){return this}insert(e,t,r){return new wl(e,t,null)}remove(e,t){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}};const qO=function(n){return"number"==typeof n?"number:"+hO(n):"string:"+n},ZO=function(n){if(n.isLeafNode()){const e=n.val();(0,ee.hu)("string"==typeof e||"number"==typeof e||"object"==typeof e&&(0,ee.r3)(e,".sv"),"Priority must be a string or number.")}else(0,ee.hu)(n===Lx||n.isEmpty(),"priority of unexpected type.");(0,ee.hu)(n===Lx||n.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};let KO,YO,QO,Dv=(()=>{class n{constructor(t,r=n.__childrenNodeConstructor.EMPTY_NODE){this.value_=t,this.priorityNode_=r,this.lazyHash_=null,(0,ee.hu)(null!=this.value_,"LeafNode shouldn't be created with null/undefined value."),ZO(this.priorityNode_)}static set __childrenNodeConstructor(t){KO=t}static get __childrenNodeConstructor(){return KO}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(t){return new n(this.value_,t)}getImmediateChild(t){return".priority"===t?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}getChild(t){return ir(t)?this:".priority"===rr(t)?this.priorityNode_:n.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(t,r){return null}updateImmediateChild(t,r){return".priority"===t?this.updatePriority(r):r.isEmpty()&&".priority"!==t?this:n.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(t,r).updatePriority(this.priorityNode_)}updateChild(t,r){const i=rr(t);return null===i?r:r.isEmpty()&&".priority"!==i?this:((0,ee.hu)(".priority"!==i||1===Up(t),".priority must be the last token in a path"),this.updateImmediateChild(i,n.__childrenNodeConstructor.EMPTY_NODE.updateChild(Si(t),r)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(t,r){return!1}val(t){return t&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(null===this.lazyHash_){let t="";this.priorityNode_.isEmpty()||(t+="priority:"+qO(this.priorityNode_.val())+":");const r=typeof this.value_;t+=r+":",t+="number"===r?hO(this.value_):this.value_,this.lazyHash_=uO(t)}return this.lazyHash_}getValue(){return this.value_}compareTo(t){return t===n.__childrenNodeConstructor.EMPTY_NODE?1:t instanceof n.__childrenNodeConstructor?-1:((0,ee.hu)(t.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(t))}compareToLeafNode_(t){const r=typeof t.value_,i=typeof this.value_,u=n.VALUE_TYPE_ORDER.indexOf(r),c=n.VALUE_TYPE_ORDER.indexOf(i);return(0,ee.hu)(u>=0,"Unknown leaf type: "+r),(0,ee.hu)(c>=0,"Unknown leaf type: "+i),u===c?"object"===i?0:this.value_<t.value_?-1:this.value_===t.value_?0:1:c-u}withIndex(){return this}isIndexed(){return!0}equals(t){return t===this||!!t.isLeafNode()&&(this.value_===t.value_&&this.priorityNode_.equals(t.priorityNode_))}}return n.VALUE_TYPE_ORDER=["object","boolean","number","string"],n})();const ki=new class sL extends $T{compare(e,t){const r=e.node.getPriority(),i=t.node.getPriority(),u=r.compareTo(i);return 0===u?Vm(e.name,t.name):u}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,t){return!e.getPriority().equals(t.getPriority())}minPost(){return cr.MIN}maxPost(){return new cr(Jh,new Dv("[PRIORITY-POST]",QO))}makePost(e,t){const r=YO(e);return new cr(t,new Dv("[PRIORITY-POST]",r))}toString(){return".priority"}},oL=Math.log(2);class aL{constructor(e){this.count=parseInt(Math.log(e+1)/oL,10),this.current_=this.count-1;const i=(u=>parseInt(Array(this.count+1).join("1"),2))();this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const WT=function(n,e,t,r){n.sort(e);const i=function(m,b){const O=b-m;let U,J;if(0===O)return null;if(1===O)return U=n[m],J=t?t(U):U,new wl(J,U.node,wl.BLACK,null,null);{const ce=parseInt(O/2,10)+m,we=i(m,ce),Ve=i(ce+1,b);return U=n[ce],J=t?t(U):U,new wl(J,U.node,wl.BLACK,we,Ve)}},p=function(m){let b=null,O=null,U=n.length;const J=function(we,Ve){const Ye=U-we,Ot=U;U-=we;const en=i(Ye+1,Ot),It=n[Ye],Kt=t?t(It):It;ce(new wl(Kt,It.node,Ve,null,en))},ce=function(we){b?(b.left=we,b=we):(O=we,b=we)};for(let we=0;we<m.count;++we){const Ve=m.nextBitIsOne(),Ye=Math.pow(2,m.count-(we+1));Ve?J(Ye,wl.BLACK):(J(Ye,wl.BLACK),J(Ye,wl.RED))}return O}(new aL(n.length));return new Du(r||e,p)};let Ux;const Tv={};class Xh{constructor(e,t){this.indexes_=e,this.indexSet_=t}static get Default(){return(0,ee.hu)(Tv&&ki,"ChildrenNode.ts has not been loaded"),Ux=Ux||new Xh({".priority":Tv},{".priority":ki}),Ux}get(e){const t=(0,ee.DV)(this.indexes_,e);if(!t)throw new Error("No index defined for "+e);return t instanceof Du?t:null}hasIndex(e){return(0,ee.r3)(this.indexSet_,e.toString())}addIndex(e,t){(0,ee.hu)(e!==Fd,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const u=t.getIterator(cr.Wrap);let p,c=u.getNext();for(;c;)i=i||e.isDefinedOn(c.node),r.push(c),c=u.getNext();p=i?WT(r,e.getCompare()):Tv;const m=e.toString(),b=Object.assign({},this.indexSet_);b[m]=e;const O=Object.assign({},this.indexes_);return O[m]=p,new Xh(O,b)}addToIndexes(e,t){const r=(0,ee.UI)(this.indexes_,(i,u)=>{const c=(0,ee.DV)(this.indexSet_,u);if((0,ee.hu)(c,"Missing index implementation for "+u),i===Tv){if(c.isDefinedOn(e.node)){const p=[],m=t.getIterator(cr.Wrap);let b=m.getNext();for(;b;)b.name!==e.name&&p.push(b),b=m.getNext();return p.push(e),WT(p,c.getCompare())}return Tv}{const p=t.get(e.name);let m=i;return p&&(m=m.remove(new cr(e.name,p))),m.insert(e,e.node)}});return new Xh(r,this.indexSet_)}removeFromIndexes(e,t){const r=(0,ee.UI)(this.indexes_,i=>{if(i===Tv)return i;{const u=t.get(e.name);return u?i.remove(new cr(e.name,u)):i}});return new Xh(r,this.indexSet_)}}let uC,jn=(()=>{class n{constructor(t,r,i){this.children_=t,this.priorityNode_=r,this.indexMap_=i,this.lazyHash_=null,this.priorityNode_&&ZO(this.priorityNode_),this.children_.isEmpty()&&(0,ee.hu)(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return uC||(uC=new n(new Du(Fx),null,Xh.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||uC}updatePriority(t){return this.children_.isEmpty()?this:new n(this.children_,t,this.indexMap_)}getImmediateChild(t){if(".priority"===t)return this.getPriority();{const r=this.children_.get(t);return null===r?uC:r}}getChild(t){const r=rr(t);return null===r?this:this.getImmediateChild(r).getChild(Si(t))}hasChild(t){return null!==this.children_.get(t)}updateImmediateChild(t,r){if((0,ee.hu)(r,"We should always be passing snapshot nodes"),".priority"===t)return this.updatePriority(r);{const i=new cr(t,r);let u,c;r.isEmpty()?(u=this.children_.remove(t),c=this.indexMap_.removeFromIndexes(i,this.children_)):(u=this.children_.insert(t,r),c=this.indexMap_.addToIndexes(i,this.children_));const p=u.isEmpty()?uC:this.priorityNode_;return new n(u,p,c)}}updateChild(t,r){const i=rr(t);if(null===i)return r;{(0,ee.hu)(".priority"!==rr(t)||1===Up(t),".priority must be the last token in a path");const u=this.getImmediateChild(i).updateChild(Si(t),r);return this.updateImmediateChild(i,u)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(t){if(this.isEmpty())return null;const r={};let i=0,u=0,c=!0;if(this.forEachChild(ki,(p,m)=>{r[p]=m.val(t),i++,c&&n.INTEGER_REGEXP_.test(p)?u=Math.max(u,Number(p)):c=!1}),!t&&c&&u<2*i){const p=[];for(const m in r)p[m]=r[m];return p}return t&&!this.getPriority().isEmpty()&&(r[".priority"]=this.getPriority().val()),r}hash(){if(null===this.lazyHash_){let t="";this.getPriority().isEmpty()||(t+="priority:"+qO(this.getPriority().val())+":"),this.forEachChild(ki,(r,i)=>{const u=i.hash();""!==u&&(t+=":"+r+":"+u)}),this.lazyHash_=""===t?"":uO(t)}return this.lazyHash_}getPredecessorChildName(t,r,i){const u=this.resolveIndex_(i);if(u){const c=u.getPredecessorKey(new cr(t,r));return c?c.name:null}return this.children_.getPredecessorKey(t)}getFirstChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.minKey();return i&&i.name}return this.children_.minKey()}getFirstChild(t){const r=this.getFirstChildName(t);return r?new cr(r,this.children_.get(r)):null}getLastChildName(t){const r=this.resolveIndex_(t);if(r){const i=r.maxKey();return i&&i.name}return this.children_.maxKey()}getLastChild(t){const r=this.getLastChildName(t);return r?new cr(r,this.children_.get(r)):null}forEachChild(t,r){const i=this.resolveIndex_(t);return i?i.inorderTraversal(u=>r(u.name,u.node)):this.children_.inorderTraversal(r)}getIterator(t){return this.getIteratorFrom(t.minPost(),t)}getIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getIteratorFrom(t,u=>u);{const u=this.children_.getIteratorFrom(t.name,cr.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)<0;)u.getNext(),c=u.peek();return u}}getReverseIterator(t){return this.getReverseIteratorFrom(t.maxPost(),t)}getReverseIteratorFrom(t,r){const i=this.resolveIndex_(r);if(i)return i.getReverseIteratorFrom(t,u=>u);{const u=this.children_.getReverseIteratorFrom(t.name,cr.Wrap);let c=u.peek();for(;null!=c&&r.compare(c,t)>0;)u.getNext(),c=u.peek();return u}}compareTo(t){return this.isEmpty()?t.isEmpty()?0:-1:t.isLeafNode()||t.isEmpty()?1:t===cC?-1:0}withIndex(t){if(t===Fd||this.indexMap_.hasIndex(t))return this;{const r=this.indexMap_.addIndex(t,this.children_);return new n(this.children_,this.priorityNode_,r)}}isIndexed(t){return t===Fd||this.indexMap_.hasIndex(t)}equals(t){if(t===this)return!0;if(t.isLeafNode())return!1;{const r=t;if(this.getPriority().equals(r.getPriority())){if(this.children_.count()===r.children_.count()){const i=this.getIterator(ki),u=r.getIterator(ki);let c=i.getNext(),p=u.getNext();for(;c&&p;){if(c.name!==p.name||!c.node.equals(p.node))return!1;c=i.getNext(),p=u.getNext()}return null===c&&null===p}return!1}return!1}}resolveIndex_(t){return t===Fd?null:this.indexMap_.get(t.toString())}}return n.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/,n})();const cC=new class uL extends jn{constructor(){super(new Du(Fx),jn.EMPTY_NODE,Xh.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return jn.EMPTY_NODE}isEmpty(){return!1}};Object.defineProperties(cr,{MIN:{value:new cr(Fp,jn.EMPTY_NODE)},MAX:{value:new cr(Jh,cC)}}),WO.__EMPTY_NODE=jn.EMPTY_NODE,Dv.__childrenNodeConstructor=jn,function nL(n){Lx=n}(cC),function iL(n){QO=n}(cC);const cL=!0;function vs(n,e=null){if(null===n)return jn.EMPTY_NODE;if("object"==typeof n&&".priority"in n&&(e=n[".priority"]),(0,ee.hu)(null===e||"string"==typeof e||"number"==typeof e||"object"==typeof e&&".sv"in e,"Invalid priority type found: "+typeof e),"object"==typeof n&&".value"in n&&null!==n[".value"]&&(n=n[".value"]),"object"!=typeof n||".sv"in n)return new Dv(n,vs(e));if(n instanceof Array||!cL){let t=jn.EMPTY_NODE;return Ho(n,(r,i)=>{if((0,ee.r3)(n,r)&&"."!==r.substring(0,1)){const u=vs(i);(u.isLeafNode()||!u.isEmpty())&&(t=t.updateImmediateChild(r,u))}}),t.updatePriority(vs(e))}{const t=[];let r=!1;if(Ho(n,(c,p)=>{if("."!==c.substring(0,1)){const m=vs(p);m.isEmpty()||(r=r||!m.getPriority().isEmpty(),t.push(new cr(c,m)))}}),0===t.length)return jn.EMPTY_NODE;const u=WT(t,tL,c=>c.name,Fx);if(r){const c=WT(t,ki.getCompare());return new jn(u,vs(e),new Xh({".priority":c},{".priority":ki}))}return new jn(u,vs(e),Xh.Default)}}!function rL(n){YO=n}(vs);class Vx extends $T{constructor(e){super(),this.indexPath_=e,(0,ee.hu)(!ir(e)&&".priority"!==rr(e),"Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,t){const r=this.extractChild(e.node),i=this.extractChild(t.node),u=r.compareTo(i);return 0===u?Vm(e.name,t.name):u}makePost(e,t){const r=vs(e),i=jn.EMPTY_NODE.updateChild(this.indexPath_,r);return new cr(t,i)}maxPost(){const e=jn.EMPTY_NODE.updateChild(this.indexPath_,cC);return new cr(Jh,e)}toString(){return oC(this.indexPath_,0).join("/")}}const Bx=new class lL extends $T{compare(e,t){const r=e.node.compareTo(t.node);return 0===r?Vm(e.name,t.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,t){return!e.equals(t)}minPost(){return cr.MIN}maxPost(){return cr.MAX}makePost(e,t){const r=vs(e);return new cr(t,r)}toString(){return".value"}};function JO(n){return{type:"value",snapshotNode:n}}function Sv(n,e){return{type:"child_added",snapshotNode:e,childName:n}}function lC(n,e){return{type:"child_removed",snapshotNode:e,childName:n}}function dC(n,e,t){return{type:"child_changed",snapshotNode:e,childName:n,oldSnap:t}}class jx{constructor(e){this.index_=e}updateChild(e,t,r,i,u,c){(0,ee.hu)(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const p=e.getImmediateChild(t);return p.getChild(i).equals(r.getChild(i))&&p.isEmpty()===r.isEmpty()||(null!=c&&(r.isEmpty()?e.hasChild(t)?c.trackChildChange(lC(t,p)):(0,ee.hu)(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):p.isEmpty()?c.trackChildChange(Sv(t,r)):c.trackChildChange(dC(t,r,p))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(t,r).withIndex(this.index_)}updateFullNode(e,t,r){return null!=r&&(e.isLeafNode()||e.forEachChild(ki,(i,u)=>{t.hasChild(i)||r.trackChildChange(lC(i,u))}),t.isLeafNode()||t.forEachChild(ki,(i,u)=>{if(e.hasChild(i)){const c=e.getImmediateChild(i);c.equals(u)||r.trackChildChange(dC(i,u,c))}else r.trackChildChange(Sv(i,u))})),t.withIndex(this.index_)}updatePriority(e,t){return e.isEmpty()?jn.EMPTY_NODE:e.updatePriority(t)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}class hC{constructor(e){this.indexedFilter_=new jx(e.getIndex()),this.index_=e.getIndex(),this.startPost_=hC.getStartPost_(e),this.endPost_=hC.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const t=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return t&&r}updateChild(e,t,r,i,u,c){return this.matches(new cr(t,r))||(r=jn.EMPTY_NODE),this.indexedFilter_.updateChild(e,t,r,i,u,c)}updateFullNode(e,t,r){t.isLeafNode()&&(t=jn.EMPTY_NODE);let i=t.withIndex(this.index_);i=i.updatePriority(jn.EMPTY_NODE);const u=this;return t.forEachChild(ki,(c,p)=>{u.matches(new cr(c,p))||(i=i.updateImmediateChild(c,jn.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const t=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),t)}return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const t=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),t)}return e.getIndex().maxPost()}}class hL{constructor(e){this.withinDirectionalStart=t=>this.reverse_?this.withinEndPost(t):this.withinStartPost(t),this.withinDirectionalEnd=t=>this.reverse_?this.withinStartPost(t):this.withinEndPost(t),this.withinStartPost=t=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),t);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=t=>{const r=this.index_.compare(t,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new hC(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,t,r,i,u,c){return this.rangedFilter_.matches(new cr(t,r))||(r=jn.EMPTY_NODE),e.getImmediateChild(t).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,t,r,i,u,c):this.fullLimitUpdateChild_(e,t,r,u,c)}updateFullNode(e,t,r){let i;if(t.isLeafNode()||t.isEmpty())i=jn.EMPTY_NODE.withIndex(this.index_);else if(2*this.limit_<t.numChildren()&&t.isIndexed(this.index_)){let u;i=jn.EMPTY_NODE.withIndex(this.index_),u=this.reverse_?t.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):t.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let c=0;for(;u.hasNext()&&c<this.limit_;){const p=u.getNext();if(this.withinDirectionalStart(p)){if(!this.withinDirectionalEnd(p))break;i=i.updateImmediateChild(p.name,p.node),c++}}}else{let u;i=t.withIndex(this.index_),i=i.updatePriority(jn.EMPTY_NODE),u=this.reverse_?i.getReverseIterator(this.index_):i.getIterator(this.index_);let c=0;for(;u.hasNext();){const p=u.getNext();c<this.limit_&&this.withinDirectionalStart(p)&&this.withinDirectionalEnd(p)?c++:i=i.updateImmediateChild(p.name,jn.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,t){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,t,r,i,u){let c;if(this.reverse_){const U=this.index_.getCompare();c=(J,ce)=>U(ce,J)}else c=this.index_.getCompare();const p=e;(0,ee.hu)(p.numChildren()===this.limit_,"");const m=new cr(t,r),b=this.reverse_?p.getFirstChild(this.index_):p.getLastChild(this.index_),O=this.rangedFilter_.matches(m);if(p.hasChild(t)){const U=p.getImmediateChild(t);let J=i.getChildAfterChild(this.index_,b,this.reverse_);for(;null!=J&&(J.name===t||p.hasChild(J.name));)J=i.getChildAfterChild(this.index_,J,this.reverse_);const ce=null==J?1:c(J,m);if(O&&!r.isEmpty()&&ce>=0)return u?.trackChildChange(dC(t,r,U)),p.updateImmediateChild(t,r);{u?.trackChildChange(lC(t,U));const Ve=p.updateImmediateChild(t,jn.EMPTY_NODE);return null!=J&&this.rangedFilter_.matches(J)?(u?.trackChildChange(Sv(J.name,J.node)),Ve.updateImmediateChild(J.name,J.node)):Ve}}return r.isEmpty()?e:O&&c(b,m)>=0?(null!=u&&(u.trackChildChange(lC(b.name,b.node)),u.trackChildChange(Sv(t,r))),p.updateImmediateChild(t,r).updateImmediateChild(b.name,jn.EMPTY_NODE)):e}}class qT{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ki}hasStart(){return this.startSet_}isViewFromLeft(){return""===this.viewFrom_?this.startSet_:"l"===this.viewFrom_}getIndexStartValue(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return(0,ee.hu)(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Fp}hasEnd(){return this.endSet_}getIndexEndValue(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return(0,ee.hu)(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Jh}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&""!==this.viewFrom_}getLimit(){return(0,ee.hu)(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ki}copy(){const e=new qT;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function Hx(n,e,t){const r=n.copy();return r.startSet_=!0,void 0===e&&(e=null),r.indexStartValue_=e,null!=t?(r.startNameSet_=!0,r.indexStartName_=t):(r.startNameSet_=!1,r.indexStartName_=""),r}function $x(n,e,t){const r=n.copy();return r.endSet_=!0,void 0===e&&(e=null),r.indexEndValue_=e,void 0!==t?(r.endNameSet_=!0,r.indexEndName_=t):(r.endNameSet_=!1,r.indexEndName_=""),r}function ZT(n,e){const t=n.copy();return t.index_=e,t}function XO(n){const e={};if(n.isDefault())return e;let t;if(n.index_===ki?t="$priority":n.index_===Bx?t="$value":n.index_===Fd?t="$key":((0,ee.hu)(n.index_ instanceof Vx,"Unrecognized index type!"),t=n.index_.toString()),e.orderBy=(0,ee.Wl)(t),n.startSet_){const r=n.startAfterSet_?"startAfter":"startAt";e[r]=(0,ee.Wl)(n.indexStartValue_),n.startNameSet_&&(e[r]+=","+(0,ee.Wl)(n.indexStartName_))}if(n.endSet_){const r=n.endBeforeSet_?"endBefore":"endAt";e[r]=(0,ee.Wl)(n.indexEndValue_),n.endNameSet_&&(e[r]+=","+(0,ee.Wl)(n.indexEndName_))}return n.limitSet_&&(n.isViewFromLeft()?e.limitToFirst=n.limit_:e.limitToLast=n.limit_),e}function eP(n){const e={};if(n.startSet_&&(e.sp=n.indexStartValue_,n.startNameSet_&&(e.sn=n.indexStartName_),e.sin=!n.startAfterSet_),n.endSet_&&(e.ep=n.indexEndValue_,n.endNameSet_&&(e.en=n.indexEndName_),e.ein=!n.endBeforeSet_),n.limitSet_){e.l=n.limit_;let t=n.viewFrom_;""===t&&(t=n.isViewFromLeft()?"l":"r"),e.vf=t}return n.index_!==ki&&(e.i=n.index_.toString()),e}class KT extends UO{constructor(e,t,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=t,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=nC("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,t){return void 0!==t?"tag$"+t:((0,ee.hu)(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,t,r,i){const u=e._path.toString();this.log_("Listen called for "+u+" "+e._queryIdentifier);const c=KT.getListenId_(e,r),p={};this.listens_[c]=p;const m=XO(e._queryParams);this.restRequest_(u+".json",m,(b,O)=>{let U=O;if(404===b&&(U=null,b=null),null===b&&this.onDataUpdate_(u,U,!1,r),(0,ee.DV)(this.listens_,c)===p){let J;J=b?401===b?"permission_denied":"rest_error:"+b:"ok",i(J,null)}})}unlisten(e,t){const r=KT.getListenId_(e,t);delete this.listens_[r]}get(e){const t=XO(e._queryParams),r=e._path.toString(),i=new ee.BH;return this.restRequest_(r+".json",t,(u,c)=>{let p=c;404===u&&(p=null,u=null),null===u?(this.onDataUpdate_(r,p,!1,null),i.resolve(p)):i.reject(new Error(p))}),i.promise}refreshAuthToken(e){}restRequest_(e,t={},r){return t.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,u])=>{i&&i.accessToken&&(t.auth=i.accessToken),u&&u.token&&(t.ac=u.token);const c=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+(0,ee.xO)(t);this.log_("Sending REST request for "+c);const p=new XMLHttpRequest;p.onreadystatechange=()=>{if(r&&4===p.readyState){this.log_("REST Response for "+c+" received. status:",p.status,"response:",p.responseText);let m=null;if(p.status>=200&&p.status<300){try{m=(0,ee.cI)(p.responseText)}catch{Aa("Failed to parse JSON response for "+c+": "+p.responseText)}r(null,m)}else 401!==p.status&&404!==p.status&&Aa("Got unsuccessful REST response for "+c+" Status: "+p.status),r(p.status);r=null}},p.open("GET",c,!0),p.send()})}}class _L{constructor(){this.rootNode_=jn.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,t){this.rootNode_=this.rootNode_.updateChild(e,t)}}function YT(){return{value:null,children:new Map}}function Av(n,e,t){if(ir(e))n.value=t,n.children.clear();else if(null!==n.value)n.value=n.value.updateChild(e,t);else{const r=rr(e);n.children.has(r)||n.children.set(r,YT()),Av(n.children.get(r),e=Si(e),t)}}function Gx(n,e){if(ir(e))return n.value=null,n.children.clear(),!0;if(null!==n.value){if(n.value.isLeafNode())return!1;{const t=n.value;return n.value=null,t.forEachChild(ki,(r,i)=>{Av(n,new Xr(r),i)}),Gx(n,e)}}if(n.children.size>0){const t=rr(e);return e=Si(e),n.children.has(t)&&Gx(n.children.get(t),e)&&n.children.delete(t),0===n.children.size}return!0}function zx(n,e,t){null!==n.value?t(e,n.value):function vL(n,e){n.children.forEach((t,r)=>{e(r,t)})}(n,(r,i)=>{zx(i,new Xr(e.toString()+"/"+r),t)})}class EL{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),t=Object.assign({},e);return this.last_&&Ho(this.last_,(r,i)=>{t[r]=t[r]-i}),this.last_=e,t}}class IL{constructor(e,t){this.server_=t,this.statsToReport_={},this.statsListener_=new EL(e);const r=1e4+2e4*Math.random();iC(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),t={};let r=!1;Ho(e,(i,u)=>{u>0&&(0,ee.r3)(this.statsToReport_,i)&&(t[i]=u,r=!0)}),r&&this.server_.reportStats(t),iC(this.reportStats_.bind(this),Math.floor(2*Math.random()*3e5))}}var co=(()=>((co=co||{})[co.OVERWRITE=0]="OVERWRITE",co[co.MERGE=1]="MERGE",co[co.ACK_USER_WRITE=2]="ACK_USER_WRITE",co[co.LISTEN_COMPLETE=3]="LISTEN_COMPLETE",co))();function Zx(n){return{fromUser:!1,fromServer:!0,queryId:n,tagged:!0}}class QT{constructor(e,t,r){this.path=e,this.affectedTree=t,this.revert=r,this.type=co.ACK_USER_WRITE,this.source={fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}operationForChild(e){if(ir(this.path)){if(null!=this.affectedTree.value)return(0,ee.hu)(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const t=this.affectedTree.subtree(new Xr(e));return new QT(Lr(),t,this.revert)}}return(0,ee.hu)(rr(this.path)===e,"operationForChild called for unrelated child."),new QT(Si(this.path),this.affectedTree,this.revert)}}class fC{constructor(e,t){this.source=e,this.path=t,this.type=co.LISTEN_COMPLETE}operationForChild(e){return ir(this.path)?new fC(this.source,Lr()):new fC(this.source,Si(this.path))}}class Hm{constructor(e,t,r){this.source=e,this.path=t,this.snap=r,this.type=co.OVERWRITE}operationForChild(e){return ir(this.path)?new Hm(this.source,Lr(),this.snap.getImmediateChild(e)):new Hm(this.source,Si(this.path),this.snap)}}class Mv{constructor(e,t,r){this.source=e,this.path=t,this.children=r,this.type=co.MERGE}operationForChild(e){if(ir(this.path)){const t=this.children.subtree(new Xr(e));return t.isEmpty()?null:t.value?new Hm(this.source,Lr(),t.value):new Mv(this.source,Lr(),t)}return(0,ee.hu)(rr(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Mv(this.source,Si(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}class Vp{constructor(e,t,r){this.node_=e,this.fullyInitialized_=t,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(ir(e))return this.isFullyInitialized()&&!this.filtered_;const t=rr(e);return this.isCompleteForChild(t)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}class bL{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function pC(n,e,t,r,i,u){const c=r.filter(p=>p.type===t);c.sort((p,m)=>function SL(n,e,t){if(null==e.childName||null==t.childName)throw(0,ee.g5)("Should only compare child_ events.");const r=new cr(e.childName,e.snapshotNode),i=new cr(t.childName,t.snapshotNode);return n.index_.compare(r,i)}(n,p,m)),c.forEach(p=>{const m=function TL(n,e,t){return"value"===e.type||"child_removed"===e.type||(e.prevName=t.getPredecessorChildName(e.childName,e.snapshotNode,n.index_)),e}(n,p,u);i.forEach(b=>{b.respondsTo(p.type)&&e.push(b.createEvent(m,n.query_))})})}function JT(n,e){return{eventCache:n,serverCache:e}}function gC(n,e,t,r){return JT(new Vp(e,t,r),n.serverCache)}function nP(n,e,t,r){return JT(n.eventCache,new Vp(e,t,r))}function XT(n){return n.eventCache.isFullyInitialized()?n.eventCache.getNode():null}function $m(n){return n.serverCache.isFullyInitialized()?n.serverCache.getNode():null}let Kx;class Fi{constructor(e,t=(()=>(Kx||(Kx=new Du(dF)),Kx))()){this.value=e,this.children=t}static fromObject(e){let t=new Fi(null);return Ho(e,(r,i)=>{t=t.set(new Xr(r),i)}),t}isEmpty(){return null===this.value&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,t){if(null!=this.value&&t(this.value))return{path:Lr(),value:this.value};if(ir(e))return null;{const r=rr(e),i=this.children.get(r);if(null!==i){const u=i.findRootMostMatchingPathAndValue(Si(e),t);return null!=u?{path:ls(new Xr(r),u.path),value:u.value}:null}return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(ir(e))return this;{const t=rr(e),r=this.children.get(t);return null!==r?r.subtree(Si(e)):new Fi(null)}}set(e,t){if(ir(e))return new Fi(t,this.children);{const r=rr(e),u=(this.children.get(r)||new Fi(null)).set(Si(e),t),c=this.children.insert(r,u);return new Fi(this.value,c)}}remove(e){if(ir(e))return this.children.isEmpty()?new Fi(null):new Fi(null,this.children);{const t=rr(e),r=this.children.get(t);if(r){const i=r.remove(Si(e));let u;return u=i.isEmpty()?this.children.remove(t):this.children.insert(t,i),null===this.value&&u.isEmpty()?new Fi(null):new Fi(this.value,u)}return this}}get(e){if(ir(e))return this.value;{const t=rr(e),r=this.children.get(t);return r?r.get(Si(e)):null}}setTree(e,t){if(ir(e))return t;{const r=rr(e),u=(this.children.get(r)||new Fi(null)).setTree(Si(e),t);let c;return c=u.isEmpty()?this.children.remove(r):this.children.insert(r,u),new Fi(this.value,c)}}fold(e){return this.fold_(Lr(),e)}fold_(e,t){const r={};return this.children.inorderTraversal((i,u)=>{r[i]=u.fold_(ls(e,i),t)}),t(e,this.value,r)}findOnPath(e,t){return this.findOnPath_(e,Lr(),t)}findOnPath_(e,t,r){const i=!!this.value&&r(t,this.value);if(i)return i;if(ir(e))return null;{const u=rr(e),c=this.children.get(u);return c?c.findOnPath_(Si(e),ls(t,u),r):null}}foreachOnPath(e,t){return this.foreachOnPath_(e,Lr(),t)}foreachOnPath_(e,t,r){if(ir(e))return this;{this.value&&r(t,this.value);const i=rr(e),u=this.children.get(i);return u?u.foreachOnPath_(Si(e),ls(t,i),r):new Fi(null)}}foreach(e){this.foreach_(Lr(),e)}foreach_(e,t){this.children.inorderTraversal((r,i)=>{i.foreach_(ls(e,r),t)}),this.value&&t(e,this.value)}foreachChild(e){this.children.inorderTraversal((t,r)=>{r.value&&e(t,r.value)})}}class Cl{constructor(e){this.writeTree_=e}static empty(){return new Cl(new Fi(null))}}function mC(n,e,t){if(ir(e))return new Cl(new Fi(t));{const r=n.writeTree_.findRootMostValueAndPath(e);if(null!=r){const i=r.path;let u=r.value;const c=Qa(i,e);return u=u.updateChild(c,t),new Cl(n.writeTree_.set(i,u))}{const i=new Fi(t),u=n.writeTree_.setTree(e,i);return new Cl(u)}}}function Yx(n,e,t){let r=n;return Ho(t,(i,u)=>{r=mC(r,ls(e,i),u)}),r}function rP(n,e){if(ir(e))return Cl.empty();{const t=n.writeTree_.setTree(e,new Fi(null));return new Cl(t)}}function Qx(n,e){return null!=Gm(n,e)}function Gm(n,e){const t=n.writeTree_.findRootMostValueAndPath(e);return null!=t?n.writeTree_.get(t.path).getChild(Qa(t.path,e)):null}function iP(n){const e=[],t=n.writeTree_.value;return null!=t?t.isLeafNode()||t.forEachChild(ki,(r,i)=>{e.push(new cr(r,i))}):n.writeTree_.children.inorderTraversal((r,i)=>{null!=i.value&&e.push(new cr(r,i.value))}),e}function Bp(n,e){if(ir(e))return n;{const t=Gm(n,e);return new Cl(null!=t?new Fi(t):n.writeTree_.subtree(e))}}function Jx(n){return n.writeTree_.isEmpty()}function xv(n,e){return sP(Lr(),n.writeTree_,e)}function sP(n,e,t){if(null!=e.value)return t.updateChild(n,e.value);{let r=null;return e.children.inorderTraversal((i,u)=>{".priority"===i?((0,ee.hu)(null!==u.value,"Priority writes must always be leaf nodes"),r=u.value):t=sP(ls(n,i),u,t)}),!t.getChild(n).isEmpty()&&null!==r&&(t=t.updateChild(ls(n,".priority"),r)),t}}function eS(n,e){return lP(e,n)}function OL(n,e){if(n.snap)return Fc(n.path,e);for(const t in n.children)if(n.children.hasOwnProperty(t)&&Fc(ls(n.path,t),e))return!0;return!1}function kL(n){return n.visible}function oP(n,e,t){let r=Cl.empty();for(let i=0;i<n.length;++i){const u=n[i];if(e(u)){const c=u.path;let p;if(u.snap)Fc(t,c)?(p=Qa(t,c),r=mC(r,p,u.snap)):Fc(c,t)&&(p=Qa(c,t),r=mC(r,Lr(),u.snap.getChild(p)));else{if(!u.children)throw(0,ee.g5)("WriteRecord should have .snap or .children");if(Fc(t,c))p=Qa(t,c),r=Yx(r,p,u.children);else if(Fc(c,t))if(p=Qa(c,t),ir(p))r=Yx(r,Lr(),u.children);else{const m=(0,ee.DV)(u.children,rr(p));if(m){const b=m.getChild(Si(p));r=mC(r,Lr(),b)}}}}}return r}function aP(n,e,t,r,i){if(r||i){const u=Bp(n.visibleWrites,e);return!i&&Jx(u)?t:i||null!=t||Qx(u,Lr())?xv(oP(n.allWrites,function(b){return(b.visible||i)&&(!r||!~r.indexOf(b.writeId))&&(Fc(b.path,e)||Fc(e,b.path))},e),t||jn.EMPTY_NODE):null}{const u=Gm(n.visibleWrites,e);if(null!=u)return u;{const c=Bp(n.visibleWrites,e);return Jx(c)?t:null!=t||Qx(c,Lr())?xv(c,t||jn.EMPTY_NODE):null}}}function tS(n,e,t,r){return aP(n.writeTree,n.treePath,e,t,r)}function Xx(n,e){return function FL(n,e,t){let r=jn.EMPTY_NODE;const i=Gm(n.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ki,(u,c)=>{r=r.updateImmediateChild(u,c)}),r;if(t){const u=Bp(n.visibleWrites,e);return t.forEachChild(ki,(c,p)=>{const m=xv(Bp(u,new Xr(c)),p);r=r.updateImmediateChild(c,m)}),iP(u).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}return iP(Bp(n.visibleWrites,e)).forEach(c=>{r=r.updateImmediateChild(c.name,c.node)}),r}(n.writeTree,n.treePath,e)}function uP(n,e,t,r){return function LL(n,e,t,r,i){(0,ee.hu)(r||i,"Either existingEventSnap or existingServerSnap must exist");const u=ls(e,t);if(Qx(n.visibleWrites,u))return null;{const c=Bp(n.visibleWrites,u);return Jx(c)?i.getChild(t):xv(c,i.getChild(t))}}(n.writeTree,n.treePath,e,t,r)}function nS(n,e){return function VL(n,e){return Gm(n.visibleWrites,e)}(n.writeTree,ls(n.treePath,e))}function eR(n,e,t){return function UL(n,e,t,r){const i=ls(e,t),u=Gm(n.visibleWrites,i);return null!=u?u:r.isCompleteForChild(t)?xv(Bp(n.visibleWrites,i),r.getNode().getImmediateChild(t)):null}(n.writeTree,n.treePath,e,t)}function cP(n,e){return lP(ls(n.treePath,e),n.writeTree)}function lP(n,e){return{treePath:n,writeTree:e}}class $L{constructor(){this.changeMap=new Map}trackChildChange(e){const t=e.type,r=e.childName;(0,ee.hu)("child_added"===t||"child_changed"===t||"child_removed"===t,"Only child changes supported for tracking"),(0,ee.hu)(".priority"!==r,"Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const u=i.type;if("child_added"===t&&"child_removed"===u)this.changeMap.set(r,dC(r,e.snapshotNode,i.snapshotNode));else if("child_removed"===t&&"child_added"===u)this.changeMap.delete(r);else if("child_removed"===t&&"child_changed"===u)this.changeMap.set(r,lC(r,i.oldSnap));else if("child_changed"===t&&"child_added"===u)this.changeMap.set(r,Sv(r,e.snapshotNode));else{if("child_changed"!==t||"child_changed"!==u)throw(0,ee.g5)("Illegal combination of changes: "+e+" occurred after "+i);this.changeMap.set(r,dC(r,e.snapshotNode,i.oldSnap))}}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}const dP=new class GL{getCompleteChild(e){return null}getChildAfterChild(e,t,r){return null}};class tR{constructor(e,t,r=null){this.writes_=e,this.viewCache_=t,this.optCompleteServerCache_=r}getCompleteChild(e){const t=this.viewCache_.eventCache;if(t.isCompleteForChild(e))return t.getNode().getImmediateChild(e);{const r=null!=this.optCompleteServerCache_?new Vp(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return eR(this.writes_,e,r)}}getChildAfterChild(e,t,r){const i=null!=this.optCompleteServerCache_?this.optCompleteServerCache_:$m(this.viewCache_),u=function HL(n,e,t,r,i,u){return function BL(n,e,t,r,i,u,c){let p;const m=Bp(n.visibleWrites,e),b=Gm(m,Lr());if(null!=b)p=b;else{if(null==t)return[];p=xv(m,t)}if(p=p.withIndex(c),p.isEmpty()||p.isLeafNode())return[];{const O=[],U=c.getCompare(),J=u?p.getReverseIteratorFrom(r,c):p.getIteratorFrom(r,c);let ce=J.getNext();for(;ce&&O.length<i;)0!==U(ce,r)&&O.push(ce),ce=J.getNext();return O}}(n.writeTree,n.treePath,e,t,r,i,u)}(this.writes_,i,t,1,r,e);return 0===u.length?null:u[0]}}function hP(n,e,t,r,i,u){const c=e.eventCache;if(null!=nS(r,t))return e;{let p,m;if(ir(t))if((0,ee.hu)(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const b=$m(e),U=Xx(r,b instanceof jn?b:jn.EMPTY_NODE);p=n.filter.updateFullNode(e.eventCache.getNode(),U,u)}else{const b=tS(r,$m(e));p=n.filter.updateFullNode(e.eventCache.getNode(),b,u)}else{const b=rr(t);if(".priority"===b){(0,ee.hu)(1===Up(t),"Can't have a priority with additional path components");const O=c.getNode();m=e.serverCache.getNode();const U=uP(r,t,O,m);p=null!=U?n.filter.updatePriority(O,U):c.getNode()}else{const O=Si(t);let U;if(c.isCompleteForChild(b)){m=e.serverCache.getNode();const J=uP(r,t,c.getNode(),m);U=null!=J?c.getNode().getImmediateChild(b).updateChild(O,J):c.getNode().getImmediateChild(b)}else U=eR(r,b,e.serverCache);p=null!=U?n.filter.updateChild(c.getNode(),b,U,O,i,u):c.getNode()}}return gC(e,p,c.isFullyInitialized()||ir(t),n.filter.filtersNodes())}}function rS(n,e,t,r,i,u,c,p){const m=e.serverCache;let b;const O=c?n.filter:n.filter.getIndexedFilter();if(ir(t))b=O.updateFullNode(m.getNode(),r,null);else if(O.filtersNodes()&&!m.isFiltered()){const ce=m.getNode().updateChild(t,r);b=O.updateFullNode(m.getNode(),ce,null)}else{const ce=rr(t);if(!m.isCompleteForPath(t)&&Up(t)>1)return e;const we=Si(t),Ye=m.getNode().getImmediateChild(ce).updateChild(we,r);b=".priority"===ce?O.updatePriority(m.getNode(),Ye):O.updateChild(m.getNode(),ce,Ye,we,dP,null)}const U=nP(e,b,m.isFullyInitialized()||ir(t),O.filtersNodes());return hP(n,U,t,i,new tR(i,U,u),p)}function nR(n,e,t,r,i,u,c){const p=e.eventCache;let m,b;const O=new tR(i,e,u);if(ir(t))b=n.filter.updateFullNode(e.eventCache.getNode(),r,c),m=gC(e,b,!0,n.filter.filtersNodes());else{const U=rr(t);if(".priority"===U)b=n.filter.updatePriority(e.eventCache.getNode(),r),m=gC(e,b,p.isFullyInitialized(),p.isFiltered());else{const J=Si(t),ce=p.getNode().getImmediateChild(U);let we;if(ir(J))we=r;else{const Ve=O.getCompleteChild(U);we=null!=Ve?".priority"===Ox(J)&&Ve.getChild(HO(J)).isEmpty()?Ve:Ve.updateChild(J,r):jn.EMPTY_NODE}m=ce.equals(we)?e:gC(e,n.filter.updateChild(p.getNode(),U,we,J,O,c),p.isFullyInitialized(),n.filter.filtersNodes())}}return m}function fP(n,e){return n.eventCache.isCompleteForChild(e)}function pP(n,e,t){return t.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function rR(n,e,t,r,i,u,c,p){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let b,m=e;b=ir(t)?r:new Fi(null).setTree(t,r);const O=e.serverCache.getNode();return b.children.inorderTraversal((U,J)=>{if(O.hasChild(U)){const we=pP(0,e.serverCache.getNode().getImmediateChild(U),J);m=rS(n,m,new Xr(U),we,i,u,c,p)}}),b.children.inorderTraversal((U,J)=>{const ce=!e.serverCache.isCompleteForChild(U)&&null===J.value;if(!O.hasChild(U)&&!ce){const Ve=pP(0,e.serverCache.getNode().getImmediateChild(U),J);m=rS(n,m,new Xr(U),Ve,i,u,c,p)}}),m}class XL{constructor(e,t){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new jx(r.getIndex()),u=function fL(n){return n.loadsAllData()?new jx(n.getIndex()):n.hasLimit()?new hL(n):new hC(n)}(r);this.processor_=function zL(n){return{filter:n}}(u);const c=t.serverCache,p=t.eventCache,m=i.updateFullNode(jn.EMPTY_NODE,c.getNode(),null),b=u.updateFullNode(jn.EMPTY_NODE,p.getNode(),null),O=new Vp(m,c.isFullyInitialized(),i.filtersNodes()),U=new Vp(b,p.isFullyInitialized(),u.filtersNodes());this.viewCache_=JT(U,O),this.eventGenerator_=new bL(this.query_)}get query(){return this.query_}}function n2(n,e){const t=$m(n.viewCache_);return t&&(n.query._queryParams.loadsAllData()||!ir(e)&&!t.getImmediateChild(rr(e)).isEmpty())?t.getChild(e):null}function gP(n){return 0===n.eventRegistrations_.length}function mP(n,e,t){const r=[];if(t){(0,ee.hu)(null==e,"A cancel should cancel all event registrations.");const i=n.query._path;n.eventRegistrations_.forEach(u=>{const c=u.createCancelEvent(t,i);c&&r.push(c)})}if(e){let i=[];for(let u=0;u<n.eventRegistrations_.length;++u){const c=n.eventRegistrations_[u];if(c.matches(e)){if(e.hasAnyCallback()){i=i.concat(n.eventRegistrations_.slice(u+1));break}}else i.push(c)}n.eventRegistrations_=i}else n.eventRegistrations_=[];return r}function yP(n,e,t,r){e.type===co.MERGE&&null!==e.source.queryId&&((0,ee.hu)($m(n.viewCache_),"We should always have a full cache before handling merges"),(0,ee.hu)(XT(n.viewCache_),"Missing event cache, even though we have a server cache"));const i=n.viewCache_,u=function qL(n,e,t,r,i){const u=new $L;let c,p;if(t.type===co.OVERWRITE){const b=t;b.source.fromUser?c=nR(n,e,b.path,b.snap,r,i,u):((0,ee.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered()&&!ir(b.path),c=rS(n,e,b.path,b.snap,r,i,p,u))}else if(t.type===co.MERGE){const b=t;b.source.fromUser?c=function KL(n,e,t,r,i,u,c){let p=e;return r.foreach((m,b)=>{const O=ls(t,m);fP(e,rr(O))&&(p=nR(n,p,O,b,i,u,c))}),r.foreach((m,b)=>{const O=ls(t,m);fP(e,rr(O))||(p=nR(n,p,O,b,i,u,c))}),p}(n,e,b.path,b.children,r,i,u):((0,ee.hu)(b.source.fromServer,"Unknown source."),p=b.source.tagged||e.serverCache.isFiltered(),c=rR(n,e,b.path,b.children,r,i,p,u))}else if(t.type===co.ACK_USER_WRITE){const b=t;c=b.revert?function JL(n,e,t,r,i,u){let c;if(null!=nS(r,t))return e;{const p=new tR(r,e,i),m=e.eventCache.getNode();let b;if(ir(t)||".priority"===rr(t)){let O;if(e.serverCache.isFullyInitialized())O=tS(r,$m(e));else{const U=e.serverCache.getNode();(0,ee.hu)(U instanceof jn,"serverChildren would be complete if leaf node"),O=Xx(r,U)}b=n.filter.updateFullNode(m,O,u)}else{const O=rr(t);let U=eR(r,O,e.serverCache);null==U&&e.serverCache.isCompleteForChild(O)&&(U=m.getImmediateChild(O)),b=null!=U?n.filter.updateChild(m,O,U,Si(t),p,u):e.eventCache.getNode().hasChild(O)?n.filter.updateChild(m,O,jn.EMPTY_NODE,Si(t),p,u):m,b.isEmpty()&&e.serverCache.isFullyInitialized()&&(c=tS(r,$m(e)),c.isLeafNode()&&(b=n.filter.updateFullNode(b,c,u)))}return c=e.serverCache.isFullyInitialized()||null!=nS(r,Lr()),gC(e,b,c,n.filter.filtersNodes())}}(n,e,b.path,r,i,u):function YL(n,e,t,r,i,u,c){if(null!=nS(i,t))return e;const p=e.serverCache.isFiltered(),m=e.serverCache;if(null!=r.value){if(ir(t)&&m.isFullyInitialized()||m.isCompleteForPath(t))return rS(n,e,t,m.getNode().getChild(t),i,u,p,c);if(ir(t)){let b=new Fi(null);return m.getNode().forEachChild(Fd,(O,U)=>{b=b.set(new Xr(O),U)}),rR(n,e,t,b,i,u,p,c)}return e}{let b=new Fi(null);return r.foreach((O,U)=>{const J=ls(t,O);m.isCompleteForPath(J)&&(b=b.set(O,m.getNode().getChild(J)))}),rR(n,e,t,b,i,u,p,c)}}(n,e,b.path,b.affectedTree,r,i,u)}else{if(t.type!==co.LISTEN_COMPLETE)throw(0,ee.g5)("Unknown operation type: "+t.type);c=function QL(n,e,t,r,i){const u=e.serverCache;return hP(n,nP(e,u.getNode(),u.isFullyInitialized()||ir(t),u.isFiltered()),t,r,dP,i)}(n,e,t.path,r,u)}const m=u.getChanges();return function ZL(n,e,t){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),u=XT(n);(t.length>0||!n.eventCache.isFullyInitialized()||i&&!r.getNode().equals(u)||!r.getNode().getPriority().equals(u.getPriority()))&&t.push(JO(XT(e)))}}(e,c,m),{viewCache:c,changes:m}}(n.processor_,i,e,t,r);return function WL(n,e){(0,ee.hu)(e.eventCache.getNode().isIndexed(n.filter.getIndex()),"Event snap not indexed"),(0,ee.hu)(e.serverCache.getNode().isIndexed(n.filter.getIndex()),"Server snap not indexed")}(n.processor_,u.viewCache),(0,ee.hu)(u.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),n.viewCache_=u.viewCache,_P(n,u.changes,u.viewCache.eventCache.getNode(),null)}function _P(n,e,t,r){return function DL(n,e,t,r){const i=[],u=[];return e.forEach(c=>{"child_changed"===c.type&&n.index_.indexedValueChanged(c.oldSnap,c.snapshotNode)&&u.push(function dL(n,e){return{type:"child_moved",snapshotNode:e,childName:n}}(c.childName,c.snapshotNode))}),pC(n,i,"child_removed",e,r,t),pC(n,i,"child_added",e,r,t),pC(n,i,"child_moved",u,r,t),pC(n,i,"child_changed",e,r,t),pC(n,i,"value",e,r,t),i}(n.eventGenerator_,e,t,r?[r]:n.eventRegistrations_)}let iS,oS;class vP{constructor(){this.views=new Map}}function iR(n,e,t,r){const i=e.source.queryId;if(null!==i){const u=n.views.get(i);return(0,ee.hu)(null!=u,"SyncTree gave us an op for an invalid query."),yP(u,e,t,r)}{let u=[];for(const c of n.views.values())u=u.concat(yP(c,e,t,r));return u}}function EP(n,e,t,r,i){const c=n.views.get(e._queryIdentifier);if(!c){let p=tS(t,i?r:null),m=!1;p?m=!0:r instanceof jn?(p=Xx(t,r),m=!1):(p=jn.EMPTY_NODE,m=!1);const b=JT(new Vp(p,m,!1),new Vp(r,i,!1));return new XL(e,b)}return c}function wP(n){const e=[];for(const t of n.views.values())t.query._queryParams.loadsAllData()||e.push(t);return e}function jp(n,e){let t=null;for(const r of n.views.values())t=t||n2(r,e);return t}function CP(n,e){return e._queryParams.loadsAllData()?sS(n):n.views.get(e._queryIdentifier)}function IP(n,e){return null!=CP(n,e)}function Hp(n){return null!=sS(n)}function sS(n){for(const e of n.views.values())if(e.query._queryParams.loadsAllData())return e;return null}let h2=1;class bP{constructor(e){this.listenProvider_=e,this.syncPointTree_=new Fi(null),this.pendingWriteTree_=function jL(){return{visibleWrites:Cl.empty(),allWrites:[],lastWriteId:-1}}(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function sR(n,e,t,r,i){return function ML(n,e,t,r,i){(0,ee.hu)(r>n.lastWriteId,"Stacking an older write on top of newer ones"),void 0===i&&(i=!0),n.allWrites.push({path:e,snap:t,writeId:r,visible:i}),i&&(n.visibleWrites=mC(n.visibleWrites,e,t)),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r,i),i?Rv(n,new Hm({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,t)):[]}function $p(n,e,t=!1){const r=function RL(n,e){for(let t=0;t<n.allWrites.length;t++){const r=n.allWrites[t];if(r.writeId===e)return r}return null}(n.pendingWriteTree_,e);if(function NL(n,e){const t=n.allWrites.findIndex(p=>p.writeId===e);(0,ee.hu)(t>=0,"removeWrite called with nonexistent writeId.");const r=n.allWrites[t];n.allWrites.splice(t,1);let i=r.visible,u=!1,c=n.allWrites.length-1;for(;i&&c>=0;){const p=n.allWrites[c];p.visible&&(c>=t&&OL(p,r.path)?i=!1:Fc(r.path,p.path)&&(u=!0)),c--}return!!i&&(u?(function PL(n){n.visibleWrites=oP(n.allWrites,kL,Lr()),n.lastWriteId=n.allWrites.length>0?n.allWrites[n.allWrites.length-1].writeId:-1}(n),!0):(r.snap?n.visibleWrites=rP(n.visibleWrites,r.path):Ho(r.children,m=>{n.visibleWrites=rP(n.visibleWrites,ls(r.path,m))}),!0))}(n.pendingWriteTree_,e)){let u=new Fi(null);return null!=r.snap?u=u.set(Lr(),!0):Ho(r.children,c=>{u=u.set(new Xr(c),!0)}),Rv(n,new QT(r.path,u,t))}return[]}function yC(n,e,t){return Rv(n,new Hm({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,t))}function aS(n,e,t,r,i=!1){const u=e._path,c=n.syncPointTree_.get(u);let p=[];if(c&&("default"===e._queryIdentifier||IP(c,e))){const m=function c2(n,e,t,r){const i=e._queryIdentifier,u=[];let c=[];const p=Hp(n);if("default"===i)for(const[m,b]of n.views.entries())c=c.concat(mP(b,t,r)),gP(b)&&(n.views.delete(m),b.query._queryParams.loadsAllData()||u.push(b.query));else{const m=n.views.get(i);m&&(c=c.concat(mP(m,t,r)),gP(m)&&(n.views.delete(i),m.query._queryParams.loadsAllData()||u.push(m.query)))}return p&&!Hp(n)&&u.push(new(function o2(){return(0,ee.hu)(iS,"Reference.ts has not been loaded"),iS}())(e._repo,e._path)),{removed:u,events:c}}(c,e,t,r);(function a2(n){return 0===n.views.size})(c)&&(n.syncPointTree_=n.syncPointTree_.remove(u));const b=m.removed;if(p=m.events,!i){const O=-1!==b.findIndex(J=>J._queryParams.loadsAllData()),U=n.syncPointTree_.findOnPath(u,(J,ce)=>Hp(ce));if(O&&!U){const J=n.syncPointTree_.subtree(u);if(!J.isEmpty()){const ce=function v2(n){return n.fold((e,t,r)=>{if(t&&Hp(t))return[sS(t)];{let i=[];return t&&(i=wP(t)),Ho(r,(u,c)=>{i=i.concat(c)}),i}})}(J);for(let we=0;we<ce.length;++we){const Ve=ce[we],Ye=Ve.query,Ot=AP(n,Ve);n.listenProvider_.startListening(vC(Ye),_C(n,Ye),Ot.hashFn,Ot.onComplete)}}}!U&&b.length>0&&!r&&(O?n.listenProvider_.stopListening(vC(e),null):b.forEach(J=>{const ce=n.queryToTagMap.get(cS(J));n.listenProvider_.stopListening(vC(J),ce)}))}!function E2(n,e){for(let t=0;t<e.length;++t){const r=e[t];if(!r._queryParams.loadsAllData()){const i=cS(r),u=n.queryToTagMap.get(i);n.queryToTagMap.delete(i),n.tagToQueryMap.delete(u)}}}(n,b)}return p}function DP(n,e,t,r){const i=aR(n,r);if(null!=i){const u=uR(i),c=u.path,p=u.queryId,m=Qa(c,e);return cR(n,c,new Hm(Zx(p),m,t))}return[]}function oR(n,e,t,r=!1){const i=e._path;let u=null,c=!1;n.syncPointTree_.foreachOnPath(i,(J,ce)=>{const we=Qa(J,i);u=u||jp(ce,we),c=c||Hp(ce)});let m,p=n.syncPointTree_.get(i);p?(c=c||Hp(p),u=u||jp(p,Lr())):(p=new vP,n.syncPointTree_=n.syncPointTree_.set(i,p)),null!=u?m=!0:(m=!1,u=jn.EMPTY_NODE,n.syncPointTree_.subtree(i).foreachChild((ce,we)=>{const Ve=jp(we,Lr());Ve&&(u=u.updateImmediateChild(ce,Ve))}));const b=IP(p,e);if(!b&&!e._queryParams.loadsAllData()){const J=cS(e);(0,ee.hu)(!n.queryToTagMap.has(J),"View does not exist, but we have a tag");const ce=function w2(){return h2++}();n.queryToTagMap.set(J,ce),n.tagToQueryMap.set(ce,J)}let U=function u2(n,e,t,r,i,u){const c=EP(n,e,r,i,u);return n.views.has(e._queryIdentifier)||n.views.set(e._queryIdentifier,c),function r2(n,e){n.eventRegistrations_.push(e)}(c,t),function i2(n,e){const t=n.viewCache_.eventCache,r=[];return t.getNode().isLeafNode()||t.getNode().forEachChild(ki,(u,c)=>{r.push(Sv(u,c))}),t.isFullyInitialized()&&r.push(JO(t.getNode())),_P(n,r,t.getNode(),e)}(c,t)}(p,e,t,eS(n.pendingWriteTree_,i),u,m);if(!b&&!c&&!r){const J=CP(p,e);U=U.concat(function C2(n,e,t){const r=e._path,i=_C(n,e),u=AP(n,t),c=n.listenProvider_.startListening(vC(e),i,u.hashFn,u.onComplete),p=n.syncPointTree_.subtree(r);if(i)(0,ee.hu)(!Hp(p.value),"If we're adding a query, it shouldn't be shadowed");else{const m=p.fold((b,O,U)=>{if(!ir(b)&&O&&Hp(O))return[sS(O).query];{let J=[];return O&&(J=J.concat(wP(O).map(ce=>ce.query))),Ho(U,(ce,we)=>{J=J.concat(we)}),J}});for(let b=0;b<m.length;++b){const O=m[b];n.listenProvider_.stopListening(vC(O),_C(n,O))}}return c}(n,e,J))}return U}function uS(n,e,t){const i=n.pendingWriteTree_,u=n.syncPointTree_.findOnPath(e,(c,p)=>{const b=jp(p,Qa(c,e));if(b)return b});return aP(i,e,u,t,!0)}function Rv(n,e){return TP(e,n.syncPointTree_,null,eS(n.pendingWriteTree_,Lr()))}function TP(n,e,t,r){if(ir(n.path))return SP(n,e,t,r);{const i=e.get(Lr());null==t&&null!=i&&(t=jp(i,Lr()));let u=[];const c=rr(n.path),p=n.operationForChild(c),m=e.children.get(c);if(m&&p){const b=t?t.getImmediateChild(c):null,O=cP(r,c);u=u.concat(TP(p,m,b,O))}return i&&(u=u.concat(iR(i,n,r,t))),u}}function SP(n,e,t,r){const i=e.get(Lr());null==t&&null!=i&&(t=jp(i,Lr()));let u=[];return e.children.inorderTraversal((c,p)=>{const m=t?t.getImmediateChild(c):null,b=cP(r,c),O=n.operationForChild(c);O&&(u=u.concat(SP(O,p,m,b)))}),i&&(u=u.concat(iR(i,n,r,t))),u}function AP(n,e){const t=e.query,r=_C(n,t);return{hashFn:()=>(function e2(n){return n.viewCache_.serverCache.getNode()}(e)||jn.EMPTY_NODE).hash(),onComplete:i=>{if("ok"===i)return r?function m2(n,e,t){const r=aR(n,t);if(r){const i=uR(r),u=i.path,c=i.queryId,p=Qa(u,e);return cR(n,u,new fC(Zx(c),p))}return[]}(n,t._path,r):function g2(n,e){return Rv(n,new fC({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e))}(n,t._path);{const u=function pF(n,e){let t="Unknown Error";"too_big"===n?t="The data requested exceeds the maximum size that can be accessed with a single request.":"permission_denied"===n?t="Client doesn't have permission to access the desired data.":"unavailable"===n&&(t="The service is unavailable");const r=new Error(n+" at "+e._path.toString()+": "+t);return r.code=n.toUpperCase(),r}(i,t);return aS(n,t,null,u)}}}}function _C(n,e){const t=cS(e);return n.queryToTagMap.get(t)}function cS(n){return n._path.toString()+"$"+n._queryIdentifier}function aR(n,e){return n.tagToQueryMap.get(e)}function uR(n){const e=n.indexOf("$");return(0,ee.hu)(-1!==e&&e<n.length-1,"Bad queryKey."),{queryId:n.substr(e+1),path:new Xr(n.substr(0,e))}}function cR(n,e,t){const r=n.syncPointTree_.get(e);return(0,ee.hu)(r,"Missing sync point for query tag that we're tracking"),iR(r,t,eS(n.pendingWriteTree_,e),null)}function vC(n){return n._queryParams.loadsAllData()&&!n._queryParams.isDefault()?new(function d2(){return(0,ee.hu)(oS,"Reference.ts has not been loaded"),oS}())(n._repo,n._path):n}class lR{constructor(e){this.node_=e}getImmediateChild(e){const t=this.node_.getImmediateChild(e);return new lR(t)}node(){return this.node_}}class dR{constructor(e,t){this.syncTree_=e,this.path_=t}getImmediateChild(e){const t=ls(this.path_,e);return new dR(this.syncTree_,t)}node(){return uS(this.syncTree_,this.path_)}}const I2=function(n){return(n=n||{}).timestamp=n.timestamp||(new Date).getTime(),n},MP=function(n,e,t){return n&&"object"==typeof n?((0,ee.hu)(".sv"in n,"Unexpected leaf node or priority contents"),"string"==typeof n[".sv"]?b2(n[".sv"],e,t):"object"==typeof n[".sv"]?D2(n[".sv"],e):void(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2))):n},b2=function(n,e,t){if("timestamp"===n)return t.timestamp;(0,ee.hu)(!1,"Unexpected server value: "+n)},D2=function(n,e,t){n.hasOwnProperty("increment")||(0,ee.hu)(!1,"Unexpected server value: "+JSON.stringify(n,null,2));const r=n.increment;"number"!=typeof r&&(0,ee.hu)(!1,"Unexpected increment value: "+r);const i=e.node();if((0,ee.hu)(null!==i&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const c=i.getValue();return"number"!=typeof c?r:c+r},xP=function(n,e,t,r){return fR(e,new dR(t,n),r)},hR=function(n,e,t){return fR(n,new lR(e),t)};function fR(n,e,t){const r=n.getPriority().val(),i=MP(r,e.getImmediateChild(".priority"),t);let u;if(n.isLeafNode()){const c=n,p=MP(c.getValue(),e,t);return p!==c.getValue()||i!==c.getPriority().val()?new Dv(p,vs(i)):n}{const c=n;return u=c,i!==c.getPriority().val()&&(u=u.updatePriority(new Dv(i))),c.forEachChild(ki,(p,m)=>{const b=fR(m,e.getImmediateChild(p),t);b!==m&&(u=u.updateImmediateChild(p,b))}),u}}class pR{constructor(e="",t=null,r={children:{},childCount:0}){this.name=e,this.parent=t,this.node=r}}function lS(n,e){let t=e instanceof Xr?e:new Xr(e),r=n,i=rr(t);for(;null!==i;){const u=(0,ee.DV)(r.node.children,i)||{children:{},childCount:0};r=new pR(i,r,u),t=Si(t),i=rr(t)}return r}function zm(n){return n.node.value}function gR(n,e){n.node.value=e,mR(n)}function RP(n){return n.node.childCount>0}function dS(n,e){Ho(n.node.children,(t,r)=>{e(new pR(t,n,r))})}function NP(n,e,t,r){t&&!r&&e(n),dS(n,i=>{NP(i,e,!0,r)}),t&&r&&e(n)}function EC(n){return new Xr(null===n.parent?n.name:EC(n.parent)+"/"+n.name)}function mR(n){null!==n.parent&&function A2(n,e,t){const r=function T2(n){return void 0===zm(n)&&!RP(n)}(t),i=(0,ee.r3)(n.node.children,e);r&&i?(delete n.node.children[e],n.node.childCount--,mR(n)):!r&&!i&&(n.node.children[e]=t.node,n.node.childCount++,mR(n))}(n.parent,n.name,n)}const M2=/[\[\].#$\/\u0000-\u001F\u007F]/,x2=/[\[\].#$\u0000-\u001F\u007F]/,yR=10485760,hS=function(n){return"string"==typeof n&&0!==n.length&&!M2.test(n)},OP=function(n){return"string"==typeof n&&0!==n.length&&!x2.test(n)},wC=function(n){return null===n||"string"==typeof n||"number"==typeof n&&!VT(n)||n&&"object"==typeof n&&(0,ee.r3)(n,".sv")},Ld=function(n,e,t,r){r&&void 0===e||CC((0,ee.gK)(n,"value"),e,t)},CC=function(n,e,t){const r=t instanceof Xr?new qF(t,n):t;if(void 0===e)throw new Error(n+"contains undefined "+Bm(r));if("function"==typeof e)throw new Error(n+"contains a function "+Bm(r)+" with contents = "+e.toString());if(VT(e))throw new Error(n+"contains "+e.toString()+" "+Bm(r));if("string"==typeof e&&e.length>yR/3&&(0,ee.ug)(e)>yR)throw new Error(n+"contains a string greater than "+yR+" utf8 bytes "+Bm(r)+" ('"+e.substring(0,50)+"...')");if(e&&"object"==typeof e){let i=!1,u=!1;if(Ho(e,(c,p)=>{if(".value"===c)i=!0;else if(".priority"!==c&&".sv"!==c&&(u=!0,!hS(c)))throw new Error(n+" contains an invalid key ("+c+") "+Bm(r)+'.  Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"');(function ZF(n,e){n.parts_.length>0&&(n.byteLength_+=1),n.parts_.push(e),n.byteLength_+=(0,ee.ug)(e),$O(n)})(r,c),CC(n,p,r),function KF(n){const e=n.parts_.pop();n.byteLength_-=(0,ee.ug)(e),n.parts_.length>0&&(n.byteLength_-=1)}(r)}),i&&u)throw new Error(n+' contains ".value" child '+Bm(r)+" in addition to actual children.")}},PP=function(n,e,t,r){if(r&&void 0===e)return;const i=(0,ee.gK)(n,"values");if(!e||"object"!=typeof e||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const u=[];Ho(e,(c,p)=>{const m=new Xr(c);if(CC(i,p,ls(t,m)),".priority"===Ox(m)&&!wC(p))throw new Error(i+"contains an invalid value for '"+m.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");u.push(m)}),function(n,e){let t,r;for(t=0;t<e.length;t++){r=e[t];const u=oC(r);for(let c=0;c<u.length;c++)if((".priority"!==u[c]||c!==u.length-1)&&!hS(u[c]))throw new Error(n+"contains an invalid key ("+u[c]+") in path "+r.toString()+'. Keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]"')}e.sort(WF);let i=null;for(t=0;t<e.length;t++){if(r=e[t],null!==i&&Fc(i,r))throw new Error(n+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}}(i,u)},_R=function(n,e,t){if(!t||void 0!==e){if(VT(e))throw new Error((0,ee.gK)(n,"priority")+"is "+e.toString()+", but must be a valid Firebase priority (a string, finite number, server value, or null).");if(!wC(e))throw new Error((0,ee.gK)(n,"priority")+"must be a valid Firebase priority (a string, finite number, server value, or null).")}},IC=function(n,e,t,r){if(!(r&&void 0===t||hS(t)))throw new Error((0,ee.gK)(n,e)+'was an invalid key = "'+t+'".  Firebase keys must be non-empty strings and can\'t contain ".", "#", "$", "/", "[", or "]").')},bC=function(n,e,t,r){if(!(r&&void 0===t||OP(t)))throw new Error((0,ee.gK)(n,e)+'was an invalid path = "'+t+'". Paths must be non-empty strings and can\'t contain ".", "#", "$", "[", or "]"')},O2=function(n,e,t,r){t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),bC(n,e,t,r)},Lc=function(n,e){if(".info"===rr(e))throw new Error(n+" failed = Can't modify data under /.info/")},kP=function(n,e){const t=e.path.toString();if("string"!=typeof e.repoInfo.host||0===e.repoInfo.host.length||!hS(e.repoInfo.namespace)&&"localhost"!==e.repoInfo.host.split(":")[0]||0!==t.length&&!function(n){return n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),OP(n)}(t))throw new Error((0,ee.gK)(n,"url")+'must be a valid firebase URL and the path can\'t contain ".", "#", "$", "[", or "]".')};class P2{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function fS(n,e){let t=null;for(let r=0;r<e.length;r++){const i=e[r],u=i.getPath();null!==t&&!Px(u,t.path)&&(n.eventLists_.push(t),t=null),null===t&&(t={events:[],path:u}),t.events.push(i)}t&&n.eventLists_.push(t)}function FP(n,e,t){fS(n,t),LP(n,r=>Px(r,e))}function Qu(n,e,t){fS(n,t),LP(n,r=>Fc(r,e)||Fc(e,r))}function LP(n,e){n.recursionDepth_++;let t=!0;for(let r=0;r<n.eventLists_.length;r++){const i=n.eventLists_[r];i&&(e(i.path)?(k2(n.eventLists_[r]),n.eventLists_[r]=null):t=!1)}t&&(n.eventLists_=[]),n.recursionDepth_--}function k2(n){for(let e=0;e<n.events.length;e++){const t=n.events[e];if(null!==t){n.events[e]=null;const r=t.getEventRunner();Um&&jo("event: "+t.toString()),Iv(r)}}}const UP="repo_interrupt",F2=25;class L2{constructor(e,t,r,i){this.repoInfo_=e,this.forceRestClient_=t,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new P2,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=YT(),this.transactionQueueTree_=new pR,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function VP(n){const t=n.infoData_.getNode(new Xr(".info/serverTimeOffset")).val()||0;return(new Date).getTime()+t}function DC(n){return I2({timestamp:VP(n)})}function BP(n,e,t,r,i){n.dataUpdateCount++;const u=new Xr(e);t=n.interceptServerDataCallback_?n.interceptServerDataCallback_(e,t):t;let c=[];if(i)if(r){const m=(0,ee.UI)(t,b=>vs(b));c=function y2(n,e,t,r){const i=aR(n,r);if(i){const u=uR(i),c=u.path,p=u.queryId,m=Qa(c,e),b=Fi.fromObject(t);return cR(n,c,new Mv(Zx(p),m,b))}return[]}(n.serverSyncTree_,u,m,i)}else{const m=vs(t);c=DP(n.serverSyncTree_,u,m,i)}else if(r){const m=(0,ee.UI)(t,b=>vs(b));c=function p2(n,e,t){const r=Fi.fromObject(t);return Rv(n,new Mv({fromUser:!1,fromServer:!0,queryId:null,tagged:!1},e,r))}(n.serverSyncTree_,u,m)}else{const m=vs(t);c=yC(n.serverSyncTree_,u,m)}let p=u;c.length>0&&(p=Ov(n,u)),Qu(n.eventQueue_,p,c)}function jP(n,e){vR(n,"connected",e),!1===e&&function H2(n){Nv(n,"onDisconnectEvents");const e=DC(n),t=YT();zx(n.onDisconnect_,Lr(),(i,u)=>{const c=xP(i,u,n.serverSyncTree_,e);Av(t,i,c)});let r=[];zx(t,Lr(),(i,u)=>{r=r.concat(yC(n.serverSyncTree_,i,u));const c=IR(n,i);Ov(n,c)}),n.onDisconnect_=YT(),Qu(n.eventQueue_,Lr(),r)}(n)}function vR(n,e,t){const r=new Xr("/.info/"+e),i=vs(t);n.infoData_.updateSnapshot(r,i);const u=yC(n.infoSyncTree_,r,i);Qu(n.eventQueue_,r,u)}function pS(n){return n.nextWriteId_++}function ER(n,e,t,r,i){Nv(n,"set",{path:e.toString(),value:t,priority:r});const u=DC(n),c=vs(t,r),p=uS(n.serverSyncTree_,e),m=hR(c,p,u),b=pS(n),O=sR(n.serverSyncTree_,e,m,b,!0);fS(n.eventQueue_,O),n.server_.put(e.toString(),c.val(!0),(J,ce)=>{const we="ok"===J;we||Aa("set at "+e+" failed: "+J);const Ve=$p(n.serverSyncTree_,b,!we);Qu(n.eventQueue_,e,Ve),Gp(0,i,J,ce)});const U=IR(n,e);Ov(n,U),Qu(n.eventQueue_,U,[])}function $2(n,e,t){n.server_.onDisconnectCancel(e.toString(),(r,i)=>{"ok"===r&&Gx(n.onDisconnect_,e),Gp(0,t,r,i)})}function HP(n,e,t,r){const i=vs(t);n.server_.onDisconnectPut(e.toString(),i.val(!0),(u,c)=>{"ok"===u&&Av(n.onDisconnect_,e,i),Gp(0,r,u,c)})}function wR(n,e,t){let r;r=".info"===rr(e._path)?aS(n.infoSyncTree_,e,t):aS(n.serverSyncTree_,e,t),FP(n.eventQueue_,e._path,r)}function $P(n){n.persistentConnection_&&n.persistentConnection_.interrupt(UP)}function Nv(n,...e){let t="";n.persistentConnection_&&(t=n.persistentConnection_.id+":"),jo(t,...e)}function Gp(n,e,t,r){e&&Iv(()=>{if("ok"===t)e(null);else{const i=(t||"error").toUpperCase();let u=i;r&&(u+=": "+r);const c=new Error(u);c.code=i,e(c)}})}function CR(n,e,t){return uS(n.serverSyncTree_,e,t)||jn.EMPTY_NODE}function gS(n,e=n.transactionQueueTree_){if(e||mS(n,e),zm(e)){const t=zP(n,e);(0,ee.hu)(t.length>0,"Sending zero length transaction queue"),t.every(i=>0===i.status)&&function K2(n,e,t){const r=t.map(b=>b.currentWriteId),i=CR(n,e,r);let u=i;const c=i.hash();for(let b=0;b<t.length;b++){const O=t[b];(0,ee.hu)(0===O.status,"tryToSendTransactionQueue_: items in queue should all be run."),O.status=1,O.retryCount++;const U=Qa(e,O.path);u=u.updateChild(U,O.currentOutputSnapshotRaw)}const p=u.val(!0),m=e;n.server_.put(m.toString(),p,b=>{Nv(n,"transaction put response",{path:m.toString(),status:b});let O=[];if("ok"===b){const U=[];for(let J=0;J<t.length;J++)t[J].status=2,O=O.concat($p(n.serverSyncTree_,t[J].currentWriteId)),t[J].onComplete&&U.push(()=>t[J].onComplete(null,!0,t[J].currentOutputSnapshotResolved)),t[J].unwatcher();mS(n,lS(n.transactionQueueTree_,e)),gS(n,n.transactionQueueTree_),Qu(n.eventQueue_,e,O);for(let J=0;J<U.length;J++)Iv(U[J])}else{if("datastale"===b)for(let U=0;U<t.length;U++)t[U].status=3===t[U].status?4:0;else{Aa("transaction at "+m.toString()+" failed: "+b);for(let U=0;U<t.length;U++)t[U].status=4,t[U].abortReason=b}Ov(n,e)}},c)}(n,EC(e),t)}else RP(e)&&dS(e,t=>{gS(n,t)})}function Ov(n,e){const t=GP(n,e),r=EC(t);return function Y2(n,e,t){if(0===e.length)return;const r=[];let i=[];const c=e.filter(p=>0===p.status).map(p=>p.currentWriteId);for(let p=0;p<e.length;p++){const m=e[p],b=Qa(t,m.path);let U,O=!1;if((0,ee.hu)(null!==b,"rerunTransactionsUnderNode_: relativePath should not be null."),4===m.status)O=!0,U=m.abortReason,i=i.concat($p(n.serverSyncTree_,m.currentWriteId,!0));else if(0===m.status)if(m.retryCount>=F2)O=!0,U="maxretry",i=i.concat($p(n.serverSyncTree_,m.currentWriteId,!0));else{const J=CR(n,m.path,c);m.currentInputSnapshot=J;const ce=e[p].update(J.val());if(void 0!==ce){CC("transaction failed: Data returned ",ce,m.path);let we=vs(ce);"object"==typeof ce&&null!=ce&&(0,ee.r3)(ce,".priority")||(we=we.updatePriority(J.getPriority()));const Ye=m.currentWriteId,Ot=DC(n),en=hR(we,J,Ot);m.currentOutputSnapshotRaw=we,m.currentOutputSnapshotResolved=en,m.currentWriteId=pS(n),c.splice(c.indexOf(Ye),1),i=i.concat(sR(n.serverSyncTree_,m.path,en,m.currentWriteId,m.applyLocally)),i=i.concat($p(n.serverSyncTree_,Ye,!0))}else O=!0,U="nodata",i=i.concat($p(n.serverSyncTree_,m.currentWriteId,!0))}Qu(n.eventQueue_,t,i),i=[],O&&(e[p].status=2,setTimeout(e[p].unwatcher,Math.floor(0)),e[p].onComplete&&r.push("nodata"===U?()=>e[p].onComplete(null,!1,e[p].currentInputSnapshot):()=>e[p].onComplete(new Error(U),!1,null)))}mS(n,n.transactionQueueTree_);for(let p=0;p<r.length;p++)Iv(r[p]);gS(n,n.transactionQueueTree_)}(n,zP(n,t),r),r}function GP(n,e){let t,r=n.transactionQueueTree_;for(t=rr(e);null!==t&&void 0===zm(r);)r=lS(r,t),t=rr(e=Si(e));return r}function zP(n,e){const t=[];return WP(n,e,t),t.sort((r,i)=>r.order-i.order),t}function WP(n,e,t){const r=zm(e);if(r)for(let i=0;i<r.length;i++)t.push(r[i]);dS(e,i=>{WP(n,i,t)})}function mS(n,e){const t=zm(e);if(t){let r=0;for(let i=0;i<t.length;i++)2!==t[i].status&&(t[r]=t[i],r++);t.length=r,gR(e,t.length>0?t:void 0)}dS(e,r=>{mS(n,r)})}function IR(n,e){const t=EC(GP(n,e)),r=lS(n.transactionQueueTree_,e);return function S2(n,e,t){let r=t?n:n.parent;for(;null!==r;){if(e(r))return!0;r=r.parent}}(r,i=>{bR(n,i)}),bR(n,r),NP(r,i=>{bR(n,i)}),t}function bR(n,e){const t=zm(e);if(t){const r=[];let i=[],u=-1;for(let c=0;c<t.length;c++)3===t[c].status||(1===t[c].status?((0,ee.hu)(u===c-1,"All SENT items should be at beginning of queue."),u=c,t[c].status=3,t[c].abortReason="set"):((0,ee.hu)(0===t[c].status,"Unexpected transaction status in abort"),t[c].unwatcher(),i=i.concat($p(n.serverSyncTree_,t[c].currentWriteId,!0)),t[c].onComplete&&r.push(t[c].onComplete.bind(null,new Error("set"),!1,null))));-1===u?gR(e,void 0):t.length=u+1,Qu(n.eventQueue_,EC(e),i);for(let c=0;c<r.length;c++)Iv(r[c])}}const DR=function(n,e){const t=X2(n),r=t.namespace;return"firebase.com"===t.domain&&kd(t.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||"undefined"===r)&&"localhost"!==t.domain&&kd("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),t.secure||typeof window<"u"&&window.location&&window.location.protocol&&-1!==window.location.protocol.indexOf("https:")&&Aa("Insecure Firebase access from a secure page. Please use https in calls to new Firebase()."),{repoInfo:new Sx(t.host,t.secure,r,"ws"===t.scheme||"wss"===t.scheme,e,"",r!==t.subdomain),path:new Xr(t.pathString)}},X2=function(n){let e="",t="",r="",i="",u="",c=!0,p="https",m=443;if("string"==typeof n){let b=n.indexOf("//");b>=0&&(p=n.substring(0,b-1),n=n.substring(b+2));let O=n.indexOf("/");-1===O&&(O=n.length);let U=n.indexOf("?");-1===U&&(U=n.length),e=n.substring(0,Math.min(O,U)),O<U&&(i=function Q2(n){let e="";const t=n.split("/");for(let r=0;r<t.length;r++)if(t[r].length>0){let i=t[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}(n.substring(O,U)));const J=function J2(n){const e={};"?"===n.charAt(0)&&(n=n.substring(1));for(const t of n.split("&")){if(0===t.length)continue;const r=t.split("=");2===r.length?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Aa(`Invalid query segment '${t}' in query '${n}'`)}return e}(n.substring(Math.min(n.length,U)));b=e.indexOf(":"),b>=0?(c="https"===p||"wss"===p,m=parseInt(e.substring(b+1),10)):b=e.length;const ce=e.slice(0,b);if("localhost"===ce.toLowerCase())t="localhost";else if(ce.split(".").length<=2)t=ce;else{const we=e.indexOf(".");r=e.substring(0,we).toLowerCase(),t=e.substring(we+1),u=r}"ns"in J&&(u=J.ns)}return{host:e,port:m,domain:t,subdomain:r,secure:c,scheme:p,pathString:i,namespace:u}},qP="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",eU=function(){let n=0;const e=[];return function(t){const r=t===n;let i;n=t;const u=new Array(8);for(i=7;i>=0;i--)u[i]=qP.charAt(t%64),t=Math.floor(t/64);(0,ee.hu)(0===t,"Cannot push at time == 0");let c=u.join("");if(r){for(i=11;i>=0&&63===e[i];i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(64*Math.random());for(i=0;i<12;i++)c+=qP.charAt(e[i]);return(0,ee.hu)(20===c.length,"nextPushId: Length should be 20."),c}}();class ZP{constructor(e,t,r,i){this.eventType=e,this.eventRegistration=t,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return"value"===this.eventType?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+(0,ee.Wl)(this.snapshot.exportVal())}}class KP{constructor(e,t,r){this.eventRegistration=e,this.error=t,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}class TR{constructor(e,t){this.snapshotCallback=e,this.cancelCallback=t}onValue(e,t){this.snapshotCallback.call(null,e,t)}onCancel(e){return(0,ee.hu)(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||void 0!==this.snapshotCallback.userCallback&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}class YP{constructor(e,t){this._repo=e,this._path=t}cancel(){const e=new ee.BH;return $2(this._repo,this._path,e.wrapCallback(()=>{})),e.promise}remove(){Lc("OnDisconnect.remove",this._path);const e=new ee.BH;return HP(this._repo,this._path,null,e.wrapCallback(()=>{})),e.promise}set(e){Lc("OnDisconnect.set",this._path),Ld("OnDisconnect.set",e,this._path,!1);const t=new ee.BH;return HP(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}setWithPriority(e,t){Lc("OnDisconnect.setWithPriority",this._path),Ld("OnDisconnect.setWithPriority",e,this._path,!1),_R("OnDisconnect.setWithPriority",t,!1);const r=new ee.BH;return function G2(n,e,t,r,i){const u=vs(t,r);n.server_.onDisconnectPut(e.toString(),u.val(!0),(c,p)=>{"ok"===c&&Av(n.onDisconnect_,e,u),Gp(0,i,c,p)})}(this._repo,this._path,e,t,r.wrapCallback(()=>{})),r.promise}update(e){Lc("OnDisconnect.update",this._path),PP("OnDisconnect.update",e,this._path,!1);const t=new ee.BH;return function z2(n,e,t,r){if((0,ee.xb)(t))return jo("onDisconnect().update() called with empty data.  Don't do anything."),void Gp(0,r,"ok",void 0);n.server_.onDisconnectMerge(e.toString(),t,(i,u)=>{"ok"===i&&Ho(t,(c,p)=>{const m=vs(p);Av(n.onDisconnect_,ls(e,c),m)}),Gp(0,r,i,u)})}(this._repo,this._path,e,t.wrapCallback(()=>{})),t.promise}}class Tu{constructor(e,t,r,i){this._repo=e,this._path=t,this._queryParams=r,this._orderByCalled=i}get key(){return ir(this._path)?null:Ox(this._path)}get ref(){return new Uc(this._repo,this._path)}get _queryIdentifier(){const e=eP(this._queryParams),t=Dx(e);return"{}"===t?"default":t}get _queryObject(){return eP(this._queryParams)}isEqual(e){if(!((e=(0,ee.m9)(e))instanceof Tu))return!1;const t=this._repo===e._repo,r=Px(this._path,e._path);return t&&r&&this._queryIdentifier===e._queryIdentifier}toJSON(){return this.toString()}toString(){return this._repo.toString()+function zF(n){let e="";for(let t=n.pieceNum_;t<n.pieces_.length;t++)""!==n.pieces_[t]&&(e+="/"+encodeURIComponent(String(n.pieces_[t])));return e||"/"}(this._path)}}function yS(n,e){if(!0===n._orderByCalled)throw new Error(e+": You can't combine multiple orderBy calls.")}function zp(n){let e=null,t=null;if(n.hasStart()&&(e=n.getIndexStartValue()),n.hasEnd()&&(t=n.getIndexEndValue()),n.getIndex()===Fd){const r="Query: When ordering by key, you may only pass one argument to startAt(), endAt(), or equalTo().",i="Query: When ordering by key, the argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() must be a string.";if(n.hasStart()){if(n.getIndexStartName()!==Fp)throw new Error(r);if("string"!=typeof e)throw new Error(i)}if(n.hasEnd()){if(n.getIndexEndName()!==Jh)throw new Error(r);if("string"!=typeof t)throw new Error(i)}}else if(n.getIndex()===ki){if(null!=e&&!wC(e)||null!=t&&!wC(t))throw new Error("Query: When ordering by priority, the first argument passed to startAt(), startAfter() endAt(), endBefore(), or equalTo() must be a valid priority value (null, a number, or a string).")}else if((0,ee.hu)(n.getIndex()instanceof Vx||n.getIndex()===Bx,"unknown index type."),null!=e&&"object"==typeof e||null!=t&&"object"==typeof t)throw new Error("Query: First argument passed to startAt(), startAfter(), endAt(), endBefore(), or equalTo() cannot be an object.")}function _S(n){if(n.hasStart()&&n.hasEnd()&&n.hasLimit()&&!n.hasAnchoredLimit())throw new Error("Query: Can't combine startAt(), startAfter(), endAt(), endBefore(), and limit(). Use limitToFirst() or limitToLast() instead.")}class Uc extends Tu{constructor(e,t){super(e,t,new qT,!1)}get parent(){const e=HO(this._path);return null===e?null:new Uc(this._repo,e)}get root(){let e=this;for(;null!==e.parent;)e=e.parent;return e}}class Wm{constructor(e,t,r){this._node=e,this.ref=t,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const t=new Xr(e),r=qm(this.ref,e);return new Wm(this._node.getChild(t),r,ki)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return!this._node.isLeafNode()&&!!this._node.forEachChild(this._index,(r,i)=>e(new Wm(i,qm(this.ref,r),ki)))}hasChild(e){const t=new Xr(e);return!this._node.getChild(t).isEmpty()}hasChildren(){return!this._node.isLeafNode()&&!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function QP(n,e){return(n=(0,ee.m9)(n))._checkNotDeleted("ref"),void 0!==e?qm(n._root,e):n._root}function JP(n,e){(n=(0,ee.m9)(n))._checkNotDeleted("refFromURL");const t=DR(e,n._repo.repoInfo_.nodeAdmin);kP("refFromURL",t);const r=t.repoInfo;return!n._repo.repoInfo_.isCustomHost()&&r.host!==n._repo.repoInfo_.host&&kd("refFromURL: Host name does not match the current database: (found "+r.host+" but expected "+n._repo.repoInfo_.host+")"),QP(n,t.path.toString())}function qm(n,e){return null===rr((n=(0,ee.m9)(n))._path)?O2("child","path",e,!1):bC("child","path",e,!1),new Uc(n._repo,ls(n._path,e))}function SR(n,e){n=(0,ee.m9)(n),Lc("set",n._path),Ld("set",e,n._path,!1);const t=new ee.BH;return ER(n._repo,n._path,e,null,t.wrapCallback(()=>{})),t.promise}function sU(n,e){PP("update",e,n._path,!1);const t=new ee.BH;return function j2(n,e,t,r){Nv(n,"update",{path:e.toString(),value:t});let i=!0;const u=DC(n),c={};if(Ho(t,(p,m)=>{i=!1,c[p]=xP(ls(e,p),vs(m),n.serverSyncTree_,u)}),i)jo("update() called with empty data.  Don't do anything."),Gp(0,r,"ok",void 0);else{const p=pS(n),m=function f2(n,e,t,r){!function xL(n,e,t,r){(0,ee.hu)(r>n.lastWriteId,"Stacking an older merge on top of newer ones"),n.allWrites.push({path:e,children:t,writeId:r,visible:!0}),n.visibleWrites=Yx(n.visibleWrites,e,t),n.lastWriteId=r}(n.pendingWriteTree_,e,t,r);const i=Fi.fromObject(t);return Rv(n,new Mv({fromUser:!0,fromServer:!1,queryId:null,tagged:!1},e,i))}(n.serverSyncTree_,e,c,p);fS(n.eventQueue_,m),n.server_.merge(e.toString(),t,(b,O)=>{const U="ok"===b;U||Aa("update at "+e+" failed: "+b);const J=$p(n.serverSyncTree_,p,!U),ce=J.length>0?Ov(n,e):e;Qu(n.eventQueue_,ce,J),Gp(0,r,b,O)}),Ho(t,b=>{const O=IR(n,ls(e,b));Ov(n,O)}),Qu(n.eventQueue_,e,[])}}(n._repo,n._path,e,t.wrapCallback(()=>{})),t.promise}function oU(n){n=(0,ee.m9)(n);const e=new TR(()=>{}),t=new TC(e);return function B2(n,e,t){const r=function _2(n,e){const t=e._path;let r=null;n.syncPointTree_.foreachOnPath(t,(b,O)=>{const U=Qa(b,t);r=r||jp(O,U)});let i=n.syncPointTree_.get(t);i?r=r||jp(i,Lr()):(i=new vP,n.syncPointTree_=n.syncPointTree_.set(t,i));const u=null!=r,c=u?new Vp(r,!0,!1):null;return function t2(n){return XT(n.viewCache_)}(EP(i,e,eS(n.pendingWriteTree_,e._path),u?c.getNode():jn.EMPTY_NODE,u))}(n.serverSyncTree_,e);return null!=r?Promise.resolve(r):n.server_.get(e).then(i=>{const u=vs(i).withIndex(e._queryParams.getIndex());let c;if(oR(n.serverSyncTree_,e,t,!0),e._queryParams.loadsAllData())c=yC(n.serverSyncTree_,e._path,u);else{const p=_C(n.serverSyncTree_,e);c=DP(n.serverSyncTree_,e._path,u,p)}return Qu(n.eventQueue_,e._path,c),aS(n.serverSyncTree_,e,t,null,!0),u},i=>(Nv(n,"get for query "+(0,ee.Wl)(e)+" failed: "+i),Promise.reject(new Error(i))))}(n._repo,n,t).then(r=>new Wm(r,new Uc(n._repo,n._path),n._queryParams.getIndex()))}class TC{constructor(e){this.callbackContext=e}respondsTo(e){return"value"===e}createEvent(e,t){const r=t._queryParams.getIndex();return new ZP("value",this,new Wm(e.snapshotNode,new Uc(t._repo,t._path),r))}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new KP(this,e,t):null}matches(e){return e instanceof TC&&(!e.callbackContext||!this.callbackContext||e.callbackContext.matches(this.callbackContext))}hasAnyCallback(){return null!==this.callbackContext}}class vS{constructor(e,t){this.eventType=e,this.callbackContext=t}respondsTo(e){let t="children_added"===e?"child_added":e;return t="children_removed"===t?"child_removed":t,this.eventType===t}createCancelEvent(e,t){return this.callbackContext.hasCancelCallback?new KP(this,e,t):null}createEvent(e,t){(0,ee.hu)(null!=e.childName,"Child events should have a childName.");const r=qm(new Uc(t._repo,t._path),e.childName),i=t._queryParams.getIndex();return new ZP(e.type,this,new Wm(e.snapshotNode,r,i),e.prevName)}getEventRunner(e){return"cancel"===e.getEventType()?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,e.prevName)}matches(e){return e instanceof vS&&this.eventType===e.eventType&&(!this.callbackContext||!e.callbackContext||this.callbackContext.matches(e.callbackContext))}hasAnyCallback(){return!!this.callbackContext}}function SC(n,e,t,r,i){let u;if("object"==typeof r&&(u=void 0,i=r),"function"==typeof r&&(u=r),i&&i.onlyOnce){const m=t,b=(O,U)=>{wR(n._repo,n,p),m(O,U)};b.userCallback=t.userCallback,b.context=t.context,t=b}const c=new TR(t,u||void 0),p="value"===e?new TC(c):new vS(e,c);return function W2(n,e,t){let r;r=".info"===rr(e._path)?oR(n.infoSyncTree_,e,t):oR(n.serverSyncTree_,e,t),FP(n.eventQueue_,e._path,r)}(n._repo,n,p),()=>wR(n._repo,n,p)}function AR(n,e,t,r){return SC(n,"value",e,t,r)}function XP(n,e,t,r){return SC(n,"child_added",e,t,r)}function ek(n,e,t,r){return SC(n,"child_changed",e,t,r)}function tk(n,e,t,r){return SC(n,"child_moved",e,t,r)}function nk(n,e,t,r){return SC(n,"child_removed",e,t,r)}function rk(n,e,t){let r=null;const i=t?new TR(t):null;"value"===e?r=new TC(i):e&&(r=new vS(e,i)),wR(n._repo,n,r)}class Il{}class ik extends Il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("endAt",this._value,e._path,!0);const t=$x(e._queryParams,this._value,this._key);if(_S(t),zp(t),e._queryParams.hasEnd())throw new Error("endAt: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tu(e._repo,e._path,t,e._orderByCalled)}}class uU extends Il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("endBefore",this._value,e._path,!1);const t=function yL(n,e,t){let r;return r=$x(n,e,n.index_===Fd||t?t:Fp),r.endBeforeSet_=!0,r}(e._queryParams,this._value,this._key);if(_S(t),zp(t),e._queryParams.hasEnd())throw new Error("endBefore: Starting point was already set (by another call to endAt, endBefore or equalTo).");return new Tu(e._repo,e._path,t,e._orderByCalled)}}class sk extends Il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("startAt",this._value,e._path,!0);const t=Hx(e._queryParams,this._value,this._key);if(_S(t),zp(t),e._queryParams.hasStart())throw new Error("startAt: Starting point was already set (by another call to startAt, startBefore or equalTo).");return new Tu(e._repo,e._path,t,e._orderByCalled)}}class dU extends Il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){Ld("startAfter",this._value,e._path,!1);const t=function mL(n,e,t){let r;return r=Hx(n,e,n.index_===Fd||t?t:Jh),r.startAfterSet_=!0,r}(e._queryParams,this._value,this._key);if(_S(t),zp(t),e._queryParams.hasStart())throw new Error("startAfter: Starting point was already set (by another call to startAt, startAfter, or equalTo).");return new Tu(e._repo,e._path,t,e._orderByCalled)}}class fU extends Il{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToFirst: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tu(e._repo,e._path,function pL(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="l",t}(e._queryParams,this._limit),e._orderByCalled)}}class gU extends Il{constructor(e){super(),this._limit=e}_apply(e){if(e._queryParams.hasLimit())throw new Error("limitToLast: Limit was already set (by another call to limitToFirst or limitToLast).");return new Tu(e._repo,e._path,function gL(n,e){const t=n.copy();return t.limitSet_=!0,t.limit_=e,t.viewFrom_="r",t}(e._queryParams,this._limit),e._orderByCalled)}}class yU extends Il{constructor(e){super(),this._path=e}_apply(e){yS(e,"orderByChild");const t=new Xr(this._path);if(ir(t))throw new Error("orderByChild: cannot pass in empty path. Use orderByValue() instead.");const r=new Vx(t),i=ZT(e._queryParams,r);return zp(i),new Tu(e._repo,e._path,i,!0)}}class vU extends Il{_apply(e){yS(e,"orderByKey");const t=ZT(e._queryParams,Fd);return zp(t),new Tu(e._repo,e._path,t,!0)}}class wU extends Il{_apply(e){yS(e,"orderByPriority");const t=ZT(e._queryParams,ki);return zp(t),new Tu(e._repo,e._path,t,!0)}}class IU extends Il{_apply(e){yS(e,"orderByValue");const t=ZT(e._queryParams,Bx);return zp(t),new Tu(e._repo,e._path,t,!0)}}class DU extends Il{constructor(e,t){super(),this._value=e,this._key=t}_apply(e){if(Ld("equalTo",this._value,e._path,!1),e._queryParams.hasStart())throw new Error("equalTo: Starting point was already set (by another call to startAt/startAfter or equalTo).");if(e._queryParams.hasEnd())throw new Error("equalTo: Ending point was already set (by another call to endAt/endBefore or equalTo).");return new ik(this._value,this._key)._apply(new sk(this._value,this._key)._apply(e))}}function bl(n,...e){let t=(0,ee.m9)(n);for(const r of e)t=r._apply(t);return t}(function s2(n){(0,ee.hu)(!iS,"__referenceConstructor has already been defined"),iS=n})(Uc),function l2(n){(0,ee.hu)(!oS,"__referenceConstructor has already been defined"),oS=n}(Uc);const MR={};function ak(n,e,t,r,i){let u=r||n.options.databaseURL;void 0===u&&(n.options.projectId||kd("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),jo("Using default host for project ",n.options.projectId),u=`${n.options.projectId}-default-rtdb.firebaseio.com`);let m,b,c=DR(u,i),p=c.repoInfo;typeof process<"u"&&process.env&&(b=process.env.FIREBASE_DATABASE_EMULATOR_HOST),b?(m=!0,u=`http://${b}?ns=${p.namespace}`,c=DR(u,i),p=c.repoInfo):m=!c.repoInfo.secure;const O=i&&m?new sC(sC.OWNER):new EF(n.name,n.options,e);kP("Invalid Firebase Database URL",c),ir(c.path)||kd("Database URL must point to the root of a Firebase Database (not including a child path).");const U=function xU(n,e,t,r){let i=MR[e.name];i||(i={},MR[e.name]=i);let u=i[n.toURLString()];return u&&kd("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),u=new L2(n,false,t,r),i[n.toURLString()]=u,u}(p,n,O,new vF(n.name,t));return new NU(U,n)}class NU{constructor(e,t){this._repoInternal=e,this.app=t,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(function U2(n,e,t){if(n.stats_=xx(n.repoInfo_),n.forceRestClient_||("object"==typeof window&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0)n.server_=new KT(n.repoInfo_,(r,i,u,c)=>{BP(n,r,i,u,c)},n.authTokenProvider_,n.appCheckProvider_),setTimeout(()=>jP(n,!0),0);else{if(typeof t<"u"&&null!==t){if("object"!=typeof t)throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{(0,ee.Wl)(t)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}n.persistentConnection_=new jm(n.repoInfo_,e,(r,i,u,c)=>{BP(n,r,i,u,c)},r=>{jP(n,r)},r=>{!function V2(n,e){Ho(e,(t,r)=>{vR(n,t,r)})}(n,r)},n.authTokenProvider_,n.appCheckProvider_,t),n.server_=n.persistentConnection_}n.authTokenProvider_.addTokenChangeListener(r=>{n.server_.refreshAuthToken(r)}),n.appCheckProvider_.addTokenChangeListener(r=>{n.server_.refreshAppCheckToken(r.token)}),n.statsReporter_=function IF(n,e){const t=n.toString();return Mx[t]||(Mx[t]=e()),Mx[t]}(n.repoInfo_,()=>new IL(n.stats_,n.server_)),n.infoData_=new _L,n.infoSyncTree_=new bP({startListening:(r,i,u,c)=>{let p=[];const m=n.infoData_.getNode(r._path);return m.isEmpty()||(p=yC(n.infoSyncTree_,r._path,m),setTimeout(()=>{c("ok")},0)),p},stopListening:()=>{}}),vR(n,"connected",!1),n.serverSyncTree_=new bP({startListening:(r,i,u,c)=>(n.server_.listen(r,u,i,(p,m)=>{const b=c(p,m);Qu(n.eventQueue_,r._path,b)}),[]),stopListening:(r,i)=>{n.server_.unlisten(r,i)}})}(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Uc(this._repo,Lr())),this._rootInternal}_delete(){return null!==this._rootInternal&&(function MU(n,e){const t=MR[e];(!t||t[n.key]!==n)&&kd(`Database ${e}(${n.repoInfo_}) has already been deleted.`),$P(n),delete t[n.key]}(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){null===this._rootInternal&&kd("Cannot call "+e+" on a deleted database.")}}function uk(){xO.IS_TRANSPORT_INITIALIZED&&Aa("Transport has already been initialized. Please call this function before calling ref or setting up a listener")}function OU(){uk(),Lp.forceDisallow()}function PU(){uk(),bv.forceDisallow(),Lp.forceAllow()}function LU(n,e){lO(n,e)}const VU={".sv":"timestamp"};class HU{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return{committed:this.committed,snapshot:this.snapshot.toJSON()}}}jm.prototype.simpleListen=function(n,e){this.sendRequest("q",{p:n},e)},jm.prototype.echo=function(n,e){this.sendRequest("echo",{d:n},e)},function UU(n){sO(wc.SDK_VERSION),(0,wc._registerComponent)(new ri.wA("database",(e,{instanceIdentifier:t})=>ak(e.getProvider("app").getImmediate(),e.getProvider("auth-internal"),e.getProvider("app-check-internal"),t),"PUBLIC").setMultipleInstances(!0)),(0,wc.registerVersion)(rO,"0.14.4",n),(0,wc.registerVersion)(rO,"0.14.4","esm2017")}();const WU=new Xi.Yd("@firebase/database-compat"),lk=function(n){WU.warn("FIREBASE WARNING: "+n)};class KU{constructor(e){this._delegate=e}cancel(e){(0,ee.Dv)("OnDisconnect.cancel",0,1,arguments.length),(0,ee.Wj)("OnDisconnect.cancel","onComplete",e,!0);const t=this._delegate.cancel();return e&&t.then(()=>e(null),r=>e(r)),t}remove(e){(0,ee.Dv)("OnDisconnect.remove",0,1,arguments.length),(0,ee.Wj)("OnDisconnect.remove","onComplete",e,!0);const t=this._delegate.remove();return e&&t.then(()=>e(null),r=>e(r)),t}set(e,t){(0,ee.Dv)("OnDisconnect.set",1,2,arguments.length),(0,ee.Wj)("OnDisconnect.set","onComplete",t,!0);const r=this._delegate.set(e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,ee.Dv)("OnDisconnect.setWithPriority",2,3,arguments.length),(0,ee.Wj)("OnDisconnect.setWithPriority","onComplete",r,!0);const i=this._delegate.setWithPriority(e,t);return r&&i.then(()=>r(null),u=>r(u)),i}update(e,t){if((0,ee.Dv)("OnDisconnect.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,lk("Passing an Array to firebase.database.onDisconnect().update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}(0,ee.Wj)("OnDisconnect.update","onComplete",t,!0);const r=this._delegate.update(e);return t&&r.then(()=>t(null),i=>t(i)),r}}class YU{constructor(e,t){this.committed=e,this.snapshot=t}toJSON(){return(0,ee.Dv)("TransactionResult.toJSON",0,1,arguments.length),{committed:this.committed,snapshot:this.snapshot.toJSON()}}}class Wp{constructor(e,t){this._database=e,this._delegate=t}val(){return(0,ee.Dv)("DataSnapshot.val",0,0,arguments.length),this._delegate.val()}exportVal(){return(0,ee.Dv)("DataSnapshot.exportVal",0,0,arguments.length),this._delegate.exportVal()}toJSON(){return(0,ee.Dv)("DataSnapshot.toJSON",0,1,arguments.length),this._delegate.toJSON()}exists(){return(0,ee.Dv)("DataSnapshot.exists",0,0,arguments.length),this._delegate.exists()}child(e){return(0,ee.Dv)("DataSnapshot.child",0,1,arguments.length),e=String(e),bC("DataSnapshot.child","path",e,!1),new Wp(this._database,this._delegate.child(e))}hasChild(e){return(0,ee.Dv)("DataSnapshot.hasChild",1,1,arguments.length),bC("DataSnapshot.hasChild","path",e,!1),this._delegate.hasChild(e)}getPriority(){return(0,ee.Dv)("DataSnapshot.getPriority",0,0,arguments.length),this._delegate.priority}forEach(e){return(0,ee.Dv)("DataSnapshot.forEach",1,1,arguments.length),(0,ee.Wj)("DataSnapshot.forEach","action",e,!1),this._delegate.forEach(t=>e(new Wp(this._database,t)))}hasChildren(){return(0,ee.Dv)("DataSnapshot.hasChildren",0,0,arguments.length),this._delegate.hasChildren()}get key(){return this._delegate.key}numChildren(){return(0,ee.Dv)("DataSnapshot.numChildren",0,0,arguments.length),this._delegate.size}getRef(){return(0,ee.Dv)("DataSnapshot.ref",0,0,arguments.length),new Ju(this._database,this._delegate.ref)}get ref(){return this.getRef()}}class sa{constructor(e,t){this.database=e,this._delegate=t}on(e,t,r,i){var u;(0,ee.Dv)("Query.on",2,4,arguments.length),(0,ee.Wj)("Query.on","callback",t,!1);const c=sa.getCancelAndContextArgs_("Query.on",r,i),p=(b,O)=>{t.call(c.context,new Wp(this.database,b),O)};p.userCallback=t,p.context=c.context;const m=null===(u=c.cancel)||void 0===u?void 0:u.bind(c.context);switch(e){case"value":return AR(this._delegate,p,m),t;case"child_added":return XP(this._delegate,p,m),t;case"child_removed":return nk(this._delegate,p,m),t;case"child_changed":return ek(this._delegate,p,m),t;case"child_moved":return tk(this._delegate,p,m),t;default:throw new Error((0,ee.gK)("Query.on","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}off(e,t,r){if((0,ee.Dv)("Query.off",0,3,arguments.length),function(n,e,t){if(void 0!==e)switch(e){case"value":case"child_added":case"child_removed":case"child_changed":case"child_moved":break;default:throw new Error((0,ee.gK)("Query.off","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}}(0,e),(0,ee.Wj)("Query.off","callback",t,!0),(0,ee.lb)("Query.off","context",r,!0),t){const i=()=>{};i.userCallback=t,i.context=r,rk(this._delegate,e,i)}else rk(this._delegate,e)}get(){return oU(this._delegate).then(e=>new Wp(this.database,e))}once(e,t,r,i){(0,ee.Dv)("Query.once",1,4,arguments.length),(0,ee.Wj)("Query.once","callback",t,!0);const u=sa.getCancelAndContextArgs_("Query.once",r,i),c=new ee.BH,p=(b,O)=>{const U=new Wp(this.database,b);t&&t.call(u.context,U,O),c.resolve(U)};p.userCallback=t,p.context=u.context;const m=b=>{u.cancel&&u.cancel.call(u.context,b),c.reject(b)};switch(e){case"value":AR(this._delegate,p,m,{onlyOnce:!0});break;case"child_added":XP(this._delegate,p,m,{onlyOnce:!0});break;case"child_removed":nk(this._delegate,p,m,{onlyOnce:!0});break;case"child_changed":ek(this._delegate,p,m,{onlyOnce:!0});break;case"child_moved":tk(this._delegate,p,m,{onlyOnce:!0});break;default:throw new Error((0,ee.gK)("Query.once","eventType")+'must be a valid event type = "value", "child_added", "child_removed", "child_changed", or "child_moved".')}return c.promise}limitToFirst(e){return(0,ee.Dv)("Query.limitToFirst",1,1,arguments.length),new sa(this.database,bl(this._delegate,function pU(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToFirst: First argument must be a positive integer.");return new fU(n)}(e)))}limitToLast(e){return(0,ee.Dv)("Query.limitToLast",1,1,arguments.length),new sa(this.database,bl(this._delegate,function mU(n){if("number"!=typeof n||Math.floor(n)!==n||n<=0)throw new Error("limitToLast: First argument must be a positive integer.");return new gU(n)}(e)))}orderByChild(e){return(0,ee.Dv)("Query.orderByChild",1,1,arguments.length),new sa(this.database,bl(this._delegate,function _U(n){if("$key"===n)throw new Error('orderByChild: "$key" is invalid.  Use orderByKey() instead.');if("$priority"===n)throw new Error('orderByChild: "$priority" is invalid.  Use orderByPriority() instead.');if("$value"===n)throw new Error('orderByChild: "$value" is invalid.  Use orderByValue() instead.');return bC("orderByChild","path",n,!1),new yU(n)}(e)))}orderByKey(){return(0,ee.Dv)("Query.orderByKey",0,0,arguments.length),new sa(this.database,bl(this._delegate,function EU(){return new vU}()))}orderByPriority(){return(0,ee.Dv)("Query.orderByPriority",0,0,arguments.length),new sa(this.database,bl(this._delegate,function CU(){return new wU}()))}orderByValue(){return(0,ee.Dv)("Query.orderByValue",0,0,arguments.length),new sa(this.database,bl(this._delegate,function bU(){return new IU}()))}startAt(e=null,t){return(0,ee.Dv)("Query.startAt",0,2,arguments.length),new sa(this.database,bl(this._delegate,function lU(n=null,e){return IC("startAt","key",e,!0),new sk(n,e)}(e,t)))}startAfter(e=null,t){return(0,ee.Dv)("Query.startAfter",0,2,arguments.length),new sa(this.database,bl(this._delegate,function hU(n,e){return IC("startAfter","key",e,!0),new dU(n,e)}(e,t)))}endAt(e=null,t){return(0,ee.Dv)("Query.endAt",0,2,arguments.length),new sa(this.database,bl(this._delegate,function aU(n,e){return IC("endAt","key",e,!0),new ik(n,e)}(e,t)))}endBefore(e=null,t){return(0,ee.Dv)("Query.endBefore",0,2,arguments.length),new sa(this.database,bl(this._delegate,function cU(n,e){return IC("endBefore","key",e,!0),new uU(n,e)}(e,t)))}equalTo(e,t){return(0,ee.Dv)("Query.equalTo",1,2,arguments.length),new sa(this.database,bl(this._delegate,function TU(n,e){return IC("equalTo","key",e,!0),new DU(n,e)}(e,t)))}toString(){return(0,ee.Dv)("Query.toString",0,0,arguments.length),this._delegate.toString()}toJSON(){return(0,ee.Dv)("Query.toJSON",0,1,arguments.length),this._delegate.toJSON()}isEqual(e){if((0,ee.Dv)("Query.isEqual",1,1,arguments.length),!(e instanceof sa))throw new Error("Query.isEqual failed: First argument must be an instance of firebase.database.Query.");return this._delegate.isEqual(e._delegate)}static getCancelAndContextArgs_(e,t,r){const i={cancel:void 0,context:void 0};if(t&&r)i.cancel=t,(0,ee.Wj)(e,"cancel",i.cancel,!0),i.context=r,(0,ee.lb)(e,"context",i.context,!0);else if(t)if("object"==typeof t&&null!==t)i.context=t;else{if("function"!=typeof t)throw new Error((0,ee.gK)(e,"cancelOrContext")+" must either be a cancel callback or a context object.");i.cancel=t}return i}get ref(){return new Ju(this.database,new Uc(this._delegate._repo,this._delegate._path))}}class Ju extends sa{constructor(e,t){super(e,new Tu(t._repo,t._path,new qT,!1)),this.database=e,this._delegate=t}getKey(){return(0,ee.Dv)("Reference.key",0,0,arguments.length),this._delegate.key}child(e){return(0,ee.Dv)("Reference.child",1,1,arguments.length),"number"==typeof e&&(e=String(e)),new Ju(this.database,qm(this._delegate,e))}getParent(){(0,ee.Dv)("Reference.parent",0,0,arguments.length);const e=this._delegate.parent;return e?new Ju(this.database,e):null}getRoot(){return(0,ee.Dv)("Reference.root",0,0,arguments.length),new Ju(this.database,this._delegate.root)}set(e,t){(0,ee.Dv)("Reference.set",1,2,arguments.length),(0,ee.Wj)("Reference.set","onComplete",t,!0);const r=SR(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}update(e,t){if((0,ee.Dv)("Reference.update",1,2,arguments.length),Array.isArray(e)){const i={};for(let u=0;u<e.length;++u)i[""+u]=e[u];e=i,lk("Passing an Array to Firebase.update() is deprecated. Use set() if you want to overwrite the existing data, or an Object with integer keys if you really do want to only update some of the children.")}Lc("Reference.update",this._delegate._path),(0,ee.Wj)("Reference.update","onComplete",t,!0);const r=sU(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}setWithPriority(e,t,r){(0,ee.Dv)("Reference.setWithPriority",2,3,arguments.length),(0,ee.Wj)("Reference.setWithPriority","onComplete",r,!0);const i=function iU(n,e,t){if(Lc("setWithPriority",n._path),Ld("setWithPriority",e,n._path,!1),_R("setWithPriority",t,!1),".length"===n.key||".keys"===n.key)throw"setWithPriority failed: "+n.key+" is a read-only object.";const r=new ee.BH;return ER(n._repo,n._path,e,t,r.wrapCallback(()=>{})),r.promise}(this._delegate,e,t);return r&&i.then(()=>r(null),u=>r(u)),i}remove(e){(0,ee.Dv)("Reference.remove",0,1,arguments.length),(0,ee.Wj)("Reference.remove","onComplete",e,!0);const t=function nU(n){return Lc("remove",n._path),SR(n,null)}(this._delegate);return e&&t.then(()=>e(null),r=>e(r)),t}transaction(e,t,r){(0,ee.Dv)("Reference.transaction",1,3,arguments.length),(0,ee.Wj)("Reference.transaction","transactionUpdate",e,!1),(0,ee.Wj)("Reference.transaction","onComplete",t,!0),function(n,e,t,r){if(void 0!==t&&"boolean"!=typeof t)throw new Error((0,ee.gK)("Reference.transaction","applyLocally")+"must be a boolean.")}(0,0,r);const i=function $U(n,e,t){var r;if(n=(0,ee.m9)(n),Lc("Reference.transaction",n._path),".length"===n.key||".keys"===n.key)throw"Reference.transaction failed: "+n.key+" is a read-only object.";const i=null===(r=t?.applyLocally)||void 0===r||r,u=new ee.BH,p=AR(n,()=>{});return function Z2(n,e,t,r,i,u){Nv(n,"transaction on "+e);const c={path:e,update:t,onComplete:r,status:null,order:aO(),applyLocally:u,retryCount:0,unwatcher:i,abortReason:null,currentWriteId:null,currentInputSnapshot:null,currentOutputSnapshotRaw:null,currentOutputSnapshotResolved:null},p=CR(n,e,void 0);c.currentInputSnapshot=p;const m=c.update(p.val());if(void 0===m)c.unwatcher(),c.currentOutputSnapshotRaw=null,c.currentOutputSnapshotResolved=null,c.onComplete&&c.onComplete(null,!1,c.currentInputSnapshot);else{CC("transaction failed: Data returned ",m,c.path),c.status=0;const b=lS(n.transactionQueueTree_,e),O=zm(b)||[];let U;O.push(c),gR(b,O),"object"==typeof m&&null!==m&&(0,ee.r3)(m,".priority")?(U=(0,ee.DV)(m,".priority"),(0,ee.hu)(wC(U),"Invalid priority returned by transaction. Priority must be a valid string, finite number, server value, or null.")):U=(uS(n.serverSyncTree_,e)||jn.EMPTY_NODE).getPriority().val();const J=DC(n),ce=vs(m,U),we=hR(ce,p,J);c.currentOutputSnapshotRaw=ce,c.currentOutputSnapshotResolved=we,c.currentWriteId=pS(n);const Ve=sR(n.serverSyncTree_,e,we,c.currentWriteId,c.applyLocally);Qu(n.eventQueue_,e,Ve),gS(n,n.transactionQueueTree_)}}(n._repo,n._path,e,(m,b,O)=>{let U=null;m?u.reject(m):(U=new Wm(O,new Uc(n._repo,n._path),ki),u.resolve(new HU(b,U)))},p,i),u.promise}(this._delegate,e,{applyLocally:r}).then(u=>new YU(u.committed,new Wp(this.database,u.snapshot)));return t&&i.then(u=>t(null,u.committed,u.snapshot),u=>t(u,!1,null)),i}setPriority(e,t){(0,ee.Dv)("Reference.setPriority",1,2,arguments.length),(0,ee.Wj)("Reference.setPriority","onComplete",t,!0);const r=function rU(n,e){n=(0,ee.m9)(n),Lc("setPriority",n._path),_R("setPriority",e,!1);const t=new ee.BH;return ER(n._repo,ls(n._path,".priority"),e,null,t.wrapCallback(()=>{})),t.promise}(this._delegate,e);return t&&r.then(()=>t(null),i=>t(i)),r}push(e,t){(0,ee.Dv)("Reference.push",0,2,arguments.length),(0,ee.Wj)("Reference.push","onComplete",t,!0);const r=function tU(n,e){n=(0,ee.m9)(n),Lc("push",n._path),Ld("push",e,n._path,!0);const t=VP(n._repo),r=eU(t),i=qm(n,r),u=qm(n,r);let c;return c=null!=e?SR(u,e).then(()=>u):Promise.resolve(u),i.then=c.then.bind(c),i.catch=c.then.bind(c,void 0),i}(this._delegate,e),i=r.then(c=>new Ju(this.database,c));t&&i.then(()=>t(null),c=>t(c));const u=new Ju(this.database,r);return u.then=i.then.bind(i),u.catch=i.catch.bind(i,void 0),u}onDisconnect(){return Lc("Reference.onDisconnect",this._delegate._path),new KU(new YP(this._delegate._repo,this._delegate._path))}get key(){return this.getKey()}get parent(){return this.getParent()}get root(){return this.getRoot()}}class AC{constructor(e,t){this._delegate=e,this.app=t,this.INTERNAL={delete:()=>this._delegate._delete(),forceWebSockets:OU,forceLongPolling:PU}}useEmulator(e,t,r={}){!function ck(n,e,t,r={}){(n=(0,ee.m9)(n))._checkNotDeleted("useEmulator"),n._instanceStarted&&kd("Cannot call useEmulator() after instance has already been initialized.");const i=n._repoInternal;let u;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&kd('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),u=new sC(sC.OWNER);else if(r.mockUserToken){const c="string"==typeof r.mockUserToken?r.mockUserToken:(0,ee.Sg)(r.mockUserToken,n.app.options.projectId);u=new sC(c)}!function AU(n,e,t,r){n.repoInfo_=new Sx(`${e}:${t}`,!1,n.repoInfo_.namespace,n.repoInfo_.webSocketOnly,n.repoInfo_.nodeAdmin,n.repoInfo_.persistenceKey,n.repoInfo_.includeNamespaceInQueryParams,!0),r&&(n.authTokenProvider_=r)}(i,e,t,u)}(this._delegate,e,t,r)}ref(e){if((0,ee.Dv)("database.ref",0,1,arguments.length),e instanceof Ju){const t=JP(this._delegate,e.toString());return new Ju(this,t)}{const t=QP(this._delegate,e);return new Ju(this,t)}}refFromURL(e){(0,ee.Dv)("database.refFromURL",1,1,arguments.length);const r=JP(this._delegate,e);return new Ju(this,r)}goOffline(){return(0,ee.Dv)("database.goOffline",0,0,arguments.length),function kU(n){(n=(0,ee.m9)(n))._checkNotDeleted("goOffline"),$P(n._repo)}(this._delegate)}goOnline(){return(0,ee.Dv)("database.goOnline",0,0,arguments.length),function FU(n){(n=(0,ee.m9)(n))._checkNotDeleted("goOnline"),function q2(n){n.persistentConnection_&&n.persistentConnection_.resume(UP)}(n._repo)}(this._delegate)}}AC.ServerValue={TIMESTAMP:function BU(){return VU}(),increment:n=>function jU(n){return{".sv":{increment:n}}}(n)};var JU=Object.freeze({__proto__:null,initStandalone:function QU({app:n,url:e,version:t,customAuthImpl:r,namespace:i,nodeAdmin:u=!1}){sO(t);const c=new ri.zt("auth-internal",new ri.H0("database-standalone"));return c.setComponent(new ri.wA("auth-internal",()=>r,"PRIVATE")),{instance:new AC(ak(n,c,void 0,e,u),n),namespace:i}}});const XU=AC.ServerValue;function dk(n){return null==n}function hk(n){return"function"==typeof n.set}function fk(n,e){return hk(e)?e:n.ref(e)}function pk(n,e){if(function tV(n){return"string"==typeof n}(n))return e.stringCase();if(hk(n))return e.firebaseCase();if(function nV(n){return"function"==typeof n.exportVal}(n))return e.snapshotCase();throw new Error("Expects a string, snapshot, or reference. Got: "+typeof n)}function MC(n,e,t="on",r=Ll.z){return new de.y(i=>{let u=null;return u=n[t](e,(c,p)=>{r.schedule(()=>{i.next({snapshot:c,prevKey:p})}),"once"===t&&r.schedule(()=>i.complete())},c=>{r.schedule(()=>i.error(c))}),"on"===t?{unsubscribe(){null!=u&&n.off(e,u)}}:{unsubscribe(){}}}).pipe((0,Be.U)(i=>{const{snapshot:u,prevKey:c}=i;let p=null;return u.exists()&&(p=u.key),{type:e,payload:u,prevKey:c,key:p}}),(0,jr.B)())}function gk(n,e){const t=n.length;for(let r=0;r<t;r++)if(n[r].payload.key===e)return r;return-1}function sV(n,e){const{payload:t,prevKey:r,key:i}=e,u=gk(n,i),c=function iV(n,e){if(dk(e))return 0;{const t=gk(n,e);return-1===t?n.length:t+1}}(n,r);switch(e.type){case"value":if(e.payload&&e.payload.exists()){let p=null;e.payload.forEach(m=>{const b={payload:m,type:"value",prevKey:p,key:m.key};return p=m.key,n=[...n,b],!1})}return n;case"child_added":if(u>-1){const p=n[u-1];(p&&p.key||null)!==r&&(n=n.filter(m=>m.payload.key!==t.key)).splice(c,0,e)}else{if(null==r)return[e,...n];(n=n.slice()).splice(c,0,e)}return n;case"child_removed":return n.filter(p=>p.payload.key!==t.key);case"child_changed":return n.map(p=>p.payload.key===i?e:p);case"child_moved":if(u>-1){const p=n.splice(u,1)[0];return(n=n.slice()).splice(c,0,p),n}return n;default:return n}}function mk(n){return(dk(n)||0===n.length)&&(n=["child_added","child_removed","child_changed","child_moved"]),n}function yk(n,e,t){return function rV(n,e,t){return MC(n,"value","once",t).pipe((0,_i.w)(r=>{const i=[(0,bs.of)(r)];return e.forEach(u=>i.push(MC(n,u,"on",t))),(0,Oo.T)(...i).pipe((0,ph.R)(sV,[]))}),(0,g0.x)())}(n,e=mk(e),t)}function _k(n,e,t){const r=(e=mk(e)).map(i=>MC(n,i,"on",t));return(0,Oo.T)(...r)}function vk(n,e){return function(r,i){return pk(r,{stringCase:()=>n.child(r)[e](i),firebaseCase:()=>r[e](i),snapshotCase:()=>r.ref[e](i)})}}function cV(n){return function(t){return t?pk(t,{stringCase:()=>n.child(t).remove(),firebaseCase:()=>t.remove(),snapshotCase:()=>t.ref.remove()}):n.remove()}}function Ek(n,e){return function(){return MC(n,"value","on",e)}}!function eV(n){n.INTERNAL.registerComponent(new ri.wA("database-compat",(e,{instanceIdentifier:t})=>{const r=e.getProvider("app-compat").getImmediate(),i=e.getProvider("database").getImmediate({identifier:t});return new AC(i,r)},"PUBLIC").setServiceProps({Reference:Ju,Query:sa,Database:AC,DataSnapshot:Wp,enableLogging:LU,INTERNAL:JU,ServerValue:XU}).setMultipleInstances(!0)),n.registerVersion("@firebase/database-compat","0.3.4")}(m0.Z);const hV=new w.OlP("angularfire2.realtimeDatabaseURL"),fV=new w.OlP("angularfire2.database.use-emulator");let pV=(()=>{class n{constructor(t,r,i,u,c,p,m,b,O,U,J,ce,we,Ve,Ye){this.schedulers=p;const Ot=m,en=(0,gr.on)(t,c,r);b&&Va(en,c,O,J,ce,we,U,Ve),this.database=(0,gr.cc)(`${en.name}.database.${i}`,"AngularFireDatabase",en.name,()=>{const It=c.runOutsideAngular(()=>en.database(i||void 0));return Ot&&It.useEmulator(...Ot),It},[Ot])}list(t,r){const i=this.schedulers.ngZone.runOutsideAngular(()=>fk(this.database,t));let u=i;return r&&(u=r(i)),function lV(n,e){const t=e.schedulers.outsideAngular,r=e.schedulers.ngZone.run(()=>n.ref);return{query:n,update:vk(r,"update"),set:vk(r,"set"),push:i=>r.push(i),remove:cV(r),snapshotChanges:i=>yk(n,i,t).pipe(Cn.iC),stateChanges:i=>_k(n,i,t).pipe(Cn.iC),auditTrail:i=>function oV(n,e,t){return function uV(n,e,t){return function aV(n,e){return MC(n,"value","on",e).pipe((0,Be.U)(t=>{let r;return t.payload.forEach(i=>(r=i.key,!1)),{data:t,lastKeyToLoad:r}}))}(n,t).pipe(function sF(...n){const e=(0,Me.jO)(n);return(0,Qo.e)((t,r)=>{const i=n.length,u=new Array(i);let c=n.map(()=>!1),p=!1;for(let m=0;m<i;m++)(0,ze.Xf)(n[m]).subscribe((0,oe.x)(r,b=>{u[m]=b,!p&&!c[m]&&(c[m]=!0,(p=c.every(rF.y))&&(c=null))},iF.Z));t.subscribe((0,oe.x)(r,m=>{if(p){const b=[m,...u];r.next(e?e(...b):b)}}))})}(e),(0,Be.U)(([i,u])=>{const c=i.lastKeyToLoad,p=u.map(m=>m.key);return{actions:u,lastKeyToLoad:c,loadedKeys:p}}),function oF(n){return(0,Qo.e)((e,t)=>{let r=!1,i=0;e.subscribe((0,oe.x)(t,u=>(r||(r=!n(u,i++)))&&t.next(u)))})}(i=>-1===i.loadedKeys.indexOf(i.lastKeyToLoad)),(0,Be.U)(i=>i.actions))}(n,_k(n,e).pipe((0,ph.R)((i,u)=>[...i,u],[])),t)}(n,i,t).pipe(Cn.iC),valueChanges:(i,u)=>yk(n,i,t).pipe((0,Be.U)(p=>p.map(m=>u&&u.idField?Object.assign(Object.assign({},m.payload.val()),{[u.idField]:m.key}):m.payload.val())),Cn.iC)}}(u,this)}object(t){return function dV(n,e){return{query:n,snapshotChanges:()=>Ek(n,e.schedulers.outsideAngular)().pipe(Cn.iC),update:t=>n.ref.update(t),set:t=>n.ref.set(t),remove:()=>n.ref.remove(),valueChanges:()=>Ek(n,e.schedulers.outsideAngular)().pipe(Cn.iC,(0,Be.U)(r=>r.payload.exists()?r.payload.val():null))}}(this.schedulers.ngZone.runOutsideAngular(()=>fk(this.database,t)),this)}createPushId(){return this.schedulers.ngZone.runOutsideAngular(()=>this.database.ref()).push().key}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(gr.Dh),w.LFG(gr.xv,8),w.LFG(hV,8),w.LFG(w.Lbi),w.LFG(w.R0b),w.LFG(Cn.HU),w.LFG(fV,8),w.LFG(Bu,8),w.LFG(pc,8),w.LFG(Wc,8),w.LFG(qc,8),w.LFG(Zc,8),w.LFG(rf,8),w.LFG(pu,8),w.LFG(Lo,8))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac,providedIn:"any"}),n})(),gV=(()=>{class n{constructor(){Ua.Z.registerVersion("angularfire",Cn.q4.full,"rtdb-compat")}}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[pV]}),n})();const wk_firebase={apiKey:"AIzaSyC4VbPqDTFa3jtdSVVEbSyO0VW-_KpEVos",authDomain:"bt21cse087.firebaseapp.com",projectId:"bt21cse087",storageBucket:"bt21cse087.appspot.com",messagingSenderId:"829689502685",appId:"1:829689502685:web:ec29a2d21a437b0ca27434"};var mV=j(6328),Ck=j(4716);class ES{}class wS{}class Ud{constructor(e){this.normalizedNames=new Map,this.lazyUpdate=null,e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(t=>{const r=t.indexOf(":");if(r>0){const i=t.slice(0,r),u=i.toLowerCase(),c=t.slice(r+1).trim();this.maybeSetNormalizedName(i,u),this.headers.has(u)?this.headers.get(u).push(c):this.headers.set(u,[c])}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((t,r)=>{this.setHeaderEntries(r,t)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([t,r])=>{this.setHeaderEntries(t,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const t=this.headers.get(e.toLowerCase());return t&&t.length>0?t[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,t){return this.clone({name:e,value:t,op:"a"})}set(e,t){return this.clone({name:e,value:t,op:"s"})}delete(e,t){return this.clone({name:e,value:t,op:"d"})}maybeSetNormalizedName(e,t){this.normalizedNames.has(t)||this.normalizedNames.set(t,e)}init(){this.lazyInit&&(this.lazyInit instanceof Ud?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(t=>{this.headers.set(t,e.headers.get(t)),this.normalizedNames.set(t,e.normalizedNames.get(t))})}clone(e){const t=new Ud;return t.lazyInit=this.lazyInit&&this.lazyInit instanceof Ud?this.lazyInit:this,t.lazyUpdate=(this.lazyUpdate||[]).concat([e]),t}applyUpdate(e){const t=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,t);const i=("a"===e.op?this.headers.get(t):void 0)||[];i.push(...r),this.headers.set(t,i);break;case"d":const u=e.value;if(u){let c=this.headers.get(t);if(!c)return;c=c.filter(p=>-1===u.indexOf(p)),0===c.length?(this.headers.delete(t),this.normalizedNames.delete(t)):this.headers.set(t,c)}else this.headers.delete(t),this.normalizedNames.delete(t)}}setHeaderEntries(e,t){const r=(Array.isArray(t)?t:[t]).map(u=>u.toString()),i=e.toLowerCase();this.headers.set(i,r),this.maybeSetNormalizedName(e,i)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(t=>e(this.normalizedNames.get(t),this.headers.get(t)))}}class yV{encodeKey(e){return Ik(e)}encodeValue(e){return Ik(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const vV=/%(\d[a-f0-9])/gi,EV={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function Ik(n){return encodeURIComponent(n).replace(vV,(e,t)=>EV[t]??e)}function CS(n){return`${n}`}class qp{constructor(e={}){if(this.updates=null,this.cloneFrom=null,this.encoder=e.encoder||new yV,e.fromString){if(e.fromObject)throw new Error("Cannot specify both fromString and fromObject.");this.map=function _V(n,e){const t=new Map;return n.length>0&&n.replace(/^\?/,"").split("&").forEach(i=>{const u=i.indexOf("="),[c,p]=-1==u?[e.decodeKey(i),""]:[e.decodeKey(i.slice(0,u)),e.decodeValue(i.slice(u+1))],m=t.get(c)||[];m.push(p),t.set(c,m)}),t}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(t=>{const r=e.fromObject[t],i=Array.isArray(r)?r.map(CS):[CS(r)];this.map.set(t,i)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const t=this.map.get(e);return t?t[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,t){return this.clone({param:e,value:t,op:"a"})}appendAll(e){const t=[];return Object.keys(e).forEach(r=>{const i=e[r];Array.isArray(i)?i.forEach(u=>{t.push({param:r,value:u,op:"a"})}):t.push({param:r,value:i,op:"a"})}),this.clone(t)}set(e,t){return this.clone({param:e,value:t,op:"s"})}delete(e,t){return this.clone({param:e,value:t,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const t=this.encoder.encodeKey(e);return this.map.get(e).map(r=>t+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const t=new qp({encoder:this.encoder});return t.cloneFrom=this.cloneFrom||this,t.updates=(this.updates||[]).concat(e),t}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const t=("a"===e.op?this.map.get(e.param):void 0)||[];t.push(CS(e.value)),this.map.set(e.param,t);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const i=r.indexOf(CS(e.value));-1!==i&&r.splice(i,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}class wV{constructor(){this.map=new Map}set(e,t){return this.map.set(e,t),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}function bk(n){return typeof ArrayBuffer<"u"&&n instanceof ArrayBuffer}function Dk(n){return typeof Blob<"u"&&n instanceof Blob}function Tk(n){return typeof FormData<"u"&&n instanceof FormData}class xC{constructor(e,t,r,i){let u;if(this.url=t,this.body=null,this.reportProgress=!1,this.withCredentials=!1,this.responseType="json",this.method=e.toUpperCase(),function CV(n){switch(n){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||i?(this.body=void 0!==r?r:null,u=i):u=r,u&&(this.reportProgress=!!u.reportProgress,this.withCredentials=!!u.withCredentials,u.responseType&&(this.responseType=u.responseType),u.headers&&(this.headers=u.headers),u.context&&(this.context=u.context),u.params&&(this.params=u.params)),this.headers||(this.headers=new Ud),this.context||(this.context=new wV),this.params){const c=this.params.toString();if(0===c.length)this.urlWithParams=t;else{const p=t.indexOf("?");this.urlWithParams=t+(-1===p?"?":p<t.length-1?"&":"")+c}}else this.params=new qp,this.urlWithParams=t}serializeBody(){return null===this.body?null:bk(this.body)||Dk(this.body)||Tk(this.body)||function IV(n){return typeof URLSearchParams<"u"&&n instanceof URLSearchParams}(this.body)||"string"==typeof this.body?this.body:this.body instanceof qp?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||Tk(this.body)?null:Dk(this.body)?this.body.type||null:bk(this.body)?null:"string"==typeof this.body?"text/plain":this.body instanceof qp?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?"application/json":null}clone(e={}){const t=e.method||this.method,r=e.url||this.url,i=e.responseType||this.responseType,u=void 0!==e.body?e.body:this.body,c=void 0!==e.withCredentials?e.withCredentials:this.withCredentials,p=void 0!==e.reportProgress?e.reportProgress:this.reportProgress;let m=e.headers||this.headers,b=e.params||this.params;const O=e.context??this.context;return void 0!==e.setHeaders&&(m=Object.keys(e.setHeaders).reduce((U,J)=>U.set(J,e.setHeaders[J]),m)),e.setParams&&(b=Object.keys(e.setParams).reduce((U,J)=>U.set(J,e.setParams[J]),b)),new xC(t,r,u,{params:b,headers:m,context:O,reportProgress:p,responseType:i,withCredentials:c})}}var lo=(()=>((lo=lo||{})[lo.Sent=0]="Sent",lo[lo.UploadProgress=1]="UploadProgress",lo[lo.ResponseHeader=2]="ResponseHeader",lo[lo.DownloadProgress=3]="DownloadProgress",lo[lo.Response=4]="Response",lo[lo.User=5]="User",lo))();class xR{constructor(e,t=200,r="OK"){this.headers=e.headers||new Ud,this.status=void 0!==e.status?e.status:t,this.statusText=e.statusText||r,this.url=e.url||null,this.ok=this.status>=200&&this.status<300}}class RR extends xR{constructor(e={}){super(e),this.type=lo.ResponseHeader}clone(e={}){return new RR({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Pv extends xR{constructor(e={}){super(e),this.type=lo.Response,this.body=void 0!==e.body?e.body:null}clone(e={}){return new Pv({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Sk extends xR{constructor(e){super(e,0,"Unknown Error"),this.name="HttpErrorResponse",this.ok=!1,this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}function NR(n,e){return{body:e,headers:n.headers,context:n.context,observe:n.observe,params:n.params,reportProgress:n.reportProgress,responseType:n.responseType,withCredentials:n.withCredentials}}let Ak=(()=>{class n{constructor(t){this.handler=t}request(t,r,i={}){let u;if(t instanceof xC)u=t;else{let m,b;m=i.headers instanceof Ud?i.headers:new Ud(i.headers),i.params&&(b=i.params instanceof qp?i.params:new qp({fromObject:i.params})),u=new xC(t,r,void 0!==i.body?i.body:null,{headers:m,context:i.context,params:b,reportProgress:i.reportProgress,responseType:i.responseType||"json",withCredentials:i.withCredentials})}const c=(0,bs.of)(u).pipe((0,mV.b)(m=>this.handler.handle(m)));if(t instanceof xC||"events"===i.observe)return c;const p=c.pipe((0,ma.h)(m=>m instanceof Pv));switch(i.observe||"body"){case"body":switch(u.responseType){case"arraybuffer":return p.pipe((0,Be.U)(m=>{if(null!==m.body&&!(m.body instanceof ArrayBuffer))throw new Error("Response is not an ArrayBuffer.");return m.body}));case"blob":return p.pipe((0,Be.U)(m=>{if(null!==m.body&&!(m.body instanceof Blob))throw new Error("Response is not a Blob.");return m.body}));case"text":return p.pipe((0,Be.U)(m=>{if(null!==m.body&&"string"!=typeof m.body)throw new Error("Response is not a string.");return m.body}));default:return p.pipe((0,Be.U)(m=>m.body))}case"response":return p;default:throw new Error(`Unreachable: unhandled observe type ${i.observe}}`)}}delete(t,r={}){return this.request("DELETE",t,r)}get(t,r={}){return this.request("GET",t,r)}head(t,r={}){return this.request("HEAD",t,r)}jsonp(t,r){return this.request("JSONP",t,{params:(new qp).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(t,r={}){return this.request("OPTIONS",t,r)}patch(t,r,i={}){return this.request("PATCH",t,NR(i,r))}post(t,r,i={}){return this.request("POST",t,NR(i,r))}put(t,r,i={}){return this.request("PUT",t,NR(i,r))}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(ES))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac}),n})();function Rk(n,e){return e(n)}function DV(n,e){return(t,r)=>e.intercept(t,{handle:i=>n(i,r)})}const SV=new w.OlP(""),RC=new w.OlP(""),Nk=new w.OlP("");function AV(){let n=null;return(e,t)=>{null===n&&(n=((0,w.f3M)(SV,{optional:!0})??[]).reduceRight(DV,Rk));const r=(0,w.f3M)(w.HDt),i=r.add();return n(e,t).pipe((0,Ck.x)(()=>r.remove(i)))}}let Ok=(()=>{class n extends ES{constructor(t,r){super(),this.backend=t,this.injector=r,this.chain=null,this.pendingTasks=(0,w.f3M)(w.HDt)}handle(t){if(null===this.chain){const i=Array.from(new Set([...this.injector.get(RC),...this.injector.get(Nk,[])]));this.chain=i.reduceRight((u,c)=>function TV(n,e,t){return(r,i)=>t.runInContext(()=>e(r,u=>n(u,i)))}(u,c,this.injector),Rk)}const r=this.pendingTasks.add();return this.chain(t,i=>this.backend.handle(i)).pipe((0,Ck.x)(()=>this.pendingTasks.remove(r)))}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(wS),w.LFG(w.lqb))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac}),n})();const NV=/^\)\]\}',?\n/;let kk=(()=>{class n{constructor(t){this.xhrFactory=t}handle(t){if("JSONP"===t.method)throw new w.vHH(-2800,!1);const r=this.xhrFactory;return(r.\u0275loadImpl?(0,ae.D)(r.\u0275loadImpl()):(0,bs.of)(null)).pipe((0,_i.w)(()=>new de.y(u=>{const c=r.build();if(c.open(t.method,t.urlWithParams),t.withCredentials&&(c.withCredentials=!0),t.headers.forEach((Ve,Ye)=>c.setRequestHeader(Ve,Ye.join(","))),t.headers.has("Accept")||c.setRequestHeader("Accept","application/json, text/plain, */*"),!t.headers.has("Content-Type")){const Ve=t.detectContentTypeHeader();null!==Ve&&c.setRequestHeader("Content-Type",Ve)}if(t.responseType){const Ve=t.responseType.toLowerCase();c.responseType="json"!==Ve?Ve:"text"}const p=t.serializeBody();let m=null;const b=()=>{if(null!==m)return m;const Ve=c.statusText||"OK",Ye=new Ud(c.getAllResponseHeaders()),Ot=function OV(n){return"responseURL"in n&&n.responseURL?n.responseURL:/^X-Request-URL:/m.test(n.getAllResponseHeaders())?n.getResponseHeader("X-Request-URL"):null}(c)||t.url;return m=new RR({headers:Ye,status:c.status,statusText:Ve,url:Ot}),m},O=()=>{let{headers:Ve,status:Ye,statusText:Ot,url:en}=b(),It=null;204!==Ye&&(It=typeof c.response>"u"?c.responseText:c.response),0===Ye&&(Ye=It?200:0);let Kt=Ye>=200&&Ye<300;if("json"===t.responseType&&"string"==typeof It){const Mn=It;It=It.replace(NV,"");try{It=""!==It?JSON.parse(It):null}catch(Fn){It=Mn,Kt&&(Kt=!1,It={error:Fn,text:It})}}Kt?(u.next(new Pv({body:It,headers:Ve,status:Ye,statusText:Ot,url:en||void 0})),u.complete()):u.error(new Sk({error:It,headers:Ve,status:Ye,statusText:Ot,url:en||void 0}))},U=Ve=>{const{url:Ye}=b(),Ot=new Sk({error:Ve,status:c.status||0,statusText:c.statusText||"Unknown Error",url:Ye||void 0});u.error(Ot)};let J=!1;const ce=Ve=>{J||(u.next(b()),J=!0);let Ye={type:lo.DownloadProgress,loaded:Ve.loaded};Ve.lengthComputable&&(Ye.total=Ve.total),"text"===t.responseType&&c.responseText&&(Ye.partialText=c.responseText),u.next(Ye)},we=Ve=>{let Ye={type:lo.UploadProgress,loaded:Ve.loaded};Ve.lengthComputable&&(Ye.total=Ve.total),u.next(Ye)};return c.addEventListener("load",O),c.addEventListener("error",U),c.addEventListener("timeout",U),c.addEventListener("abort",U),t.reportProgress&&(c.addEventListener("progress",ce),null!==p&&c.upload&&c.upload.addEventListener("progress",we)),c.send(p),u.next({type:lo.Sent}),()=>{c.removeEventListener("error",U),c.removeEventListener("abort",U),c.removeEventListener("load",O),c.removeEventListener("timeout",U),t.reportProgress&&(c.removeEventListener("progress",ce),null!==p&&c.upload&&c.upload.removeEventListener("progress",we)),c.readyState!==c.DONE&&c.abort()}})))}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(Q.JF))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac}),n})();const OR=new w.OlP("XSRF_ENABLED"),Fk=new w.OlP("XSRF_COOKIE_NAME",{providedIn:"root",factory:()=>"XSRF-TOKEN"}),Lk=new w.OlP("XSRF_HEADER_NAME",{providedIn:"root",factory:()=>"X-XSRF-TOKEN"});class Uk{}let FV=(()=>{class n{constructor(t,r,i){this.doc=t,this.platform=r,this.cookieName=i,this.lastCookieString="",this.lastToken=null,this.parseCount=0}getToken(){if("server"===this.platform)return null;const t=this.doc.cookie||"";return t!==this.lastCookieString&&(this.parseCount++,this.lastToken=(0,Q.Mx)(t,this.cookieName),this.lastCookieString=t),this.lastToken}}return n.\u0275fac=function(t){return new(t||n)(w.LFG(Q.K0),w.LFG(w.Lbi),w.LFG(Fk))},n.\u0275prov=w.Yz7({token:n,factory:n.\u0275fac}),n})();function LV(n,e){const t=n.url.toLowerCase();if(!(0,w.f3M)(OR)||"GET"===n.method||"HEAD"===n.method||t.startsWith("http://")||t.startsWith("https://"))return e(n);const r=(0,w.f3M)(Uk).getToken(),i=(0,w.f3M)(Lk);return null!=r&&!n.headers.has(i)&&(n=n.clone({headers:n.headers.set(i,r)})),e(n)}var ds=(()=>((ds=ds||{})[ds.Interceptors=0]="Interceptors",ds[ds.LegacyInterceptors=1]="LegacyInterceptors",ds[ds.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",ds[ds.NoXsrfProtection=3]="NoXsrfProtection",ds[ds.JsonpSupport=4]="JsonpSupport",ds[ds.RequestsMadeViaParent=5]="RequestsMadeViaParent",ds[ds.Fetch=6]="Fetch",ds))();function Zm(n,e){return{\u0275kind:n,\u0275providers:e}}function UV(...n){const e=[Ak,kk,Ok,{provide:ES,useExisting:Ok},{provide:wS,useExisting:kk},{provide:RC,useValue:LV,multi:!0},{provide:OR,useValue:!0},{provide:Uk,useClass:FV}];for(const t of n)e.push(...t.\u0275providers);return(0,w.MR2)(e)}const Vk=new w.OlP("LEGACY_INTERCEPTOR_FN");let Bk=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=w.oAB({type:n}),n.\u0275inj=w.cJS({providers:[UV(Zm(ds.LegacyInterceptors,[{provide:Vk,useFactory:AV},{provide:RC,useExisting:Vk,multi:!0}]))]}),n})(),zV=(()=>{class n{}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)}),(0,$.Z)(n,"\u0275mod",w.oAB({type:n})),(0,$.Z)(n,"\u0275inj",w.cJS({imports:[zo,Q.ez,Bk,ni.Bz]})),n})();var WV=j(6587);let Zp=(()=>{class n{constructor(t,r,i,u){(0,$.Z)(this,"afs",void 0),(0,$.Z)(this,"afAuth",void 0),(0,$.Z)(this,"router",void 0),(0,$.Z)(this,"ngZone",void 0),(0,$.Z)(this,"userData",void 0),this.afs=t,this.afAuth=r,this.router=i,this.ngZone=u,this.afAuth.authState.subscribe(c=>{c?(this.userData=c,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user","null"),JSON.parse(localStorage.getItem("user")))})}SignIn(t,r){return this.afAuth.signInWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),this.afAuth.authState.subscribe(u=>{u&&this.router.navigate(["dashboard"])})}).catch(i=>{window.alert(i.message)})}SignUp(t,r){return this.afAuth.createUserWithEmailAndPassword(t,r).then(i=>{this.SetUserData(i.user),window.alert("SignUp Succesfull")}).catch(i=>{window.alert(i.message)})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox.")}).catch(r=>{window.alert(r)})}get isLoggedIn(){return null!==JSON.parse(localStorage.getItem("user"))}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.LFG(nO),w.LFG(Bu),w.LFG(ni.F0),w.LFG(w.R0b))}),(0,$.Z)(n,"\u0275prov",w.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})(),qV=(()=>{class n{constructor(t){(0,$.Z)(this,"authService",void 0),this.authService=t}ngOnInit(){}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.Y36(Zp))}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-sign-in"]],decls:25,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","text","placeholder","Enter abc@gmail.com","required","",1,"formControl"],["userName",""],["type","password","placeholder","Enter 123456","required","",1,"formControl"],["userPassword",""],["type","button","value","Log in",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"forgotPassword"],["routerLink","/forgot-password"],[1,"redirectToLogin"],["routerLink","/register-user",1,"redirect"]],template:function(t,r){if(1&t){const i=w.EpF();w.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),w._uU(4,"Sign In"),w.qZA(),w.TgZ(5,"div",3),w._UZ(6,"input",4,5),w.qZA(),w.TgZ(8,"div",3),w._UZ(9,"input",6,7),w.qZA(),w.TgZ(11,"div",3)(12,"input",8),w.NdJ("click",function(){w.CHM(i);const c=w.MAs(7),p=w.MAs(10);return w.KtG(r.authService.SignIn(c.value,p.value))}),w.qZA()(),w.TgZ(13,"div",3)(14,"span",9)(15,"span",10),w._uU(16,"Or"),w.qZA()()(),w.TgZ(17,"div",11)(18,"span",12),w._uU(19,"Forgot Password?"),w.qZA()()(),w.TgZ(20,"div",13)(21,"span"),w._uU(22,"Don't have an account?"),w.TgZ(23,"span",14),w._uU(24," Sign Up"),w.qZA()()()()()}},dependencies:[ni.rH],styles:[".authBlock[_ngcontent-%COMP%]{border:5px solid #000;border-radius:15px}.redirectToLogin[_ngcontent-%COMP%], .redirect[_ngcontent-%COMP%]{color:#000}"]})),n})(),ZV=(()=>{class n{constructor(t){(0,$.Z)(this,"authService",void 0),this.authService=t}ngOnInit(){}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.Y36(Zp))}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-sign-up"]],decls:22,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["userEmail",""],["type","password","placeholder","Password","required","",1,"formControl"],["userPwd",""],["type","button","value","Sign Up",1,"btn","btnPrimary",3,"click"],[1,"or"],[1,"orInner"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=w.EpF();w.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),w._uU(4,"Sign Up"),w.qZA(),w.TgZ(5,"div",3),w._UZ(6,"input",4,5),w.qZA(),w.TgZ(8,"div",3),w._UZ(9,"input",6,7),w.qZA(),w.TgZ(11,"div",3)(12,"input",8),w.NdJ("click",function(){w.CHM(i);const c=w.MAs(7),p=w.MAs(10);return w.KtG(r.authService.SignUp(c.value,p.value))}),w.qZA()(),w.TgZ(13,"div",3)(14,"span",9)(15,"span",10),w._uU(16,"Or"),w.qZA()()(),w.TgZ(17,"div",11)(18,"span"),w._uU(19,"Already have an account? "),w.TgZ(20,"span",12),w._uU(21,"Log In"),w.qZA()()()()()()}},dependencies:[ni.rH],styles:[".redirectToLogin[_ngcontent-%COMP%], .redirect[_ngcontent-%COMP%]{color:#000}.authBlock[_ngcontent-%COMP%]{border:5px solid #000;border-radius:15px}"]})),n})();function KV(n,e){if(1&n&&(w.TgZ(0,"div",3)(1,"div",19)(2,"div",20),w._UZ(3,"img",21),w.TgZ(4,"div",22)(5,"h1"),w._uU(6,"Hello: "),w.TgZ(7,"strong"),w._uU(8),w.qZA()(),w.TgZ(9,"p"),w._uU(10,"User ID: "),w.TgZ(11,"strong"),w._uU(12),w.qZA()(),w.TgZ(13,"p"),w._uU(14,"Email: "),w.TgZ(15,"strong"),w._uU(16),w.qZA()()()()()()),2&n){const t=e.ngIf;w.xp6(3),w.s9C("src",t.photoURL?t.photoURL:"/assets/dummy-user.png",w.LSH),w.s9C("alt",t.displayName),w.xp6(5),w.Oqu(t.displayName?t.displayName:"User"),w.xp6(4),w.Oqu(t.uid),w.xp6(4),w.Oqu(t.email)}}let YV=(()=>{class n{constructor(t,r){(0,$.Z)(this,"router",void 0),(0,$.Z)(this,"authService",void 0),this.router=t,this.authService=r}navigateToAssignment1(){this.router.navigate(["/assignment1"])}navigateToAssignment2(){this.router.navigate(["/assignment2"])}ngOnInit(){}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.Y36(ni.F0),w.Y36(Zp))}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-dashboard"]],decls:29,vars:1,consts:[[1,"navbar","navbar-dark","fixed-top","bg-dark","flex-md-nowrap","p-0","shadow"],[1,"navbar-brand","col-sm-3","col-md-2","mr-0"],[1,"container-fluid"],[1,"row"],[1,"col-md-2","d-md-block","bg-light","sidebar"],[1,"sidebar-sticky"],[1,"nav","flex-column"],[1,"nav-item"],[1,"nav-link","active"],[1,"fas","fa-user"],[1,"btn","btn-link","nav-link",3,"click"],[1,"fas","fa-home"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],["role","main",1,"col-md-9","ml-sm-auto","col-lg-10","px-4"],[1,"inner-adjust"],[1,"pt-3","pb-2","mb-3","border-bottom"],[1,"h2"],["class","row",4,"ngIf"],[1,"col-md-12"],[1,"media"],[1,"align-self-start","mr-5","img-thumbnail","rounded-circle",3,"src","alt"],[1,"media-body"]],template:function(t,r){1&t&&(w.TgZ(0,"nav",0),w._UZ(1,"a",1),w.qZA(),w.TgZ(2,"div",2)(3,"div",3)(4,"nav",4)(5,"div",5)(6,"ul",6)(7,"li",7)(8,"a",8),w._UZ(9,"i",9),w._uU(10,"User Profile "),w.qZA()(),w.TgZ(11,"li",7)(12,"button",10),w.NdJ("click",function(){return r.navigateToAssignment1()}),w._UZ(13,"i",11),w._uU(14,"Assignment 1 "),w.qZA()(),w.TgZ(15,"li",7)(16,"button",10),w.NdJ("click",function(){return r.navigateToAssignment2()}),w._UZ(17,"i",11),w._uU(18,"Assignment 2 "),w.qZA()(),w.TgZ(19,"li",7)(20,"a",12),w.NdJ("click",function(){return r.authService.SignOut()}),w._UZ(21,"i",13),w._uU(22,"Log out "),w.qZA()()()()(),w.TgZ(23,"main",14)(24,"div",15)(25,"div",16)(26,"h1",17),w._uU(27,"User Profile"),w.qZA()(),w.YNc(28,KV,17,5,"div",18),w.qZA()()()()),2&t&&(w.xp6(28),w.Q6J("ngIf",r.authService.userData))},dependencies:[Q.O5]})),n})(),QV=(()=>{class n{constructor(t){(0,$.Z)(this,"authService",void 0),this.authService=t}ngOnInit(){}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.Y36(Zp))}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-forgot-password"]],decls:17,vars:0,consts:[[1,"displayTable"],[1,"displayTableCell"],[1,"authBlock"],[1,"text-center"],[1,"formGroup"],["type","email","placeholder","Email Address","required","",1,"formControl"],["passwordResetEmail",""],["type","submit","value","Reset Password",1,"btn","btnPrimary",3,"click"],[1,"redirectToLogin"],["routerLink","/sign-in",1,"redirect"]],template:function(t,r){if(1&t){const i=w.EpF();w.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"h3"),w._uU(4,"Reset Password"),w.qZA(),w.TgZ(5,"p",3),w._uU(6," Please enter your email address to request a password reset. "),w.qZA(),w.TgZ(7,"div",4),w._UZ(8,"input",5,6),w.qZA(),w.TgZ(10,"div",4)(11,"input",7),w.NdJ("click",function(){w.CHM(i);const c=w.MAs(9);return w.KtG(r.authService.ForgotPassword(c.value))}),w.qZA()()(),w.TgZ(12,"div",8)(13,"span"),w._uU(14,"Go back to ? "),w.TgZ(15,"span",9),w._uU(16,"Log In"),w.qZA()()()()()}},dependencies:[ni.rH]})),n})();const JV=function(){return["/dashboard"]};let XV=(()=>{class n{constructor(t,r){(0,$.Z)(this,"router",void 0),(0,$.Z)(this,"authService",void 0),this.router=t,this.authService=r}navigateToQuestion(t){this.router.navigate([`/assignment1/q${t}`])}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.Y36(ni.F0),w.Y36(Zp))}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-home"]],decls:28,vars:2,consts:[[1,"container"],[1,"info"],[1,"navigation-button",3,"routerLink"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"header"],[1,"buttons-container"],[1,"question-button",3,"click"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0)(1,"div",1)(2,"a",2),w._uU(3," Home "),w.qZA(),w.TgZ(4,"a",3),w.NdJ("click",function(){return r.authService.SignOut()}),w._UZ(5,"i",4),w._uU(6,"Log out "),w.qZA()(),w.TgZ(7,"h2",5),w._uU(8,"Assignment1 Home"),w.qZA(),w.TgZ(9,"div",6)(10,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(1)}),w._uU(11,"Q1"),w.qZA(),w.TgZ(12,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(2)}),w._uU(13,"Q2"),w.qZA(),w.TgZ(14,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(3)}),w._uU(15,"Q3"),w.qZA(),w.TgZ(16,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(4)}),w._uU(17,"Q4"),w.qZA(),w.TgZ(18,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(5)}),w._uU(19,"Q5"),w.qZA(),w.TgZ(20,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(6)}),w._uU(21,"Q6"),w.qZA(),w.TgZ(22,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(7)}),w._uU(23,"Q7"),w.qZA(),w.TgZ(24,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(8)}),w._uU(25,"Q8"),w.qZA(),w.TgZ(26,"button",7),w.NdJ("click",function(){return r.navigateToQuestion(9)}),w._uU(27,"Q9"),w.qZA()()()),2&t&&(w.xp6(2),w.Q6J("routerLink",w.DdM(1,JV)))},dependencies:[ni.rH],styles:[".navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:10px;background-color:red;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s;display:block}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.header[_ngcontent-%COMP%]{text-decoration:underline;margin:20px}.buttons-container[_ngcontent-%COMP%]{display:grid;grid-template-columns:repeat(auto-fill,minmax(150px,1fr));gap:10px;justify-content:center;align-items:center}.question-button[_ngcontent-%COMP%]{padding:10px;font-size:16px;background-color:#3498db;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s ease}.question-button[_ngcontent-%COMP%]:hover{background-color:#2980b9}"]})),n})(),eB=(()=>{class n{constructor(t){(0,$.Z)(this,"http",void 0),this.http=t}getAll(){return this.http.get("https://restcountries.com/v3.1/all")}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.LFG(Ak))}),(0,$.Z)(n,"\u0275prov",w.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})();function tB(n,e){if(1&n&&(w.TgZ(0,"div",10)(1,"div",11)(2,"h3"),w._uU(3),w.qZA(),w._UZ(4,"img",12),w.qZA()()),2&n){const t=e.$implicit;w.xp6(3),w.hij("",t.name.official," "),w.xp6(1),w.Q6J("src",t.flags.png,w.LSH)}}const nB=function(){return["/dashboard"]},rB=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:qV},{path:"register-user",component:ZV},{path:"dashboard",component:YV,canActivate:[(()=>{class n{constructor(t,r){(0,$.Z)(this,"authService",void 0),(0,$.Z)(this,"router",void 0),this.authService=t,this.router=r}canActivate(t,r){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.LFG(Zp),w.LFG(ni.F0))}),(0,$.Z)(n,"\u0275prov",w.Yz7({token:n,factory:n.\u0275fac,providedIn:"root"})),n})()]},{path:"forgot-password",component:QV},{path:"assignment1",component:XV},{path:"assignment2",component:(()=>{class n{constructor(t,r){(0,$.Z)(this,"country",void 0),(0,$.Z)(this,"authService",void 0),(0,$.Z)(this,"countries",[]),(0,$.Z)(this,"displayCountries",[]),(0,$.Z)(this,"searchText",""),this.country=t,this.authService=r}ngOnInit(){this.getAllCountries()}getAllCountries(){this.country.getAll().subscribe(t=>{console.log("success ===>>>>",t),this.countries=t,this.displayCountries=this.countries},t=>{console.log("error ===>>>>",t)})}searchCountryByName(){this.displayCountries=this.countries.filter(t=>t.name.official.toLowerCase().includes(this.searchText.toLowerCase()))}}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)(w.Y36(eB),w.Y36(Zp))}),(0,$.Z)(n,"\u0275cmp",w.Xpm({type:n,selectors:[["app-countries"]],decls:14,vars:4,consts:[[1,"info"],[1,"navigation-button",3,"routerLink"],[1,"countries-list-title"],[1,"nav-link",3,"click"],[1,"fas","fa-sign-out-alt"],[1,"countries-container"],[1,"search-container"],["type","text","placeholder","Search country by name",3,"ngModel","input","ngModelChange"],[1,"countries-list"],["class","country-item",4,"ngFor","ngForOf"],[1,"country-item"],[1,"country-details"],["alt","",3,"src"]],template:function(t,r){1&t&&(w.TgZ(0,"div",0)(1,"a",1),w._uU(2," Home "),w.qZA()(),w.TgZ(3,"h2",2)(4,"strong"),w._uU(5,"Countries List"),w.qZA()(),w.TgZ(6,"a",3),w.NdJ("click",function(){return r.authService.SignOut()}),w._UZ(7,"i",4),w._uU(8,"Log out "),w.qZA(),w.TgZ(9,"div",5)(10,"div",6)(11,"input",7),w.NdJ("input",function(){return r.searchCountryByName()})("ngModelChange",function(u){return r.searchText=u}),w.qZA()(),w.TgZ(12,"div",8),w.YNc(13,tB,5,2,"div",9),w.qZA()()),2&t&&(w.xp6(1),w.Q6J("routerLink",w.DdM(3,nB)),w.xp6(10),w.Q6J("ngModel",r.searchText),w.xp6(2),w.Q6J("ngForOf",r.displayCountries))},dependencies:[ye,Un,xa,Q.sg,ni.rH],styles:[".navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:#007bff;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s}.country-item[_ngcontent-%COMP%]{margin-bottom:0;padding:0;border:1px solid #ddd;border-radius:5px;overflow:hidden}img[_ngcontent-%COMP%]{max-width:10%;height:auto;margin-left:10px}p[_ngcontent-%COMP%]{font-size:18px;margin-bottom:20px}.navigation-button[_ngcontent-%COMP%]{padding:10px;margin-bottom:20px;background-color:red;color:#fff;border:none;border-radius:5px;cursor:pointer;transition:background-color .3s;display:block}.navigation-button[_ngcontent-%COMP%]:hover{background-color:#0056b3}.country-item[_ngcontent-%COMP%]{margin-bottom:20px;padding:10px;border:1px solid #ddd;border-radius:5px;overflow:hidden}.country-details[_ngcontent-%COMP%]{display:flex;align-items:center}h2[_ngcontent-%COMP%]{margin-bottom:0}img[_ngcontent-%COMP%]{max-width:10%;height:auto;margin-left:auto;display:block}.left-section[_ngcontent-%COMP%]{max-width:60%}.right-section[_ngcontent-%COMP%]   img[_ngcontent-%COMP%]{border-radius:50%}.search-container[_ngcontent-%COMP%]{margin-left:43%;border:20px;margin-bottom:15px;border-radius:15px}.info[_ngcontent-%COMP%]{text-align:center;margin-bottom:15px;border-radius:15px}.countries-list-title[_ngcontent-%COMP%]{text-align:center;text-decoration:underline;font-weight:700;padding:10px}"]})),n})()},{path:"assignment1",loadChildren:()=>Promise.resolve().then(j.bind(j,6587)).then(n=>n.Assignment1Module)}];let iB=(()=>{class n{}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)}),(0,$.Z)(n,"\u0275mod",w.oAB({type:n})),(0,$.Z)(n,"\u0275inj",w.cJS({imports:[ni.Bz.forRoot(rB),ni.Bz]})),n})(),sB=(()=>{class n{}return(0,$.Z)(n,"\u0275fac",function(t){return new(t||n)}),(0,$.Z)(n,"\u0275mod",w.oAB({type:n,bootstrap:[ps]})),(0,$.Z)(n,"\u0275inj",w.cJS({providers:[Zp],imports:[E.b2,ni.Bz,zo,WV.Assignment1Module,zV,gr.hO.initializeApp(wk_firebase),Wd,Bk,nF,XS,gV,iB]})),n})();(0,w.G48)(),E.q6().bootstrapModule(sB).catch(n=>console.error(n))},5619:(bt,Pe,j)=>{j.d(Pe,{X:()=>w});var E=j(8645);class w extends E.x{constructor(Q){super(),this._value=Q}get value(){return this.getValue()}_subscribe(Q){const ae=super._subscribe(Q);return!ae.closed&&Q.next(this._value),ae}getValue(){const{hasError:Q,thrownError:ae,_value:de}=this;if(Q)throw ae;return this._throwIfClosed(),de}next(Q){super.next(this._value=Q)}}},5592:(bt,Pe,j)=>{j.d(Pe,{y:()=>ze});var E=j(305),w=j(7394),$=j(4850),Q=j(8407),ae=j(2653),de=j(4674),ve=j(1441);let ze=(()=>{class _e{constructor(Be){Be&&(this._subscribe=Be)}lift(Be){const gt=new _e;return gt.source=this,gt.operator=Be,gt}subscribe(Be,gt,et){const xe=function le(_e){return _e&&_e instanceof E.Lv||function oe(_e){return _e&&(0,de.m)(_e.next)&&(0,de.m)(_e.error)&&(0,de.m)(_e.complete)}(_e)&&(0,w.Nn)(_e)}(Be)?Be:new E.Hp(Be,gt,et);return(0,ve.x)(()=>{const{operator:Ge,source:Oe}=this;xe.add(Ge?Ge.call(xe,Oe):Oe?this._subscribe(xe):this._trySubscribe(xe))}),xe}_trySubscribe(Be){try{return this._subscribe(Be)}catch(gt){Be.error(gt)}}forEach(Be,gt){return new(gt=Me(gt))((et,xe)=>{const Ge=new E.Hp({next:Oe=>{try{Be(Oe)}catch(yt){xe(yt),Ge.unsubscribe()}},error:xe,complete:et});this.subscribe(Ge)})}_subscribe(Be){var gt;return null===(gt=this.source)||void 0===gt?void 0:gt.subscribe(Be)}[$.L](){return this}pipe(...Be){return(0,Q.U)(Be)(this)}toPromise(Be){return new(Be=Me(Be))((gt,et)=>{let xe;this.subscribe(Ge=>xe=Ge,Ge=>et(Ge),()=>gt(xe))})}}return _e.create=st=>new _e(st),_e})();function Me(_e){var st;return null!==(st=_e??ae.config.Promise)&&void 0!==st?st:Promise}},8645:(bt,Pe,j)=>{j.d(Pe,{x:()=>ve});var E=j(5592),w=j(7394);const Q=(0,j(2306).d)(Me=>function(){Me(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});var ae=j(9039),de=j(1441);let ve=(()=>{class Me extends E.y{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(le){const _e=new ze(this,this);return _e.operator=le,_e}_throwIfClosed(){if(this.closed)throw new Q}next(le){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const _e of this.currentObservers)_e.next(le)}})}error(le){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=le;const{observers:_e}=this;for(;_e.length;)_e.shift().error(le)}})}complete(){(0,de.x)(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:le}=this;for(;le.length;)le.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var le;return(null===(le=this.observers)||void 0===le?void 0:le.length)>0}_trySubscribe(le){return this._throwIfClosed(),super._trySubscribe(le)}_subscribe(le){return this._throwIfClosed(),this._checkFinalizedStatuses(le),this._innerSubscribe(le)}_innerSubscribe(le){const{hasError:_e,isStopped:st,observers:Be}=this;return _e||st?w.Lc:(this.currentObservers=null,Be.push(le),new w.w0(()=>{this.currentObservers=null,(0,ae.P)(Be,le)}))}_checkFinalizedStatuses(le){const{hasError:_e,thrownError:st,isStopped:Be}=this;_e?le.error(st):Be&&le.complete()}asObservable(){const le=new E.y;return le.source=this,le}}return Me.create=(oe,le)=>new ze(oe,le),Me})();class ze extends ve{constructor(oe,le){super(),this.destination=oe,this.source=le}next(oe){var le,_e;null===(_e=null===(le=this.destination)||void 0===le?void 0:le.next)||void 0===_e||_e.call(le,oe)}error(oe){var le,_e;null===(_e=null===(le=this.destination)||void 0===le?void 0:le.error)||void 0===_e||_e.call(le,oe)}complete(){var oe,le;null===(le=null===(oe=this.destination)||void 0===oe?void 0:oe.complete)||void 0===le||le.call(oe)}_subscribe(oe){var le,_e;return null!==(_e=null===(le=this.source)||void 0===le?void 0:le.subscribe(oe))&&void 0!==_e?_e:w.Lc}}},305:(bt,Pe,j)=>{j.d(Pe,{Hp:()=>et,Lv:()=>_e});var E=j(4674),w=j(7394),$=j(2653),Q=j(3894),ae=j(2420);const de=Me("C",void 0,void 0);function Me(Ae,Qe,ye){return{kind:Ae,value:Qe,error:ye}}var oe=j(7599),le=j(1441);class _e extends w.w0{constructor(Qe){super(),this.isStopped=!1,Qe?(this.destination=Qe,(0,w.Nn)(Qe)&&Qe.add(this)):this.destination=yt}static create(Qe,ye,Le){return new et(Qe,ye,Le)}next(Qe){this.isStopped?Oe(function ze(Ae){return Me("N",Ae,void 0)}(Qe),this):this._next(Qe)}error(Qe){this.isStopped?Oe(function ve(Ae){return Me("E",void 0,Ae)}(Qe),this):(this.isStopped=!0,this._error(Qe))}complete(){this.isStopped?Oe(de,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(Qe){this.destination.next(Qe)}_error(Qe){try{this.destination.error(Qe)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const st=Function.prototype.bind;function Be(Ae,Qe){return st.call(Ae,Qe)}class gt{constructor(Qe){this.partialObserver=Qe}next(Qe){const{partialObserver:ye}=this;if(ye.next)try{ye.next(Qe)}catch(Le){xe(Le)}}error(Qe){const{partialObserver:ye}=this;if(ye.error)try{ye.error(Qe)}catch(Le){xe(Le)}else xe(Qe)}complete(){const{partialObserver:Qe}=this;if(Qe.complete)try{Qe.complete()}catch(ye){xe(ye)}}}class et extends _e{constructor(Qe,ye,Le){let nt;if(super(),(0,E.m)(Qe)||!Qe)nt={next:Qe??void 0,error:ye??void 0,complete:Le??void 0};else{let it;this&&$.config.useDeprecatedNextContext?(it=Object.create(Qe),it.unsubscribe=()=>this.unsubscribe(),nt={next:Qe.next&&Be(Qe.next,it),error:Qe.error&&Be(Qe.error,it),complete:Qe.complete&&Be(Qe.complete,it)}):nt=Qe}this.destination=new gt(nt)}}function xe(Ae){$.config.useDeprecatedSynchronousErrorHandling?(0,le.O)(Ae):(0,Q.h)(Ae)}function Oe(Ae,Qe){const{onStoppedNotification:ye}=$.config;ye&&oe.z.setTimeout(()=>ye(Ae,Qe))}const yt={closed:!0,next:ae.Z,error:function Ge(Ae){throw Ae},complete:ae.Z}},7394:(bt,Pe,j)=>{j.d(Pe,{Lc:()=>de,w0:()=>ae,Nn:()=>ve});var E=j(4674);const $=(0,j(2306).d)(Me=>function(le){Me(this),this.message=le?`${le.length} errors occurred during unsubscription:\n${le.map((_e,st)=>`${st+1}) ${_e.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=le});var Q=j(9039);class ae{constructor(oe){this.initialTeardown=oe,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let oe;if(!this.closed){this.closed=!0;const{_parentage:le}=this;if(le)if(this._parentage=null,Array.isArray(le))for(const Be of le)Be.remove(this);else le.remove(this);const{initialTeardown:_e}=this;if((0,E.m)(_e))try{_e()}catch(Be){oe=Be instanceof $?Be.errors:[Be]}const{_finalizers:st}=this;if(st){this._finalizers=null;for(const Be of st)try{ze(Be)}catch(gt){oe=oe??[],gt instanceof $?oe=[...oe,...gt.errors]:oe.push(gt)}}if(oe)throw new $(oe)}}add(oe){var le;if(oe&&oe!==this)if(this.closed)ze(oe);else{if(oe instanceof ae){if(oe.closed||oe._hasParent(this))return;oe._addParent(this)}(this._finalizers=null!==(le=this._finalizers)&&void 0!==le?le:[]).push(oe)}}_hasParent(oe){const{_parentage:le}=this;return le===oe||Array.isArray(le)&&le.includes(oe)}_addParent(oe){const{_parentage:le}=this;this._parentage=Array.isArray(le)?(le.push(oe),le):le?[le,oe]:oe}_removeParent(oe){const{_parentage:le}=this;le===oe?this._parentage=null:Array.isArray(le)&&(0,Q.P)(le,oe)}remove(oe){const{_finalizers:le}=this;le&&(0,Q.P)(le,oe),oe instanceof ae&&oe._removeParent(this)}}ae.EMPTY=(()=>{const Me=new ae;return Me.closed=!0,Me})();const de=ae.EMPTY;function ve(Me){return Me instanceof ae||Me&&"closed"in Me&&(0,E.m)(Me.remove)&&(0,E.m)(Me.add)&&(0,E.m)(Me.unsubscribe)}function ze(Me){(0,E.m)(Me)?Me():Me.unsubscribe()}},2653:(bt,Pe,j)=>{j.d(Pe,{config:()=>E});const E={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1}},5211:(bt,Pe,j)=>{j.d(Pe,{z:()=>ae});var E=j(7537),$=j(4564),Q=j(2459);function ae(...de){return function w(){return(0,E.J)(1)}()((0,Q.D)(de,(0,$.yG)(de)))}},6232:(bt,Pe,j)=>{j.d(Pe,{E:()=>w});const w=new(j(5592).y)(ae=>ae.complete())},2459:(bt,Pe,j)=>{j.d(Pe,{D:()=>Qe});var E=j(4829),w=j(3093),$=j(5137),de=j(5592),ze=j(4971),Me=j(4674),oe=j(7103);function _e(ye,Le){if(!ye)throw new Error("Iterable cannot be null");return new de.y(nt=>{(0,oe.f)(nt,Le,()=>{const it=ye[Symbol.asyncIterator]();(0,oe.f)(nt,Le,()=>{it.next().then(Te=>{Te.done?nt.complete():nt.next(Te.value)})},0,!0)})})}var st=j(8382),Be=j(4026),gt=j(4266),et=j(3664),xe=j(5726),Ge=j(9853),Oe=j(541);function Qe(ye,Le){return Le?function Ae(ye,Le){if(null!=ye){if((0,st.c)(ye))return function Q(ye,Le){return(0,E.Xf)(ye).pipe((0,$.R)(Le),(0,w.Q)(Le))}(ye,Le);if((0,gt.z)(ye))return function ve(ye,Le){return new de.y(nt=>{let it=0;return Le.schedule(function(){it===ye.length?nt.complete():(nt.next(ye[it++]),nt.closed||this.schedule())})})}(ye,Le);if((0,Be.t)(ye))return function ae(ye,Le){return(0,E.Xf)(ye).pipe((0,$.R)(Le),(0,w.Q)(Le))}(ye,Le);if((0,xe.D)(ye))return _e(ye,Le);if((0,et.T)(ye))return function le(ye,Le){return new de.y(nt=>{let it;return(0,oe.f)(nt,Le,()=>{it=ye[ze.h](),(0,oe.f)(nt,Le,()=>{let Te,_t;try{({value:Te,done:_t}=it.next())}catch(pn){return void nt.error(pn)}_t?nt.complete():nt.next(Te)},0,!0)}),()=>(0,Me.m)(it?.return)&&it.return()})}(ye,Le);if((0,Oe.L)(ye))return function yt(ye,Le){return _e((0,Oe.Q)(ye),Le)}(ye,Le)}throw(0,Ge.z)(ye)}(ye,Le):(0,E.Xf)(ye)}},4829:(bt,Pe,j)=>{j.d(Pe,{Xf:()=>st});var E=j(7582),w=j(4266),$=j(4026),Q=j(5592),ae=j(8382),de=j(5726),ve=j(9853),ze=j(3664),Me=j(541),oe=j(4674),le=j(3894),_e=j(4850);function st(Ae){if(Ae instanceof Q.y)return Ae;if(null!=Ae){if((0,ae.c)(Ae))return function Be(Ae){return new Q.y(Qe=>{const ye=Ae[_e.L]();if((0,oe.m)(ye.subscribe))return ye.subscribe(Qe);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(Ae);if((0,w.z)(Ae))return function gt(Ae){return new Q.y(Qe=>{for(let ye=0;ye<Ae.length&&!Qe.closed;ye++)Qe.next(Ae[ye]);Qe.complete()})}(Ae);if((0,$.t)(Ae))return function et(Ae){return new Q.y(Qe=>{Ae.then(ye=>{Qe.closed||(Qe.next(ye),Qe.complete())},ye=>Qe.error(ye)).then(null,le.h)})}(Ae);if((0,de.D)(Ae))return Ge(Ae);if((0,ze.T)(Ae))return function xe(Ae){return new Q.y(Qe=>{for(const ye of Ae)if(Qe.next(ye),Qe.closed)return;Qe.complete()})}(Ae);if((0,Me.L)(Ae))return function Oe(Ae){return Ge((0,Me.Q)(Ae))}(Ae)}throw(0,ve.z)(Ae)}function Ge(Ae){return new Q.y(Qe=>{(function yt(Ae,Qe){var ye,Le,nt,it;return(0,E.mG)(this,void 0,void 0,function*(){try{for(ye=(0,E.KL)(Ae);!(Le=yield ye.next()).done;)if(Qe.next(Le.value),Qe.closed)return}catch(Te){nt={error:Te}}finally{try{Le&&!Le.done&&(it=ye.return)&&(yield it.call(ye))}finally{if(nt)throw nt.error}}Qe.complete()})})(Ae,Qe).catch(ye=>Qe.error(ye))})}},3019:(bt,Pe,j)=>{j.d(Pe,{T:()=>de});var E=j(7537),w=j(4829),$=j(6232),Q=j(4564),ae=j(2459);function de(...ve){const ze=(0,Q.yG)(ve),Me=(0,Q._6)(ve,1/0),oe=ve;return oe.length?1===oe.length?(0,w.Xf)(oe[0]):(0,E.J)(Me)((0,ae.D)(oe,ze)):$.E}},2096:(bt,Pe,j)=>{j.d(Pe,{of:()=>$});var E=j(4564),w=j(2459);function $(...Q){const ae=(0,E.yG)(Q);return(0,w.D)(Q,ae)}},8251:(bt,Pe,j)=>{j.d(Pe,{x:()=>w});var E=j(305);function w(Q,ae,de,ve,ze){return new $(Q,ae,de,ve,ze)}class $ extends E.Lv{constructor(ae,de,ve,ze,Me,oe){super(ae),this.onFinalize=Me,this.shouldUnsubscribe=oe,this._next=de?function(le){try{de(le)}catch(_e){ae.error(_e)}}:super._next,this._error=ze?function(le){try{ze(le)}catch(_e){ae.error(_e)}finally{this.unsubscribe()}}:super._error,this._complete=ve?function(){try{ve()}catch(le){ae.error(le)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var ae;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:de}=this;super.unsubscribe(),!de&&(null===(ae=this.onFinalize)||void 0===ae||ae.call(this))}}}},6328:(bt,Pe,j)=>{j.d(Pe,{b:()=>$});var E=j(1631),w=j(4674);function $(Q,ae){return(0,w.m)(ae)?(0,E.z)(Q,ae,1):(0,E.z)(Q,1)}},3572:(bt,Pe,j)=>{j.d(Pe,{d:()=>$});var E=j(9360),w=j(8251);function $(Q){return(0,E.e)((ae,de)=>{let ve=!1;ae.subscribe((0,w.x)(de,ze=>{ve=!0,de.next(ze)},()=>{ve||de.next(Q),de.complete()}))})}},3997:(bt,Pe,j)=>{j.d(Pe,{x:()=>Q});var E=j(2737),w=j(9360),$=j(8251);function Q(de,ve=E.y){return de=de??ae,(0,w.e)((ze,Me)=>{let oe,le=!0;ze.subscribe((0,$.x)(Me,_e=>{const st=ve(_e);(le||!de(oe,st))&&(le=!1,oe=st,Me.next(_e))}))})}function ae(de,ve){return de===ve}},2181:(bt,Pe,j)=>{j.d(Pe,{h:()=>$});var E=j(9360),w=j(8251);function $(Q,ae){return(0,E.e)((de,ve)=>{let ze=0;de.subscribe((0,w.x)(ve,Me=>Q.call(ae,Me,ze++)&&ve.next(Me)))})}},4716:(bt,Pe,j)=>{j.d(Pe,{x:()=>w});var E=j(9360);function w($){return(0,E.e)((Q,ae)=>{try{Q.subscribe(ae)}finally{ae.add($)}})}},1374:(bt,Pe,j)=>{j.d(Pe,{P:()=>ve});var E=j(6973),w=j(2181),$=j(8180),Q=j(3572),ae=j(3026),de=j(2737);function ve(ze,Me){const oe=arguments.length>=2;return le=>le.pipe(ze?(0,w.h)((_e,st)=>ze(_e,st,le)):de.y,(0,$.q)(1),oe?(0,Q.d)(Me):(0,ae.T)(()=>new E.K))}},7398:(bt,Pe,j)=>{j.d(Pe,{U:()=>$});var E=j(9360),w=j(8251);function $(Q,ae){return(0,E.e)((de,ve)=>{let ze=0;de.subscribe((0,w.x)(ve,Me=>{ve.next(Q.call(ae,Me,ze++))}))})}},7537:(bt,Pe,j)=>{j.d(Pe,{J:()=>$});var E=j(1631),w=j(2737);function $(Q=1/0){return(0,E.z)(w.y,Q)}},1631:(bt,Pe,j)=>{j.d(Pe,{z:()=>ze});var E=j(7398),w=j(4829),$=j(9360),Q=j(7103),ae=j(8251),ve=j(4674);function ze(Me,oe,le=1/0){return(0,ve.m)(oe)?ze((_e,st)=>(0,E.U)((Be,gt)=>oe(_e,Be,st,gt))((0,w.Xf)(Me(_e,st))),le):("number"==typeof oe&&(le=oe),(0,$.e)((_e,st)=>function de(Me,oe,le,_e,st,Be,gt,et){const xe=[];let Ge=0,Oe=0,yt=!1;const Ae=()=>{yt&&!xe.length&&!Ge&&oe.complete()},Qe=Le=>Ge<_e?ye(Le):xe.push(Le),ye=Le=>{Be&&oe.next(Le),Ge++;let nt=!1;(0,w.Xf)(le(Le,Oe++)).subscribe((0,ae.x)(oe,it=>{st?.(it),Be?Qe(it):oe.next(it)},()=>{nt=!0},void 0,()=>{if(nt)try{for(Ge--;xe.length&&Ge<_e;){const it=xe.shift();gt?(0,Q.f)(oe,gt,()=>ye(it)):ye(it)}Ae()}catch(it){oe.error(it)}}))};return Me.subscribe((0,ae.x)(oe,Qe,()=>{yt=!0,Ae()})),()=>{et?.()}}(_e,st,Me,le)))}},3093:(bt,Pe,j)=>{j.d(Pe,{Q:()=>Q});var E=j(7103),w=j(9360),$=j(8251);function Q(ae,de=0){return(0,w.e)((ve,ze)=>{ve.subscribe((0,$.x)(ze,Me=>(0,E.f)(ze,ae,()=>ze.next(Me),de),()=>(0,E.f)(ze,ae,()=>ze.complete(),de),Me=>(0,E.f)(ze,ae,()=>ze.error(Me),de)))})}},6699:(bt,Pe,j)=>{j.d(Pe,{R:()=>Q});var E=j(9360),w=j(8251);function Q(ae,de){return(0,E.e)(function $(ae,de,ve,ze,Me){return(oe,le)=>{let _e=ve,st=de,Be=0;oe.subscribe((0,w.x)(le,gt=>{const et=Be++;st=_e?ae(st,gt,et):(_e=!0,gt),ze&&le.next(st)},Me&&(()=>{_e&&le.next(st),le.complete()})))}}(ae,de,arguments.length>=2,!0))}},3020:(bt,Pe,j)=>{j.d(Pe,{B:()=>ae});var E=j(4829),w=j(8645),$=j(305),Q=j(9360);function ae(ve={}){const{connector:ze=(()=>new w.x),resetOnError:Me=!0,resetOnComplete:oe=!0,resetOnRefCountZero:le=!0}=ve;return _e=>{let st,Be,gt,et=0,xe=!1,Ge=!1;const Oe=()=>{Be?.unsubscribe(),Be=void 0},yt=()=>{Oe(),st=gt=void 0,xe=Ge=!1},Ae=()=>{const Qe=st;yt(),Qe?.unsubscribe()};return(0,Q.e)((Qe,ye)=>{et++,!Ge&&!xe&&Oe();const Le=gt=gt??ze();ye.add(()=>{et--,0===et&&!Ge&&!xe&&(Be=de(Ae,le))}),Le.subscribe(ye),!st&&et>0&&(st=new $.Hp({next:nt=>Le.next(nt),error:nt=>{Ge=!0,Oe(),Be=de(yt,Me,nt),Le.error(nt)},complete:()=>{xe=!0,Oe(),Be=de(yt,oe),Le.complete()}}),(0,E.Xf)(Qe).subscribe(st))})(_e)}}function de(ve,ze,...Me){if(!0===ze)return void ve();if(!1===ze)return;const oe=new $.Hp({next:()=>{oe.unsubscribe(),ve()}});return(0,E.Xf)(ze(...Me)).subscribe(oe)}},7921:(bt,Pe,j)=>{j.d(Pe,{O:()=>Q});var E=j(5211),w=j(4564),$=j(9360);function Q(...ae){const de=(0,w.yG)(ae);return(0,$.e)((ve,ze)=>{(de?(0,E.z)(ae,ve,de):(0,E.z)(ae,ve)).subscribe(ze)})}},5137:(bt,Pe,j)=>{j.d(Pe,{R:()=>w});var E=j(9360);function w($,Q=0){return(0,E.e)((ae,de)=>{de.add($.schedule(()=>ae.subscribe(de),Q))})}},4664:(bt,Pe,j)=>{j.d(Pe,{w:()=>Q});var E=j(4829),w=j(9360),$=j(8251);function Q(ae,de){return(0,w.e)((ve,ze)=>{let Me=null,oe=0,le=!1;const _e=()=>le&&!Me&&ze.complete();ve.subscribe((0,$.x)(ze,st=>{Me?.unsubscribe();let Be=0;const gt=oe++;(0,E.Xf)(ae(st,gt)).subscribe(Me=(0,$.x)(ze,et=>ze.next(de?de(st,et,gt,Be++):et),()=>{Me=null,_e()}))},()=>{le=!0,_e()}))})}},8180:(bt,Pe,j)=>{j.d(Pe,{q:()=>Q});var E=j(6232),w=j(9360),$=j(8251);function Q(ae){return ae<=0?()=>E.E:(0,w.e)((de,ve)=>{let ze=0;de.subscribe((0,$.x)(ve,Me=>{++ze<=ae&&(ve.next(Me),ae<=ze&&ve.complete())}))})}},9397:(bt,Pe,j)=>{j.d(Pe,{b:()=>ae});var E=j(4674),w=j(9360),$=j(8251),Q=j(2737);function ae(de,ve,ze){const Me=(0,E.m)(de)||ve||ze?{next:de,error:ve,complete:ze}:de;return Me?(0,w.e)((oe,le)=>{var _e;null===(_e=Me.subscribe)||void 0===_e||_e.call(Me);let st=!0;oe.subscribe((0,$.x)(le,Be=>{var gt;null===(gt=Me.next)||void 0===gt||gt.call(Me,Be),le.next(Be)},()=>{var Be;st=!1,null===(Be=Me.complete)||void 0===Be||Be.call(Me),le.complete()},Be=>{var gt;st=!1,null===(gt=Me.error)||void 0===gt||gt.call(Me,Be),le.error(Be)},()=>{var Be,gt;st&&(null===(Be=Me.unsubscribe)||void 0===Be||Be.call(Me)),null===(gt=Me.finalize)||void 0===gt||gt.call(Me)}))}):Q.y}},3026:(bt,Pe,j)=>{j.d(Pe,{T:()=>Q});var E=j(6973),w=j(9360),$=j(8251);function Q(de=ae){return(0,w.e)((ve,ze)=>{let Me=!1;ve.subscribe((0,$.x)(ze,oe=>{Me=!0,ze.next(oe)},()=>Me?ze.complete():ze.error(de())))})}function ae(){return new E.K}},1954:(bt,Pe,j)=>{j.d(Pe,{o:()=>ae});var E=j(7394);class w extends E.w0{constructor(ve,ze){super()}schedule(ve,ze=0){return this}}const $={setInterval(de,ve,...ze){const{delegate:Me}=$;return Me?.setInterval?Me.setInterval(de,ve,...ze):setInterval(de,ve,...ze)},clearInterval(de){const{delegate:ve}=$;return(ve?.clearInterval||clearInterval)(de)},delegate:void 0};var Q=j(9039);class ae extends w{constructor(ve,ze){super(ve,ze),this.scheduler=ve,this.work=ze,this.pending=!1}schedule(ve,ze=0){var Me;if(this.closed)return this;this.state=ve;const oe=this.id,le=this.scheduler;return null!=oe&&(this.id=this.recycleAsyncId(le,oe,ze)),this.pending=!0,this.delay=ze,this.id=null!==(Me=this.id)&&void 0!==Me?Me:this.requestAsyncId(le,this.id,ze),this}requestAsyncId(ve,ze,Me=0){return $.setInterval(ve.flush.bind(ve,this),Me)}recycleAsyncId(ve,ze,Me=0){if(null!=Me&&this.delay===Me&&!1===this.pending)return ze;null!=ze&&$.clearInterval(ze)}execute(ve,ze){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const Me=this._execute(ve,ze);if(Me)return Me;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(ve,ze){let oe,Me=!1;try{this.work(ve)}catch(le){Me=!0,oe=le||new Error("Scheduled action threw falsy error")}if(Me)return this.unsubscribe(),oe}unsubscribe(){if(!this.closed){const{id:ve,scheduler:ze}=this,{actions:Me}=ze;this.work=this.state=this.scheduler=null,this.pending=!1,(0,Q.P)(Me,this),null!=ve&&(this.id=this.recycleAsyncId(ze,ve,null)),this.delay=null,super.unsubscribe()}}}},2631:(bt,Pe,j)=>{j.d(Pe,{v:()=>$});var E=j(4552);class w{constructor(ae,de=w.now){this.schedulerActionCtor=ae,this.now=de}schedule(ae,de=0,ve){return new this.schedulerActionCtor(this,ae).schedule(ve,de)}}w.now=E.l.now;class $ extends w{constructor(ae,de=w.now){super(ae,de),this.actions=[],this._active=!1}flush(ae){const{actions:de}=this;if(this._active)return void de.push(ae);let ve;this._active=!0;do{if(ve=ae.execute(ae.state,ae.delay))break}while(ae=de.shift());if(this._active=!1,ve){for(;ae=de.shift();)ae.unsubscribe();throw ve}}}},6321:(bt,Pe,j)=>{j.d(Pe,{z:()=>$});var E=j(1954);const $=new(j(2631).v)(E.o)},4552:(bt,Pe,j)=>{j.d(Pe,{l:()=>E});const E={now:()=>(E.delegate||Date).now(),delegate:void 0}},7599:(bt,Pe,j)=>{j.d(Pe,{z:()=>E});const E={setTimeout(w,$,...Q){const{delegate:ae}=E;return ae?.setTimeout?ae.setTimeout(w,$,...Q):setTimeout(w,$,...Q)},clearTimeout(w){const{delegate:$}=E;return($?.clearTimeout||clearTimeout)(w)},delegate:void 0}},4971:(bt,Pe,j)=>{j.d(Pe,{h:()=>w});const w=function E(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}()},4850:(bt,Pe,j)=>{j.d(Pe,{L:()=>E});const E="function"==typeof Symbol&&Symbol.observable||"@@observable"},6973:(bt,Pe,j)=>{j.d(Pe,{K:()=>w});const w=(0,j(2306).d)($=>function(){$(this),this.name="EmptyError",this.message="no elements in sequence"})},4564:(bt,Pe,j)=>{j.d(Pe,{_6:()=>de,jO:()=>Q,yG:()=>ae});var E=j(4674);function $(ve){return ve[ve.length-1]}function Q(ve){return(0,E.m)($(ve))?ve.pop():void 0}function ae(ve){return function w(ve){return ve&&(0,E.m)(ve.schedule)}($(ve))?ve.pop():void 0}function de(ve,ze){return"number"==typeof $(ve)?ve.pop():ze}},7453:(bt,Pe,j)=>{j.d(Pe,{D:()=>ae});const{isArray:E}=Array,{getPrototypeOf:w,prototype:$,keys:Q}=Object;function ae(ve){if(1===ve.length){const ze=ve[0];if(E(ze))return{args:ze,keys:null};if(function de(ve){return ve&&"object"==typeof ve&&w(ve)===$}(ze)){const Me=Q(ze);return{args:Me.map(oe=>ze[oe]),keys:Me}}}return{args:ve,keys:null}}},9039:(bt,Pe,j)=>{function E(w,$){if(w){const Q=w.indexOf($);0<=Q&&w.splice(Q,1)}}j.d(Pe,{P:()=>E})},2306:(bt,Pe,j)=>{function E(w){const Q=w(ae=>{Error.call(ae),ae.stack=(new Error).stack});return Q.prototype=Object.create(Error.prototype),Q.prototype.constructor=Q,Q}j.d(Pe,{d:()=>E})},2714:(bt,Pe,j)=>{function E(w,$){return w.reduce((Q,ae,de)=>(Q[ae]=$[de],Q),{})}j.d(Pe,{n:()=>E})},1441:(bt,Pe,j)=>{j.d(Pe,{O:()=>Q,x:()=>$});var E=j(2653);let w=null;function $(ae){if(E.config.useDeprecatedSynchronousErrorHandling){const de=!w;if(de&&(w={errorThrown:!1,error:null}),ae(),de){const{errorThrown:ve,error:ze}=w;if(w=null,ve)throw ze}}else ae()}function Q(ae){E.config.useDeprecatedSynchronousErrorHandling&&w&&(w.errorThrown=!0,w.error=ae)}},7103:(bt,Pe,j)=>{function E(w,$,Q,ae=0,de=!1){const ve=$.schedule(function(){Q(),de?w.add(this.schedule(null,ae)):this.unsubscribe()},ae);if(w.add(ve),!de)return ve}j.d(Pe,{f:()=>E})},2737:(bt,Pe,j)=>{function E(w){return w}j.d(Pe,{y:()=>E})},4266:(bt,Pe,j)=>{j.d(Pe,{z:()=>E});const E=w=>w&&"number"==typeof w.length&&"function"!=typeof w},5726:(bt,Pe,j)=>{j.d(Pe,{D:()=>w});var E=j(4674);function w($){return Symbol.asyncIterator&&(0,E.m)($?.[Symbol.asyncIterator])}},4674:(bt,Pe,j)=>{function E(w){return"function"==typeof w}j.d(Pe,{m:()=>E})},8382:(bt,Pe,j)=>{j.d(Pe,{c:()=>$});var E=j(4850),w=j(4674);function $(Q){return(0,w.m)(Q[E.L])}},3664:(bt,Pe,j)=>{j.d(Pe,{T:()=>$});var E=j(4971),w=j(4674);function $(Q){return(0,w.m)(Q?.[E.h])}},4026:(bt,Pe,j)=>{j.d(Pe,{t:()=>w});var E=j(4674);function w($){return(0,E.m)($?.then)}},541:(bt,Pe,j)=>{j.d(Pe,{L:()=>Q,Q:()=>$});var E=j(7582),w=j(4674);function $(ae){return(0,E.FC)(this,arguments,function*(){const ve=ae.getReader();try{for(;;){const{value:ze,done:Me}=yield(0,E.qq)(ve.read());if(Me)return yield(0,E.qq)(void 0);yield yield(0,E.qq)(ze)}}finally{ve.releaseLock()}})}function Q(ae){return(0,w.m)(ae?.getReader)}},9360:(bt,Pe,j)=>{j.d(Pe,{A:()=>w,e:()=>$});var E=j(4674);function w(Q){return(0,E.m)(Q?.lift)}function $(Q){return ae=>{if(w(ae))return ae.lift(function(de){try{return Q(de,this)}catch(ve){this.error(ve)}});throw new TypeError("Unable to lift unknown Observable type")}}},7400:(bt,Pe,j)=>{j.d(Pe,{Z:()=>Q});var E=j(7398);const{isArray:w}=Array;function Q(ae){return(0,E.U)(de=>function $(ae,de){return w(de)?ae(...de):ae(de)}(ae,de))}},2420:(bt,Pe,j)=>{function E(){}j.d(Pe,{Z:()=>E})},8407:(bt,Pe,j)=>{j.d(Pe,{U:()=>$,z:()=>w});var E=j(2737);function w(...Q){return $(Q)}function $(Q){return 0===Q.length?E.y:1===Q.length?Q[0]:function(de){return Q.reduce((ve,ze)=>ze(ve),de)}}},3894:(bt,Pe,j)=>{j.d(Pe,{h:()=>$});var E=j(2653),w=j(7599);function $(Q){w.z.setTimeout(()=>{const{onUnhandledError:ae}=E.config;if(!ae)throw Q;ae(Q)})}},9853:(bt,Pe,j)=>{function E(w){return new TypeError(`You provided ${null!==w&&"object"==typeof w?"an invalid object":`'${w}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}j.d(Pe,{z:()=>E})},6814:(bt,Pe,j)=>{j.d(Pe,{Do:()=>et,EM:()=>Bi,HT:()=>Q,JF:()=>Br,K0:()=>de,Mx:()=>qs,O5:()=>Mo,PM:()=>Ks,S$:()=>st,V_:()=>ze,Ye:()=>xe,b0:()=>gt,bD:()=>Ls,ez:()=>oi,q:()=>$,sg:()=>ks,w_:()=>ae});var E=j(5879);let w=null;function $(){return w}function Q(M){w||(w=M)}class ae{}const de=new E.OlP("DocumentToken");let ve=(()=>{class M{historyGo(N){throw new Error("Not implemented")}}return M.\u0275fac=function(N){return new(N||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return(0,E.f3M)(Me)},providedIn:"platform"}),M})();const ze=new E.OlP("Location Initialized");let Me=(()=>{class M extends ve{constructor(){super(),this._doc=(0,E.f3M)(de),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return $().getBaseHref(this._doc)}onPopState(N){const W=$().getGlobalEventTarget(this._doc,"window");return W.addEventListener("popstate",N,!1),()=>W.removeEventListener("popstate",N)}onHashChange(N){const W=$().getGlobalEventTarget(this._doc,"window");return W.addEventListener("hashchange",N,!1),()=>W.removeEventListener("hashchange",N)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(N){this._location.pathname=N}pushState(N,W,se){this._history.pushState(N,W,se)}replaceState(N,W,se){this._history.replaceState(N,W,se)}forward(){this._history.forward()}back(){this._history.back()}historyGo(N=0){this._history.go(N)}getState(){return this._history.state}}return M.\u0275fac=function(N){return new(N||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return new M},providedIn:"platform"}),M})();function oe(M,F){if(0==M.length)return F;if(0==F.length)return M;let N=0;return M.endsWith("/")&&N++,F.startsWith("/")&&N++,2==N?M+F.substring(1):1==N?M+F:M+"/"+F}function le(M){const F=M.match(/#|\?|$/),N=F&&F.index||M.length;return M.slice(0,N-("/"===M[N-1]?1:0))+M.slice(N)}function _e(M){return M&&"?"!==M[0]?"?"+M:M}let st=(()=>{class M{historyGo(N){throw new Error("Not implemented")}}return M.\u0275fac=function(N){return new(N||M)},M.\u0275prov=E.Yz7({token:M,factory:function(){return(0,E.f3M)(gt)},providedIn:"root"}),M})();const Be=new E.OlP("appBaseHref");let gt=(()=>{class M extends st{constructor(N,W){super(),this._platformLocation=N,this._removeListenerFns=[],this._baseHref=W??this._platformLocation.getBaseHrefFromDOM()??(0,E.f3M)(de).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}prepareExternalUrl(N){return oe(this._baseHref,N)}path(N=!1){const W=this._platformLocation.pathname+_e(this._platformLocation.search),se=this._platformLocation.hash;return se&&N?`${W}${se}`:W}pushState(N,W,se,Ne){const Je=this.prepareExternalUrl(se+_e(Ne));this._platformLocation.pushState(N,W,Je)}replaceState(N,W,se,Ne){const Je=this.prepareExternalUrl(se+_e(Ne));this._platformLocation.replaceState(N,W,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return M.\u0275fac=function(N){return new(N||M)(E.LFG(ve),E.LFG(Be,8))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac,providedIn:"root"}),M})(),et=(()=>{class M extends st{constructor(N,W){super(),this._platformLocation=N,this._baseHref="",this._removeListenerFns=[],null!=W&&(this._baseHref=W)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(N){this._removeListenerFns.push(this._platformLocation.onPopState(N),this._platformLocation.onHashChange(N))}getBaseHref(){return this._baseHref}path(N=!1){let W=this._platformLocation.hash;return null==W&&(W="#"),W.length>0?W.substring(1):W}prepareExternalUrl(N){const W=oe(this._baseHref,N);return W.length>0?"#"+W:W}pushState(N,W,se,Ne){let Je=this.prepareExternalUrl(se+_e(Ne));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.pushState(N,W,Je)}replaceState(N,W,se,Ne){let Je=this.prepareExternalUrl(se+_e(Ne));0==Je.length&&(Je=this._platformLocation.pathname),this._platformLocation.replaceState(N,W,Je)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(N=0){this._platformLocation.historyGo?.(N)}}return M.\u0275fac=function(N){return new(N||M)(E.LFG(ve),E.LFG(Be,8))},M.\u0275prov=E.Yz7({token:M,factory:M.\u0275fac}),M})(),xe=(()=>{class M{constructor(N){this._subject=new E.vpe,this._urlChangeListeners=[],this._urlChangeSubscription=null,this._locationStrategy=N;const W=this._locationStrategy.getBaseHref();this._basePath=function Ae(M){if(new RegExp("^(https?:)?//").test(M)){const[,N]=M.split(/\/\/[^\/]+/);return N}return M}(le(yt(W))),this._locationStrategy.onPopState(se=>{this._subject.emit({url:this.path(!0),pop:!0,state:se.state,type:se.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(N=!1){return this.normalize(this._locationStrategy.path(N))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(N,W=""){return this.path()==this.normalize(N+_e(W))}normalize(N){return M.stripTrailingSlash(function Oe(M,F){if(!M||!F.startsWith(M))return F;const N=F.substring(M.length);return""===N||["/",";","?","#"].includes(N[0])?N:F}(this._basePath,yt(N)))}prepareExternalUrl(N){return N&&"/"!==N[0]&&(N="/"+N),this._locationStrategy.prepareExternalUrl(N)}go(N,W="",se=null){this._locationStrategy.pushState(se,"",N,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+_e(W)),se)}replaceState(N,W="",se=null){this._locationStrategy.replaceState(se,"",N,W),this._notifyUrlChangeListeners(this.prepareExternalUrl(N+_e(W)),se)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(N=0){this._locationStrategy.historyGo?.(N)}onUrlChange(N){return this._urlChangeListeners.push(N),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(W=>{this._notifyUrlChangeListeners(W.url,W.state)})),()=>{const W=this._urlChangeListeners.indexOf(N);this._urlChangeListeners.splice(W,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(N="",W){this._urlChangeListeners.forEach(se=>se(N,W))}subscribe(N,W,se){return this._subject.subscribe({next:N,error:W,complete:se})}}return M.normalizeQueryParams=_e,M.joinWithSlash=oe,M.stripTrailingSlash=le,M.\u0275fac=function(N){return new(N||M)(E.LFG(st))},M.\u0275prov=E.Yz7({token:M,factory:function(){return function Ge(){return new xe((0,E.LFG)(st))}()},providedIn:"root"}),M})();function yt(M){return M.replace(/\/index.html$/,"")}function qs(M,F){F=encodeURIComponent(F);for(const N of M.split(";")){const W=N.indexOf("="),[se,Ne]=-1==W?[N,""]:[N.slice(0,W),N.slice(W+1)];if(se.trim()===F)return decodeURIComponent(Ne)}return null}class Ao{constructor(F,N,W,se){this.$implicit=F,this.ngForOf=N,this.index=W,this.count=se}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let ks=(()=>{class M{set ngForOf(N){this._ngForOf=N,this._ngForOfDirty=!0}set ngForTrackBy(N){this._trackByFn=N}get ngForTrackBy(){return this._trackByFn}constructor(N,W,se){this._viewContainer=N,this._template=W,this._differs=se,this._ngForOf=null,this._ngForOfDirty=!0,this._differ=null}set ngForTemplate(N){N&&(this._template=N)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const N=this._ngForOf;!this._differ&&N&&(this._differ=this._differs.find(N).create(this.ngForTrackBy))}if(this._differ){const N=this._differ.diff(this._ngForOf);N&&this._applyChanges(N)}}_applyChanges(N){const W=this._viewContainer;N.forEachOperation((se,Ne,Je)=>{if(null==se.previousIndex)W.createEmbeddedView(this._template,new Ao(se.item,this._ngForOf,-1,-1),null===Je?void 0:Je);else if(null==Je)W.remove(null===Ne?void 0:Ne);else if(null!==Ne){const Ut=W.get(Ne);W.move(Ut,Je),Xa(Ut,se)}});for(let se=0,Ne=W.length;se<Ne;se++){const Ut=W.get(se).context;Ut.index=se,Ut.count=Ne,Ut.ngForOf=this._ngForOf}N.forEachIdentityChange(se=>{Xa(W.get(se.currentIndex),se)})}static ngTemplateContextGuard(N,W){return!0}}return M.\u0275fac=function(N){return new(N||M)(E.Y36(E.s_b),E.Y36(E.Rgc),E.Y36(E.ZZ4))},M.\u0275dir=E.lG2({type:M,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"},standalone:!0}),M})();function Xa(M,F){M.context.$implicit=F.item}let Mo=(()=>{class M{constructor(N,W){this._viewContainer=N,this._context=new eu,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=W}set ngIf(N){this._context.$implicit=this._context.ngIf=N,this._updateView()}set ngIfThen(N){oa("ngIfThen",N),this._thenTemplateRef=N,this._thenViewRef=null,this._updateView()}set ngIfElse(N){oa("ngIfElse",N),this._elseTemplateRef=N,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(N,W){return!0}}return M.\u0275fac=function(N){return new(N||M)(E.Y36(E.s_b),E.Y36(E.Rgc))},M.\u0275dir=E.lG2({type:M,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"},standalone:!0}),M})();class eu{constructor(){this.$implicit=null,this.ngIf=null}}function oa(M,F){if(F&&!F.createEmbeddedView)throw new Error(`${M} must be a TemplateRef, but received '${(0,E.AaK)(F)}'.`)}let oi=(()=>{class M{}return M.\u0275fac=function(N){return new(N||M)},M.\u0275mod=E.oAB({type:M}),M.\u0275inj=E.cJS({}),M})();const Ls="browser",da="server";function Ks(M){return M===da}let Bi=(()=>{class M{}return M.\u0275prov=(0,E.Yz7)({token:M,providedIn:"root",factory:()=>new mi((0,E.LFG)(de),window)}),M})();class mi{constructor(F,N){this.document=F,this.window=N,this.offset=()=>[0,0]}setOffset(F){this.offset=Array.isArray(F)?()=>F:F}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(F){this.supportsScrolling()&&this.window.scrollTo(F[0],F[1])}scrollToAnchor(F){if(!this.supportsScrolling())return;const N=function fs(M,F){const N=M.getElementById(F)||M.getElementsByName(F)[0];if(N)return N;if("function"==typeof M.createTreeWalker&&M.body&&"function"==typeof M.body.attachShadow){const W=M.createTreeWalker(M.body,NodeFilter.SHOW_ELEMENT);let se=W.currentNode;for(;se;){const Ne=se.shadowRoot;if(Ne){const Je=Ne.getElementById(F)||Ne.querySelector(`[name="${F}"]`);if(Je)return Je}se=W.nextNode()}}return null}(this.document,F);N&&(this.scrollToElement(N),N.focus())}setHistoryScrollRestoration(F){if(this.supportScrollRestoration()){const N=this.window.history;N&&N.scrollRestoration&&(N.scrollRestoration=F)}}scrollToElement(F){const N=F.getBoundingClientRect(),W=N.left+this.window.pageXOffset,se=N.top+this.window.pageYOffset,Ne=this.offset();this.window.scrollTo(W-Ne[0],se-Ne[1])}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const F=Ri(this.window.history)||Ri(Object.getPrototypeOf(this.window.history));return!(!F||!F.writable&&!F.set)}catch{return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch{return!1}}}function Ri(M){return Object.getOwnPropertyDescriptor(M,"scrollRestoration")}class Br{}},5879:(bt,Pe,j)=>{j.d(Pe,{$8M:()=>Yc,$WT:()=>go,$Z:()=>Nf,AFp:()=>g0,AaK:()=>_e,CHM:()=>Ml,CRH:()=>uw,DdM:()=>bd,EJc:()=>SM,EpF:()=>r_,F4k:()=>cE,FYo:()=>gI,FiY:()=>Gu,G48:()=>VM,GfV:()=>vg,Gpc:()=>gt,HDt:()=>G_,JOm:()=>ja,KtG:()=>uu,LFG:()=>Nn,LSH:()=>yy,Lbi:()=>wc,Lck:()=>hD,MAs:()=>Ci,MMx:()=>C_,MR2:()=>oI,NdJ:()=>Ac,Ojb:()=>kt,OlP:()=>Pr,Oqu:()=>ml,P3R:()=>iI,PXZ:()=>xw,Q6J:()=>Xt,QGY:()=>i_,Qsj:()=>mI,R0b:()=>ia,RDi:()=>xS,Rgc:()=>Hh,SBq:()=>id,Sil:()=>_m,Suo:()=>aw,TTD:()=>Na,TgZ:()=>n_,VuI:()=>_v,X6Q:()=>UM,XFs:()=>mt,Xpm:()=>hi,Xq5:()=>tE,Xts:()=>Ef,Y36:()=>mh,YKP:()=>hp,YNc:()=>RA,Yjl:()=>Ma,Yz7:()=>sn,Z0I:()=>Sn,ZZ4:()=>dv,_Bn:()=>E_,_UZ:()=>St,_c5:()=>Hw,_uU:()=>gE,aQg:()=>Bw,c2e:()=>ZD,cJS:()=>Jn,cg1:()=>ip,dDg:()=>NM,dqk:()=>An,eFA:()=>tT,eJc:()=>Ep,ekj:()=>Qf,eoX:()=>Y_,f3M:()=>vn,g9A:()=>m0,h0i:()=>Uh,hGG:()=>$w,hij:()=>Xf,iGM:()=>Md,ifc:()=>Yt,ip1:()=>qD,jDz:()=>ZE,kL8:()=>xE,lG2:()=>tu,lqb:()=>fh,lri:()=>XD,n5z:()=>Ul,oAB:()=>xi,oJD:()=>a0,q4F:()=>My,qFp:()=>sx,qLn:()=>Af,qOj:()=>Zy,qZA:()=>Ii,rWj:()=>K_,rg0:()=>sc,s9C:()=>o_,sBO:()=>BM,s_b:()=>Gh,soG:()=>H_,tb:()=>Em,tp0:()=>Co,uIk:()=>Pg,vHH:()=>Ae,vpe:()=>bu,wAp:()=>an,xp6:()=>Py,z2F:()=>Sp,zSh:()=>l0,zs3:()=>Zu});var E=j(8645),w=j(7394),$=j(5619),Q=j(5592),ae=j(3019),de=j(2096),ve=j(3020),ze=j(4664),Me=j(3997);function oe(s){for(let o in s)if(s[o]===oe)return o;throw Error("Could not find renamed property on target object.")}function le(s,o){for(const a in o)o.hasOwnProperty(a)&&!s.hasOwnProperty(a)&&(s[a]=o[a])}function _e(s){if("string"==typeof s)return s;if(Array.isArray(s))return"["+s.map(_e).join(", ")+"]";if(null==s)return""+s;if(s.overriddenName)return`${s.overriddenName}`;if(s.name)return`${s.name}`;const o=s.toString();if(null==o)return""+o;const a=o.indexOf("\n");return-1===a?o:o.substring(0,a)}function st(s,o){return null==s||""===s?null===o?"":o:null==o||""===o?s:s+" "+o}const Be=oe({__forward_ref__:oe});function gt(s){return s.__forward_ref__=gt,s.toString=function(){return _e(this())},s}function et(s){return xe(s)?s():s}function xe(s){return"function"==typeof s&&s.hasOwnProperty(Be)&&s.__forward_ref__===gt}function Ge(s){return s&&!!s.\u0275providers}const yt="https://g.co/ng/security#xss";class Ae extends Error{constructor(o,a){super(function Qe(s,o){return`NG0${Math.abs(s)}${o?": "+o:""}`}(o,a)),this.code=o}}function ye(s){return"string"==typeof s?s:null==s?"":String(s)}function _t(s,o){throw new Ae(-201,!1)}function Dt(s,o){null==s&&function At(s,o,a,l){throw new Error(`ASSERTION ERROR: ${s}`+(null==l?"":` [Expected=> ${a} ${l} ${o} <=Actual]`))}(o,s,null,"!=")}function sn(s){return{token:s.token,providedIn:s.providedIn||null,factory:s.factory,value:void 0}}function Jn(s){return{providers:s.providers||[],imports:s.imports||[]}}function Lt(s){return zr(s,Wr)||zr(s,lr)}function Sn(s){return null!==Lt(s)}function zr(s,o){return s.hasOwnProperty(o)?s[o]:null}function fo(s){return s&&(s.hasOwnProperty(Xn)||s.hasOwnProperty(Ar))?s[Xn]:null}const Wr=oe({\u0275prov:oe}),Xn=oe({\u0275inj:oe}),lr=oe({ngInjectableDef:oe}),Ar=oe({ngInjectorDef:oe});var mt=(()=>((mt=mt||{})[mt.Default=0]="Default",mt[mt.Host=1]="Host",mt[mt.Self=2]="Self",mt[mt.SkipSelf=4]="SkipSelf",mt[mt.Optional=8]="Optional",mt))();let zt;function Un(s){const o=zt;return zt=s,o}function fr(s,o,a){const l=Lt(s);return l&&"root"==l.providedIn?void 0===l.value?l.value=l.factory():l.value:a&mt.Optional?null:void 0!==o?o:void _t(_e(s))}const An=(()=>typeof globalThis<"u"&&globalThis||typeof global<"u"&&global||typeof window<"u"&&window||typeof self<"u"&&typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&self)(),kr={},xt="__NG_DI_FLAG__",Ai="ngTempTokenPath",hs=/\n/gm,li="__source";let Cr;function Gn(s){const o=Cr;return Cr=s,o}function Li(s,o=mt.Default){if(void 0===Cr)throw new Ae(-203,!1);return null===Cr?fr(s,void 0,o):Cr.get(s,o&mt.Optional?null:void 0,o)}function Nn(s,o=mt.Default){return(function Ht(){return zt}()||Li)(et(s),o)}function vn(s,o=mt.Default){return Nn(s,ue(o))}function ue(s){return typeof s>"u"||"number"==typeof s?s:0|(s.optional&&8)|(s.host&&1)|(s.self&&2)|(s.skipSelf&&4)}function G(s){const o=[];for(let a=0;a<s.length;a++){const l=et(s[a]);if(Array.isArray(l)){if(0===l.length)throw new Ae(900,!1);let d,f=mt.Default;for(let y=0;y<l.length;y++){const D=l[y],A=Z(D);"number"==typeof A?-1===A?d=D.token:f|=A:d=D}o.push(Nn(d,f))}else o.push(Nn(l))}return o}function z(s,o){return s[xt]=o,s.prototype[xt]=o,s}function Z(s){return s[xt]}function Xe(s){return{toString:s}.toString()}var pt=(()=>((pt=pt||{})[pt.OnPush=0]="OnPush",pt[pt.Default=1]="Default",pt))(),Yt=(()=>{return(s=Yt||(Yt={}))[s.Emulated=0]="Emulated",s[s.None=2]="None",s[s.ShadowDom=3]="ShadowDom",Yt;var s})();const Wt={},Rt=[],cn=oe({\u0275cmp:oe}),dr=oe({\u0275dir:oe}),Mi=oe({\u0275pipe:oe}),Es=oe({\u0275mod:oe}),xr=oe({\u0275fac:oe}),Ue=oe({__NG_ELEMENT_ID__:oe}),Se=oe({__NG_ENV_ID__:oe});function rt(s,o,a){let l=s.length;for(;;){const d=s.indexOf(o,a);if(-1===d)return d;if(0===d||s.charCodeAt(d-1)<=32){const f=o.length;if(d+f===l||s.charCodeAt(d+f)<=32)return d}a=d+1}}function Pt(s,o,a){let l=0;for(;l<a.length;){const d=a[l];if("number"==typeof d){if(0!==d)break;l++;const f=a[l++],y=a[l++],D=a[l++];s.setAttribute(o,y,D,f)}else{const f=d,y=a[++l];ln(f)?s.setProperty(o,f,y):s.setAttribute(o,f,y),l++}}return l}function Qt(s){return 3===s||4===s||6===s}function ln(s){return 64===s.charCodeAt(0)}function mn(s,o){if(null!==o&&0!==o.length)if(null===s||0===s.length)s=o.slice();else{let a=-1;for(let l=0;l<o.length;l++){const d=o[l];"number"==typeof d?a=d:0===a||On(s,a,d,null,-1===a||2===a?o[++l]:null)}}return s}function On(s,o,a,l,d){let f=0,y=s.length;if(-1===o)y=-1;else for(;f<s.length;){const D=s[f++];if("number"==typeof D){if(D===o){y=-1;break}if(D>o){y=f-1;break}}}for(;f<s.length;){const D=s[f];if("number"==typeof D)break;if(D===a){if(null===l)return void(null!==d&&(s[f+1]=d));if(l===s[f+1])return void(s[f+2]=d)}f++,null!==l&&f++,null!==d&&f++}-1!==y&&(s.splice(y,0,o),f=y+1),s.splice(f++,0,a),null!==l&&s.splice(f++,0,l),null!==d&&s.splice(f++,0,d)}const pr="ng-template";function ws(s,o,a){let l=0,d=!0;for(;l<s.length;){let f=s[l++];if("string"==typeof f&&d){const y=s[l++];if(a&&"class"===f&&-1!==rt(y.toLowerCase(),o,0))return!0}else{if(1===f){for(;l<s.length&&"string"==typeof(f=s[l++]);)if(f.toLowerCase()===o)return!0;return!1}"number"==typeof f&&(d=!1)}}return!1}function qs(s){return 4===s.type&&s.value!==pr}function $o(s,o,a){return o===(4!==s.type||a?s.value:pr)}function So(s,o,a){let l=4;const d=s.attrs||[],f=function ks(s){for(let o=0;o<s.length;o++)if(Qt(s[o]))return o;return s.length}(d);let y=!1;for(let D=0;D<o.length;D++){const A=o[D];if("number"!=typeof A){if(!y)if(4&l){if(l=2|1&l,""!==A&&!$o(s,A,a)||""===A&&1===o.length){if(di(l))return!1;y=!0}}else{const P=8&l?A:o[++D];if(8&l&&null!==s.attrs){if(!ws(s.attrs,P,a)){if(di(l))return!1;y=!0}continue}const ie=Ja(8&l?"class":A,d,qs(s),a);if(-1===ie){if(di(l))return!1;y=!0;continue}if(""!==P){let me;me=ie>f?"":d[ie+1].toLowerCase();const De=8&l?me:null;if(De&&-1!==rt(De,P,0)||2&l&&P!==me){if(di(l))return!1;y=!0}}}}else{if(!y&&!di(l)&&!di(A))return!1;if(y&&di(A))continue;y=!1,l=A|1&l}}return di(l)||y}function di(s){return 0==(1&s)}function Ja(s,o,a,l){if(null===o)return-1;let d=0;if(l||!a){let f=!1;for(;d<o.length;){const y=o[d];if(y===s)return d;if(3===y||6===y)f=!0;else{if(1===y||2===y){let D=o[++d];for(;"string"==typeof D;)D=o[++d];continue}if(4===y)break;if(0===y){d+=4;continue}}d+=f?1:2}return-1}return function Xa(s,o){let a=s.indexOf(4);if(a>-1)for(a++;a<s.length;){const l=s[a];if("number"==typeof l)return-1;if(l===o)return a;a++}return-1}(o,s)}function Zi(s,o,a=!1){for(let l=0;l<o.length;l++)if(So(s,o[l],a))return!0;return!1}function Mo(s,o){return s?":not("+o.trim()+")":o}function eu(s){let o=s[0],a=1,l=2,d="",f=!1;for(;a<s.length;){let y=s[a];if("string"==typeof y)if(2&l){const D=s[++a];d+="["+y+(D.length>0?'="'+D+'"':"")+"]"}else 8&l?d+="."+y:4&l&&(d+=" "+y);else""!==d&&!di(y)&&(o+=Mo(f,d),d=""),l=y,f=f||!di(l);a++}return""!==d&&(o+=Mo(f,d)),o}function hi(s){return Xe(()=>{const o=ca(s),a={...o,decls:s.decls,vars:s.vars,template:s.template,consts:s.consts||null,ngContentSelectors:s.ngContentSelectors,onPush:s.changeDetection===pt.OnPush,directiveDefs:null,pipeDefs:null,dependencies:o.standalone&&s.dependencies||null,getStandaloneInjector:null,signals:s.signals??!1,data:s.data||{},encapsulation:s.encapsulation||Yt.Emulated,styles:s.styles||Rt,_:null,schemas:s.schemas||null,tView:null,id:""};la(a);const l=s.dependencies;return a.directiveDefs=Ro(l,!1),a.pipeDefs=Ro(l,!0),a.id=function xa(s){let o=0;const a=[s.selectors,s.ngContentSelectors,s.hostVars,s.hostAttrs,s.consts,s.vars,s.decls,s.encapsulation,s.standalone,s.signals,s.exportAs,JSON.stringify(s.inputs),JSON.stringify(s.outputs),Object.getOwnPropertyNames(s.type.prototype),!!s.contentQueries,!!s.viewQuery].join("|");for(const d of a)o=Math.imul(31,o)+d.charCodeAt(0)<<0;return o+=2147483648,"c"+o}(a),a})}function Ki(s){return dn(s)||ti(s)}function Go(s){return null!==s}function xi(s){return Xe(()=>({type:s.type,bootstrap:s.bootstrap||Rt,declarations:s.declarations||Rt,imports:s.imports||Rt,exports:s.exports||Rt,transitiveCompileScopes:null,schemas:s.schemas||null,id:s.id||null}))}function xo(s,o){if(null==s)return Wt;const a={};for(const l in s)if(s.hasOwnProperty(l)){let d=s[l],f=d;Array.isArray(d)&&(f=d[1],d=d[0]),a[d]=l,o&&(o[d]=f)}return a}function tu(s){return Xe(()=>{const o=ca(s);return la(o),o})}function Ma(s){return{type:s.type,name:s.name,factory:null,pure:!1!==s.pure,standalone:!0===s.standalone,onDestroy:s.type.prototype.ngOnDestroy||null}}function dn(s){return s[cn]||null}function ti(s){return s[dr]||null}function qn(s){return s[Mi]||null}function go(s){const o=dn(s)||ti(s)||qn(s);return null!==o&&o.standalone}function fi(s,o){const a=s[Es]||null;if(!a&&!0===o)throw new Error(`Type ${_e(s)} does not have '\u0275mod' property.`);return a}function ca(s){const o={};return{type:s.type,providersResolver:null,factory:null,hostBindings:s.hostBindings||null,hostVars:s.hostVars||0,hostAttrs:s.hostAttrs||null,contentQueries:s.contentQueries||null,declaredInputs:o,inputTransforms:null,inputConfig:s.inputs||Wt,exportAs:s.exportAs||null,standalone:!0===s.standalone,signals:!0===s.signals,selectors:s.selectors||Rt,viewQuery:s.viewQuery||null,features:s.features||null,setInput:null,findHostDirectiveDefs:null,hostDirectives:null,inputs:xo(s.inputs,o),outputs:xo(s.outputs)}}function la(s){s.features?.forEach(o=>o(s))}function Ro(s,o){if(!s)return null;const a=o?qn:Ki;return()=>("function"==typeof s?s():s).map(l=>a(l)).filter(Go)}const Rr=0,Et=1,tn=2,er=3,Nr=4,Ur=5,Or=6,Fs=7,Zn=8,Vr=9,pi=10,un=11,gi=12,Ui=13,Vi=14,hr=15,Cs=16,yo=17,oi=18,Ls=19,da=20,Fr=21,Ir=22,ha=23,Ks=24,fn=25,Ys=1,Bi=2,mi=7,fs=9,Br=11;function or(s){return Array.isArray(s)&&"object"==typeof s[Ys]}function Yi(s){return Array.isArray(s)&&!0===s[Ys]}function _o(s){return 0!=(4&s.flags)}function Us(s){return s.componentOffset>-1}function Vs(s){return 1==(1&s.flags)}function Zr(s){return!!s.template}function ai(s){return 0!=(512&s[tn])}function zo(s,o){return s.hasOwnProperty(xr)?s[xr]:null}let bs=An.WeakRef??class Bs{constructor(o){this.ref=o}deref(){return this.ref}},_i=0,Qs=null,pa=!1;function jr(s){const o=Qs;return Qs=s,o}class ji{constructor(){this.id=_i++,this.ref=function Oo(s){return new bs(s)}(this),this.producers=new Map,this.consumers=new Map,this.trackingVersion=0,this.valueVersion=0}consumerPollProducersForChange(){for(const[o,a]of this.producers){const l=a.producerNode.deref();if(null!=l&&a.atTrackingVersion===this.trackingVersion){if(l.producerPollStatus(a.seenValueVersion))return!0}else this.producers.delete(o),l?.consumers.delete(this.id)}return!1}producerMayHaveChanged(){const o=pa;pa=!0;try{for(const[a,l]of this.consumers){const d=l.consumerNode.deref();null!=d&&d.trackingVersion===l.atTrackingVersion?d.onConsumerDependencyMayHaveChanged():(this.consumers.delete(a),d?.producers.delete(this.id))}}finally{pa=o}}producerAccessed(){if(pa)throw new Error("");if(null===Qs)return;let o=Qs.producers.get(this.id);void 0===o?(o={consumerNode:Qs.ref,producerNode:this.ref,seenValueVersion:this.valueVersion,atTrackingVersion:Qs.trackingVersion},Qs.producers.set(this.id,o),this.consumers.set(Qs.id,o)):(o.seenValueVersion=this.valueVersion,o.atTrackingVersion=Qs.trackingVersion)}get hasProducers(){return this.producers.size>0}get producerUpdatesAllowed(){return!1!==Qs?.consumerAllowSignalWrites}producerPollStatus(o){return this.valueVersion!==o||(this.onProducerUpdateValueVersion(),this.valueVersion!==o)}}let iu=null;function sc(s){const o=jr(null);try{return s()}finally{jr(o)}}const Mu=()=>{};class xu extends ji{constructor(o,a,l){super(),this.watch=o,this.schedule=a,this.dirty=!1,this.cleanupFn=Mu,this.registerOnCleanup=d=>{this.cleanupFn=d},this.consumerAllowSignalWrites=l}notify(){this.dirty||this.schedule(this),this.dirty=!0}onConsumerDependencyMayHaveChanged(){this.notify()}onProducerUpdateValueVersion(){}run(){if(this.dirty=!1,0!==this.trackingVersion&&!this.consumerPollProducersForChange())return;const o=jr(this);this.trackingVersion++;try{this.cleanupFn(),this.cleanupFn=Mu,this.watch(this.registerOnCleanup)}finally{jr(o)}}cleanup(){this.cleanupFn()}}class oc{constructor(o,a,l){this.previousValue=o,this.currentValue=a,this.firstChange=l}isFirstChange(){return this.firstChange}}function Na(){return ya}function ya(s){return s.type.prototype.ngOnChanges&&(s.setInput=Sl),ou}function ou(){const s=Al(this),o=s?.current;if(o){const a=s.previous;if(a===Wt)s.previous=o;else for(let l in o)a[l]=o[l];s.current=null,this.ngOnChanges(o)}}function Sl(s,o,a,l){const d=this.declaredInputs[a],f=Al(s)||function Ru(s,o){return s[ac]=o}(s,{previous:Wt,current:null}),y=f.current||(f.current={}),D=f.previous,A=D[d];y[d]=new oc(A&&A.currentValue,o,D===Wt),s[l]=o}Na.ngInherit=!0;const ac="__ngSimpleChanges__";function Al(s){return s[ac]||null}const ri=function(s,o,a){};function Vn(s){for(;Array.isArray(s);)s=s[Rr];return s}function M(s,o){return Vn(o[s])}function F(s,o){return Vn(o[s.index])}function W(s,o){return s.data[o]}function Ne(s,o){const a=o[s];return or(a)?a:a[Rr]}function xn(s,o){return null==o?null:s[o]}function Bn(s){s[yo]=0}function In(s){1024&s[tn]||(s[tn]|=1024,yn(s,1))}function Dr(s){1024&s[tn]&&(s[tn]&=-1025,yn(s,-1))}function yn(s,o){let a=s[er];if(null===a)return;a[Ur]+=o;let l=a;for(a=a[er];null!==a&&(1===o&&1===l[Ur]||-1===o&&0===l[Ur]);)a[Ur]+=o,l=a,a=a[er]}const Bt={lFrame:La(null),bindingsEnabled:!0,skipHydrationRootTNode:null};function jc(){return Bt.bindingsEnabled}function at(){return Bt.lFrame.lView}function Ln(){return Bt.lFrame.tView}function Ml(s){return Bt.lFrame.contextLView=s,s[Zn]}function uu(s){return Bt.lFrame.contextLView=null,s}function ts(){let s=ko();for(;null!==s&&64===s.type;)s=s.parent;return s}function ko(){return Bt.lFrame.currentTNode}function gs(s,o){const a=Bt.lFrame;a.currentTNode=s,a.isParent=o}function cu(){return Bt.lFrame.isParent}function Tr(){return Bt.lFrame.bindingIndex++}function Rl(s,o){const a=Bt.lFrame;a.bindingIndex=a.bindingRootIndex=s,va(o)}function va(s){Bt.lFrame.currentDirectiveIndex=s}function Fu(){return Bt.lFrame.currentQueryIndex}function Fa(s){Bt.lFrame.currentQueryIndex=s}function Lu(s){const o=s[Et];return 2===o.type?o.declTNode:1===o.type?s[Or]:null}function cc(s,o,a){if(a&mt.SkipSelf){let d=o,f=s;for(;!(d=d.parent,null!==d||a&mt.Host||(d=Lu(f),null===d||(f=f[Vi],10&d.type))););if(null===d)return!1;o=d,s=f}const l=Bt.lFrame=lc();return l.currentTNode=o,l.lView=s,!0}function lu(s){const o=lc(),a=s[Et];Bt.lFrame=o,o.currentTNode=a.firstChild,o.lView=s,o.tView=a,o.contextLView=s,o.bindingIndex=a.bindingStartIndex,o.inI18n=!1}function lc(){const s=Bt.lFrame,o=null===s?null:s.child;return null===o?La(s):o}function La(s){const o={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:s,child:null,inI18n:!1};return null!==s&&(s.child=o),o}function $c(){const s=Bt.lFrame;return Bt.lFrame=s.parent,s.currentTNode=null,s.lView=null,s}const Vd=$c;function Ea(){const s=$c();s.isParent=!0,s.tView=null,s.selectedIndex=-1,s.contextLView=null,s.elementDepthCount=0,s.currentDirectiveIndex=-1,s.currentNamespace=null,s.bindingRootIndex=-1,s.bindingIndex=-1,s.currentQueryIndex=0}function ys(){return Bt.lFrame.selectedIndex}function Fo(s){Bt.lFrame.selectedIndex=s}function Hr(){const s=Bt.lFrame;return W(s.tView,s.selectedIndex)}let Gc=!0;function I(){return Gc}function S(s){Gc=s}function x(s,o){for(let a=o.directiveStart,l=o.directiveEnd;a<l;a++){const f=s.data[a].type.prototype,{ngAfterContentInit:y,ngAfterContentChecked:D,ngAfterViewInit:A,ngAfterViewChecked:P,ngOnDestroy:q}=f;y&&(s.contentHooks??=[]).push(-a,y),D&&((s.contentHooks??=[]).push(a,D),(s.contentCheckHooks??=[]).push(a,D)),A&&(s.viewHooks??=[]).push(-a,A),P&&((s.viewHooks??=[]).push(a,P),(s.viewCheckHooks??=[]).push(a,P)),null!=q&&(s.destroyHooks??=[]).push(a,q)}}function L(s,o,a){Ee(s,o,3,a)}function Y(s,o,a,l){(3&s[tn])===a&&Ee(s,o,a,l)}function X(s,o){let a=s[tn];(3&a)===o&&(a&=8191,a+=1,s[tn]=a)}function Ee(s,o,a,l){const f=l??-1,y=o.length-1;let D=0;for(let A=void 0!==l?65535&s[yo]:0;A<y;A++)if("number"==typeof o[A+1]){if(D=o[A],null!=l&&D>=l)break}else o[A]<0&&(s[yo]+=65536),(D<f||-1==f)&&(qt(s,a,o,A),s[yo]=(4294901760&s[yo])+A+2),A++}function lt(s,o){ri(4,s,o);const a=jr(null);try{o.call(s)}finally{jr(a),ri(5,s,o)}}function qt(s,o,a,l){const d=a[l]<0,f=a[l+1],D=s[d?-a[l]:a[l]];d?s[tn]>>13<s[yo]>>16&&(3&s[tn])===o&&(s[tn]+=8192,lt(D,f)):lt(D,f)}const Vt=-1;class Kn{constructor(o,a,l){this.factory=o,this.resolving=!1,this.canSeeViewProviders=a,this.injectImpl=l}}function Lo(s){return s!==Vt}function Xs(s){return 32767&s}function Pl(s,o){let a=function Ol(s){return s>>16}(s),l=o;for(;a>0;)l=l[Vi],a--;return l}let hc=!0;function fc(s){const o=hc;return hc=s,o}const Yo=255,Gd=5;let Kp=0;const Ca={};function nf(s,o){const a=zd(s,o);if(-1!==a)return a;const l=o[Et];l.firstCreatePass&&(s.injectorIndex=o.length,kl(l.data,s),kl(o,null),kl(l.blueprint,null));const d=Fl(s,o),f=s.injectorIndex;if(Lo(d)){const y=Xs(d),D=Pl(d,o),A=D[Et].data;for(let P=0;P<8;P++)o[f+P]=D[y+P]|A[y+P]}return o[f+8]=d,f}function kl(s,o){s.push(0,0,0,0,0,0,0,0,o)}function zd(s,o){return-1===s.injectorIndex||s.parent&&s.parent.injectorIndex===s.injectorIndex||null===o[s.injectorIndex+8]?-1:s.injectorIndex}function Fl(s,o){if(s.parent&&-1!==s.parent.injectorIndex)return s.parent.injectorIndex;let a=0,l=null,d=o;for(;null!==d;){if(l=sf(d),null===l)return Vt;if(a++,d=d[Vi],-1!==l.injectorIndex)return l.injectorIndex|a<<16}return Vt}function Ua(s,o,a){!function tf(s,o,a){let l;"string"==typeof a?l=a.charCodeAt(0)||0:a.hasOwnProperty(Ue)&&(l=a[Ue]),null==l&&(l=a[Ue]=Kp++);const d=l&Yo;o.data[s+(d>>Gd)]|=1<<d}(s,o,a)}function pc(s,o,a){if(a&mt.Optional||void 0!==s)return s;_t()}function Wc(s,o,a,l){if(a&mt.Optional&&void 0===l&&(l=null),!(a&(mt.Self|mt.Host))){const d=s[Vr],f=Un(void 0);try{return d?d.get(o,l,a&mt.Optional):fr(o,l,a&mt.Optional)}finally{Un(f)}}return pc(l,0,a)}function qc(s,o,a,l=mt.Default,d){if(null!==s){if(2048&o[tn]&&!(l&mt.Self)){const y=function Qp(s,o,a,l,d){let f=s,y=o;for(;null!==f&&null!==y&&2048&y[tn]&&!(512&y[tn]);){const D=Zc(f,y,a,l|mt.Self,Ca);if(D!==Ca)return D;let A=f.parent;if(!A){const P=y[da];if(P){const q=P.get(a,Ca,l);if(q!==Ca)return q}A=sf(y),y=y[Vi]}f=A}return d}(s,o,a,l,Ca);if(y!==Ca)return y}const f=Zc(s,o,a,l,Ca);if(f!==Ca)return f}return Wc(o,a,l,d)}function Zc(s,o,a,l,d){const f=function Bu(s){if("string"==typeof s)return s.charCodeAt(0)||0;const o=s.hasOwnProperty(Ue)?s[Ue]:void 0;return"number"==typeof o?o>=0?o&Yo:Yp:o}(a);if("function"==typeof f){if(!cc(o,s,l))return l&mt.Host?pc(d,0,l):Wc(o,a,l,d);try{const y=f(l);if(null!=y||l&mt.Optional)return y;_t()}finally{Vd()}}else if("number"==typeof f){let y=null,D=zd(s,o),A=Vt,P=l&mt.Host?o[hr][Or]:null;for((-1===D||l&mt.SkipSelf)&&(A=-1===D?Fl(s,o):o[D+8],A!==Vt&&Ll(l,!1)?(y=o[Et],D=Xs(A),o=Pl(A,o)):D=-1);-1!==D;){const q=o[Et];if(Wd(f,D,q.data)){const ie=rf(D,o,a,y,l,P);if(ie!==Ca)return ie}A=o[D+8],A!==Vt&&Ll(l,o[Et].data[D+8]===P)&&Wd(f,D,o)?(y=q,D=Xs(A),o=Pl(A,o)):D=-1}}return d}function rf(s,o,a,l,d,f){const y=o[Et],D=y.data[s+8],q=pu(D,y,a,null==l?Us(D)&&hc:l!=y&&0!=(3&D.type),d&mt.Host&&f===D);return null!==q?Va(o,y,q,D):Ca}function pu(s,o,a,l,d){const f=s.providerIndexes,y=o.data,D=1048575&f,A=s.directiveStart,q=f>>20,me=d?D+q:s.directiveEnd;for(let De=l?D:D+q;De<me;De++){const $e=y[De];if(De<A&&a===$e||De>=A&&$e.type===a)return De}if(d){const De=y[A];if(De&&Zr(De)&&De.type===a)return A}return null}function Va(s,o,a,l){let d=s[a];const f=o.data;if(function vi(s){return s instanceof Kn}(d)){const y=d;y.resolving&&function nt(s,o){const a=o?`. Dependency path: ${o.join(" > ")} > ${s}`:"";throw new Ae(-200,`Circular dependency in DI detected for ${s}${a}`)}(function Le(s){return"function"==typeof s?s.name||s.toString():"object"==typeof s&&null!=s&&"function"==typeof s.type?s.type.name||s.type.toString():ye(s)}(f[a]));const D=fc(y.canSeeViewProviders);y.resolving=!0;const A=y.injectImpl?Un(y.injectImpl):null;cc(s,l,mt.Default);try{d=s[a]=y.factory(void 0,f,s,l),o.firstCreatePass&&a>=l.directiveStart&&function v(s,o,a){const{ngOnChanges:l,ngOnInit:d,ngDoCheck:f}=o.type.prototype;if(l){const y=ya(o);(a.preOrderHooks??=[]).push(s,y),(a.preOrderCheckHooks??=[]).push(s,y)}d&&(a.preOrderHooks??=[]).push(0-s,d),f&&((a.preOrderHooks??=[]).push(s,f),(a.preOrderCheckHooks??=[]).push(s,f))}(a,f[a],o)}finally{null!==A&&Un(A),fc(D),y.resolving=!1,Vd()}}return d}function Wd(s,o,a){return!!(a[o+(s>>Gd)]&1<<s)}function Ll(s,o){return!(s&mt.Self||s&mt.Host&&o)}class Qo{constructor(o,a){this._tNode=o,this._lView=a}get(o,a,l){return qc(this._tNode,this._lView,o,ue(l),a)}}function Yp(){return new Qo(ts(),at())}function Ul(s){return Xe(()=>{const o=s.prototype.constructor,a=o[xr]||Kc(o),l=Object.prototype;let d=Object.getPrototypeOf(s.prototype).constructor;for(;d&&d!==l;){const f=d[xr]||Kc(d);if(f&&f!==a)return f;d=Object.getPrototypeOf(d)}return f=>new f})}function Kc(s){return xe(s)?()=>{const o=Kc(et(s));return o&&o()}:zo(s)}function sf(s){const o=s[Et],a=o.type;return 2===a?o.declTNode:1===a?s[Or]:null}function Yc(s){return function Km(s,o){if("class"===o)return s.classes;if("style"===o)return s.styles;const a=s.attrs;if(a){const l=a.length;let d=0;for(;d<l;){const f=a[d];if(Qt(f))break;if(0===f)d+=2;else if("number"==typeof f)for(d++;d<l&&"string"==typeof a[d];)d++;else{if(f===o)return a[d+1];d+=2}}}return null}(ts(),s)}const Ba="__parameters__";function eo(s,o,a){return Xe(()=>{const l=function Qc(s){return function(...a){if(s){const l=s(...a);for(const d in l)this[d]=l[d]}}}(o);function d(...f){if(this instanceof d)return l.apply(this,f),this;const y=new d(...f);return D.annotation=y,D;function D(A,P,q){const ie=A.hasOwnProperty(Ba)?A[Ba]:Object.defineProperty(A,Ba,{value:[]})[Ba];for(;ie.length<=q;)ie.push(null);return(ie[q]=ie[q]||[]).push(y),A}}return a&&(d.prototype=Object.create(a.prototype)),d.prototype.ngMetadataName=s,d.annotationCls=d,d})}function ba(s,o){s.forEach(a=>Array.isArray(a)?ba(a,o):o(a))}function Xp(s,o,a){o>=s.length?s.push(a):s.splice(o,0,a)}function cf(s,o){return o>=s.length-1?s.pop():s.splice(o,1)[0]}function R(s,o,a){let l=re(s,o);return l>=0?s[1|l]=a:(l=~l,function Uv(s,o,a,l){let d=s.length;if(d==o)s.push(a,l);else if(1===d)s.push(l,s[0]),s[0]=a;else{for(d--,s.push(s[d-1],s[d]);d>o;)s[d]=s[d-2],d--;s[o]=a,s[o+1]=l}}(s,l,o,a)),l}function B(s,o){const a=re(s,o);if(a>=0)return s[1|a]}function re(s,o){return function Ce(s,o,a){let l=0,d=s.length>>a;for(;d!==l;){const f=l+(d-l>>1),y=s[f<<a];if(o===y)return f<<a;y>o?d=f:l=f+1}return~(d<<a)}(s,o,1)}const Gu=z(eo("Optional"),8),Co=z(eo("SkipSelf"),4);function hf(s){return 128==(128&s.flags)}var ja=(()=>((ja=ja||{})[ja.Important=1]="Important",ja[ja.DashCase=2]="DashCase",ja))();const ii=new Map;let on=0;const Wl="__ngContext__";function Hs(s,o){or(o)?(s[Wl]=o[Ls],function pf(s){ii.set(s[Ls],s)}(o)):s[Wl]=o}let Ss;function mu(s,o){return Ss(s,o)}function sh(s){const o=s[er];return Yi(o)?o[er]:o}function og(s){return oh(s[gi])}function As(s){return oh(s[Nr])}function oh(s){for(;null!==s&&!Yi(s);)s=s[Nr];return s}function yu(s,o,a,l,d){if(null!=l){let f,y=!1;Yi(l)?f=l:or(l)&&(y=!0,l=l[Rr]);const D=Vn(l);0===s&&null!==a?null==d?ht(o,a,D):Ie(o,a,D,d||null,!0):1===s&&null!==a?Ie(o,a,D,d||null,!0):2===s?function uh(s,o,a){const l=Jr(s,o);l&&function Ft(s,o,a,l){s.removeChild(o,a,l)}(s,l,o,a)}(o,D,y):3===s&&o.destroyNode(D),null!=f&&function Xv(s,o,a,l,d){const f=a[mi];f!==Vn(a)&&yu(o,s,l,f,d);for(let D=Br;D<a.length;D++){const A=a[D];lh(A[Et],A,s,o,l,f)}}(o,s,f,a,d)}}function xs(s,o,a){return s.createElement(o,a)}function dy(s,o){const a=s[fs],l=a.indexOf(o);Dr(o),a.splice(l,1)}function _(s,o){if(s.length<=Br)return;const a=Br+o,l=s[a];if(l){const d=l[Cs];null!==d&&d!==s&&dy(d,l),o>0&&(s[a-1][Nr]=l[Nr]);const f=cf(s,Br+o);!function ag(s,o){lh(s,o,o[un],2,null,null),o[Rr]=null,o[Or]=null}(l[Et],l);const y=f[oi];null!==y&&y.detachView(f[Et]),l[er]=null,l[Nr]=null,l[tn]&=-129}return l}function h(s,o){if(!(256&o[tn])){const a=o[un];o[ha]?.destroy(),o[Ks]?.destroy(),a.destroyNode&&lh(s,o,a,3,null,null),function Yv(s){let o=s[gi];if(!o)return g(s[Et],s);for(;o;){let a=null;if(or(o))a=o[gi];else{const l=o[Br];l&&(a=l)}if(!a){for(;o&&!o[Nr]&&o!==s;)or(o)&&g(o[Et],o),o=o[er];null===o&&(o=s),or(o)&&g(o[Et],o),a=o&&o[Nr]}o=a}}(o)}}function g(s,o){if(!(256&o[tn])){o[tn]&=-129,o[tn]|=256,function k(s,o){let a;if(null!=s&&null!=(a=s.destroyHooks))for(let l=0;l<a.length;l+=2){const d=o[a[l]];if(!(d instanceof Kn)){const f=a[l+1];if(Array.isArray(f))for(let y=0;y<f.length;y+=2){const D=d[f[y]],A=f[y+1];ri(4,D,A);try{A.call(D)}finally{ri(5,D,A)}}else{ri(4,d,f);try{f.call(d)}finally{ri(5,d,f)}}}}}(s,o),function C(s,o){const a=s.cleanup,l=o[Fs];if(null!==a)for(let f=0;f<a.length-1;f+=2)if("string"==typeof a[f]){const y=a[f+3];y>=0?l[y]():l[-y].unsubscribe(),f+=2}else a[f].call(l[a[f+1]]);null!==l&&(o[Fs]=null);const d=o[Fr];if(null!==d){o[Fr]=null;for(let f=0;f<d.length;f++)(0,d[f])()}}(s,o),1===o[Et].type&&o[un].destroy();const a=o[Cs];if(null!==a&&Yi(o[er])){a!==o[er]&&dy(a,o);const l=o[oi];null!==l&&l.detachView(s)}!function zv(s){ii.delete(s[Ls])}(o)}}function H(s,o,a){return function he(s,o,a){let l=o;for(;null!==l&&40&l.type;)l=(o=l).parent;if(null===l)return a[Rr];{const{componentOffset:d}=l;if(d>-1){const{encapsulation:f}=s.data[l.directiveStart+d];if(f===Yt.None||f===Yt.Emulated)return null}return F(l,a)}}(s,o.parent,a)}function Ie(s,o,a,l,d){s.insertBefore(o,a,l,d)}function ht(s,o,a){s.appendChild(o,a)}function vt(s,o,a,l,d){null!==l?Ie(s,o,a,l,d):ht(s,o,a)}function Jr(s,o){return s.parentNode(o)}let _f,$a,hy,fy,Ql=function Da(s,o,a){return 40&s.type?F(s,a):null};function il(s,o,a,l){const d=H(s,l,o),f=o[un],D=function ah(s,o,a){return Ql(s,o,a)}(l.parent||o[Or],l,o);if(null!=d)if(Array.isArray(a))for(let A=0;A<a.length;A++)vt(f,d,a[A],D,!1);else vt(f,d,a,D,!1);void 0!==_f&&_f(f,l,o,a,d)}function Jl(s,o){if(null!==o){const a=o.type;if(3&a)return F(o,s);if(4&a)return vc(-1,s[o.index]);if(8&a){const l=o.child;if(null!==l)return Jl(s,l);{const d=s[o.index];return Yi(d)?vc(-1,d):Vn(d)}}if(32&a)return mu(o,s)()||Vn(s[o.index]);{const l=$s(s,o);return null!==l?Array.isArray(l)?l[0]:Jl(sh(s[hr]),l):Jl(s,o.next)}}return null}function $s(s,o){return null!==o?s[hr][Or].projection[o.projection]:null}function vc(s,o){const a=Br+s+1;if(a<o.length){const l=o[a],d=l[Et].firstChild;if(null!==d)return Jl(l,d)}return o[mi]}function ch(s,o,a,l,d,f,y){for(;null!=a;){const D=l[a.index],A=a.type;if(y&&0===o&&(D&&Hs(Vn(D),l),a.flags|=2),32!=(32&a.flags))if(8&A)ch(s,o,a.child,l,d,f,!1),yu(o,s,d,D,f);else if(32&A){const P=mu(a,l);let q;for(;q=P();)yu(o,s,d,q,f);yu(o,s,d,D,f)}else 16&A?HC(s,o,l,a,d,f):yu(o,s,d,D,f);a=y?a.projectionNext:a.next}}function lh(s,o,a,l,d,f){ch(a,l,s.firstChild,o,d,f,!1)}function HC(s,o,a,l,d,f){const y=a[hr],A=y[Or].projection[l.projection];if(Array.isArray(A))for(let P=0;P<A.length;P++)yu(o,s,d,A[P],f);else{let P=A;const q=y[er];hf(l)&&(P.flags|=128),ch(s,o,P,q,d,f,!0)}}function zC(s,o,a){""===a?s.removeAttribute(o,"class"):s.setAttribute(o,"class",a)}function WC(s,o,a){const{mergedAttrs:l,classes:d,styles:f}=a;null!==l&&Pt(s,o,l),null!==d&&zC(s,o,d),null!==f&&function GC(s,o,a){s.setAttribute(o,"style",a)}(s,o,f)}function sl(s){return function _u(){if(void 0===$a&&($a=null,An.trustedTypes))try{$a=An.trustedTypes.createPolicy("angular",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return $a}()?.createHTML(s)||s}function xS(s){hy=s}function vf(){if(void 0!==hy)return hy;if(typeof document<"u")return document;throw new Ae(210,!1)}function e0(){if(void 0===fy&&(fy=null,An.trustedTypes))try{fy=An.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:s=>s,createScript:s=>s,createScriptURL:s=>s})}catch{}return fy}function qC(s){return e0()?.createHTML(s)||s}function t0(s){return e0()?.createScriptURL(s)||s}class n0{constructor(o){this.changingThisBreaksApplicationSecurity=o}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${yt})`}}function ed(s){return s instanceof n0?s.changingThisBreaksApplicationSecurity:s}function dg(s,o){const a=function Xo(s){return s instanceof n0&&s.getTypeName()||null}(s);if(null!=a&&a!==o){if("ResourceURL"===a&&"URL"===o)return!0;throw new Error(`Required a safe ${o}, got a ${a} (see ${yt})`)}return a===o}class zu{constructor(o){this.inertDocumentHelper=o}getInertBodyElement(o){o="<body><remove></remove>"+o;try{const a=(new window.DOMParser).parseFromString(sl(o),"text/html").body;return null===a?this.inertDocumentHelper.getInertBodyElement(o):(a.removeChild(a.firstChild),a)}catch{return null}}}class PS{constructor(o){this.defaultDoc=o,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert")}getInertBodyElement(o){const a=this.inertDocument.createElement("template");return a.innerHTML=sl(o),a}}const FS=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function s0(s){return(s=String(s)).match(FS)?s:"unsafe:"+s}function Ec(s){const o={};for(const a of s.split(","))o[a]=!0;return o}function Wu(...s){const o={};for(const a of s)for(const l in a)a.hasOwnProperty(l)&&(o[l]=!0);return o}const JC=Ec("area,br,col,hr,img,wbr"),XC=Ec("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),o0=Ec("rp,rt"),gy=Wu(JC,Wu(XC,Ec("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Wu(o0,Ec("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),Wu(o0,XC)),fg=Ec("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),eI=Wu(fg,Ec("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,srcset,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ec("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),US=Ec("script,style,template");class VS{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(o){let a=o.firstChild,l=!0;for(;a;)if(a.nodeType===Node.ELEMENT_NODE?l=this.startElement(a):a.nodeType===Node.TEXT_NODE?this.chars(a.nodeValue):this.sanitizedSomething=!0,l&&a.firstChild)a=a.firstChild;else for(;a;){a.nodeType===Node.ELEMENT_NODE&&this.endElement(a);let d=this.checkClobberedElement(a,a.nextSibling);if(d){a=d;break}a=this.checkClobberedElement(a,a.parentNode)}return this.buf.join("")}startElement(o){const a=o.nodeName.toLowerCase();if(!gy.hasOwnProperty(a))return this.sanitizedSomething=!0,!US.hasOwnProperty(a);this.buf.push("<"),this.buf.push(a);const l=o.attributes;for(let d=0;d<l.length;d++){const f=l.item(d),y=f.name,D=y.toLowerCase();if(!eI.hasOwnProperty(D)){this.sanitizedSomething=!0;continue}let A=f.value;fg[D]&&(A=s0(A)),this.buf.push(" ",y,'="',nI(A),'"')}return this.buf.push(">"),!0}endElement(o){const a=o.nodeName.toLowerCase();gy.hasOwnProperty(a)&&!JC.hasOwnProperty(a)&&(this.buf.push("</"),this.buf.push(a),this.buf.push(">"))}chars(o){this.buf.push(nI(o))}checkClobberedElement(o,a){if(a&&(o.compareDocumentPosition(a)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${o.outerHTML}`);return a}}const tI=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,BS=/([^\#-~ |!])/g;function nI(s){return s.replace(/&/g,"&amp;").replace(tI,function(o){return"&#"+(1024*(o.charCodeAt(0)-55296)+(o.charCodeAt(1)-56320)+65536)+";"}).replace(BS,function(o){return"&#"+o.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let pg;function my(s){return"content"in s&&function HS(s){return s.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===s.nodeName}(s)?s.content:null}var ns=(()=>((ns=ns||{})[ns.NONE=0]="NONE",ns[ns.HTML=1]="HTML",ns[ns.STYLE=2]="STYLE",ns[ns.SCRIPT=3]="SCRIPT",ns[ns.URL=4]="URL",ns[ns.RESOURCE_URL=5]="RESOURCE_URL",ns))();function a0(s){const o=gg();return o?qC(o.sanitize(ns.HTML,s)||""):dg(s,"HTML")?qC(ed(s)):function jS(s,o){let a=null;try{pg=pg||function QC(s){const o=new PS(s);return function kS(){try{return!!(new window.DOMParser).parseFromString(sl(""),"text/html")}catch{return!1}}()?new zu(o):o}(s);let l=o?String(o):"";a=pg.getInertBodyElement(l);let d=5,f=l;do{if(0===d)throw new Error("Failed to sanitize html because the input is unstable");d--,l=f,f=a.innerHTML,a=pg.getInertBodyElement(l)}while(l!==f);return sl((new VS).sanitizeChildren(my(a)||a))}finally{if(a){const l=my(a)||a;for(;l.firstChild;)l.removeChild(l.firstChild)}}}(vf(),ye(s))}function yy(s){const o=gg();return o?o.sanitize(ns.URL,s)||"":dg(s,"URL")?ed(s):s0(ye(s))}function $S(s){const o=gg();if(o)return t0(o.sanitize(ns.RESOURCE_URL,s)||"");if(dg(s,"ResourceURL"))return t0(ed(s));throw new Ae(904,!1)}function iI(s,o,a){return function zS(s,o){return"src"===o&&("embed"===s||"frame"===s||"iframe"===s||"media"===s||"script"===s)||"href"===o&&("base"===s||"link"===s)?$S:yy}(o,a)(s)}function gg(){const s=at();return s&&s[pi].sanitizer}class Pr{constructor(o,a){this._desc=o,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof a?this.__NG_ELEMENT_ID__=a:void 0!==a&&(this.\u0275prov=sn({token:this,providedIn:a.providedIn||"root",factory:a.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}const Ef=new Pr("ENVIRONMENT_INITIALIZER"),sI=new Pr("INJECTOR",-1),WS=new Pr("INJECTOR_DEF_TYPES");class u0{get(o,a=kr){if(a===kr){const l=new Error(`NullInjectorError: No provider for ${_e(o)}!`);throw l.name="NullInjectorError",l}return a}}function oI(s){return{\u0275providers:s}}function GR(...s){return{\u0275providers:aI(0,s),\u0275fromNgModule:!0}}function aI(s,...o){const a=[],l=new Set;let d;return ba(o,f=>{const y=f;wf(y,a,[],l)&&(d||=[],d.push(y))}),void 0!==d&&uI(d,a),a}function uI(s,o){for(let a=0;a<s.length;a++){const{providers:d}=s[a];_y(d,f=>{o.push(f)})}}function wf(s,o,a,l){if(!(s=et(s)))return!1;let d=null,f=fo(s);const y=!f&&dn(s);if(f||y){if(y&&!y.standalone)return!1;d=s}else{const A=s.ngModule;if(f=fo(A),!f)return!1;d=A}const D=l.has(d);if(y){if(D)return!1;if(l.add(d),y.dependencies){const A="function"==typeof y.dependencies?y.dependencies():y.dependencies;for(const P of A)wf(P,o,a,l)}}else{if(!f)return!1;{if(null!=f.imports&&!D){let P;l.add(d);try{ba(f.imports,q=>{wf(q,o,a,l)&&(P||=[],P.push(q))})}finally{}void 0!==P&&uI(P,o)}if(!D){const P=zo(d)||(()=>new d);o.push({provide:d,useFactory:P,deps:Rt},{provide:WS,useValue:d,multi:!0},{provide:Ef,useValue:()=>Nn(d),multi:!0})}const A=f.providers;null==A||D||_y(A,q=>{o.push(q)})}}return d!==s&&void 0!==s.providers}function _y(s,o){for(let a of s)Ge(a)&&(a=a.\u0275providers),Array.isArray(a)?_y(a,o):o(a)}const ol=oe({provide:String,useValue:oe});function vy(s){return null!==s&&"object"==typeof s&&ol in s}function dh(s){return"function"==typeof s}const l0=new Pr("Set Injector scope."),Ey={},KS={};let wy;function hh(){return void 0===wy&&(wy=new u0),wy}class fh{}class d0 extends fh{get destroyed(){return this._destroyed}constructor(o,a,l,d){super(),this.parent=a,this.source=l,this.scopes=d,this.records=new Map,this._ngOnDestroyHooks=new Set,this._onDestroyHooks=[],this._destroyed=!1,ph(o,y=>this.processProvider(y)),this.records.set(sI,Cf(void 0,this)),d.has("environment")&&this.records.set(fh,Cf(void 0,this));const f=this.records.get(l0);null!=f&&"string"==typeof f.value&&this.scopes.add(f.value),this.injectorDefTypes=new Set(this.get(WS.multi,Rt,mt.Self))}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{for(const a of this._ngOnDestroyHooks)a.ngOnDestroy();const o=this._onDestroyHooks;this._onDestroyHooks=[];for(const a of o)a()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear()}}onDestroy(o){return this.assertNotDestroyed(),this._onDestroyHooks.push(o),()=>this.removeOnDestroy(o)}runInContext(o){this.assertNotDestroyed();const a=Gn(this),l=Un(void 0);try{return o()}finally{Gn(a),Un(l)}}get(o,a=kr,l=mt.Default){if(this.assertNotDestroyed(),o.hasOwnProperty(Se))return o[Se](this);l=ue(l);const d=Gn(this),f=Un(void 0);try{if(!(l&mt.SkipSelf)){let D=this.records.get(o);if(void 0===D){const A=function p0(s){return"function"==typeof s||"object"==typeof s&&s instanceof Pr}(o)&&Lt(o);D=A&&this.injectableDefInScope(A)?Cf(h0(o),Ey):null,this.records.set(o,D)}if(null!=D)return this.hydrate(o,D)}return(l&mt.Self?hh():this.parent).get(o,a=l&mt.Optional&&a===kr?null:a)}catch(y){if("NullInjectorError"===y.name){if((y[Ai]=y[Ai]||[]).unshift(_e(o)),d)throw y;return function ne(s,o,a,l){const d=s[Ai];throw o[li]&&d.unshift(o[li]),s.message=function be(s,o,a,l=null){s=s&&"\n"===s.charAt(0)&&"\u0275"==s.charAt(1)?s.slice(2):s;let d=_e(o);if(Array.isArray(o))d=o.map(_e).join(" -> ");else if("object"==typeof o){let f=[];for(let y in o)if(o.hasOwnProperty(y)){let D=o[y];f.push(y+":"+("string"==typeof D?JSON.stringify(D):_e(D)))}d=`{${f.join(", ")}}`}return`${a}${l?"("+l+")":""}[${d}]: ${s.replace(hs,"\n  ")}`}("\n"+s.message,d,a,l),s.ngTokenPath=d,s[Ai]=null,s}(y,o,"R3InjectorError",this.source)}throw y}finally{Un(f),Gn(d)}}resolveInjectorInitializers(){const o=Gn(this),a=Un(void 0);try{const l=this.get(Ef.multi,Rt,mt.Self);for(const d of l)d()}finally{Gn(o),Un(a)}}toString(){const o=[],a=this.records;for(const l of a.keys())o.push(_e(l));return`R3Injector[${o.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Ae(205,!1)}processProvider(o){let a=dh(o=et(o))?o:et(o&&o.provide);const l=function QS(s){return vy(s)?Cf(void 0,s.useValue):Cf(JS(s),Ey)}(o);if(dh(o)||!0!==o.multi)this.records.get(a);else{let d=this.records.get(a);d||(d=Cf(void 0,Ey,!0),d.factory=()=>G(d.multi),this.records.set(a,d)),a=o,d.multi.push(o)}this.records.set(a,l)}hydrate(o,a){return a.value===Ey&&(a.value=KS,a.value=a.factory()),"object"==typeof a.value&&a.value&&function f0(s){return null!==s&&"object"==typeof s&&"function"==typeof s.ngOnDestroy}(a.value)&&this._ngOnDestroyHooks.add(a.value),a.value}injectableDefInScope(o){if(!o.providedIn)return!1;const a=et(o.providedIn);return"string"==typeof a?"any"===a||this.scopes.has(a):this.injectorDefTypes.has(a)}removeOnDestroy(o){const a=this._onDestroyHooks.indexOf(o);-1!==a&&this._onDestroyHooks.splice(a,1)}}function h0(s){const o=Lt(s),a=null!==o?o.factory:zo(s);if(null!==a)return a;if(s instanceof Pr)throw new Ae(204,!1);if(s instanceof Function)return function YS(s){const o=s.length;if(o>0)throw function Xc(s,o){const a=[];for(let l=0;l<s;l++)a.push(o);return a}(o,"?"),new Ae(204,!1);const a=function Er(s){return s&&(s[Wr]||s[lr])||null}(s);return null!==a?()=>a.factory(s):()=>new s}(s);throw new Ae(204,!1)}function JS(s,o,a){let l;if(dh(s)){const d=et(s);return zo(d)||h0(d)}if(vy(s))l=()=>et(s.useValue);else if(function cI(s){return!(!s||!s.useFactory)}(s))l=()=>s.useFactory(...G(s.deps||[]));else if(function c0(s){return!(!s||!s.useExisting)}(s))l=()=>Nn(et(s.useExisting));else{const d=et(s&&(s.useClass||s.provide));if(!function XS(s){return!!s.deps}(s))return zo(d)||h0(d);l=()=>new d(...G(s.deps))}return l}function Cf(s,o,a=!1){return{factory:s,value:o,multi:a?[]:void 0}}function ph(s,o){for(const a of s)Array.isArray(a)?ph(a,o):a&&Ge(a)?ph(a.\u0275providers,o):o(a)}const g0=new Pr("AppId",{providedIn:"root",factory:()=>zR}),zR="ng",m0=new Pr("Platform Initializer"),wc=new Pr("Platform ID",{providedIn:"platform",factory:()=>"unknown"}),kt=new Pr("CSP nonce",{providedIn:"root",factory:()=>vf().body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null});let bf=(s,o)=>null;function by(s,o){return bf(s,o)}class b0{}class Sy{}class iA{resolveComponentFactory(o){throw function fI(s){const o=Error(`No component factory found for ${_e(s)}.`);return o.ngComponent=s,o}(o)}}let rd=(()=>{class s{}return s.NULL=new iA,s})();function sA(){return Sf(ts(),at())}function Sf(s,o){return new id(F(s,o))}let id=(()=>{class s{constructor(a){this.nativeElement=a}}return s.__NG_ELEMENT_ID__=sA,s})();function D0(s){return s instanceof id?s.nativeElement:s}class gI{}let mI=(()=>{class s{constructor(){this.destroyNode=null}}return s.__NG_ELEMENT_ID__=()=>function yI(){const s=at(),a=Ne(ts().index,s);return(or(a)?a:s)[un]}(),s})(),_I=(()=>{class s{}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>null}),s})();class vg{constructor(o){this.full=o,this.major=o.split(".")[0],this.minor=o.split(".")[1],this.patch=o.split(".").slice(2).join(".")}}const My=new vg("16.1.5"),Eg={};function gh(s){for(;s;){s[tn]|=64;const o=sh(s);if(ai(s)&&!o)return s;s=o}return null}function Ry(s){return s.ngOriginalError}class Af{constructor(){this._console=console}handleError(o){const a=this._findOriginalError(o);this._console.error("ERROR",o),a&&this._console.error("ORIGINAL ERROR",a)}_findOriginalError(o){let a=o&&Ry(o);for(;a&&Ry(a);)a=Ry(a);return a||null}}const Ny=new Pr("",{providedIn:"root",factory:()=>!1});function qu(s){return s instanceof Function?s():s}class Mf extends ji{constructor(){super(...arguments),this.consumerAllowSignalWrites=!1,this._lView=null}set lView(o){this._lView=o}onConsumerDependencyMayHaveChanged(){gh(this._lView)}onProducerUpdateValueVersion(){}get hasReadASignal(){return this.hasProducers}runInContext(o,a,l){const d=jr(this);this.trackingVersion++;try{o(a,l)}finally{jr(d)}}destroy(){this.trackingVersion++}}let xf=null;function x0(){return xf??=new Mf,xf}function II(s,o){return s[o]??x0()}function Cg(s,o){const a=x0();a.hasReadASignal&&(s[o]=xf,a.lView=s,xf=new Mf)}const Dn={};function Py(s){R0(Ln(),at(),ys()+s,!1)}function R0(s,o,a,l){if(!l)if(3==(3&o[tn])){const f=s.preOrderCheckHooks;null!==f&&L(o,f,a)}else{const f=s.preOrderHooks;null!==f&&Y(o,f,0,a)}Fo(a)}function sd(s,o=null,a=null,l){const d=O0(s,o,a,l);return d.resolveInjectorInitializers(),d}function O0(s,o=null,a=null,l,d=new Set){const f=[a||Rt,GR(s)];return l=l||("object"==typeof s?void 0:_e(s)),new d0(f,o||hh(),l||null,d)}let Zu=(()=>{class s{static create(a,l){if(Array.isArray(a))return sd({name:""},l,a,"");{const d=a.name??"";return sd({name:d},a.parent,a.providers,d)}}}return s.THROW_IF_NOT_FOUND=kr,s.NULL=new u0,s.\u0275prov=sn({token:s,providedIn:"any",factory:()=>Nn(sI)}),s.__NG_ELEMENT_ID__=-1,s})();function mh(s,o=mt.Default){const a=at();return null===a?Nn(s,o):qc(ts(),a,et(s),o)}function Nf(){throw new Error("invalid")}function so(s,o,a,l,d,f,y,D,A,P,q){const ie=o.blueprint.slice();return ie[Rr]=d,ie[tn]=140|l,(null!==P||s&&2048&s[tn])&&(ie[tn]|=2048),Bn(ie),ie[er]=ie[Vi]=s,ie[Zn]=a,ie[pi]=y||s&&s[pi],ie[un]=D||s&&s[un],ie[Vr]=A||s&&s[Vr]||null,ie[Or]=f,ie[Ls]=function ig(){return on++}(),ie[Ir]=q,ie[da]=P,ie[hr]=2==o.type?s[hr]:ie,ie}function yh(s,o,a,l,d){let f=s.data[o];if(null===f)f=function _h(s,o,a,l,d){const f=ko(),y=cu(),A=s.data[o]=function Uy(s,o,a,l,d,f){let y=o?o.injectorIndex:-1,D=0;return function Po(){return null!==Bt.skipHydrationRootTNode}()&&(D|=128),{type:a,index:l,insertBeforeIndex:null,injectorIndex:y,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,propertyBindings:null,flags:D,providerIndexes:0,value:d,attrs:f,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:o,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,y?f:f&&f.parent,a,o,l,d);return null===s.firstChild&&(s.firstChild=A),null!==f&&(y?null==f.child&&null!==A.parent&&(f.child=A):null===f.next&&(f.next=A,A.prev=f)),A}(s,o,a,l,d),function ms(){return Bt.lFrame.inI18n}()&&(f.flags|=32);else if(64&f.type){f.type=a,f.value=l,f.attrs=d;const y=function Oa(){const s=Bt.lFrame,o=s.currentTNode;return s.isParent?o:o.parent}();f.injectorIndex=null===y?-1:y.injectorIndex}return gs(f,!0),f}function od(s,o,a,l){if(0===a)return-1;const d=o.length;for(let f=0;f<a;f++)o.push(l),s.blueprint.push(l),s.data.push(null);return d}function P0(s,o,a,l,d){const f=II(o,ha),y=ys(),D=2&l;try{if(Fo(-1),D&&o.length>fn&&R0(s,o,fn,!1),ri(D?2:0,d),D)f.runInContext(a,l,d);else{const P=jr(null);try{a(l,d)}finally{jr(P)}}}finally{D&&null===o[ha]&&Cg(o,ha),Fo(y),ri(D?3:1,d)}}function Dg(s,o,a){if(_o(o)){const l=jr(null);try{const f=o.directiveEnd;for(let y=o.directiveStart;y<f;y++){const D=s.data[y];D.contentQueries&&D.contentQueries(1,a[y],y)}}finally{jr(l)}}}function ky(s,o,a){jc()&&(function pA(s,o,a,l){const d=a.directiveStart,f=a.directiveEnd;Us(a)&&function wi(s,o,a){const l=F(o,s),d=Of(a);let y=16;a.signals?y=4096:a.onPush&&(y=64);const D=Hy(s,so(s,d,null,y,l,o,null,s[pi].rendererFactory.createRenderer(l,a),null,null,null));s[o.index]=D}(o,a,s.data[d+a.componentOffset]),s.firstCreatePass||nf(a,o),Hs(l,o);const y=a.initialInputs;for(let D=d;D<f;D++){const A=s.data[D],P=Va(o,s,D,a);Hs(P,o),null!==y&&Ag(0,D-d,P,A,0,y),Zr(A)&&(Ne(a.index,o)[Zn]=Va(o,s,D,a))}}(s,o,a,F(a,o)),64==(64&a.flags)&&j0(s,o,a))}function Fy(s,o,a=F){const l=o.localNames;if(null!==l){let d=o.index+1;for(let f=0;f<l.length;f+=2){const y=l[f+1],D=-1===y?a(o,s):s[y];s[d++]=D}}}function Of(s){const o=s.tView;return null===o||o.incompleteFirstPass?s.tView=Tg(1,null,s.template,s.decls,s.vars,s.directiveDefs,s.pipeDefs,s.viewQuery,s.schemas,s.consts,s.id):o}function Tg(s,o,a,l,d,f,y,D,A,P,q){const ie=fn+l,me=ie+d,De=function k0(s,o){const a=[];for(let l=0;l<o;l++)a.push(l<s?null:Dn);return a}(ie,me),$e="function"==typeof P?P():P;return De[Et]={type:s,blueprint:De,template:a,queries:null,viewQuery:D,declTNode:o,data:De.slice().fill(null,ie),bindingStartIndex:ie,expandoStartIndex:me,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof f?f():f,pipeRegistry:"function"==typeof y?y():y,firstChild:null,schemas:A,consts:$e,incompleteFirstPass:!1,ssrId:q}}let Pf=s=>null;function Vy(s,o,a,l){for(let d in s)if(s.hasOwnProperty(d)){a=null===a?{}:a;const f=s[d];null===l?U0(a,o,d,f):l.hasOwnProperty(d)&&U0(a,o,l[d],f)}return a}function U0(s,o,a,l){s.hasOwnProperty(a)?s[a].push(o,l):s[a]=[o,l]}function Ga(s,o,a,l,d,f,y,D){const A=F(o,a);let q,P=o.inputs;!D&&null!=P&&(q=P[l])?(ud(s,a,q,l,d),Us(o)&&function Sg(s,o){const a=Ne(o,s);16&a[tn]||(a[tn]|=64)}(a,o.index)):3&o.type&&(l=function xI(s){return"class"===s?"className":"for"===s?"htmlFor":"formaction"===s?"formAction":"innerHtml"===s?"innerHTML":"readonly"===s?"readOnly":"tabindex"===s?"tabIndex":s}(l),d=null!=y?y(d,o.value||"",l):d,f.setProperty(A,l,d))}function vh(s,o,a,l){if(jc()){const d=null===l?null:{"":-1},f=function gA(s,o){const a=s.directiveRegistry;let l=null,d=null;if(a)for(let f=0;f<a.length;f++){const y=a[f];if(Zi(o,y.selectors,!1))if(l||(l=[]),Zr(y))if(null!==y.findHostDirectiveDefs){const D=[];d=d||new Map,y.findHostDirectiveDefs(y,D,d),l.unshift(...D,y),ul(s,o,D.length)}else l.unshift(y),ul(s,o,0);else d=d||new Map,y.findHostDirectiveDefs?.(y,l,d),l.push(y)}return null===l?null:[l,d]}(s,a);let y,D;null===f?y=D=null:[y,D]=f,null!==y&&ad(s,o,a,y,d,D),d&&function cl(s,o,a){if(o){const l=s.localNames=[];for(let d=0;d<o.length;d+=2){const f=a[o[d+1]];if(null==f)throw new Ae(-301,!1);l.push(o[d],f)}}}(a,l,d)}a.mergedAttrs=mn(a.mergedAttrs,a.attrs)}function ad(s,o,a,l,d,f){for(let P=0;P<l.length;P++)Ua(nf(a,o),s,l[P].type);!function jy(s,o,a){s.flags|=1,s.directiveStart=o,s.directiveEnd=o+a,s.providerIndexes=o}(a,s.data.length,l.length);for(let P=0;P<l.length;P++){const q=l[P];q.providersResolver&&q.providersResolver(q)}let y=!1,D=!1,A=od(s,o,l.length,null);for(let P=0;P<l.length;P++){const q=l[P];a.mergedAttrs=mn(a.mergedAttrs,q.hostAttrs),OI(s,a,o,A,q),By(A,q,d),null!==q.contentQueries&&(a.flags|=4),(null!==q.hostBindings||null!==q.hostAttrs||0!==q.hostVars)&&(a.flags|=64);const ie=q.type.prototype;!y&&(ie.ngOnChanges||ie.ngOnInit||ie.ngDoCheck)&&((s.preOrderHooks??=[]).push(a.index),y=!0),!D&&(ie.ngOnChanges||ie.ngDoCheck)&&((s.preOrderCheckHooks??=[]).push(a.index),D=!0),A++}!function MI(s,o,a){const d=o.directiveEnd,f=s.data,y=o.attrs,D=[];let A=null,P=null;for(let q=o.directiveStart;q<d;q++){const ie=f[q],me=a?a.get(ie):null,$e=me?me.outputs:null;A=Vy(ie.inputs,q,A,me?me.inputs:null),P=Vy(ie.outputs,q,P,$e);const ut=null===A||null===y||qs(o)?null:kI(A,q,y);D.push(ut)}null!==A&&(A.hasOwnProperty("class")&&(o.flags|=8),A.hasOwnProperty("style")&&(o.flags|=16)),o.initialInputs=D,o.inputs=A,o.outputs=P}(s,a,f)}function j0(s,o,a){const l=a.directiveStart,d=a.directiveEnd,f=a.index,y=function Zo(){return Bt.lFrame.currentDirectiveIndex}();try{Fo(f);for(let D=l;D<d;D++){const A=s.data[D],P=o[D];va(D),(null!==A.hostBindings||0!==A.hostVars||null!==A.hostAttrs)&&NI(A,P)}}finally{Fo(-1),va(y)}}function NI(s,o){null!==s.hostBindings&&s.hostBindings(1,o)}function ul(s,o,a){o.componentOffset=a,(s.components??=[]).push(o.index)}function By(s,o,a){if(a){if(o.exportAs)for(let l=0;l<o.exportAs.length;l++)a[o.exportAs[l]]=s;Zr(o)&&(a[""]=s)}}function OI(s,o,a,l,d){s.data[l]=d;const f=d.factory||(d.factory=zo(d.type)),y=new Kn(f,Zr(d),mh);s.blueprint[l]=y,a[l]=y,function B0(s,o,a,l,d){const f=d.hostBindings;if(f){let y=s.hostBindingOpCodes;null===y&&(y=s.hostBindingOpCodes=[]);const D=~o.index;(function fA(s){let o=s.length;for(;o>0;){const a=s[--o];if("number"==typeof a&&a<0)return a}return 0})(y)!=D&&y.push(D),y.push(a,l,f)}}(s,o,l,od(s,a,d.hostVars,Dn),d)}function za(s,o,a,l,d,f){const y=F(s,o);!function Eh(s,o,a,l,d,f,y){if(null==f)s.removeAttribute(o,d,a);else{const D=null==y?ye(f):y(f,l||"",d);s.setAttribute(o,d,D,a)}}(o[un],y,f,s.value,a,l,d)}function Ag(s,o,a,l,d,f){const y=f[o];if(null!==y)for(let D=0;D<y.length;)PI(l,a,y[D++],y[D++],y[D++])}function PI(s,o,a,l,d){const f=jr(null);try{const y=s.inputTransforms;null!==y&&y.hasOwnProperty(l)&&(d=y[l].call(o,d)),null!==s.setInput?s.setInput(o,d,a,l):o[l]=d}finally{jr(f)}}function kI(s,o,a){let l=null,d=0;for(;d<a.length;){const f=a[d];if(0!==f)if(5!==f){if("number"==typeof f)break;if(s.hasOwnProperty(f)){null===l&&(l=[]);const y=s[f];for(let D=0;D<y.length;D+=2)if(y[D]===o){l.push(f,y[D+1],a[d+1]);break}}d+=2}else d+=2;else d+=4}return l}function FI(s,o,a,l){return[s,!0,!1,o,null,0,l,a,null,null,null]}function LI(s,o){const a=s.contentQueries;if(null!==a)for(let l=0;l<a.length;l+=2){const f=a[l+1];if(-1!==f){const y=s.data[f];Fa(a[l]),y.contentQueries(2,o[f],f)}}}function Hy(s,o){return s[gi]?s[Ui][Nr]=o:s[gi]=o,s[Ui]=o,o}function H0(s,o,a){Fa(0);const l=jr(null);try{o(s,a)}finally{jr(l)}}function ll(s){return s[Fs]||(s[Fs]=[])}function $0(s){return s.cleanup||(s.cleanup=[])}function z0(s,o){const a=s[Vr],l=a?a.get(Af,null):null;l&&l.handleError(o)}function ud(s,o,a,l,d){for(let f=0;f<a.length;){const y=a[f++],D=a[f++];PI(s.data[y],o[y],l,D,d)}}function mA(s,o){const a=Ne(o,s),l=a[Et];!function UI(s,o){for(let a=o.length;a<s.blueprint.length;a++)o.push(s.blueprint[a])}(l,a);const d=a[Rr];null!==d&&null===a[Ir]&&(a[Ir]=by(d,a[Vr])),W0(l,a,a[Zn])}function W0(s,o,a){lu(o);try{const l=s.viewQuery;null!==l&&H0(1,l,a);const d=s.template;null!==d&&P0(s,o,d,1,a),s.firstCreatePass&&(s.firstCreatePass=!1),s.staticContentQueries&&LI(s,o),s.staticViewQueries&&H0(2,s.viewQuery,a);const f=s.components;null!==f&&function VI(s,o){for(let a=0;a<o.length;a++)mA(s,o[a])}(o,f)}catch(l){throw s.firstCreatePass&&(s.incompleteFirstPass=!0,s.firstCreatePass=!1),l}finally{o[tn]&=-5,Ea()}}let Z0=(()=>{class s{constructor(){this.all=new Set,this.queue=new Map}create(a,l,d){const f=typeof Zone>"u"?null:Zone.current,y=new xu(a,P=>{this.all.has(P)&&this.queue.set(P,f)},d);let D;this.all.add(y),y.notify();const A=()=>{y.cleanup(),D?.(),this.all.delete(y),this.queue.delete(y)};return D=l?.onDestroy(A),{destroy:A}}flush(){if(0!==this.queue.size)for(const[a,l]of this.queue)this.queue.delete(a),l?l.run(()=>a.run()):a.run()}get isQueueEmpty(){return 0===this.queue.size}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:()=>new s}),s})();function Gy(s,o,a){let l=a?s.styles:null,d=a?s.classes:null,f=0;if(null!==o)for(let y=0;y<o.length;y++){const D=o[y];"number"==typeof D?f=D:1==f?d=st(d,D):2==f&&(l=st(l,D+": "+o[++y]+";"))}a?s.styles=l:s.stylesWithoutHost=l,a?s.classes=d:s.classesWithoutHost=d}function Mg(s,o,a,l,d=!1){for(;null!==a;){const f=o[a.index];if(null!==f&&l.push(Vn(f)),Yi(f)){for(let D=Br;D<f.length;D++){const A=f[D],P=A[Et].firstChild;null!==P&&Mg(A[Et],A,P,l)}f[mi]!==f[Rr]&&l.push(f[mi])}const y=a.type;if(8&y)Mg(s,o,a.child,l);else if(32&y){const D=mu(a,o);let A;for(;A=D();)l.push(A)}else if(16&y){const D=$s(o,a);if(Array.isArray(D))l.push(...D);else{const A=sh(o[hr]);Mg(A[Et],A,D,l,!0)}}a=d?a.projectionNext:a.next}return l}function zy(s,o,a,l=!0){const d=o[pi].rendererFactory;d.begin&&d.begin();try{kf(s,o,s.template,a)}catch(y){throw l&&z0(o,y),y}finally{d.end&&d.end(),o[pi].effectManager?.flush()}}function kf(s,o,a,l){const d=o[tn];if(256!=(256&d)){o[pi].effectManager?.flush(),lu(o);try{Bn(o),function ka(s){return Bt.lFrame.bindingIndex=s}(s.bindingStartIndex),null!==a&&P0(s,o,a,2,l);const y=3==(3&d);if(y){const P=s.preOrderCheckHooks;null!==P&&L(o,P,null)}else{const P=s.preOrderHooks;null!==P&&Y(o,P,0,null),X(o,0)}if(function K0(s){for(let o=og(s);null!==o;o=As(o)){if(!o[Bi])continue;const a=o[fs];for(let l=0;l<a.length;l++){In(a[l])}}}(o),xg(o,2),null!==s.contentQueries&&LI(s,o),y){const P=s.contentCheckHooks;null!==P&&L(o,P)}else{const P=s.contentHooks;null!==P&&Y(o,P,1),X(o,1)}!function SI(s,o){const a=s.hostBindingOpCodes;if(null===a)return;const l=II(o,Ks);try{for(let d=0;d<a.length;d++){const f=a[d];if(f<0)Fo(~f);else{const y=f,D=a[++d],A=a[++d];Rl(D,y),l.runInContext(A,2,o[y])}}}finally{null===o[Ks]&&Cg(o,Ks),Fo(-1)}}(s,o);const D=s.components;null!==D&&Lf(o,D,0);const A=s.viewQuery;if(null!==A&&H0(2,A,l),y){const P=s.viewCheckHooks;null!==P&&L(o,P)}else{const P=s.viewHooks;null!==P&&Y(o,P,2),X(o,2)}!0===s.firstUpdatePass&&(s.firstUpdatePass=!1),o[tn]&=-73,Dr(o)}finally{Ea()}}}function xg(s,o){for(let a=og(s);null!==a;a=As(a))for(let l=Br;l<a.length;l++)Ff(a[l],o)}function $I(s,o,a){Ff(Ne(o,s),a)}function Ff(s,o){if(!function Ut(s){return 128==(128&s[tn])}(s))return;const a=s[Et];if(80&s[tn]&&0===o||1024&s[tn]||2===o)kf(a,s,a.template,s[Zn]);else if(s[Ur]>0){xg(s,1);const d=s[Et].components;null!==d&&Lf(s,d,1)}}function Lf(s,o,a){for(let l=0;l<o.length;l++)$I(s,o[l],a)}class Rg{get rootNodes(){const o=this._lView,a=o[Et];return Mg(a,o,a.firstChild,[])}constructor(o,a){this._lView=o,this._cdRefInjectingView=a,this._appRef=null,this._attachedToViewContainer=!1}get context(){return this._lView[Zn]}set context(o){this._lView[Zn]=o}get destroyed(){return 256==(256&this._lView[tn])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const o=this._lView[er];if(Yi(o)){const a=o[8],l=a?a.indexOf(this):-1;l>-1&&(_(o,l),cf(a,l))}this._attachedToViewContainer=!1}h(this._lView[Et],this._lView)}onDestroy(o){!function mr(s,o){if(256==(256&s[tn]))throw new Ae(911,!1);null===s[Fr]&&(s[Fr]=[]),s[Fr].push(o)}(this._lView,o)}markForCheck(){gh(this._cdRefInjectingView||this._lView)}detach(){this._lView[tn]&=-129}reattach(){this._lView[tn]|=128}detectChanges(){zy(this._lView[Et],this._lView,this.context)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new Ae(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null,function Yl(s,o){lh(s,o,o[un],2,null,null)}(this._lView[Et],this._lView)}attachToAppRef(o){if(this._attachedToViewContainer)throw new Ae(902,!1);this._appRef=o}}class rs extends Rg{constructor(o){super(o),this._view=o}detectChanges(){const o=this._view;zy(o[Et],o,o[Zn],!1)}checkNoChanges(){}get context(){return null}}class Y0 extends rd{constructor(o){super(),this.ngModule=o}resolveComponentFactory(o){const a=dn(o);return new Uf(a,this.ngModule)}}function GI(s){const o=[];for(let a in s)s.hasOwnProperty(a)&&o.push({propName:s[a],templateName:a});return o}class _A{constructor(o,a){this.injector=o,this.parentInjector=a}get(o,a,l){l=ue(l);const d=this.injector.get(o,Eg,l);return d!==Eg||a===Eg?d:this.parentInjector.get(o,a,l)}}class Uf extends Sy{get inputs(){const o=this.componentDef,a=o.inputTransforms,l=GI(o.inputs);if(null!==a)for(const d of l)a.hasOwnProperty(d.propName)&&(d.transform=a[d.propName]);return l}get outputs(){return GI(this.componentDef.outputs)}constructor(o,a){super(),this.componentDef=o,this.ngModule=a,this.componentType=o.type,this.selector=function oa(s){return s.map(eu).join(",")}(o.selectors),this.ngContentSelectors=o.ngContentSelectors?o.ngContentSelectors:[],this.isBoundToModule=!!a}create(o,a,l,d){let f=(d=d||this.ngModule)instanceof fh?d:d?.injector;f&&null!==this.componentDef.getStandaloneInjector&&(f=this.componentDef.getStandaloneInjector(f)||f);const y=f?new _A(o,f):o,D=y.get(gI,null);if(null===D)throw new Ae(407,!1);const q={rendererFactory:D,sanitizer:y.get(_I,null),effectManager:y.get(Z0,null)},ie=D.createRenderer(null,this.componentDef),me=this.componentDef.selectors[0][0]||"div",De=l?function F0(s,o,a,l){const f=l.get(Ny,!1)||a===Yt.ShadowDom,y=s.selectRootElement(o,f);return function Ly(s){Pf(s)}(y),y}(ie,l,this.componentDef.encapsulation,y):xs(ie,me,function yA(s){const o=s.toLowerCase();return"svg"===o?"svg":"math"===o?"math":null}(me)),Ct=this.componentDef.signals?4608:this.componentDef.onPush?576:528,Jt=Tg(0,null,null,1,0,null,null,null,null,null,null),ct=so(null,Jt,null,Ct,null,null,q,ie,y,null,null);let En,Yn;lu(ct);try{const nr=this.componentDef;let Bo,Rp=null;nr.findHostDirectiveDefs?(Bo=[],Rp=new Map,nr.findHostDirectiveDefs(nr,Bo,Rp),Bo.push(nr)):Bo=[nr];const ox=function qy(s,o){const a=s[Et],l=fn;return s[l]=o,yh(a,l,2,"#host",null)}(ct,De),ax=function WI(s,o,a,l,d,f,y){const D=d[Et];!function bc(s,o,a,l){for(const d of s)o.mergedAttrs=mn(o.mergedAttrs,d.hostAttrs);null!==o.mergedAttrs&&(Gy(o,o.mergedAttrs,!0),null!==a&&WC(l,a,o))}(l,s,o,y);let A=null;null!==o&&(A=by(o,d[Vr]));const P=f.rendererFactory.createRenderer(o,a);let q=16;a.signals?q=4096:a.onPush&&(q=64);const ie=so(d,Of(a),null,q,d[s.index],s,f,P,null,null,A);return D.firstCreatePass&&ul(D,s,l.length-1),Hy(d,ie),d[s.index]=ie}(ox,De,nr,Bo,ct,q,ie);Yn=W(Jt,fn),De&&function EA(s,o,a,l){if(l)Pt(s,a,["ng-version",My.full]);else{const{attrs:d,classes:f}=function Zs(s){const o=[],a=[];let l=1,d=2;for(;l<s.length;){let f=s[l];if("string"==typeof f)2===d?""!==f&&o.push(f,s[++l]):8===d&&a.push(f);else{if(!di(d))break;d=f}l++}return{attrs:o,classes:a}}(o.selectors[0]);d&&Pt(s,a,d),f&&f.length>0&&zC(s,a,f.join(" "))}}(ie,nr,De,l),void 0!==a&&function ZI(s,o,a){const l=s.projection=[];for(let d=0;d<o.length;d++){const f=a[d];l.push(null!=f?Array.from(f):null)}}(Yn,this.ngContentSelectors,a),En=function qI(s,o,a,l,d,f){const y=ts(),D=d[Et],A=F(y,d);ad(D,d,y,a,null,l);for(let q=0;q<a.length;q++)Hs(Va(d,D,y.directiveStart+q,y),d);j0(D,d,y),A&&Hs(A,d);const P=Va(d,D,y.directiveStart+y.componentOffset,y);if(s[Zn]=d[Zn]=P,null!==f)for(const q of f)q(P,o);return Dg(D,y,s),P}(ax,nr,Bo,Rp,ct,[Q0]),W0(Jt,ct,null)}finally{Ea()}return new zI(this.componentType,En,Sf(Yn,ct),ct,Yn)}}class zI extends b0{constructor(o,a,l,d,f){super(),this.location=l,this._rootLView=d,this._tNode=f,this.previousInputValues=null,this.instance=a,this.hostView=this.changeDetectorRef=new rs(d),this.componentType=o}setInput(o,a){const l=this._tNode.inputs;let d;if(null!==l&&(d=l[o])){if(this.previousInputValues??=new Map,this.previousInputValues.has(o)&&Object.is(this.previousInputValues.get(o),a))return;const f=this._rootLView;ud(f[Et],f,d,o,a),this.previousInputValues.set(o,a),gh(Ne(this._tNode.index,f))}}get injector(){return new Qo(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(o){this.hostView.onDestroy(o)}}function Q0(){const s=ts();x(at()[Et],s)}function Zy(s){let o=function Vf(s){return Object.getPrototypeOf(s.prototype).constructor}(s.type),a=!0;const l=[s];for(;o;){let d;if(Zr(s))d=o.\u0275cmp||o.\u0275dir;else{if(o.\u0275cmp)throw new Ae(903,!1);d=o.\u0275dir}if(d){if(a){l.push(d);const y=s;y.inputs=wh(s.inputs),y.inputTransforms=wh(s.inputTransforms),y.declaredInputs=wh(s.declaredInputs),y.outputs=wh(s.outputs);const D=d.hostBindings;D&&wA(s,D);const A=d.viewQuery,P=d.contentQueries;if(A&&KI(s,A),P&&Ky(s,P),le(s.inputs,d.inputs),le(s.declaredInputs,d.declaredInputs),le(s.outputs,d.outputs),null!==d.inputTransforms&&(null===y.inputTransforms&&(y.inputTransforms={}),le(y.inputTransforms,d.inputTransforms)),Zr(d)&&d.data.animation){const q=s.data;q.animation=(q.animation||[]).concat(d.data.animation)}}const f=d.features;if(f)for(let y=0;y<f.length;y++){const D=f[y];D&&D.ngInherit&&D(s),D===Zy&&(a=!1)}}o=Object.getPrototypeOf(o)}!function J0(s){let o=0,a=null;for(let l=s.length-1;l>=0;l--){const d=s[l];d.hostVars=o+=d.hostVars,d.hostAttrs=mn(d.hostAttrs,a=mn(a,d.hostAttrs))}}(l)}function wh(s){return s===Wt?{}:s===Rt?[]:s}function KI(s,o){const a=s.viewQuery;s.viewQuery=a?(l,d)=>{o(l,d),a(l,d)}:o}function Ky(s,o){const a=s.contentQueries;s.contentQueries=a?(l,d,f)=>{o(l,d,f),a(l,d,f)}:o}function wA(s,o){const a=s.hostBindings;s.hostBindings=a?(l,d)=>{o(l,d),a(l,d)}:o}function tE(s){const o=s.inputConfig,a={};for(const l in o)if(o.hasOwnProperty(l)){const d=o[l];Array.isArray(d)&&d[2]&&(a[l]=d[2])}s.inputTransforms=a}function Og(s){return!!Jy(s)&&(Array.isArray(s)||!(s instanceof Map)&&Symbol.iterator in s)}function Jy(s){return null!==s&&("function"==typeof s||"object"==typeof s)}function Io(s,o,a){return!Object.is(s[o],a)&&(s[o]=a,!0)}function Pg(s,o,a,l){const d=at();return Io(d,Tr(),o)&&(Ln(),za(Hr(),d,s,o,a,l)),Pg}function Hf(s,o,a,l){return Io(s,Tr(),a)?o+ye(a)+l:Dn}function RA(s,o,a,l,d,f,y,D){const A=at(),P=Ln(),q=s+fn,ie=P.firstCreatePass?function xA(s,o,a,l,d,f,y,D,A){const P=o.consts,q=yh(o,s,4,y||null,xn(P,D));vh(o,a,q,xn(P,A)),x(o,q);const ie=q.tView=Tg(2,q,l,d,f,o.directiveRegistry,o.pipeRegistry,null,o.schemas,P,null);return null!==o.queries&&(o.queries.template(o,q),ie.queries=o.queries.embeddedTView(q)),q}(q,P,A,o,a,l,d,f,y):P.data[q];gs(ie,!1);const me=ub(P,A,ie,s);I()&&il(P,A,me,ie),Hs(me,A),Hy(A,A[q]=FI(me,A,me,ie)),Vs(ie)&&ky(P,A,ie),null!=y&&Fy(A,ie,D)}let ub=function sE(s,o,a,l){return S(!0),o[un].createComment("")};function Ci(s){return function se(s,o){return s[o]}(function tr(){return Bt.lFrame.contextLView}(),fn+s)}function Xt(s,o,a){const l=at();return Io(l,Tr(),o)&&Ga(Ln(),Hr(),l,s,o,l[un],a,!1),Xt}function Th(s,o,a,l,d){const y=d?"class":"style";ud(s,a,o.inputs[y],y,l)}function n_(s,o,a,l){const d=at(),f=Ln(),y=fn+s,D=d[un],A=f.firstCreatePass?function _r(s,o,a,l,d,f){const y=o.consts,A=yh(o,s,2,l,xn(y,d));return vh(o,a,A,xn(y,f)),null!==A.attrs&&Gy(A,A.attrs,!1),null!==A.mergedAttrs&&Gy(A,A.mergedAttrs,!0),null!==o.queries&&o.queries.elementStart(o,A),A}(y,f,d,o,a,l):f.data[y],P=Ug(f,d,A,D,o,s);d[y]=P;const q=Vs(A);return gs(A,!0),WC(D,P,A),32!=(32&A.flags)&&I()&&il(f,d,P,A),0===function Eo(){return Bt.lFrame.elementDepthCount}()&&Hs(P,d),function Qr(){Bt.lFrame.elementDepthCount++}(),q&&(ky(f,d,A),Dg(f,A,d)),null!==l&&Fy(d,A),n_}function Ii(){let s=ts();cu()?function Pa(){Bt.lFrame.isParent=!1}():(s=s.parent,gs(s,!1));const o=s;(function uc(s){return Bt.skipHydrationRootTNode===s})(o)&&function Ou(){Bt.skipHydrationRootTNode=null}(),function qo(){Bt.lFrame.elementDepthCount--}();const a=Ln();return a.firstCreatePass&&(x(a,s),_o(s)&&a.queries.elementEnd(s)),null!=o.classesWithoutHost&&function du(s){return 0!=(8&s.flags)}(o)&&Th(a,o,at(),o.classesWithoutHost,!0),null!=o.stylesWithoutHost&&function hu(s){return 0!=(16&s.flags)}(o)&&Th(a,o,at(),o.stylesWithoutHost,!1),Ii}function St(s,o,a,l){return n_(s,o,a,l),Ii(),St}let Ug=(s,o,a,l,d,f)=>(S(!0),xs(l,d,function dc(){return Bt.lFrame.currentNamespace}()));function r_(){return at()}function i_(s){return!!s&&"function"==typeof s.then}function cE(s){return!!s&&"function"==typeof s.subscribe}function Ac(s,o,a,l){const d=at(),f=Ln(),y=ts();return function Vg(s,o,a,l,d,f,y){const D=Vs(l),P=s.firstCreatePass&&$0(s),q=o[Zn],ie=ll(o);let me=!0;if(3&l.type||y){const ut=F(l,o),Ct=y?y(ut):ut,Jt=ie.length,ct=y?Yn=>y(Vn(Yn[l.index])):l.index;let En=null;if(!y&&D&&(En=function ke(s,o,a,l){const d=s.cleanup;if(null!=d)for(let f=0;f<d.length-1;f+=2){const y=d[f];if(y===a&&d[f+1]===l){const D=o[Fs],A=d[f+2];return D.length>A?D[A]:null}"string"==typeof y&&(f+=2)}return null}(s,o,d,l.index)),null!==En)(En.__ngLastListenerFn__||En).__ngNextListenerFn__=f,En.__ngLastListenerFn__=f,me=!1;else{f=db(l,o,q,f,!1);const Yn=a.listen(Ct,d,f);ie.push(f,Yn),P&&P.push(d,ct,Jt,Jt+1)}}else f=db(l,o,q,f,!1);const De=l.outputs;let $e;if(me&&null!==De&&($e=De[d])){const ut=$e.length;if(ut)for(let Ct=0;Ct<ut;Ct+=2){const nr=o[$e[Ct]][$e[Ct+1]].subscribe(f),Bo=ie.length;ie.push(f,nr),P&&P.push(d,l.index,Bo,-(Bo+1))}}}(f,d,d[un],y,s,o,l),Ac}function Cu(s,o,a,l){try{return ri(6,o,a),!1!==a(l)}catch(d){return z0(s,d),!1}finally{ri(7,o,a)}}function db(s,o,a,l,d){return function f(y){if(y===Function)return l;gh(s.componentOffset>-1?Ne(s.index,o):o);let A=Cu(o,a,l,y),P=f.__ngNextListenerFn__;for(;P;)A=Cu(o,a,P,y)&&A,P=P.__ngNextListenerFn__;return d&&!1===A&&y.preventDefault(),A}}function o_(s,o,a){return jg(s,"",o,"",a),o_}function jg(s,o,a,l,d){const f=at(),y=Hf(f,o,a,l);return y!==Dn&&Ga(Ln(),Hr(),f,s,y,f[un],d,!1),jg}function Hg(s,o){return s<<17|o<<2}function Do(s){return s>>17&32767}function u_(s){return 2|s}function Mh(s){return(131068&s)>>2}function dE(s,o){return-131069&s|o<<2}function hE(s){return 1|s}function mb(s,o,a,l,d){const f=s[a+1],y=null===o;let D=l?Do(f):Mh(f),A=!1;for(;0!==D&&(!1===A||y);){const q=s[D+1];LA(s[D],o)&&(A=!0,s[D+1]=l?hE(q):u_(q)),D=l?Do(q):Mh(q)}A&&(s[a+1]=l?u_(f):hE(f))}function LA(s,o){return null===s||null==o||(Array.isArray(s)?s[1]:s)===o||!(!Array.isArray(s)||"string"!=typeof o)&&re(s,o)>=0}function Qf(s,o){return function Oi(s,o,a,l){const d=at(),f=Ln(),y=function Ts(s){const o=Bt.lFrame,a=o.bindingIndex;return o.bindingIndex=o.bindingIndex+s,a}(2);f.firstUpdatePass&&function Ns(s,o,a,l){const d=s.data;if(null===d[a+1]){const f=d[ys()],y=function Ib(s,o){return o>=s.expandoStartIndex}(s,a);(function gl(s,o){return 0!=(s.flags&(o?8:16))})(f,l)&&null===o&&!y&&(o=!1),o=function HA(s,o,a,l){const d=function Hc(s){const o=Bt.lFrame.currentDirectiveIndex;return-1===o?null:s[o]}(s);let f=l?o.residualClasses:o.residualStyles;if(null===d)0===(l?o.classBindings:o.styleBindings)&&(a=pd(a=Jf(null,s,o,a,l),o.attrs,l),f=null);else{const y=o.directiveStylingLast;if(-1===y||s[y]!==d)if(a=Jf(d,s,o,a,l),null===f){let A=function fd(s,o,a){const l=a?o.classBindings:o.styleBindings;if(0!==Mh(l))return s[Do(l)]}(s,o,l);void 0!==A&&Array.isArray(A)&&(A=Jf(null,s,o,A[1],l),A=pd(A,o.attrs,l),function us(s,o,a,l){s[Do(a?o.classBindings:o.styleBindings)]=l}(s,o,l,A))}else f=function fl(s,o,a){let l;const d=o.directiveEnd;for(let f=1+o.directiveStylingLast;f<d;f++)l=pd(l,s[f].hostAttrs,a);return pd(l,o.attrs,a)}(s,o,l)}return void 0!==f&&(l?o.residualClasses=f:o.residualStyles=f),a}(d,f,o,l),function kA(s,o,a,l,d,f){let y=f?o.classBindings:o.styleBindings,D=Do(y),A=Mh(y);s[l]=a;let q,P=!1;if(Array.isArray(a)?(q=a[1],(null===q||re(a,q)>0)&&(P=!0)):q=a,d)if(0!==A){const me=Do(s[D+1]);s[l+1]=Hg(me,D),0!==me&&(s[me+1]=dE(s[me+1],l)),s[D+1]=function a_(s,o){return 131071&s|o<<17}(s[D+1],l)}else s[l+1]=Hg(D,0),0!==D&&(s[D+1]=dE(s[D+1],l)),D=l;else s[l+1]=Hg(A,0),0===D?D=l:s[A+1]=dE(s[A+1],l),A=l;P&&(s[l+1]=u_(s[l+1])),mb(s,q,l,!0),mb(s,q,l,!1),function FA(s,o,a,l,d){const f=d?s.residualClasses:s.residualStyles;null!=f&&"string"==typeof o&&re(f,o)>=0&&(a[l+1]=hE(a[l+1]))}(o,q,s,l,f),y=Hg(D,A),f?o.classBindings=y:o.styleBindings=y}(d,f,o,a,y,l)}}(f,s,y,l),o!==Dn&&Io(d,y,o)&&function Gg(s,o,a,l,d,f,y,D){if(!(3&o.type))return;const A=s.data,P=A[D+1],q=function PA(s){return 1==(1&s)}(P)?pl(A,o,a,d,Mh(P),y):void 0;Za(q)||(Za(f)||function gb(s){return 2==(2&s)}(P)&&(f=pl(A,null,a,d,D,y)),function $C(s,o,a,l,d){if(o)d?s.addClass(a,l):s.removeClass(a,l);else{let f=-1===l.indexOf("-")?void 0:ja.DashCase;null==d?s.removeStyle(a,l,f):("string"==typeof d&&d.endsWith("!important")&&(d=d.slice(0,-10),f|=ja.Important),s.setStyle(a,l,d,f))}}(l,y,M(ys(),a),d,f))}(f,f.data[ys()],d,d[un],s,d[y+1]=function zg(s,o){return null==s||""===s||("string"==typeof o?s+=o:"object"==typeof s&&(s=_e(ed(s)))),s}(o,a),l,y)}(s,o,null,!0),Qf}function Jf(s,o,a,l,d){let f=null;const y=a.directiveEnd;let D=a.directiveStylingLast;for(-1===D?D=a.directiveStart:D++;D<y&&(f=o[D],l=pd(l,f.hostAttrs,d),f!==s);)D++;return null!==s&&(a.directiveStylingLast=D),l}function pd(s,o,a){const l=a?1:2;let d=-1;if(null!==o)for(let f=0;f<o.length;f++){const y=o[f];"number"==typeof y?d=y:d===l&&(Array.isArray(s)||(s=void 0===s?[]:["",s]),R(s,y,!!a||o[++f]))}return void 0===s?null:s}function pl(s,o,a,l,d,f){const y=null===o;let D;for(;d>0;){const A=s[d],P=Array.isArray(A),q=P?A[1]:A,ie=null===q;let me=a[d+1];me===Dn&&(me=ie?Rt:void 0);let De=ie?B(me,l):q===l?me:void 0;if(P&&!Za(De)&&(De=B(A,l)),Za(De)&&(D=De,y))return D;const $e=s[d+1];d=y?Do($e):Mh($e)}if(null!==o){let A=f?o.residualClasses:o.residualStyles;null!=A&&(D=B(A,l))}return D}function Za(s){return void 0!==s}function gE(s,o=""){const a=at(),l=Ln(),d=s+fn,f=l.firstCreatePass?yh(l,d,1,o,null):l.data[d],y=Rh(l,a,f,o,s);a[d]=y,I()&&il(l,a,y,f),gs(f,!1)}let Rh=(s,o,a,l,d)=>(S(!0),function Kl(s,o){return s.createText(o)}(o[un],l));function ml(s){return Xf("",s,""),ml}function Xf(s,o,a){const l=at(),d=Hf(l,s,o,a);return d!==Dn&&function dl(s,o,a){const l=M(o,s);!function Ms(s,o,a){s.setValue(o,a)}(s[un],l,a)}(l,ys(),d),Xf}const Nh=void 0;var Oh=["en",[["a","p"],["AM","PM"],Nh],[["AM","PM"],Nh,Nh],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Nh,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Nh,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Nh,"{1} 'at' {0}",Nh],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function AE(s){const a=Math.floor(Math.abs(s)),l=s.toString().replace(/^[^.]*\.?/,"").length;return 1===a&&0===l?1:5}];let Mc={};function ip(s){const o=function Bb(s){return s.toLowerCase().replace(/_/g,"-")}(s);let a=xc(o);if(a)return a;const l=o.split("-")[0];if(a=xc(l),a)return a;if("en"===l)return Oh;throw new Ae(701,!1)}function xE(s){return ip(s)[an.PluralCase]}function xc(s){return s in Mc||(Mc[s]=An.ng&&An.ng.common&&An.ng.common.locales&&An.ng.common.locales[s]),Mc[s]}var an=(()=>((an=an||{})[an.LocaleId=0]="LocaleId",an[an.DayPeriodsFormat=1]="DayPeriodsFormat",an[an.DayPeriodsStandalone=2]="DayPeriodsStandalone",an[an.DaysFormat=3]="DaysFormat",an[an.DaysStandalone=4]="DaysStandalone",an[an.MonthsFormat=5]="MonthsFormat",an[an.MonthsStandalone=6]="MonthsStandalone",an[an.Eras=7]="Eras",an[an.FirstDayOfWeek=8]="FirstDayOfWeek",an[an.WeekendRange=9]="WeekendRange",an[an.DateFormat=10]="DateFormat",an[an.TimeFormat=11]="TimeFormat",an[an.DateTimeFormat=12]="DateTimeFormat",an[an.NumberSymbols=13]="NumberSymbols",an[an.NumberFormats=14]="NumberFormats",an[an.CurrencyCode=15]="CurrencyCode",an[an.CurrencySymbol=16]="CurrencySymbol",an[an.CurrencyName=17]="CurrencyName",an[an.Currencies=18]="Currencies",an[an.Directionality=19]="Directionality",an[an.PluralCase=20]="PluralCase",an[an.ExtraData=21]="ExtraData",an))();const _d="en-US";let NE=_d;function Cd(s,o,a,l,d){if(s=et(s),Array.isArray(s))for(let f=0;f<s.length;f++)Cd(s[f],o,a,l,d);else{const f=Ln(),y=at();let D=dh(s)?s:et(s.provide),A=JS(s);const P=ts(),q=1048575&P.providerIndexes,ie=P.directiveStart,me=P.providerIndexes>>20;if(dh(s)||!s.multi){const De=new Kn(A,d,mh),$e=zi(D,o,d?q:q+me,ie);-1===$e?(Ua(nf(P,y),f,D),v_(f,s,o.length),o.push(D),P.directiveStart++,P.directiveEnd++,d&&(P.providerIndexes+=1048576),a.push(De),y.push(De)):(a[$e]=De,y[$e]=De)}else{const De=zi(D,o,q+me,ie),$e=zi(D,o,q,q+me),Ct=$e>=0&&a[$e];if(d&&!Ct||!d&&!(De>=0&&a[De])){Ua(nf(P,y),f,D);const Jt=function Pc(s,o,a,l,d){const f=new Kn(s,a,mh);return f.multi=[],f.index=o,f.componentProviders=0,lD(f,d,l&&!a),f}(d?dD:WE,a.length,d,l,A);!d&&Ct&&(a[$e].providerFactory=Jt),v_(f,s,o.length,0),o.push(D),P.directiveStart++,P.directiveEnd++,d&&(P.providerIndexes+=1048576),a.push(Jt),y.push(Jt)}else v_(f,s,De>-1?De:$e,lD(a[d?$e:De],A,!d&&l));!d&&l&&Ct&&a[$e].componentProviders++}}}function v_(s,o,a,l){const d=dh(o),f=function ZS(s){return!!s.useClass}(o);if(d||f){const A=(f?et(o.useClass):o).prototype.ngOnDestroy;if(A){const P=s.destroyHooks||(s.destroyHooks=[]);if(!d&&o.multi){const q=P.indexOf(a);-1===q?P.push(a,[l,A]):P[q+1].push(l,A)}else P.push(a,A)}}}function lD(s,o,a){return a&&s.componentProviders++,s.multi.push(o)-1}function zi(s,o,a,l){for(let d=a;d<l;d++)if(o[d]===s)return d;return-1}function WE(s,o,a,l){return Lh(this.multi,[])}function dD(s,o,a,l){const d=this.multi;let f;if(this.providerFactory){const y=this.providerFactory.componentProviders,D=Va(a,a[Et],this.providerFactory.index,l);f=D.slice(0,y),Lh(d,f);for(let A=y;A<D.length;A++)f.push(D[A])}else f=[],Lh(d,f);return f}function Lh(s,o){for(let a=0;a<s.length;a++)o.push((0,s[a])());return o}function E_(s,o=[]){return a=>{a.providersResolver=(l,d)=>function zE(s,o,a){const l=Ln();if(l.firstCreatePass){const d=Zr(s);Cd(a,l.data,l.blueprint,d,!0),Cd(o,l.data,l.blueprint,d,!1)}}(l,d?d(s):s,o)}}class Uh{}class hp{}function hD(s,o){return new w_(s,o??null,[])}class w_ extends Uh{constructor(o,a,l){super(),this._parent=a,this._bootstrapComponents=[],this.destroyCbs=[],this.componentFactoryResolver=new Y0(this);const d=fi(o);this._bootstrapComponents=qu(d.bootstrap),this._r3Injector=O0(o,a,[{provide:Uh,useValue:this},{provide:rd,useValue:this.componentFactoryResolver},...l],_e(o),new Set(["environment"])),this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(o)}get injector(){return this._r3Injector}destroy(){const o=this._r3Injector;!o.destroyed&&o.destroy(),this.destroyCbs.forEach(a=>a()),this.destroyCbs=null}onDestroy(o){this.destroyCbs.push(o)}}class qE extends hp{constructor(o){super(),this.moduleType=o}create(o){return new w_(this.moduleType,o,[])}}class fp extends Uh{constructor(o){super(),this.componentFactoryResolver=new Y0(this),this.instance=null;const a=new d0([...o.providers,{provide:Uh,useValue:this},{provide:rd,useValue:this.componentFactoryResolver}],o.parent||hh(),o.debugName,new Set(["environment"]));this.injector=a,o.runEnvironmentInitializers&&a.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(o){this.injector.onDestroy(o)}}function C_(s,o,a=null){return new fp({providers:s,parent:o,debugName:a,runEnvironmentInitializers:!0}).injector}let aM=(()=>{class s{constructor(a){this._injector=a,this.cachedInjectors=new Map}getOrCreateStandaloneInjector(a){if(!a.standalone)return null;if(!this.cachedInjectors.has(a)){const l=aI(0,a.type),d=l.length>0?C_([l],this._injector,`Standalone[${a.type.name}]`):null;this.cachedInjectors.set(a,d)}return this.cachedInjectors.get(a)}ngOnDestroy(){try{for(const a of this.cachedInjectors.values())null!==a&&a.destroy()}finally{this.cachedInjectors.clear()}}}return s.\u0275prov=sn({token:s,providedIn:"environment",factory:()=>new s(Nn(fh))}),s})();function ZE(s){s.getStandaloneInjector=o=>o.get(aM).getOrCreateStandaloneInjector(s)}function bd(s,o,a){const l=function Ds(){const s=Bt.lFrame;let o=s.bindingRootIndex;return-1===o&&(o=s.bindingRootIndex=s.tView.bindingStartIndex),o}()+s,d=at();return d[l]===Dn?function is(s,o,a){return s[o]=a}(d,l,a?o.call(a):o()):function jf(s,o){return s[o]}(d,l)}function im(s){return o=>{setTimeout(s,void 0,o)}}const bu=class fM extends E.x{constructor(o=!1){super(),this.__isAsync=o}emit(o){super.next(o)}subscribe(o,a,l){let d=o,f=a||(()=>null),y=l;if(o&&"object"==typeof o){const A=o;d=A.next?.bind(A),f=A.error?.bind(A),y=A.complete?.bind(A)}this.__isAsync&&(f=im(f),d&&(d=im(d)),y&&(y=im(y)));const D=super.subscribe({next:d,error:f,complete:y});return o instanceof w.w0&&o.add(D),D}};function ID(){return this._results[Symbol.iterator]()}class sm{get changes(){return this._changes||(this._changes=new bu)}constructor(o=!1){this._emitDistinctChangesOnly=o,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const a=sm.prototype;a[Symbol.iterator]||(a[Symbol.iterator]=ID)}get(o){return this._results[o]}map(o){return this._results.map(o)}filter(o){return this._results.filter(o)}find(o){return this._results.find(o)}reduce(o,a){return this._results.reduce(o,a)}forEach(o){this._results.forEach(o)}some(o){return this._results.some(o)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(o,a){const l=this;l.dirty=!1;const d=function js(s){return s.flat(Number.POSITIVE_INFINITY)}(o);(this._changesDetected=!function $u(s,o,a){if(s.length!==o.length)return!1;for(let l=0;l<s.length;l++){let d=s[l],f=o[l];if(a&&(d=a(d),f=a(f)),f!==d)return!1}return!0}(l._results,d,a))&&(l._results=d,l.length=d.length,l.last=d[this.length-1],l.first=d[0])}notifyOnChanges(){this._changes&&(this._changesDetected||!this._emitDistinctChangesOnly)&&this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}let Hh=(()=>{class s{}return s.__NG_ELEMENT_ID__=pM,s})();const bD=Hh,b_=class extends bD{constructor(o,a,l){super(),this._declarationLView=o,this._declarationTContainer=a,this.elementRef=l}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(o,a){return this.createEmbeddedViewImpl(o,a,null)}createEmbeddedViewImpl(o,a,l){const y=this._declarationTContainer.tView,D=so(this._declarationLView,y,o,4096&this._declarationLView[tn]?4096:16,null,y.declTNode,null,null,null,a||null,l||null);D[Cs]=this._declarationLView[this._declarationTContainer.index];const P=this._declarationLView[oi];return null!==P&&(D[oi]=P.createEmbeddedView(y)),W0(y,D,o),new Rg(D)}};function pM(){return _p(ts(),at())}function _p(s,o){return 4&s.type?new b_(o,s,Sf(s,o)):null}let Gh=(()=>{class s{}return s.__NG_ELEMENT_ID__=T_,s})();function T_(){return Sd(ts(),at())}const SD=Gh,vl=class extends SD{constructor(o,a,l){super(),this._lContainer=o,this._hostTNode=a,this._hostLView=l}get element(){return Sf(this._hostTNode,this._hostLView)}get injector(){return new Qo(this._hostTNode,this._hostLView)}get parentInjector(){const o=Fl(this._hostTNode,this._hostLView);if(Lo(o)){const a=Pl(o,this._hostLView),l=Xs(o);return new Qo(a[Et].data[l+8],a)}return new Qo(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(o){const a=zh(this._lContainer);return null!==a&&a[o]||null}get length(){return this._lContainer.length-Br}createEmbeddedView(o,a,l){let d,f;"number"==typeof l?d=l:null!=l&&(d=l.index,f=l.injector);const D=o.createEmbeddedViewImpl(a||{},f,null);return this.insertImpl(D,d,false),D}createComponent(o,a,l,d,f){const y=o&&!function Jc(s){return"function"==typeof s}(o);let D;if(y)D=a;else{const ut=a||{};D=ut.index,l=ut.injector,d=ut.projectableNodes,f=ut.environmentInjector||ut.ngModuleRef}const A=y?o:new Uf(dn(o)),P=l||this.parentInjector;if(!f&&null==A.ngModule){const Ct=(y?P:this.parentInjector).get(fh,null);Ct&&(f=Ct)}dn(A.componentType??{});const De=A.create(P,d,null,f);return this.insertImpl(De.hostView,D,false),De}insert(o,a){return this.insertImpl(o,a,!1)}insertImpl(o,a,l){const d=o._lView,f=d[Et];if(function ar(s){return Yi(s[er])}(d)){const A=this.indexOf(o);if(-1!==A)this.detach(A);else{const P=d[er],q=new vl(P,P[Or],P[er]);q.detach(q.indexOf(o))}}const y=this._adjustIndex(a),D=this._lContainer;if(function Qv(s,o,a,l){const d=Br+l,f=a.length;l>0&&(a[d-1][Nr]=o),l<f-Br?(o[Nr]=a[d],Xp(a,Br+l,o)):(a.push(o),o[Nr]=null),o[er]=a;const y=o[Cs];null!==y&&a!==y&&function Jv(s,o){const a=s[fs];o[hr]!==o[er][er][hr]&&(s[Bi]=!0),null===a?s[fs]=[o]:a.push(o)}(y,o);const D=o[oi];null!==D&&D.insertView(s),o[tn]|=128}(f,d,D,y),!l){const A=vc(y,D),P=d[un],q=Jr(P,D[mi]);null!==q&&function Kv(s,o,a,l,d,f){l[Rr]=d,l[Or]=o,lh(s,l,a,1,d,f)}(f,D[Or],P,d,q,A)}return o.attachToViewContainerRef(),Xp(S_(D),y,o),o}move(o,a){return this.insert(o,a)}indexOf(o){const a=zh(this._lContainer);return null!==a?a.indexOf(o):-1}remove(o){const a=this._adjustIndex(o,-1),l=_(this._lContainer,a);l&&(cf(S_(this._lContainer),a),h(l[Et],l))}detach(o){const a=this._adjustIndex(o,-1),l=_(this._lContainer,a);return l&&null!=cf(S_(this._lContainer),a)?new Rg(l):null}_adjustIndex(o,a=0){return o??this.length+a}};function zh(s){return s[8]}function S_(s){return s[8]||(s[8]=[])}function Sd(s,o){let a;const l=o[s.index];return Yi(l)?a=l:(a=FI(l,o,null,s),o[s.index]=a,Hy(o,a)),Wh(a,o,s,l),new vl(a,s,o)}let Wh=function iw(s,o,a,l){if(s[mi])return;let d;d=8&a.type?Vn(l):function mM(s,o){const a=s[un],l=a.createComment(""),d=F(o,s);return Ie(a,Jr(a,d),l,function Ha(s,o){return s.nextSibling(o)}(a,d),!1),l}(o,a),s[mi]=d};class sw{constructor(o){this.queryList=o,this.matches=null}clone(){return new sw(this.queryList)}setDirty(){this.queryList.setDirty()}}class A_{constructor(o=[]){this.queries=o}createEmbeddedView(o){const a=o.queries;if(null!==a){const l=null!==o.contentQueries?o.contentQueries[0]:a.length,d=[];for(let f=0;f<l;f++){const y=a.getByIndex(f);d.push(this.queries[y.indexInDeclarationView].clone())}return new A_(d)}return null}insertView(o){this.dirtyQueriesWithMatches(o)}detachView(o){this.dirtyQueriesWithMatches(o)}dirtyQueriesWithMatches(o){for(let a=0;a<this.queries.length;a++)null!==N_(o,a).matches&&this.queries[a].setDirty()}}class MD{constructor(o,a,l=null){this.predicate=o,this.flags=a,this.read=l}}class M_{constructor(o=[]){this.queries=o}elementStart(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].elementStart(o,a)}elementEnd(o){for(let a=0;a<this.queries.length;a++)this.queries[a].elementEnd(o)}embeddedTView(o){let a=null;for(let l=0;l<this.length;l++){const d=null!==a?a.length:0,f=this.getByIndex(l).embeddedTView(o,d);f&&(f.indexInDeclarationView=l,null!==a?a.push(f):a=[f])}return null!==a?new M_(a):null}template(o,a){for(let l=0;l<this.queries.length;l++)this.queries[l].template(o,a)}getByIndex(o){return this.queries[o]}get length(){return this.queries.length}track(o){this.queries.push(o)}}class ow{constructor(o,a=-1){this.metadata=o,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=a}elementStart(o,a){this.isApplyingToNode(a)&&this.matchTNode(o,a)}elementEnd(o){this._declarationNodeIndex===o.index&&(this._appliesToNextNode=!1)}template(o,a){this.elementStart(o,a)}embeddedTView(o,a){return this.isApplyingToNode(o)?(this.crossesNgTemplate=!0,this.addMatch(-o.index,a),new ow(this.metadata)):null}isApplyingToNode(o){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const a=this._declarationNodeIndex;let l=o.parent;for(;null!==l&&8&l.type&&l.index!==a;)l=l.parent;return a===(null!==l?l.index:-1)}return this._appliesToNextNode}matchTNode(o,a){const l=this.metadata.predicate;if(Array.isArray(l))for(let d=0;d<l.length;d++){const f=l[d];this.matchTNodeWithReadOption(o,a,x_(a,f)),this.matchTNodeWithReadOption(o,a,pu(a,o,f,!1,!1))}else l===Hh?4&a.type&&this.matchTNodeWithReadOption(o,a,-1):this.matchTNodeWithReadOption(o,a,pu(a,o,l,!1,!1))}matchTNodeWithReadOption(o,a,l){if(null!==l){const d=this.metadata.read;if(null!==d)if(d===id||d===Gh||d===Hh&&4&a.type)this.addMatch(a.index,-2);else{const f=pu(a,o,d,!1,!1);null!==f&&this.addMatch(a.index,f)}else this.addMatch(a.index,l)}}addMatch(o,a){null===this.matches?this.matches=[o,a]:this.matches.push(o,a)}}function x_(s,o){const a=s.localNames;if(null!==a)for(let l=0;l<a.length;l+=2)if(a[l]===o)return a[l+1];return null}function yM(s,o,a,l){return-1===a?function xD(s,o){return 11&s.type?Sf(s,o):4&s.type?_p(s,o):null}(o,s):-2===a?function RD(s,o,a){return a===id?Sf(o,s):a===Hh?_p(o,s):a===Gh?Sd(o,s):void 0}(s,o,l):Va(s,s[Et],a,o)}function ND(s,o,a,l){const d=o[oi].queries[l];if(null===d.matches){const f=s.data,y=a.matches,D=[];for(let A=0;A<y.length;A+=2){const P=y[A];D.push(P<0?null:yM(o,f[P],y[A+1],a.metadata.read))}d.matches=D}return d.matches}function R_(s,o,a,l){const d=s.queries.getByIndex(a),f=d.matches;if(null!==f){const y=ND(s,o,d,a);for(let D=0;D<f.length;D+=2){const A=f[D];if(A>0)l.push(y[D/2]);else{const P=f[D+1],q=o[-A];for(let ie=Br;ie<q.length;ie++){const me=q[ie];me[Cs]===me[er]&&R_(me[Et],me,P,l)}if(null!==q[fs]){const ie=q[fs];for(let me=0;me<ie.length;me++){const De=ie[me];R_(De[Et],De,P,l)}}}}}return l}function Md(s){const o=at(),a=Ln(),l=Fu();Fa(l+1);const d=N_(a,l);if(s.dirty&&function Je(s){return 4==(4&s[tn])}(o)===(2==(2&d.metadata.flags))){if(null===d.matches)s.reset([]);else{const f=d.crossesNgTemplate?R_(a,o,l,[]):ND(a,o,d,l);s.reset(f,D0),s.notifyOnChanges()}return!0}return!1}function aw(s,o,a,l){const d=Ln();if(d.firstCreatePass){const f=ts();(function OD(s,o,a){null===s.queries&&(s.queries=new M_),s.queries.track(new ow(o,a))})(d,new MD(o,a,l),f.index),function vM(s,o){const a=s.contentQueries||(s.contentQueries=[]);o!==(a.length?a[a.length-1]:-1)&&a.push(s.queries.length-1,o)}(d,s),2==(2&a)&&(d.staticContentQueries=!0)}!function cw(s,o,a){const l=new sm(4==(4&a));(function L0(s,o,a,l){const d=ll(o);d.push(a),s.firstCreatePass&&$0(s).push(l,d.length-1)})(s,o,l,l.destroy),null===o[oi]&&(o[oi]=new A_),o[oi].queries.push(new sw(l))}(d,at(),a)}function uw(){return function _M(s,o){return s[oi].queries[o].queryList}(at(),Fu())}function N_(s,o){return s.queries.getByIndex(o)}function Ep(s){return!!fi(s)}const qD=new Pr("Application Initializer");let ww=(()=>{class s{constructor(){this.initialized=!1,this.done=!1,this.donePromise=new Promise((a,l)=>{this.resolve=a,this.reject=l}),this.appInits=vn(qD,{optional:!0})??[]}runInitializers(){if(this.initialized)return;const a=[];for(const d of this.appInits){const f=d();if(i_(f))a.push(f);else if(cE(f)){const y=new Promise((D,A)=>{f.subscribe({complete:D,error:A})});a.push(y)}}const l=()=>{this.done=!0,this.resolve()};Promise.all(a).then(()=>{l()}).catch(d=>{this.reject(d)}),0===a.length&&l(),this.initialized=!0}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})(),ZD=(()=>{class s{log(a){console.log(a)}warn(a){console.warn(a)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();const H_=new Pr("LocaleId",{providedIn:"root",factory:()=>vn(H_,mt.Optional|mt.SkipSelf)||function Cw(){return typeof $localize<"u"&&$localize.locale||_d}()}),SM=new Pr("DefaultCurrencyCode",{providedIn:"root",factory:()=>"USD"});let G_=(()=>{class s{constructor(){this.taskId=0,this.pendingTasks=new Set,this.hasPendingTasks=new $.X(!1)}add(){this.hasPendingTasks.next(!0);const a=this.taskId++;return this.pendingTasks.add(a),a}remove(a){this.pendingTasks.delete(a),0===this.pendingTasks.size&&this.hasPendingTasks.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks.next(!1)}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();class z_{constructor(o,a){this.ngModuleFactory=o,this.componentFactories=a}}let _m=(()=>{class s{compileModuleSync(a){return new qE(a)}compileModuleAsync(a){return Promise.resolve(this.compileModuleSync(a))}compileModuleAndAllComponentsSync(a){const l=this.compileModuleSync(a),f=qu(fi(a).declarations).reduce((y,D)=>{const A=dn(D);return A&&y.push(new Uf(A)),y},[]);return new z_(l,f)}compileModuleAndAllComponentsAsync(a){return Promise.resolve(this.compileModuleAndAllComponentsSync(a))}clearCache(){}clearCacheFor(a){}getModuleId(a){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function q_(...s){}class ia{constructor({enableLongStackTrace:o=!1,shouldCoalesceEventChangeDetection:a=!1,shouldCoalesceRunChangeDetection:l=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new bu(!1),this.onMicrotaskEmpty=new bu(!1),this.onStable=new bu(!1),this.onError=new bu(!1),typeof Zone>"u")throw new Ae(908,!1);Zone.assertZonePatched();const d=this;d._nesting=0,d._outer=d._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(d._inner=d._inner.fork(new Zone.TaskTrackingZoneSpec)),o&&Zone.longStackTraceZoneSpec&&(d._inner=d._inner.fork(Zone.longStackTraceZoneSpec)),d.shouldCoalesceEventChangeDetection=!l&&a,d.shouldCoalesceRunChangeDetection=l,d.lastRequestAnimationFrameId=-1,d.nativeRequestAnimationFrame=function xM(){const s="function"==typeof An.requestAnimationFrame;let o=An[s?"requestAnimationFrame":"setTimeout"],a=An[s?"cancelAnimationFrame":"clearTimeout"];if(typeof Zone<"u"&&o&&a){const l=o[Zone.__symbol__("OriginalDelegate")];l&&(o=l);const d=a[Zone.__symbol__("OriginalDelegate")];d&&(a=d)}return{nativeRequestAnimationFrame:o,nativeCancelAnimationFrame:a}}().nativeRequestAnimationFrame,function QD(s){const o=()=>{!function Tw(s){s.isCheckStableRunning||-1!==s.lastRequestAnimationFrameId||(s.lastRequestAnimationFrameId=s.nativeRequestAnimationFrame.call(An,()=>{s.fakeTopEventTask||(s.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{s.lastRequestAnimationFrameId=-1,xd(s),s.isCheckStableRunning=!0,bp(s),s.isCheckStableRunning=!1},void 0,()=>{},()=>{})),s.fakeTopEventTask.invoke()}),xd(s))}(s)};s._inner=s._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(a,l,d,f,y,D)=>{try{return Z_(s),a.invokeTask(d,f,y,D)}finally{(s.shouldCoalesceEventChangeDetection&&"eventTask"===f.type||s.shouldCoalesceRunChangeDetection)&&o(),JD(s)}},onInvoke:(a,l,d,f,y,D,A)=>{try{return Z_(s),a.invoke(d,f,y,D,A)}finally{s.shouldCoalesceRunChangeDetection&&o(),JD(s)}},onHasTask:(a,l,d,f)=>{a.hasTask(d,f),l===d&&("microTask"==f.change?(s._hasPendingMicrotasks=f.microTask,xd(s),bp(s)):"macroTask"==f.change&&(s.hasPendingMacrotasks=f.macroTask))},onHandleError:(a,l,d,f)=>(a.handleError(d,f),s.runOutsideAngular(()=>s.onError.emit(f)),!1)})}(d)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!ia.isInAngularZone())throw new Ae(909,!1)}static assertNotInAngularZone(){if(ia.isInAngularZone())throw new Ae(909,!1)}run(o,a,l){return this._inner.run(o,a,l)}runTask(o,a,l,d){const f=this._inner,y=f.scheduleEventTask("NgZoneEvent: "+d,o,Dw,q_,q_);try{return f.runTask(y,a,l)}finally{f.cancelTask(y)}}runGuarded(o,a,l){return this._inner.runGuarded(o,a,l)}runOutsideAngular(o){return this._outer.run(o)}}const Dw={};function bp(s){if(0==s._nesting&&!s.hasPendingMicrotasks&&!s.isStable)try{s._nesting++,s.onMicrotaskEmpty.emit(null)}finally{if(s._nesting--,!s.hasPendingMicrotasks)try{s.runOutsideAngular(()=>s.onStable.emit(null))}finally{s.isStable=!0}}}function xd(s){s.hasPendingMicrotasks=!!(s._hasPendingMicrotasks||(s.shouldCoalesceEventChangeDetection||s.shouldCoalesceRunChangeDetection)&&-1!==s.lastRequestAnimationFrameId)}function Z_(s){s._nesting++,s.isStable&&(s.isStable=!1,s.onUnstable.emit(null))}function JD(s){s._nesting--,bp(s)}class RM{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new bu,this.onMicrotaskEmpty=new bu,this.onStable=new bu,this.onError=new bu}run(o,a,l){return o.apply(a,l)}runGuarded(o,a,l){return o.apply(a,l)}runOutsideAngular(o){return o()}runTask(o,a,l,d){return o.apply(a,l)}}const Sw=new Pr("",{providedIn:"root",factory:Aw});function Aw(){const s=vn(ia);let o=!0;const a=new Q.y(d=>{o=s.isStable&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks,s.runOutsideAngular(()=>{d.next(o),d.complete()})}),l=new Q.y(d=>{let f;s.runOutsideAngular(()=>{f=s.onStable.subscribe(()=>{ia.assertNotInAngularZone(),queueMicrotask(()=>{!o&&!s.hasPendingMacrotasks&&!s.hasPendingMicrotasks&&(o=!0,d.next(!0))})})});const y=s.onUnstable.subscribe(()=>{ia.assertInAngularZone(),o&&(o=!1,s.runOutsideAngular(()=>{d.next(!1)}))});return()=>{f.unsubscribe(),y.unsubscribe()}});return(0,ae.T)(a,l.pipe((0,ve.B)()))}const XD=new Pr(""),K_=new Pr("");let vm,NM=(()=>{class s{constructor(a,l,d){this._ngZone=a,this.registry=l,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,vm||(function OM(s){vm=s}(d),d.addToWindow(l)),this._watchAngularEvents(),a.run(()=>{this.taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{ia.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let a=this._callbacks.pop();clearTimeout(a.timeoutId),a.doneCb(this._didWork)}this._didWork=!1});else{let a=this.getPendingTasks();this._callbacks=this._callbacks.filter(l=>!l.updateCb||!l.updateCb(a)||(clearTimeout(l.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(a=>({source:a.source,creationLocation:a.creationLocation,data:a.data})):[]}addCallback(a,l,d){let f=-1;l&&l>0&&(f=setTimeout(()=>{this._callbacks=this._callbacks.filter(y=>y.timeoutId!==f),a(this._didWork,this.getPendingTasks())},l)),this._callbacks.push({doneCb:a,timeoutId:f,updateCb:d})}whenStable(a,l,d){if(d&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(a,l,d),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}registerApplication(a){this.registry.registerApplication(a,this)}unregisterApplication(a){this.registry.unregisterApplication(a)}findProviders(a,l,d){return[]}}return s.\u0275fac=function(a){return new(a||s)(Nn(ia),Nn(Y_),Nn(K_))},s.\u0275prov=sn({token:s,factory:s.\u0275fac}),s})(),Y_=(()=>{class s{constructor(){this._applications=new Map}registerApplication(a,l){this._applications.set(a,l)}unregisterApplication(a){this._applications.delete(a)}unregisterAllApplications(){this._applications.clear()}getTestability(a){return this._applications.get(a)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(a,l=!0){return vm?.findTestabilityInTree(this,a,l)??null}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})(),Rd=null;const Q_=new Pr("AllowMultipleToken"),J_=new Pr("PlatformDestroyListeners"),Em=new Pr("appBootstrapListener");class xw{constructor(o,a){this.name=o,this.token=a}}function tT(s,o,a=[]){const l=`Platform: ${o}`,d=new Pr(l);return(f=[])=>{let y=Cm();if(!y||y.injector.get(Q_,!1)){const D=[...a,...f,{provide:d,useValue:!0}];s?s(D):function Dp(s){if(Rd&&!Rd.get(Q_,!1))throw new Ae(400,!1);(function Zh(){!function su(s){iu=s}(()=>{throw new Ae(600,!1)})})(),Rd=s;const o=s.get(ev);(function Rw(s){s.get(m0,null)?.forEach(a=>a())})(s)}(function X_(s=[],o){return Zu.create({name:o,providers:[{provide:l0,useValue:"platform"},{provide:J_,useValue:new Set([()=>Rd=null])},...s]})}(D,l))}return function PM(s){const o=Cm();if(!o)throw new Ae(401,!1);return o}()}}function Cm(){return Rd?.get(ev)??null}let ev=(()=>{class s{constructor(a){this._injector=a,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(a,l){const d=function kM(s="zone.js",o){return"noop"===s?new RM:"zone.js"===s?new ia(o):s}(l?.ngZone,function rT(s){return{enableLongStackTrace:!1,shouldCoalesceEventChangeDetection:s?.eventCoalescing??!1,shouldCoalesceRunChangeDetection:s?.runCoalescing??!1}}({eventCoalescing:l?.ngZoneEventCoalescing,runCoalescing:l?.ngZoneRunCoalescing}));return d.run(()=>{const f=function oM(s,o,a){return new w_(s,o,a)}(a.moduleType,this.injector,function aT(s){return[{provide:ia,useFactory:s},{provide:Ef,multi:!0,useFactory:()=>{const o=vn(oT,{optional:!0});return()=>o.initialize()}},{provide:Nw,useFactory:sT},{provide:Sw,useFactory:Aw}]}(()=>d)),y=f.injector.get(Af,null);return d.runOutsideAngular(()=>{const D=d.onError.subscribe({next:A=>{y.handleError(A)}});f.onDestroy(()=>{Im(this._modules,f),D.unsubscribe()})}),function tv(s,o,a){try{const l=a();return i_(l)?l.catch(d=>{throw o.runOutsideAngular(()=>s.handleError(d)),d}):l}catch(l){throw o.runOutsideAngular(()=>s.handleError(l)),l}}(y,d,()=>{const D=f.injector.get(ww);return D.runInitializers(),D.donePromise.then(()=>(function h_(s){Dt(s,"Expected localeId to be defined"),"string"==typeof s&&(NE=s.toLowerCase().replace(/_/g,"-"))}(f.injector.get(H_,_d)||_d),this._moduleDoBootstrap(f),f))})})}bootstrapModule(a,l=[]){const d=nv({},l);return function Mw(s,o,a){const l=new qE(a);return Promise.resolve(l)}(0,0,a).then(f=>this.bootstrapModuleFactory(f,d))}_moduleDoBootstrap(a){const l=a.injector.get(Sp);if(a._bootstrapComponents.length>0)a._bootstrapComponents.forEach(d=>l.bootstrap(d));else{if(!a.instance.ngDoBootstrap)throw new Ae(-403,!1);a.instance.ngDoBootstrap(l)}this._modules.push(a)}onDestroy(a){this._destroyListeners.push(a)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Ae(404,!1);this._modules.slice().forEach(l=>l.destroy()),this._destroyListeners.forEach(l=>l());const a=this._injector.get(J_,null);a&&(a.forEach(l=>l()),a.clear()),this._destroyed=!0}get destroyed(){return this._destroyed}}return s.\u0275fac=function(a){return new(a||s)(Nn(Zu))},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"platform"}),s})();function nv(s,o){return Array.isArray(o)?o.reduce(nv,s):{...s,...o}}let Sp=(()=>{class s{constructor(){this._bootstrapListeners=[],this._runningTick=!1,this._destroyed=!1,this._destroyListeners=[],this._views=[],this.internalErrorHandler=vn(Nw),this.zoneIsStable=vn(Sw),this.componentTypes=[],this.components=[],this.isStable=vn(G_).hasPendingTasks.pipe((0,ze.w)(a=>a?(0,de.of)(!1):this.zoneIsStable),(0,Me.x)(),(0,ve.B)()),this._injector=vn(fh)}get destroyed(){return this._destroyed}get injector(){return this._injector}bootstrap(a,l){const d=a instanceof Sy;if(!this._injector.get(ww).done)throw!d&&go(a),new Ae(405,!1);let y;y=d?a:this._injector.get(rd).resolveComponentFactory(a),this.componentTypes.push(y.componentType);const D=function Nd(s){return s.isBoundToModule}(y)?void 0:this._injector.get(Uh),P=y.create(Zu.NULL,[],l||y.selector,D),q=P.location.nativeElement,ie=P.injector.get(XD,null);return ie?.registerApplication(q),P.onDestroy(()=>{this.detachView(P.hostView),Im(this.components,P),ie?.unregisterApplication(q)}),this._loadComponent(P),P}tick(){if(this._runningTick)throw new Ae(101,!1);try{this._runningTick=!0;for(let a of this._views)a.detectChanges()}catch(a){this.internalErrorHandler(a)}finally{this._runningTick=!1}}attachView(a){const l=a;this._views.push(l),l.attachToAppRef(this)}detachView(a){const l=a;Im(this._views,l),l.detachFromAppRef()}_loadComponent(a){this.attachView(a.hostView),this.tick(),this.components.push(a);const l=this._injector.get(Em,[]);l.push(...this._bootstrapListeners),l.forEach(d=>d(a))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(a=>a()),this._views.slice().forEach(a=>a.destroy())}finally{this._destroyed=!0,this._views=[],this._bootstrapListeners=[],this._destroyListeners=[]}}onDestroy(a){return this._destroyListeners.push(a),()=>Im(this._destroyListeners,a)}destroy(){if(this._destroyed)throw new Ae(406,!1);const a=this._injector;a.destroy&&!a.destroyed&&a.destroy()}get viewCount(){return this._views.length}warnIfDestroyed(){}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function Im(s,o){const a=s.indexOf(o);a>-1&&s.splice(a,1)}const Nw=new Pr("",{providedIn:"root",factory:()=>vn(Af).handleError.bind(void 0)});function sT(){const s=vn(ia),o=vn(Af);return a=>s.runOutsideAngular(()=>o.handleError(a))}let oT=(()=>{class s{constructor(){this.zone=vn(ia),this.applicationRef=vn(Sp)}initialize(){this._onMicrotaskEmptySubscription||(this._onMicrotaskEmptySubscription=this.zone.onMicrotaskEmpty.subscribe({next:()=>{this.zone.run(()=>{this.applicationRef.tick()})}}))}ngOnDestroy(){this._onMicrotaskEmptySubscription?.unsubscribe()}}return s.\u0275fac=function(a){return new(a||s)},s.\u0275prov=sn({token:s,factory:s.\u0275fac,providedIn:"root"}),s})();function UM(){return!1}function VM(){}let BM=(()=>{class s{}return s.__NG_ELEMENT_ID__=Ow,s})();function Ow(s){return function jM(s,o,a){if(Us(s)&&!a){const l=Ne(s.index,o);return new Rg(l,l)}return 47&s.type?new Rg(o[hr],o):null}(ts(),at(),16==(16&s))}class pT{constructor(){}supports(o){return Og(o)}create(o){return new zM(o)}}const Fw=(s,o)=>o;class zM{constructor(o){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=o||Fw}forEachItem(o){let a;for(a=this._itHead;null!==a;a=a._next)o(a)}forEachOperation(o){let a=this._itHead,l=this._removalsHead,d=0,f=null;for(;a||l;){const y=!l||a&&a.currentIndex<cv(l,d,f)?a:l,D=cv(y,d,f),A=y.currentIndex;if(y===l)d--,l=l._nextRemoved;else if(a=a._next,null==y.previousIndex)d++;else{f||(f=[]);const P=D-d,q=A-d;if(P!=q){for(let me=0;me<P;me++){const De=me<f.length?f[me]:f[me]=0,$e=De+me;q<=$e&&$e<P&&(f[me]=De+1)}f[y.previousIndex]=q-P}}D!==A&&o(y,D,A)}}forEachPreviousItem(o){let a;for(a=this._previousItHead;null!==a;a=a._nextPrevious)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachMovedItem(o){let a;for(a=this._movesHead;null!==a;a=a._nextMoved)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}forEachIdentityChange(o){let a;for(a=this._identityChangesHead;null!==a;a=a._nextIdentityChange)o(a)}diff(o){if(null==o&&(o=[]),!Og(o))throw new Ae(900,!1);return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let d,f,y,a=this._itHead,l=!1;if(Array.isArray(o)){this.length=o.length;for(let D=0;D<this.length;D++)f=o[D],y=this._trackByFn(D,f),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,f,y,D)),Object.is(a.item,f)||this._addIdentityChange(a,f)):(a=this._mismatch(a,f,y,D),l=!0),a=a._next}else d=0,function tb(s,o){if(Array.isArray(s))for(let a=0;a<s.length;a++)o(s[a]);else{const a=s[Symbol.iterator]();let l;for(;!(l=a.next()).done;)o(l.value)}}(o,D=>{y=this._trackByFn(d,D),null!==a&&Object.is(a.trackById,y)?(l&&(a=this._verifyReinsertion(a,D,y,d)),Object.is(a.item,D)||this._addIdentityChange(a,D)):(a=this._mismatch(a,D,y,d),l=!0),a=a._next,d++}),this.length=d;return this._truncate(a),this.collection=o,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let o;for(o=this._previousItHead=this._itHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._additionsHead;null!==o;o=o._nextAdded)o.previousIndex=o.currentIndex;for(this._additionsHead=this._additionsTail=null,o=this._movesHead;null!==o;o=o._nextMoved)o.previousIndex=o.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(o,a,l,d){let f;return null===o?f=this._itTail:(f=o._prev,this._remove(o)),null!==(o=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._reinsertAfter(o,f,d)):null!==(o=null===this._linkedRecords?null:this._linkedRecords.get(l,d))?(Object.is(o.item,a)||this._addIdentityChange(o,a),this._moveAfter(o,f,d)):o=this._addAfter(new WM(a,l),f,d),o}_verifyReinsertion(o,a,l,d){let f=null===this._unlinkedRecords?null:this._unlinkedRecords.get(l,null);return null!==f?o=this._reinsertAfter(f,o._prev,d):o.currentIndex!=d&&(o.currentIndex=d,this._addToMoves(o,d)),o}_truncate(o){for(;null!==o;){const a=o._next;this._addToRemovals(this._unlink(o)),o=a}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(o,a,l){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(o);const d=o._prevRemoved,f=o._nextRemoved;return null===d?this._removalsHead=f:d._nextRemoved=f,null===f?this._removalsTail=d:f._prevRemoved=d,this._insertAfter(o,a,l),this._addToMoves(o,l),o}_moveAfter(o,a,l){return this._unlink(o),this._insertAfter(o,a,l),this._addToMoves(o,l),o}_addAfter(o,a,l){return this._insertAfter(o,a,l),this._additionsTail=null===this._additionsTail?this._additionsHead=o:this._additionsTail._nextAdded=o,o}_insertAfter(o,a,l){const d=null===a?this._itHead:a._next;return o._next=d,o._prev=a,null===d?this._itTail=o:d._prev=o,null===a?this._itHead=o:a._next=o,null===this._linkedRecords&&(this._linkedRecords=new gT),this._linkedRecords.put(o),o.currentIndex=l,o}_remove(o){return this._addToRemovals(this._unlink(o))}_unlink(o){null!==this._linkedRecords&&this._linkedRecords.remove(o);const a=o._prev,l=o._next;return null===a?this._itHead=l:a._next=l,null===l?this._itTail=a:l._prev=a,o}_addToMoves(o,a){return o.previousIndex===a||(this._movesTail=null===this._movesTail?this._movesHead=o:this._movesTail._nextMoved=o),o}_addToRemovals(o){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gT),this._unlinkedRecords.put(o),o.currentIndex=null,o._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=o,o._prevRemoved=null):(o._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=o),o}_addIdentityChange(o,a){return o.item=a,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=o:this._identityChangesTail._nextIdentityChange=o,o}}class WM{constructor(o,a){this.item=o,this.trackById=a,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Lw{constructor(){this._head=null,this._tail=null}add(o){null===this._head?(this._head=this._tail=o,o._nextDup=null,o._prevDup=null):(this._tail._nextDup=o,o._prevDup=this._tail,o._nextDup=null,this._tail=o)}get(o,a){let l;for(l=this._head;null!==l;l=l._nextDup)if((null===a||a<=l.currentIndex)&&Object.is(l.trackById,o))return l;return null}remove(o){const a=o._prevDup,l=o._nextDup;return null===a?this._head=l:a._nextDup=l,null===l?this._tail=a:l._prevDup=a,null===this._head}}class gT{constructor(){this.map=new Map}put(o){const a=o.trackById;let l=this.map.get(a);l||(l=new Lw,this.map.set(a,l)),l.add(o)}get(o,a){const d=this.map.get(o);return d?d.get(o,a):null}remove(o){const a=o.trackById;return this.map.get(a).remove(o)&&this.map.delete(a),o}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function cv(s,o,a){const l=s.previousIndex;if(null===l)return l;let d=0;return a&&l<a.length&&(d=a[l]),l+o+d}class mT{constructor(){}supports(o){return o instanceof Map||Jy(o)}create(){return new Uw}}class Uw{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(o){let a;for(a=this._mapHead;null!==a;a=a._next)o(a)}forEachPreviousItem(o){let a;for(a=this._previousMapHead;null!==a;a=a._nextPrevious)o(a)}forEachChangedItem(o){let a;for(a=this._changesHead;null!==a;a=a._nextChanged)o(a)}forEachAddedItem(o){let a;for(a=this._additionsHead;null!==a;a=a._nextAdded)o(a)}forEachRemovedItem(o){let a;for(a=this._removalsHead;null!==a;a=a._nextRemoved)o(a)}diff(o){if(o){if(!(o instanceof Map||Jy(o)))throw new Ae(900,!1)}else o=new Map;return this.check(o)?this:null}onDestroy(){}check(o){this._reset();let a=this._mapHead;if(this._appendAfter=null,this._forEach(o,(l,d)=>{if(a&&a.key===d)this._maybeAddToChanges(a,l),this._appendAfter=a,a=a._next;else{const f=this._getOrCreateRecordForKey(d,l);a=this._insertBeforeOrAppend(a,f)}}),a){a._prev&&(a._prev._next=null),this._removalsHead=a;for(let l=a;null!==l;l=l._nextRemoved)l===this._mapHead&&(this._mapHead=null),this._records.delete(l.key),l._nextRemoved=l._next,l.previousValue=l.currentValue,l.currentValue=null,l._prev=null,l._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(o,a){if(o){const l=o._prev;return a._next=o,a._prev=l,o._prev=a,l&&(l._next=a),o===this._mapHead&&(this._mapHead=a),this._appendAfter=o,o}return this._appendAfter?(this._appendAfter._next=a,a._prev=this._appendAfter):this._mapHead=a,this._appendAfter=a,null}_getOrCreateRecordForKey(o,a){if(this._records.has(o)){const d=this._records.get(o);this._maybeAddToChanges(d,a);const f=d._prev,y=d._next;return f&&(f._next=y),y&&(y._prev=f),d._next=null,d._prev=null,d}const l=new qM(o);return this._records.set(o,l),l.currentValue=a,this._addToAdditions(l),l}_reset(){if(this.isDirty){let o;for(this._previousMapHead=this._mapHead,o=this._previousMapHead;null!==o;o=o._next)o._nextPrevious=o._next;for(o=this._changesHead;null!==o;o=o._nextChanged)o.previousValue=o.currentValue;for(o=this._additionsHead;null!=o;o=o._nextAdded)o.previousValue=o.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(o,a){Object.is(a,o.currentValue)||(o.previousValue=o.currentValue,o.currentValue=a,this._addToChanges(o))}_addToAdditions(o){null===this._additionsHead?this._additionsHead=this._additionsTail=o:(this._additionsTail._nextAdded=o,this._additionsTail=o)}_addToChanges(o){null===this._changesHead?this._changesHead=this._changesTail=o:(this._changesTail._nextChanged=o,this._changesTail=o)}_forEach(o,a){o instanceof Map?o.forEach(a):Object.keys(o).forEach(l=>a(o[l],l))}}class qM{constructor(o){this.key=o,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function lv(){return new dv([new pT])}let dv=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(null!=l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||lv()),deps:[[s,new Co,new Gu]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(null!=l)return l;throw new Ae(901,!1)}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:lv}),s})();function Vw(){return new Bw([new mT])}let Bw=(()=>{class s{constructor(a){this.factories=a}static create(a,l){if(l){const d=l.factories.slice();a=a.concat(d)}return new s(a)}static extend(a){return{provide:s,useFactory:l=>s.create(a,l||Vw()),deps:[[s,new Co,new Gu]]}}find(a){const l=this.factories.find(d=>d.supports(a));if(l)return l;throw new Ae(901,!1)}}return s.\u0275prov=sn({token:s,providedIn:"root",factory:Vw}),s})();const Hw=tT(null,"core",[]);let $w=(()=>{class s{constructor(a){}}return s.\u0275fac=function(a){return new(a||s)(Nn(Sp))},s.\u0275mod=xi({type:s}),s.\u0275inj=Jn({}),s})();function _v(s){return"boolean"==typeof s?s:null!=s&&"false"!==s}function sx(s){const o=dn(s);if(!o)return null;const a=new Uf(o);return{get selector(){return a.selector},get type(){return a.componentType},get inputs(){return a.inputs},get outputs(){return a.outputs},get ngContentSelectors(){return a.ngContentSelectors},get isStandalone(){return o.standalone},get isSignal(){return o.signals}}}},3399:(bt,Pe,j)=>{j.d(Pe,{Z:()=>gt});var E=j(9058),w=j(4537),$=j(1571),Q=j(7879);class ae{constructor(xe,Ge){this._delegate=xe,this.firebase=Ge,(0,$._addComponent)(xe,new w.wA("app-compat",()=>this,"PUBLIC")),this.container=xe.container}get automaticDataCollectionEnabled(){return this._delegate.automaticDataCollectionEnabled}set automaticDataCollectionEnabled(xe){this._delegate.automaticDataCollectionEnabled=xe}get name(){return this._delegate.name}get options(){return this._delegate.options}delete(){return new Promise(xe=>{this._delegate.checkDestroyed(),xe()}).then(()=>(this.firebase.INTERNAL.removeApp(this.name),(0,$.deleteApp)(this._delegate)))}_getService(xe,Ge=$._DEFAULT_ENTRY_NAME){var Oe;this._delegate.checkDestroyed();const yt=this._delegate.container.getProvider(xe);return!yt.isInitialized()&&"EXPLICIT"===(null===(Oe=yt.getComponent())||void 0===Oe?void 0:Oe.instantiationMode)&&yt.initialize(),yt.getImmediate({identifier:Ge})}_removeServiceInstance(xe,Ge=$._DEFAULT_ENTRY_NAME){this._delegate.container.getProvider(xe).clearInstance(Ge)}_addComponent(xe){(0,$._addComponent)(this._delegate,xe)}_addOrOverwriteComponent(xe){(0,$._addOrOverwriteComponent)(this._delegate,xe)}toJSON(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}}}const ve=new E.LL("app-compat","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance."}),oe=function Me(){const et=function ze(et){const xe={},Ge={__esModule:!0,initializeApp:function Ae(nt,it={}){const Te=$.initializeApp(nt,it);if((0,E.r3)(xe,Te.name))return xe[Te.name];const _t=new et(Te,Ge);return xe[Te.name]=_t,_t},app:yt,registerVersion:$.registerVersion,setLogLevel:$.setLogLevel,onLog:$.onLog,apps:null,SDK_VERSION:$.SDK_VERSION,INTERNAL:{registerComponent:function ye(nt){const it=nt.name,Te=it.replace("-compat","");if($._registerComponent(nt)&&"PUBLIC"===nt.type){const _t=(pn=yt())=>{if("function"!=typeof pn[Te])throw ve.create("invalid-app-argument",{appName:it});return pn[Te]()};void 0!==nt.serviceProps&&(0,E.ZB)(_t,nt.serviceProps),Ge[Te]=_t,et.prototype[Te]=function(...pn){return this._getService.bind(this,it).apply(this,nt.multipleInstances?pn:[])}}return"PUBLIC"===nt.type?Ge[Te]:null},removeApp:function Oe(nt){delete xe[nt]},useAsService:function Le(nt,it){return"serverAuth"===it?null:it},modularAPIs:$}};function yt(nt){if(!(0,E.r3)(xe,nt=nt||$._DEFAULT_ENTRY_NAME))throw ve.create("no-app",{appName:nt});return xe[nt]}return Ge.default=Ge,Object.defineProperty(Ge,"apps",{get:function Qe(){return Object.keys(xe).map(nt=>xe[nt])}}),yt.App=et,Ge}(ae);return et.INTERNAL=Object.assign(Object.assign({},et.INTERNAL),{createFirebaseNamespace:Me,extendNamespace:function xe(Ge){(0,E.ZB)(et,Ge)},createSubscribe:E.ne,ErrorFactory:E.LL,deepExtend:E.ZB}),et}(),le=new Q.Yd("@firebase/app-compat");if((0,E.jU)()&&void 0!==self.firebase){le.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");const et=self.firebase.SDK_VERSION;et&&et.indexOf("LITE")>=0&&le.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}const gt=oe;!function Be(et){(0,$.registerVersion)("@firebase/app-compat","0.2.13",et)}()},1571:(bt,Pe,j)=>{j.r(Pe),j.d(Pe,{FirebaseError:()=>Q.ZR,SDK_VERSION:()=>po,_DEFAULT_ENTRY_NAME:()=>mt,_addComponent:()=>fr,_addOrOverwriteComponent:()=>ei,_apps:()=>Ht,_clearComponents:()=>bn,_components:()=>Un,_getProvider:()=>wr,_registerComponent:()=>An,_removeServiceInstance:()=>Ps,deleteApp:()=>Cr,getApp:()=>qi,getApps:()=>li,initializeApp:()=>hs,onLog:()=>Li,registerVersion:()=>Gn,setLogLevel:()=>Nn});var E=j(5861),w=j(4537),$=j(7879),Q=j(9058);const ae=(Ue,Se)=>Se.some(rt=>Ue instanceof rt);let de,ve;const oe=new WeakMap,le=new WeakMap,_e=new WeakMap,st=new WeakMap,Be=new WeakMap;let xe={get(Ue,Se,rt){if(Ue instanceof IDBTransaction){if("done"===Se)return le.get(Ue);if("objectStoreNames"===Se)return Ue.objectStoreNames||_e.get(Ue);if("store"===Se)return rt.objectStoreNames[1]?void 0:rt.objectStore(rt.objectStoreNames[0])}return Ae(Ue[Se])},set:(Ue,Se,rt)=>(Ue[Se]=rt,!0),has:(Ue,Se)=>Ue instanceof IDBTransaction&&("done"===Se||"store"===Se)||Se in Ue};function yt(Ue){return"function"==typeof Ue?function Oe(Ue){return Ue!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function Me(){return ve||(ve=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(Ue)?function(...Se){return Ue.apply(Qe(this),Se),Ae(oe.get(this))}:function(...Se){return Ae(Ue.apply(Qe(this),Se))}:function(Se,...rt){const Pt=Ue.call(Qe(this),Se,...rt);return _e.set(Pt,Se.sort?Se.sort():[Se]),Ae(Pt)}}(Ue):(Ue instanceof IDBTransaction&&function et(Ue){if(le.has(Ue))return;const Se=new Promise((rt,Pt)=>{const Qt=()=>{Ue.removeEventListener("complete",ln),Ue.removeEventListener("error",mn),Ue.removeEventListener("abort",mn)},ln=()=>{rt(),Qt()},mn=()=>{Pt(Ue.error||new DOMException("AbortError","AbortError")),Qt()};Ue.addEventListener("complete",ln),Ue.addEventListener("error",mn),Ue.addEventListener("abort",mn)});le.set(Ue,Se)}(Ue),ae(Ue,function ze(){return de||(de=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(Ue,xe):Ue)}function Ae(Ue){if(Ue instanceof IDBRequest)return function gt(Ue){const Se=new Promise((rt,Pt)=>{const Qt=()=>{Ue.removeEventListener("success",ln),Ue.removeEventListener("error",mn)},ln=()=>{rt(Ae(Ue.result)),Qt()},mn=()=>{Pt(Ue.error),Qt()};Ue.addEventListener("success",ln),Ue.addEventListener("error",mn)});return Se.then(rt=>{rt instanceof IDBCursor&&oe.set(rt,Ue)}).catch(()=>{}),Be.set(Se,Ue),Se}(Ue);if(st.has(Ue))return st.get(Ue);const Se=yt(Ue);return Se!==Ue&&(st.set(Ue,Se),Be.set(Se,Ue)),Se}const Qe=Ue=>Be.get(Ue),nt=["get","getKey","getAll","getAllKeys","count"],it=["put","add","delete","clear"],Te=new Map;function _t(Ue,Se){if(!(Ue instanceof IDBDatabase)||Se in Ue||"string"!=typeof Se)return;if(Te.get(Se))return Te.get(Se);const rt=Se.replace(/FromIndex$/,""),Pt=Se!==rt,Qt=it.includes(rt);if(!(rt in(Pt?IDBIndex:IDBObjectStore).prototype)||!Qt&&!nt.includes(rt))return;const ln=function(){var mn=(0,E.Z)(function*(On,...pr){const ws=this.transaction(On,Qt?"readwrite":"readonly");let qs=ws.store;return Pt&&(qs=qs.index(pr.shift())),(yield Promise.all([qs[rt](...pr),Qt&&ws.done]))[0]});return function(pr){return mn.apply(this,arguments)}}();return Te.set(Se,ln),ln}!function Ge(Ue){xe=Ue(xe)}(Ue=>({...Ue,get:(Se,rt,Pt)=>_t(Se,rt)||Ue.get(Se,rt,Pt),has:(Se,rt)=>!!_t(Se,rt)||Ue.has(Se,rt)}));class pn{constructor(Se){this.container=Se}getPlatformInfoString(){return this.container.getProviders().map(rt=>{if(function Wn(Ue){const Se=Ue.getComponent();return"VERSION"===Se?.type}(rt)){const Pt=rt.getImmediate();return`${Pt.library}/${Pt.version}`}return null}).filter(rt=>rt).join(" ")}}const _n="@firebase/app",Qn=new $.Yd("@firebase/app"),mt="[DEFAULT]",zt={[_n]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Ht=new Map,Un=new Map;function fr(Ue,Se){try{Ue.container.addComponent(Se)}catch(rt){Qn.debug(`Component ${Se.name} failed to register with FirebaseApp ${Ue.name}`,rt)}}function ei(Ue,Se){Ue.container.addOrOverwriteComponent(Se)}function An(Ue){const Se=Ue.name;if(Un.has(Se))return Qn.debug(`There were multiple attempts to register component ${Se}.`),!1;Un.set(Se,Ue);for(const rt of Ht.values())fr(rt,Ue);return!0}function wr(Ue,Se){const rt=Ue.container.getProvider("heartbeat").getImmediate({optional:!0});return rt&&rt.triggerHeartbeat(),Ue.container.getProvider(Se)}function Ps(Ue,Se,rt=mt){wr(Ue,Se).clearInstance(rt)}function bn(){Un.clear()}const xt=new Q.LL("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Ai{constructor(Se,rt,Pt){this._isDeleted=!1,this._options=Object.assign({},Se),this._config=Object.assign({},rt),this._name=rt.name,this._automaticDataCollectionEnabled=rt.automaticDataCollectionEnabled,this._container=Pt,this.container.addComponent(new w.wA("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(Se){this.checkDestroyed(),this._automaticDataCollectionEnabled=Se}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(Se){this._isDeleted=Se}checkDestroyed(){if(this.isDeleted)throw xt.create("app-deleted",{appName:this._name})}}const po="9.23.0";function hs(Ue,Se={}){let rt=Ue;"object"!=typeof Se&&(Se={name:Se});const Pt=Object.assign({name:mt,automaticDataCollectionEnabled:!1},Se),Qt=Pt.name;if("string"!=typeof Qt||!Qt)throw xt.create("bad-app-name",{appName:String(Qt)});if(rt||(rt=(0,Q.aH)()),!rt)throw xt.create("no-options");const ln=Ht.get(Qt);if(ln){if((0,Q.vZ)(rt,ln.options)&&(0,Q.vZ)(Pt,ln.config))return ln;throw xt.create("duplicate-app",{appName:Qt})}const mn=new w.H0(Qt);for(const pr of Un.values())mn.addComponent(pr);const On=new Ai(rt,Pt,mn);return Ht.set(Qt,On),On}function qi(Ue=mt){const Se=Ht.get(Ue);if(!Se&&Ue===mt&&(0,Q.aH)())return hs();if(!Se)throw xt.create("no-app",{appName:Ue});return Se}function li(){return Array.from(Ht.values())}function Cr(Ue){return Mr.apply(this,arguments)}function Mr(){return(Mr=(0,E.Z)(function*(Ue){const Se=Ue.name;Ht.has(Se)&&(Ht.delete(Se),yield Promise.all(Ue.container.getProviders().map(rt=>rt.delete())),Ue.isDeleted=!0)})).apply(this,arguments)}function Gn(Ue,Se,rt){var Pt;let Qt=null!==(Pt=zt[Ue])&&void 0!==Pt?Pt:Ue;rt&&(Qt+=`-${rt}`);const ln=Qt.match(/\s|\//),mn=Se.match(/\s|\//);if(ln||mn){const On=[`Unable to register library "${Qt}" with version "${Se}":`];return ln&&On.push(`library name "${Qt}" contains illegal characters (whitespace or "/")`),ln&&mn&&On.push("and"),mn&&On.push(`version name "${Se}" contains illegal characters (whitespace or "/")`),void Qn.warn(On.join(" "))}An(new w.wA(`${Qt}-version`,()=>({library:Qt,version:Se}),"VERSION"))}function Li(Ue,Se){if(null!==Ue&&"function"!=typeof Ue)throw xt.create("invalid-log-argument");(0,$.Am)(Ue,Se)}function Nn(Ue){(0,$.Ub)(Ue)}const qr="firebase-heartbeat-database",vn=1,ue="firebase-heartbeat-store";let G=null;function z(){return G||(G=function ye(Ue,Se,{blocked:rt,upgrade:Pt,blocking:Qt,terminated:ln}={}){const mn=indexedDB.open(Ue,Se),On=Ae(mn);return Pt&&mn.addEventListener("upgradeneeded",pr=>{Pt(Ae(mn.result),pr.oldVersion,pr.newVersion,Ae(mn.transaction),pr)}),rt&&mn.addEventListener("blocked",pr=>rt(pr.oldVersion,pr.newVersion,pr)),On.then(pr=>{ln&&pr.addEventListener("close",()=>ln()),Qt&&pr.addEventListener("versionchange",ws=>Qt(ws.oldVersion,ws.newVersion,ws))}).catch(()=>{}),On}(qr,vn,{upgrade:(Ue,Se)=>{0===Se&&Ue.createObjectStore(ue)}}).catch(Ue=>{throw xt.create("idb-open",{originalErrorMessage:Ue.message})})),G}function ne(){return(ne=(0,E.Z)(function*(Ue){try{return yield(yield z()).transaction(ue).objectStore(ue).get(pt(Ue))}catch(Se){if(Se instanceof Q.ZR)Qn.warn(Se.message);else{const rt=xt.create("idb-get",{originalErrorMessage:Se?.message});Qn.warn(rt.message)}}})).apply(this,arguments)}function be(Ue,Se){return Xe.apply(this,arguments)}function Xe(){return(Xe=(0,E.Z)(function*(Ue,Se){try{const Pt=(yield z()).transaction(ue,"readwrite");yield Pt.objectStore(ue).put(Se,pt(Ue)),yield Pt.done}catch(rt){if(rt instanceof Q.ZR)Qn.warn(rt.message);else{const Pt=xt.create("idb-set",{originalErrorMessage:rt?.message});Qn.warn(Pt.message)}}})).apply(this,arguments)}function pt(Ue){return`${Ue.name}!${Ue.options.appId}`}class Rt{constructor(Se){this.container=Se,this._heartbeatsCache=null;const rt=this.container.getProvider("app").getImmediate();this._storage=new Mi(rt),this._heartbeatsCachePromise=this._storage.read().then(Pt=>(this._heartbeatsCache=Pt,Pt))}triggerHeartbeat(){var Se=this;return(0,E.Z)(function*(){const Pt=Se.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),Qt=cn();if(null===Se._heartbeatsCache&&(Se._heartbeatsCache=yield Se._heartbeatsCachePromise),Se._heartbeatsCache.lastSentHeartbeatDate!==Qt&&!Se._heartbeatsCache.heartbeats.some(ln=>ln.date===Qt))return Se._heartbeatsCache.heartbeats.push({date:Qt,agent:Pt}),Se._heartbeatsCache.heartbeats=Se._heartbeatsCache.heartbeats.filter(ln=>{const mn=new Date(ln.date).valueOf();return Date.now()-mn<=2592e6}),Se._storage.overwrite(Se._heartbeatsCache)})()}getHeartbeatsHeader(){var Se=this;return(0,E.Z)(function*(){if(null===Se._heartbeatsCache&&(yield Se._heartbeatsCachePromise),null===Se._heartbeatsCache||0===Se._heartbeatsCache.heartbeats.length)return"";const rt=cn(),{heartbeatsToSend:Pt,unsentEntries:Qt}=function dr(Ue,Se=1024){const rt=[];let Pt=Ue.slice();for(const Qt of Ue){const ln=rt.find(mn=>mn.agent===Qt.agent);if(ln){if(ln.dates.push(Qt.date),Es(rt)>Se){ln.dates.pop();break}}else if(rt.push({agent:Qt.agent,dates:[Qt.date]}),Es(rt)>Se){rt.pop();break}Pt=Pt.slice(1)}return{heartbeatsToSend:rt,unsentEntries:Pt}}(Se._heartbeatsCache.heartbeats),ln=(0,Q.L)(JSON.stringify({version:2,heartbeats:Pt}));return Se._heartbeatsCache.lastSentHeartbeatDate=rt,Qt.length>0?(Se._heartbeatsCache.heartbeats=Qt,yield Se._storage.overwrite(Se._heartbeatsCache)):(Se._heartbeatsCache.heartbeats=[],Se._storage.overwrite(Se._heartbeatsCache)),ln})()}}function cn(){return(new Date).toISOString().substring(0,10)}class Mi{constructor(Se){this.app=Se,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!(0,Q.hl)()&&(0,Q.eu)().then(()=>!0).catch(()=>!1)})()}read(){var Se=this;return(0,E.Z)(function*(){return(yield Se._canUseIndexedDBPromise)&&(yield function Z(Ue){return ne.apply(this,arguments)}(Se.app))||{heartbeats:[]}})()}overwrite(Se){var rt=this;return(0,E.Z)(function*(){var Pt;if(yield rt._canUseIndexedDBPromise){const ln=yield rt.read();return be(rt.app,{lastSentHeartbeatDate:null!==(Pt=Se.lastSentHeartbeatDate)&&void 0!==Pt?Pt:ln.lastSentHeartbeatDate,heartbeats:Se.heartbeats})}})()}add(Se){var rt=this;return(0,E.Z)(function*(){var Pt;if(yield rt._canUseIndexedDBPromise){const ln=yield rt.read();return be(rt.app,{lastSentHeartbeatDate:null!==(Pt=Se.lastSentHeartbeatDate)&&void 0!==Pt?Pt:ln.lastSentHeartbeatDate,heartbeats:[...ln.heartbeats,...Se.heartbeats]})}})()}}function Es(Ue){return(0,Q.L)(JSON.stringify({version:2,heartbeats:Ue})).length}!function xr(Ue){An(new w.wA("platform-logger",Se=>new pn(Se),"PRIVATE")),An(new w.wA("heartbeat",Se=>new Rt(Se),"PRIVATE")),Gn(_n,"0.9.13",Ue),Gn(_n,"0.9.13","esm2017"),Gn("fire-js","")}("")},4097:(bt,Pe,j)=>{j.d(Pe,{C6:()=>E.getApps,Mq:()=>E.getApp});var E=j(1571);(0,E.registerVersion)("firebase","9.23.0","app")},120:(bt,Pe,j)=>{j.d(Pe,{Z:()=>E.Z});var E=j(3399);E.Z.registerVersion("firebase","9.23.0","app-compat")},8977:(bt,Pe,j)=>{j.r(Pe);var E=j(5861),w=j(3399),$=j(9058),Q=j(1571),ae=j(7582),de=j(7879),ve=j(4537);const Me={FACEBOOK:"facebook.com",GITHUB:"github.com",GOOGLE:"google.com",PASSWORD:"password",PHONE:"phone",TWITTER:"twitter.com"};const gt=function st(){return{"admin-restricted-operation":"This operation is restricted to administrators only.","argument-error":"","app-not-authorized":"This app, identified by the domain where it's hosted, is not authorized to use Firebase Authentication with the provided API key. Review your key configuration in the Google API console.","app-not-installed":"The requested mobile application corresponding to the identifier (Android package name or iOS bundle ID) provided is not installed on this device.","captcha-check-failed":"The reCAPTCHA response token provided is either invalid, expired, already used or the domain associated with it does not match the list of whitelisted domains.","code-expired":"The SMS code has expired. Please re-send the verification code to try again.","cordova-not-ready":"Cordova framework is not ready.","cors-unsupported":"This browser is not supported.","credential-already-in-use":"This credential is already associated with a different user account.","custom-token-mismatch":"The custom token corresponds to a different audience.","requires-recent-login":"This operation is sensitive and requires recent authentication. Log in again before retrying this request.","dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK.","dynamic-link-not-activated":"Please activate Dynamic Links in the Firebase Console and agree to the terms and conditions.","email-change-needs-verification":"Multi-factor users must always have a verified email.","email-already-in-use":"The email address is already in use by another account.","emulator-config-failed":'Auth instance has already been used to make a network call. Auth can no longer be configured to use the emulator. Try calling "connectAuthEmulator()" sooner.',"expired-action-code":"The action code has expired.","cancelled-popup-request":"This operation has been cancelled due to another conflicting popup being opened.","internal-error":"An internal AuthError has occurred.","invalid-app-credential":"The phone verification request contains an invalid application verifier. The reCAPTCHA token response is either invalid or expired.","invalid-app-id":"The mobile app identifier is not registed for the current project.","invalid-user-token":"This user's credential isn't valid for this project. This can happen if the user's token has been tampered with, or if the user isn't for the project associated with this API key.","invalid-auth-event":"An internal AuthError has occurred.","invalid-verification-code":"The SMS verification code used to create the phone auth credential is invalid. Please resend the verification code sms and be sure to use the verification code provided by the user.","invalid-continue-uri":"The continue URL provided in the request is invalid.","invalid-cordova-configuration":"The following Cordova plugins must be installed to enable OAuth sign-in: cordova-plugin-buildinfo, cordova-universal-links-plugin, cordova-plugin-browsertab, cordova-plugin-inappbrowser and cordova-plugin-customurlscheme.","invalid-custom-token":"The custom token format is incorrect. Please check the documentation.","invalid-dynamic-link-domain":"The provided dynamic link domain is not configured or authorized for the current project.","invalid-email":"The email address is badly formatted.","invalid-emulator-scheme":"Emulator URL must start with a valid scheme (http:// or https://).","invalid-api-key":"Your API key is invalid, please check you have copied it correctly.","invalid-cert-hash":"The SHA-1 certificate hash provided is invalid.","invalid-credential":"The supplied auth credential is malformed or has expired.","invalid-message-payload":"The email template corresponding to this action contains invalid characters in its message. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-multi-factor-session":"The request does not contain a valid proof of first factor successful sign-in.","invalid-oauth-provider":"EmailAuthProvider is not supported for this operation. This operation only supports OAuth providers.","invalid-oauth-client-id":"The OAuth client ID provided is either invalid or does not match the specified API key.","unauthorized-domain":"This domain is not authorized for OAuth operations for your Firebase project. Edit the list of authorized domains from the Firebase console.","invalid-action-code":"The action code is invalid. This can happen if the code is malformed, expired, or has already been used.","wrong-password":"The password is invalid or the user does not have a password.","invalid-persistence-type":"The specified persistence type is invalid. It can only be local, session or none.","invalid-phone-number":"The format of the phone number provided is incorrect. Please enter the phone number in a format that can be parsed into E.164 format. E.164 phone numbers are written in the format [+][country code][subscriber number including area code].","invalid-provider-id":"The specified provider ID is invalid.","invalid-recipient-email":"The email corresponding to this action failed to send as the provided recipient email address is invalid.","invalid-sender":"The email template corresponding to this action contains an invalid sender email or name. Please fix by going to the Auth email templates section in the Firebase Console.","invalid-verification-id":"The verification ID used to create the phone auth credential is invalid.","invalid-tenant-id":"The Auth instance's tenant ID is invalid.","login-blocked":"Login blocked by user-provided method: {$originalMessage}","missing-android-pkg-name":"An Android Package Name must be provided if the Android App is required to be installed.","auth-domain-config-required":"Be sure to include authDomain when calling firebase.initializeApp(), by following the instructions in the Firebase console.","missing-app-credential":"The phone verification request is missing an application verifier assertion. A reCAPTCHA response token needs to be provided.","missing-verification-code":"The phone auth credential was created with an empty SMS verification code.","missing-continue-uri":"A continue URL must be provided in the request.","missing-iframe-start":"An internal AuthError has occurred.","missing-ios-bundle-id":"An iOS Bundle ID must be provided if an App Store ID is provided.","missing-or-invalid-nonce":"The request does not contain a valid nonce. This can occur if the SHA-256 hash of the provided raw nonce does not match the hashed nonce in the ID token payload.","missing-password":"A non-empty password must be provided","missing-multi-factor-info":"No second factor identifier is provided.","missing-multi-factor-session":"The request is missing proof of first factor successful sign-in.","missing-phone-number":"To send verification codes, provide a phone number for the recipient.","missing-verification-id":"The phone auth credential was created with an empty verification ID.","app-deleted":"This instance of FirebaseApp has been deleted.","multi-factor-info-not-found":"The user does not have a second factor matching the identifier provided.","multi-factor-auth-required":"Proof of ownership of a second factor is required to complete sign-in.","account-exists-with-different-credential":"An account already exists with the same email address but different sign-in credentials. Sign in using a provider associated with this email address.","network-request-failed":"A network AuthError (such as timeout, interrupted connection or unreachable host) has occurred.","no-auth-event":"An internal AuthError has occurred.","no-such-provider":"User was not linked to an account with the given provider.","null-user":"A null user object was provided as the argument for an operation which requires a non-null user object.","operation-not-allowed":"The given sign-in provider is disabled for this Firebase project. Enable it in the Firebase console, under the sign-in method tab of the Auth section.","operation-not-supported-in-this-environment":'This operation is not supported in the environment this application is running on. "location.protocol" must be http, https or chrome-extension and web storage must be enabled.',"popup-blocked":"Unable to establish a connection with the popup. It may have been blocked by the browser.","popup-closed-by-user":"The popup has been closed by the user before finalizing the operation.","provider-already-linked":"User can only be linked to one identity for the given provider.","quota-exceeded":"The project's quota for this operation has been exceeded.","redirect-cancelled-by-user":"The redirect operation has been cancelled by the user before finalizing.","redirect-operation-pending":"A redirect sign-in operation is already pending.","rejected-credential":"The request contains malformed or mismatching credentials.","second-factor-already-in-use":"The second factor is already enrolled on this account.","maximum-second-factor-count-exceeded":"The maximum allowed number of second factors on a user has been exceeded.","tenant-id-mismatch":"The provided tenant ID does not match the Auth instance's tenant ID",timeout:"The operation has timed out.","user-token-expired":"The user's credential is no longer valid. The user must sign in again.","too-many-requests":"We have blocked all requests from this device due to unusual activity. Try again later.","unauthorized-continue-uri":"The domain of the continue URL is not whitelisted.  Please whitelist the domain in the Firebase console.","unsupported-first-factor":"Enrolling a second factor or signing in with a multi-factor account requires sign-in with a supported first factor.","unsupported-persistence-type":"The current environment does not support the specified persistence type.","unsupported-tenant-operation":"This operation is not supported in a multi-tenant context.","unverified-email":"The operation requires a verified email.","user-cancelled":"The user did not grant your application the permissions it requested.","user-not-found":"There is no user record corresponding to this identifier. The user may have been deleted.","user-disabled":"The user account has been disabled by an administrator.","user-mismatch":"The supplied credentials do not correspond to the previously signed in user.","user-signed-out":"","weak-password":"The password must be 6 characters long or more.","web-storage-unsupported":"This browser is not supported or 3rd party cookies and data may be disabled.","already-initialized":"initializeAuth() has already been called with different options. To avoid this error, call initializeAuth() with the same options as when it was originally called, or call getAuth() to return the already initialized instance.","missing-recaptcha-token":"The reCAPTCHA token is missing when sending request to the backend.","invalid-recaptcha-token":"The reCAPTCHA token is invalid when sending request to the backend.","invalid-recaptcha-action":"The reCAPTCHA action is invalid when sending request to the backend.","recaptcha-not-enabled":"reCAPTCHA Enterprise integration is not enabled for this project.","missing-client-type":"The reCAPTCHA client type is missing when sending request to the backend.","missing-recaptcha-version":"The reCAPTCHA version is missing when sending request to the backend.","invalid-req-type":"Invalid request parameters.","invalid-recaptcha-version":"The reCAPTCHA version is invalid when sending request to the backend."}},et=function Be(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}},xe=new $.LL("auth","Firebase",{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}),Oe=new de.Yd("@firebase/auth");function Ae(_,...h){Oe.logLevel<=de.in.ERROR&&Oe.error(`Auth (${Q.SDK_VERSION}): ${_}`,...h)}function Qe(_,...h){throw it(_,...h)}function ye(_,...h){return it(_,...h)}function Le(_,h,g){const C=Object.assign(Object.assign({},et()),{[h]:g});return new $.LL("auth","Firebase",C).create(h,{appName:_.name})}function nt(_,h,g){if(!(h instanceof g))throw g.name!==h.constructor.name&&Qe(_,"argument-error"),Le(_,"argument-error",`Type of ${h.constructor.name} does not match expected instance.Did you pass a reference from a different Auth SDK?`)}function it(_,...h){if("string"!=typeof _){const g=h[0],C=[...h.slice(1)];return C[0]&&(C[0].appName=_.name),_._errorFactory.create(g,...C)}return xe.create(_,...h)}function Te(_,h,...g){if(!_)throw it(h,...g)}function _t(_){const h="INTERNAL ASSERTION FAILED: "+_;throw Ae(h),new Error(h)}function pn(_,h){_||_t(h)}function Wn(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.href)||""}function _n(){return"http:"===Sr()||"https:"===Sr()}function Sr(){var _;return typeof self<"u"&&(null===(_=self.location)||void 0===_?void 0:_.protocol)||null}class Gr{constructor(h,g){this.shortDelay=h,this.longDelay=g,pn(g>h,"Short delay should be less than long delay!"),this.isMobile=(0,$.uI)()||(0,$.b$)()}get(){return function Qn(){return!(typeof navigator<"u"&&navigator&&"onLine"in navigator&&"boolean"==typeof navigator.onLine&&(_n()||(0,$.ru)()||"connection"in navigator))||navigator.onLine}()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}function Re(_,h){pn(_.emulator,"Emulator should always be set here");const{url:g}=_.emulator;return h?`${g}${h.startsWith("/")?h.slice(1):h}`:g}class Fe{static initialize(h,g,C){this.fetchImpl=h,g&&(this.headersImpl=g),C&&(this.responseImpl=C)}static fetch(){return this.fetchImpl?this.fetchImpl:typeof self<"u"&&"fetch"in self?self.fetch:void _t("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){return this.headersImpl?this.headersImpl:typeof self<"u"&&"Headers"in self?self.Headers:void _t("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){return this.responseImpl?this.responseImpl:typeof self<"u"&&"Response"in self?self.Response:void _t("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}const Ke={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"},He=new Gr(3e4,6e4);function We(_,h){return _.tenantId&&!h.tenantId?Object.assign(Object.assign({},h),{tenantId:_.tenantId}):h}function tt(_,h,g,C){return Dt.apply(this,arguments)}function Dt(){return(Dt=(0,E.Z)(function*(_,h,g,C,k={}){return At(_,k,(0,E.Z)(function*(){let H={},he={};C&&("GET"===h?he=C:H={body:JSON.stringify(C)});const Ie=(0,$.xO)(Object.assign({key:_.config.apiKey},he)).slice(1),ht=yield _._getAdditionalHeaders();return ht["Content-Type"]="application/json",_.languageCode&&(ht["X-Firebase-Locale"]=_.languageCode),Fe.fetch()(sn(_,_.config.apiHost,g,Ie),Object.assign({method:h,headers:ht,referrerPolicy:"no-referrer"},H))}))})).apply(this,arguments)}function At(_,h,g){return sr.apply(this,arguments)}function sr(){return(sr=(0,E.Z)(function*(_,h,g){_._canInitEmulator=!1;const C=Object.assign(Object.assign({},Ke),h);try{const k=new Hn(_),H=yield Promise.race([g(),k.promise]);k.clearNetworkTimeout();const he=yield H.json();if("needConfirmation"in he)throw Jn(_,"account-exists-with-different-credential",he);if(H.ok&&!("errorMessage"in he))return he;{const Ie=H.ok?he.errorMessage:he.error.message,[ht,vt]=Ie.split(" : ");if("FEDERATED_USER_ID_ALREADY_LINKED"===ht)throw Jn(_,"credential-already-in-use",he);if("EMAIL_EXISTS"===ht)throw Jn(_,"email-already-in-use",he);if("USER_DISABLED"===ht)throw Jn(_,"user-disabled",he);const Ft=C[ht]||ht.toLowerCase().replace(/[_\s]+/g,"-");if(vt)throw Le(_,Ft,vt);Qe(_,Ft)}}catch(k){if(k instanceof $.ZR)throw k;Qe(_,"network-request-failed",{message:String(k)})}})).apply(this,arguments)}function Gt(_,h,g,C){return gn.apply(this,arguments)}function gn(){return(gn=(0,E.Z)(function*(_,h,g,C,k={}){const H=yield tt(_,h,g,C,k);return"mfaPendingCredential"in H&&Qe(_,"multi-factor-auth-required",{_serverResponse:H}),H})).apply(this,arguments)}function sn(_,h,g,C){const k=`${h}${g}?${C}`;return _.config.emulator?Re(_.config,k):`${_.config.apiScheme}://${k}`}class Hn{constructor(h){this.auth=h,this.timer=null,this.promise=new Promise((g,C)=>{this.timer=setTimeout(()=>C(ye(this.auth,"network-request-failed")),He.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Jn(_,h,g){const C={appName:_.name};g.email&&(C.email=g.email),g.phoneNumber&&(C.phoneNumber=g.phoneNumber);const k=ye(_,h,C);return k.customData._tokenResponse=g,k}function Sn(){return(Sn=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:delete",h)})).apply(this,arguments)}function Er(){return(Er=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Wr(){return(Wr=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:lookup",h)})).apply(this,arguments)}function Xn(_){if(_)try{const h=new Date(Number(_));if(!isNaN(h.getTime()))return h.toUTCString()}catch{}}function mt(){return(mt=(0,E.Z)(function*(_,h=!1){const g=(0,$.m9)(_),C=yield g.getIdToken(h),k=Ht(C);Te(k&&k.exp&&k.auth_time&&k.iat,g.auth,"internal-error");const H="object"==typeof k.firebase?k.firebase:void 0,he=H?.sign_in_provider;return{claims:k,token:C,authTime:Xn(zt(k.auth_time)),issuedAtTime:Xn(zt(k.iat)),expirationTime:Xn(zt(k.exp)),signInProvider:he||null,signInSecondFactor:H?.sign_in_second_factor||null}})).apply(this,arguments)}function zt(_){return 1e3*Number(_)}function Ht(_){const[h,g,C]=_.split(".");if(void 0===h||void 0===g||void 0===C)return Ae("JWT malformed, contained fewer than 3 sections"),null;try{const k=(0,$.tV)(g);return k?JSON.parse(k):(Ae("Failed to decode base64 JWT payload"),null)}catch(k){return Ae("Caught error parsing JWT payload as JSON",k?.toString()),null}}function fr(_,h){return ei.apply(this,arguments)}function ei(){return(ei=(0,E.Z)(function*(_,h,g=!1){if(g)return h;try{return yield h}catch(C){throw C instanceof $.ZR&&function An({code:_}){return"auth/user-disabled"===_||"auth/user-token-expired"===_}(C)&&_.auth.currentUser===_&&(yield _.auth.signOut()),C}})).apply(this,arguments)}class wr{constructor(h){this.user=h,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,null!==this.timerId&&clearTimeout(this.timerId))}getInterval(h){var g;if(h){const C=this.errorBackoff;return this.errorBackoff=Math.min(2*this.errorBackoff,96e4),C}{this.errorBackoff=3e4;const k=(null!==(g=this.user.stsTokenManager.expirationTime)&&void 0!==g?g:0)-Date.now()-3e5;return Math.max(0,k)}}schedule(h=!1){var g=this;if(!this.isRunning)return;const C=this.getInterval(h);this.timerId=setTimeout((0,E.Z)(function*(){yield g.iteration()}),C)}iteration(){var h=this;return(0,E.Z)(function*(){try{yield h.user.getIdToken(!0)}catch(g){return void("auth/network-request-failed"===g?.code&&h.schedule(!0))}h.schedule()})()}}class Ps{constructor(h,g){this.createdAt=h,this.lastLoginAt=g,this._initializeTime()}_initializeTime(){this.lastSignInTime=Xn(this.lastLoginAt),this.creationTime=Xn(this.createdAt)}_copy(h){this.createdAt=h.createdAt,this.lastLoginAt=h.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}function bn(_){return kr.apply(this,arguments)}function kr(){return kr=(0,E.Z)(function*(_){var h;const g=_.auth,C=yield _.getIdToken(),k=yield fr(_,function fo(_,h){return Wr.apply(this,arguments)}(g,{idToken:C}));Te(k?.users.length,g,"internal-error");const H=k.users[0];_._notifyReloadListener(H);const he=null!==(h=H.providerUserInfo)&&void 0!==h&&h.length?function hs(_){return _.map(h=>{var{providerId:g}=h,C=(0,ae._T)(h,["providerId"]);return{providerId:g,uid:C.rawId||"",displayName:C.displayName||null,email:C.email||null,phoneNumber:C.phoneNumber||null,photoURL:C.photoUrl||null}})}(H.providerUserInfo):[],Ie=function po(_,h){return[..._.filter(C=>!h.some(k=>k.providerId===C.providerId)),...h]}(_.providerData,he),Ft=!!_.isAnonymous&&!(_.email&&H.passwordHash||Ie?.length),jt={uid:H.localId,displayName:H.displayName||null,photoURL:H.photoUrl||null,email:H.email||null,emailVerified:H.emailVerified||!1,phoneNumber:H.phoneNumber||null,tenantId:H.tenantId||null,providerData:Ie,metadata:new Ps(H.createdAt,H.lastLoginAt),isAnonymous:Ft};Object.assign(_,jt)}),kr.apply(this,arguments)}function Ai(){return(Ai=(0,E.Z)(function*(_){const h=(0,$.m9)(_);yield bn(h),yield h.auth._persistUserIfCurrent(h),h.auth._notifyListenersIfCurrent(h)})).apply(this,arguments)}function li(){return(li=(0,E.Z)(function*(_,h){const g=yield At(_,{},(0,E.Z)(function*(){const C=(0,$.xO)({grant_type:"refresh_token",refresh_token:h}).slice(1),{tokenApiHost:k,apiKey:H}=_.config,he=sn(_,k,"/v1/token",`key=${H}`),Ie=yield _._getAdditionalHeaders();return Ie["Content-Type"]="application/x-www-form-urlencoded",Fe.fetch()(he,{method:"POST",headers:Ie,body:C})}));return{accessToken:g.access_token,expiresIn:g.expires_in,refreshToken:g.refresh_token}})).apply(this,arguments)}class Cr{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(h){Te(h.idToken,"internal-error"),Te(typeof h.idToken<"u","internal-error"),Te(typeof h.refreshToken<"u","internal-error");const g="expiresIn"in h&&typeof h.expiresIn<"u"?Number(h.expiresIn):function Un(_){const h=Ht(_);return Te(h,"internal-error"),Te(typeof h.exp<"u","internal-error"),Te(typeof h.iat<"u","internal-error"),Number(h.exp)-Number(h.iat)}(h.idToken);this.updateTokensAndExpiration(h.idToken,h.refreshToken,g)}getToken(h,g=!1){var C=this;return(0,E.Z)(function*(){return Te(!C.accessToken||C.refreshToken,h,"user-token-expired"),g||!C.accessToken||C.isExpired?C.refreshToken?(yield C.refresh(h,C.refreshToken),C.accessToken):null:C.accessToken})()}clearRefreshToken(){this.refreshToken=null}refresh(h,g){var C=this;return(0,E.Z)(function*(){const{accessToken:k,refreshToken:H,expiresIn:he}=yield function qi(_,h){return li.apply(this,arguments)}(h,g);C.updateTokensAndExpiration(k,H,Number(he))})()}updateTokensAndExpiration(h,g,C){this.refreshToken=g||null,this.accessToken=h||null,this.expirationTime=Date.now()+1e3*C}static fromJSON(h,g){const{refreshToken:C,accessToken:k,expirationTime:H}=g,he=new Cr;return C&&(Te("string"==typeof C,"internal-error",{appName:h}),he.refreshToken=C),k&&(Te("string"==typeof k,"internal-error",{appName:h}),he.accessToken=k),H&&(Te("number"==typeof H,"internal-error",{appName:h}),he.expirationTime=H),he}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(h){this.accessToken=h.accessToken,this.refreshToken=h.refreshToken,this.expirationTime=h.expirationTime}_clone(){return Object.assign(new Cr,this.toJSON())}_performRefresh(){return _t("not implemented")}}function Mr(_,h){Te("string"==typeof _||typeof _>"u","internal-error",{appName:h})}class Gn{constructor(h){var{uid:g,auth:C,stsTokenManager:k}=h,H=(0,ae._T)(h,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new wr(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=g,this.auth=C,this.stsTokenManager=k,this.accessToken=k.accessToken,this.displayName=H.displayName||null,this.email=H.email||null,this.emailVerified=H.emailVerified||!1,this.phoneNumber=H.phoneNumber||null,this.photoURL=H.photoURL||null,this.isAnonymous=H.isAnonymous||!1,this.tenantId=H.tenantId||null,this.providerData=H.providerData?[...H.providerData]:[],this.metadata=new Ps(H.createdAt||void 0,H.lastLoginAt||void 0)}getIdToken(h){var g=this;return(0,E.Z)(function*(){const C=yield fr(g,g.stsTokenManager.getToken(g.auth,h));return Te(C,g.auth,"internal-error"),g.accessToken!==C&&(g.accessToken=C,yield g.auth._persistUserIfCurrent(g),g.auth._notifyListenersIfCurrent(g)),C})()}getIdTokenResult(h){return function Ar(_){return mt.apply(this,arguments)}(this,h)}reload(){return function xt(_){return Ai.apply(this,arguments)}(this)}_assign(h){this!==h&&(Te(this.uid===h.uid,this.auth,"internal-error"),this.displayName=h.displayName,this.photoURL=h.photoURL,this.email=h.email,this.emailVerified=h.emailVerified,this.phoneNumber=h.phoneNumber,this.isAnonymous=h.isAnonymous,this.tenantId=h.tenantId,this.providerData=h.providerData.map(g=>Object.assign({},g)),this.metadata._copy(h.metadata),this.stsTokenManager._assign(h.stsTokenManager))}_clone(h){const g=new Gn(Object.assign(Object.assign({},this),{auth:h,stsTokenManager:this.stsTokenManager._clone()}));return g.metadata._copy(this.metadata),g}_onReload(h){Te(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=h,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(h){this.reloadListener?this.reloadListener(h):this.reloadUserInfo=h}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}_updateTokensIfNecessary(h,g=!1){var C=this;return(0,E.Z)(function*(){let k=!1;h.idToken&&h.idToken!==C.stsTokenManager.accessToken&&(C.stsTokenManager.updateFromServerResponse(h),k=!0),g&&(yield bn(C)),yield C.auth._persistUserIfCurrent(C),k&&C.auth._notifyListenersIfCurrent(C)})()}delete(){var h=this;return(0,E.Z)(function*(){const g=yield h.getIdToken();return yield fr(h,function Lt(_,h){return Sn.apply(this,arguments)}(h.auth,{idToken:g})),h.stsTokenManager.clearRefreshToken(),h.auth.signOut()})()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(h=>Object.assign({},h)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(h,g){var C,k,H,he,Ie,ht,vt,Ft;const jt=null!==(C=g.displayName)&&void 0!==C?C:void 0,Jr=null!==(k=g.email)&&void 0!==k?k:void 0,Ha=null!==(H=g.phoneNumber)&&void 0!==H?H:void 0,ah=null!==(he=g.photoURL)&&void 0!==he?he:void 0,Da=null!==(Ie=g.tenantId)&&void 0!==Ie?Ie:void 0,Ql=null!==(ht=g._redirectEventId)&&void 0!==ht?ht:void 0,_f=null!==(vt=g.createdAt)&&void 0!==vt?vt:void 0,ug=null!==(Ft=g.lastLoginAt)&&void 0!==Ft?Ft:void 0,{uid:il,emailVerified:Jl,isAnonymous:$s,providerData:vc,stsTokenManager:uh}=g;Te(il&&uh,h,"internal-error");const Xl=Cr.fromJSON(this.name,uh);Te("string"==typeof il,h,"internal-error"),Mr(jt,h.name),Mr(Jr,h.name),Te("boolean"==typeof Jl,h,"internal-error"),Te("boolean"==typeof $s,h,"internal-error"),Mr(Ha,h.name),Mr(ah,h.name),Mr(Da,h.name),Mr(Ql,h.name),Mr(_f,h.name),Mr(ug,h.name);const ch=new Gn({uid:il,auth:h,email:Jr,emailVerified:Jl,displayName:jt,isAnonymous:$s,photoURL:ah,phoneNumber:Ha,tenantId:Da,stsTokenManager:Xl,createdAt:_f,lastLoginAt:ug});return vc&&Array.isArray(vc)&&(ch.providerData=vc.map(lh=>Object.assign({},lh))),Ql&&(ch._redirectEventId=Ql),ch}static _fromIdTokenResponse(h,g,C=!1){return(0,E.Z)(function*(){const k=new Cr;k.updateFromServerResponse(g);const H=new Gn({uid:g.localId,auth:h,stsTokenManager:k,isAnonymous:C});return yield bn(H),H})()}}const Li=new Map;function Nn(_){pn(_ instanceof Function,"Expected a class definition");let h=Li.get(_);return h?(pn(h instanceof _,"Instance stored in cache mismatched with class"),h):(h=new _,Li.set(_,h),h)}const vn=(()=>{class _{constructor(){this.type="NONE",this.storage={}}_isAvailable(){return(0,E.Z)(function*(){return!0})()}_set(g,C){var k=this;return(0,E.Z)(function*(){k.storage[g]=C})()}_get(g){var C=this;return(0,E.Z)(function*(){const k=C.storage[g];return void 0===k?null:k})()}_remove(g){var C=this;return(0,E.Z)(function*(){delete C.storage[g]})()}_addListener(g,C){}_removeListener(g,C){}}return _.type="NONE",_})();function ue(_,h,g){return`firebase:${_}:${h}:${g}`}class G{constructor(h,g,C){this.persistence=h,this.auth=g,this.userKey=C;const{config:k,name:H}=this.auth;this.fullUserKey=ue(this.userKey,k.apiKey,H),this.fullPersistenceKey=ue("persistence",k.apiKey,H),this.boundEventHandler=g._onStorageEvent.bind(g),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(h){return this.persistence._set(this.fullUserKey,h.toJSON())}getCurrentUser(){var h=this;return(0,E.Z)(function*(){const g=yield h.persistence._get(h.fullUserKey);return g?Gn._fromJSON(h.auth,g):null})()}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}setPersistence(h){var g=this;return(0,E.Z)(function*(){if(g.persistence===h)return;const C=yield g.getCurrentUser();return yield g.removeCurrentUser(),g.persistence=h,C?g.setCurrentUser(C):void 0})()}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static create(h,g,C="authUser"){return(0,E.Z)(function*(){if(!g.length)return new G(Nn(vn),h,C);const k=(yield Promise.all(g.map(function(){var vt=(0,E.Z)(function*(Ft){if(yield Ft._isAvailable())return Ft});return function(Ft){return vt.apply(this,arguments)}}()))).filter(vt=>vt);let H=k[0]||Nn(vn);const he=ue(C,h.config.apiKey,h.name);let Ie=null;for(const vt of g)try{const Ft=yield vt._get(he);if(Ft){const jt=Gn._fromJSON(h,Ft);vt!==H&&(Ie=jt),H=vt;break}}catch{}const ht=k.filter(vt=>vt._shouldAllowMigration);return H._shouldAllowMigration&&ht.length?(H=ht[0],Ie&&(yield H._set(he,Ie.toJSON())),yield Promise.all(g.map(function(){var vt=(0,E.Z)(function*(Ft){if(Ft!==H)try{yield Ft._remove(he)}catch{}});return function(Ft){return vt.apply(this,arguments)}}())),new G(H,h,C)):new G(H,h,C)})()}}function z(_){const h=_.toLowerCase();if(h.includes("opera/")||h.includes("opr/")||h.includes("opios/"))return"Opera";if(Xe(h))return"IEMobile";if(h.includes("msie")||h.includes("trident/"))return"IE";if(h.includes("edge/"))return"Edge";if(Z(h))return"Firefox";if(h.includes("silk/"))return"Silk";if(Yt(h))return"Blackberry";if(Wt(h))return"Webos";if(ne(h))return"Safari";if((h.includes("chrome/")||be(h))&&!h.includes("edge/"))return"Chrome";if(pt(h))return"Android";{const C=_.match(/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/);if(2===C?.length)return C[1]}return"Other"}function Z(_=(0,$.z$)()){return/firefox\//i.test(_)}function ne(_=(0,$.z$)()){const h=_.toLowerCase();return h.includes("safari/")&&!h.includes("chrome/")&&!h.includes("crios/")&&!h.includes("android")}function be(_=(0,$.z$)()){return/crios\//i.test(_)}function Xe(_=(0,$.z$)()){return/iemobile/i.test(_)}function pt(_=(0,$.z$)()){return/android/i.test(_)}function Yt(_=(0,$.z$)()){return/blackberry/i.test(_)}function Wt(_=(0,$.z$)()){return/webos/i.test(_)}function Rt(_=(0,$.z$)()){return/iphone|ipad|ipod/i.test(_)||/macintosh/i.test(_)&&/mobile/i.test(_)}function Es(_=(0,$.z$)()){return Rt(_)||pt(_)||Wt(_)||Yt(_)||/windows phone/i.test(_)||Xe(_)}function Ue(_,h=[]){let g;switch(_){case"Browser":g=z((0,$.z$)());break;case"Worker":g=`${z((0,$.z$)())}-${_}`;break;default:g=_}const C=h.length?h.join(","):"FirebaseCore-web";return`${g}/JsCore/${Q.SDK_VERSION}/${C}`}function rt(){return(rt=(0,E.Z)(function*(_){return(yield tt(_,"GET","/v1/recaptchaParams")).recaptchaSiteKey||""})).apply(this,arguments)}function Pt(_,h){return Qt.apply(this,arguments)}function Qt(){return(Qt=(0,E.Z)(function*(_,h){return tt(_,"GET","/v2/recaptchaConfig",We(_,h))})).apply(this,arguments)}function ln(_){return void 0!==_&&void 0!==_.getResponse}function mn(_){return void 0!==_&&void 0!==_.enterprise}class On{constructor(h){if(this.siteKey="",this.emailPasswordEnabled=!1,void 0===h.recaptchaKey)throw new Error("recaptchaKey undefined");this.siteKey=h.recaptchaKey.split("/")[3],this.emailPasswordEnabled=h.recaptchaEnforcementState.some(g=>"EMAIL_PASSWORD_PROVIDER"===g.provider&&"OFF"!==g.enforcementState)}}function ws(_){return new Promise((h,g)=>{const C=document.createElement("script");C.setAttribute("src",_),C.onload=h,C.onerror=k=>{const H=ye("internal-error");H.customData=k,g(H)},C.type="text/javascript",C.charset="UTF-8",function pr(){var _,h;return null!==(h=null===(_=document.getElementsByTagName("head"))||void 0===_?void 0:_[0])&&void 0!==h?h:document}().appendChild(C)})}function qs(_){return`__${_}${Math.floor(1e6*Math.random())}`}class Ja{constructor(h){this.type="recaptcha-enterprise",this.auth=$n(h)}verify(h="verify",g=!1){var C=this;return(0,E.Z)(function*(){function H(){return H=(0,E.Z)(function*(Ie){if(!g){if(null==Ie.tenantId&&null!=Ie._agentRecaptchaConfig)return Ie._agentRecaptchaConfig.siteKey;if(null!=Ie.tenantId&&void 0!==Ie._tenantRecaptchaConfigs[Ie.tenantId])return Ie._tenantRecaptchaConfigs[Ie.tenantId].siteKey}return new Promise(function(){var ht=(0,E.Z)(function*(vt,Ft){Pt(Ie,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(jt=>{if(void 0!==jt.recaptchaKey){const Jr=new On(jt);return null==Ie.tenantId?Ie._agentRecaptchaConfig=Jr:Ie._tenantRecaptchaConfigs[Ie.tenantId]=Jr,vt(Jr.siteKey)}Ft(new Error("recaptcha Enterprise site key undefined"))}).catch(jt=>{Ft(jt)})});return function(vt,Ft){return ht.apply(this,arguments)}}())}),H.apply(this,arguments)}function he(Ie,ht,vt){const Ft=window.grecaptcha;mn(Ft)?Ft.enterprise.ready(()=>{Ft.enterprise.execute(Ie,{action:h}).then(jt=>{ht(jt)}).catch(()=>{ht("NO_RECAPTCHA")})}):vt(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((Ie,ht)=>{(function k(Ie){return H.apply(this,arguments)})(C.auth).then(vt=>{if(!g&&mn(window.grecaptcha))he(vt,Ie,ht);else{if(typeof window>"u")return void ht(new Error("RecaptchaVerifier is only supported in browser"));ws("https://www.google.com/recaptcha/enterprise.js?render="+vt).then(()=>{he(vt,Ie,ht)}).catch(Ft=>{ht(Ft)})}}).catch(vt=>{ht(vt)})})})()}}function Zi(_,h,g){return Ao.apply(this,arguments)}function Ao(){return(Ao=(0,E.Z)(function*(_,h,g,C=!1){const k=new Ja(_);let H;try{H=yield k.verify(g)}catch{H=yield k.verify(g,!0)}const he=Object.assign({},h);return Object.assign(he,C?{captchaResp:H}:{captchaResponse:H}),Object.assign(he,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(he,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),he})).apply(this,arguments)}class ks{constructor(h){this.auth=h,this.queue=[]}pushCallback(h,g){const C=H=>new Promise((he,Ie)=>{try{he(h(H))}catch(ht){Ie(ht)}});C.onAbort=g,this.queue.push(C);const k=this.queue.length-1;return()=>{this.queue[k]=()=>Promise.resolve()}}runMiddleware(h){var g=this;return(0,E.Z)(function*(){if(g.auth.currentUser===h)return;const C=[];try{for(const k of g.queue)yield k(h),k.onAbort&&C.push(k.onAbort)}catch(k){C.reverse();for(const H of C)try{H()}catch{}throw g.auth._errorFactory.create("login-blocked",{originalMessage:k?.message})}})()}}class Xa{constructor(h,g,C,k){this.app=h,this.heartbeatServiceProvider=g,this.appCheckServiceProvider=C,this.config=k,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Mo(this),this.idTokenSubscription=new Mo(this),this.beforeStateQueue=new ks(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=xe,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=h.name,this.clientVersion=k.sdkClientVersion}_initializeWithPersistence(h,g){var C=this;return g&&(this._popupRedirectResolver=Nn(g)),this._initializationPromise=this.queue((0,E.Z)(function*(){var k,H;if(!C._deleted&&(C.persistenceManager=yield G.create(C,h),!C._deleted)){if(null!==(k=C._popupRedirectResolver)&&void 0!==k&&k._shouldInitProactively)try{yield C._popupRedirectResolver._initialize(C)}catch{}yield C.initializeCurrentUser(g),C.lastNotifiedUid=(null===(H=C.currentUser)||void 0===H?void 0:H.uid)||null,!C._deleted&&(C._isInitialized=!0)}})),this._initializationPromise}_onStorageEvent(){var h=this;return(0,E.Z)(function*(){if(h._deleted)return;const g=yield h.assertedPersistence.getCurrentUser();if(h.currentUser||g){if(h.currentUser&&g&&h.currentUser.uid===g.uid)return h._currentUser._assign(g),void(yield h.currentUser.getIdToken());yield h._updateCurrentUser(g,!0)}})()}initializeCurrentUser(h){var g=this;return(0,E.Z)(function*(){var C;const k=yield g.assertedPersistence.getCurrentUser();let H=k,he=!1;if(h&&g.config.authDomain){yield g.getOrInitRedirectPersistenceManager();const Ie=null===(C=g.redirectUser)||void 0===C?void 0:C._redirectEventId,ht=H?._redirectEventId,vt=yield g.tryRedirectSignIn(h);(!Ie||Ie===ht)&&vt?.user&&(H=vt.user,he=!0)}if(!H)return g.directlySetCurrentUser(null);if(!H._redirectEventId){if(he)try{yield g.beforeStateQueue.runMiddleware(H)}catch(Ie){H=k,g._popupRedirectResolver._overrideRedirectResult(g,()=>Promise.reject(Ie))}return H?g.reloadAndSetCurrentUserOrClear(H):g.directlySetCurrentUser(null)}return Te(g._popupRedirectResolver,g,"argument-error"),yield g.getOrInitRedirectPersistenceManager(),g.redirectUser&&g.redirectUser._redirectEventId===H._redirectEventId?g.directlySetCurrentUser(H):g.reloadAndSetCurrentUserOrClear(H)})()}tryRedirectSignIn(h){var g=this;return(0,E.Z)(function*(){let C=null;try{C=yield g._popupRedirectResolver._completeRedirectFn(g,h,!0)}catch{yield g._setRedirectUser(null)}return C})()}reloadAndSetCurrentUserOrClear(h){var g=this;return(0,E.Z)(function*(){try{yield bn(h)}catch(C){if("auth/network-request-failed"!==C?.code)return g.directlySetCurrentUser(null)}return g.directlySetCurrentUser(h)})()}useDeviceLanguage(){this.languageCode=function Os(){if(typeof navigator>"u")return null;const _=navigator;return _.languages&&_.languages[0]||_.language||null}()}_delete(){var h=this;return(0,E.Z)(function*(){h._deleted=!0})()}updateCurrentUser(h){var g=this;return(0,E.Z)(function*(){const C=h?(0,$.m9)(h):null;return C&&Te(C.auth.config.apiKey===g.config.apiKey,g,"invalid-user-token"),g._updateCurrentUser(C&&C._clone(g))})()}_updateCurrentUser(h,g=!1){var C=this;return(0,E.Z)(function*(){if(!C._deleted)return h&&Te(C.tenantId===h.tenantId,C,"tenant-id-mismatch"),g||(yield C.beforeStateQueue.runMiddleware(h)),C.queue((0,E.Z)(function*(){yield C.directlySetCurrentUser(h),C.notifyAuthListeners()}))})()}signOut(){var h=this;return(0,E.Z)(function*(){return yield h.beforeStateQueue.runMiddleware(null),(h.redirectPersistenceManager||h._popupRedirectResolver)&&(yield h._setRedirectUser(null)),h._updateCurrentUser(null,!0)})()}setPersistence(h){var g=this;return this.queue((0,E.Z)(function*(){yield g.assertedPersistence.setPersistence(Nn(h))}))}initializeRecaptchaConfig(){var h=this;return(0,E.Z)(function*(){const g=yield Pt(h,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}),C=new On(g);null==h.tenantId?h._agentRecaptchaConfig=C:h._tenantRecaptchaConfigs[h.tenantId]=C,C.emailPasswordEnabled&&new Ja(h).verify()})()}_getRecaptchaConfig(){return null==this.tenantId?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(h){this._errorFactory=new $.LL("auth","Firebase",h())}onAuthStateChanged(h,g,C){return this.registerStateListener(this.authStateSubscription,h,g,C)}beforeAuthStateChanged(h,g){return this.beforeStateQueue.pushCallback(h,g)}onIdTokenChanged(h,g,C){return this.registerStateListener(this.idTokenSubscription,h,g,C)}toJSON(){var h;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:null===(h=this._currentUser)||void 0===h?void 0:h.toJSON()}}_setRedirectUser(h,g){var C=this;return(0,E.Z)(function*(){const k=yield C.getOrInitRedirectPersistenceManager(g);return null===h?k.removeCurrentUser():k.setCurrentUser(h)})()}getOrInitRedirectPersistenceManager(h){var g=this;return(0,E.Z)(function*(){if(!g.redirectPersistenceManager){const C=h&&Nn(h)||g._popupRedirectResolver;Te(C,g,"argument-error"),g.redirectPersistenceManager=yield G.create(g,[Nn(C._redirectPersistence)],"redirectUser"),g.redirectUser=yield g.redirectPersistenceManager.getCurrentUser()}return g.redirectPersistenceManager})()}_redirectUserForId(h){var g=this;return(0,E.Z)(function*(){var C,k;return g._isInitialized&&(yield g.queue((0,E.Z)(function*(){}))),(null===(C=g._currentUser)||void 0===C?void 0:C._redirectEventId)===h?g._currentUser:(null===(k=g.redirectUser)||void 0===k?void 0:k._redirectEventId)===h?g.redirectUser:null})()}_persistUserIfCurrent(h){var g=this;return(0,E.Z)(function*(){if(h===g.currentUser)return g.queue((0,E.Z)(function*(){return g.directlySetCurrentUser(h)}))})()}_notifyListenersIfCurrent(h){h===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var h,g;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const C=null!==(g=null===(h=this.currentUser)||void 0===h?void 0:h.uid)&&void 0!==g?g:null;this.lastNotifiedUid!==C&&(this.lastNotifiedUid=C,this.authStateSubscription.next(this.currentUser))}registerStateListener(h,g,C,k){if(this._deleted)return()=>{};const H="function"==typeof g?g:g.next.bind(g),he=this._isInitialized?Promise.resolve():this._initializationPromise;return Te(he,this,"internal-error"),he.then(()=>H(this.currentUser)),"function"==typeof g?h.addObserver(g,C,k):h.addObserver(g)}directlySetCurrentUser(h){var g=this;return(0,E.Z)(function*(){g.currentUser&&g.currentUser!==h&&g._currentUser._stopProactiveRefresh(),h&&g.isProactiveRefreshEnabled&&h._startProactiveRefresh(),g.currentUser=h,h?yield g.assertedPersistence.setCurrentUser(h):yield g.assertedPersistence.removeCurrentUser()})()}queue(h){return this.operations=this.operations.then(h,h),this.operations}get assertedPersistence(){return Te(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(h){!h||this.frameworks.includes(h)||(this.frameworks.push(h),this.frameworks.sort(),this.clientVersion=Ue(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}_getAdditionalHeaders(){var h=this;return(0,E.Z)(function*(){var g;const C={"X-Client-Version":h.clientVersion};h.app.options.appId&&(C["X-Firebase-gmpid"]=h.app.options.appId);const k=yield null===(g=h.heartbeatServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getHeartbeatsHeader();k&&(C["X-Firebase-Client"]=k);const H=yield h._getAppCheckToken();return H&&(C["X-Firebase-AppCheck"]=H),C})()}_getAppCheckToken(){var h=this;return(0,E.Z)(function*(){var g;const C=yield null===(g=h.appCheckServiceProvider.getImmediate({optional:!0}))||void 0===g?void 0:g.getToken();return C?.error&&function yt(_,...h){Oe.logLevel<=de.in.WARN&&Oe.warn(`Auth (${Q.SDK_VERSION}): ${_}`,...h)}(`Error while retrieving App Check token: ${C.error}`),C?.token})()}}function $n(_){return(0,$.m9)(_)}class Mo{constructor(h){this.auth=h,this.observer=null,this.addObserver=(0,$.ne)(g=>this.observer=g)}get next(){return Te(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}function hi(_){const h=_.indexOf(":");return h<0?"":_.substr(0,h+1)}function Ki(_){if(!_)return null;const h=Number(_);return isNaN(h)?null:h}class xi{constructor(h,g){this.providerId=h,this.signInMethod=g}toJSON(){return _t("not implemented")}_getIdTokenResponse(h){return _t("not implemented")}_linkToIdToken(h,g){return _t("not implemented")}_getReauthenticationResolver(h){return _t("not implemented")}}function ua(_,h){return xo.apply(this,arguments)}function xo(){return(xo=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:resetPassword",We(_,h))})).apply(this,arguments)}function tu(_,h){return Ma.apply(this,arguments)}function Ma(){return(Ma=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function ti(){return(ti=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:update",We(_,h))})).apply(this,arguments)}function qn(_,h){return go.apply(this,arguments)}function go(){return(go=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithPassword",We(_,h))})).apply(this,arguments)}function fi(_,h){return ca.apply(this,arguments)}function ca(){return(ca=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:sendOobCode",We(_,h))})).apply(this,arguments)}function Ro(){return(Ro=(0,E.Z)(function*(_,h){return fi(_,h)})).apply(this,arguments)}function mo(_,h){return xa.apply(this,arguments)}function xa(){return(xa=(0,E.Z)(function*(_,h){return fi(_,h)})).apply(this,arguments)}function Rr(_,h){return Et.apply(this,arguments)}function Et(){return(Et=(0,E.Z)(function*(_,h){return fi(_,h)})).apply(this,arguments)}function er(){return(er=(0,E.Z)(function*(_,h){return fi(_,h)})).apply(this,arguments)}function Ur(){return(Ur=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithEmailLink",We(_,h))})).apply(this,arguments)}function Fs(){return(Fs=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithEmailLink",We(_,h))})).apply(this,arguments)}class Zn extends xi{constructor(h,g,C,k=null){super("password",C),this._email=h,this._password=g,this._tenantId=k}static _fromEmailAndPassword(h,g){return new Zn(h,g,"password")}static _fromEmailAndCode(h,g,C=null){return new Zn(h,g,"emailLink",C)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h;if(g?.email&&g?.password){if("password"===g.signInMethod)return this._fromEmailAndPassword(g.email,g.password);if("emailLink"===g.signInMethod)return this._fromEmailAndCode(g.email,g.password,g.tenantId)}return null}_getIdTokenResponse(h){var g=this;return(0,E.Z)(function*(){var C;switch(g.signInMethod){case"password":const k={returnSecureToken:!0,email:g._email,password:g._password,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=h._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const H=yield Zi(h,k,"signInWithPassword");return qn(h,H)}return qn(h,k).catch(function(){var H=(0,E.Z)(function*(he){if("auth/missing-recaptcha-token"===he.code){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const Ie=yield Zi(h,k,"signInWithPassword");return qn(h,Ie)}return Promise.reject(he)});return function(he){return H.apply(this,arguments)}}());case"emailLink":return function Nr(_,h){return Ur.apply(this,arguments)}(h,{email:g._email,oobCode:g._password});default:Qe(h,"internal-error")}})()}_linkToIdToken(h,g){var C=this;return(0,E.Z)(function*(){switch(C.signInMethod){case"password":return tu(h,{idToken:g,returnSecureToken:!0,email:C._email,password:C._password});case"emailLink":return function Or(_,h){return Fs.apply(this,arguments)}(h,{idToken:g,email:C._email,oobCode:C._password});default:Qe(h,"internal-error")}})()}_getReauthenticationResolver(h){return this._getIdTokenResponse(h)}}function Vr(_,h){return pi.apply(this,arguments)}function pi(){return(pi=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithIdp",We(_,h))})).apply(this,arguments)}class gi extends xi{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(h){const g=new gi(h.providerId,h.signInMethod);return h.idToken||h.accessToken?(h.idToken&&(g.idToken=h.idToken),h.accessToken&&(g.accessToken=h.accessToken),h.nonce&&!h.pendingToken&&(g.nonce=h.nonce),h.pendingToken&&(g.pendingToken=h.pendingToken)):h.oauthToken&&h.oauthTokenSecret?(g.accessToken=h.oauthToken,g.secret=h.oauthTokenSecret):Qe("argument-error"),g}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:C,signInMethod:k}=g,H=(0,ae._T)(g,["providerId","signInMethod"]);if(!C||!k)return null;const he=new gi(C,k);return he.idToken=H.idToken||void 0,he.accessToken=H.accessToken||void 0,he.secret=H.secret,he.nonce=H.nonce,he.pendingToken=H.pendingToken||null,he}_getIdTokenResponse(h){return Vr(h,this.buildRequest())}_linkToIdToken(h,g){const C=this.buildRequest();return C.idToken=g,Vr(h,C)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Vr(h,g)}buildRequest(){const h={requestUri:"http://localhost",returnSecureToken:!0};if(this.pendingToken)h.pendingToken=this.pendingToken;else{const g={};this.idToken&&(g.id_token=this.idToken),this.accessToken&&(g.access_token=this.accessToken),this.secret&&(g.oauth_token_secret=this.secret),g.providerId=this.providerId,this.nonce&&!this.pendingToken&&(g.nonce=this.nonce),h.postBody=(0,$.xO)(g)}return h}}function Vi(){return(Vi=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:sendVerificationCode",We(_,h))})).apply(this,arguments)}function Cs(){return(Cs=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithPhoneNumber",We(_,h))})).apply(this,arguments)}function oi(){return(oi=(0,E.Z)(function*(_,h){const g=yield Gt(_,"POST","/v1/accounts:signInWithPhoneNumber",We(_,h));if(g.temporaryProof)throw Jn(_,"account-exists-with-different-credential",g);return g})).apply(this,arguments)}const Ls={USER_NOT_FOUND:"user-not-found"};function Fr(){return(Fr=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithPhoneNumber",We(_,Object.assign(Object.assign({},h),{operation:"REAUTH"})),Ls)})).apply(this,arguments)}class Ir extends xi{constructor(h){super("phone","phone"),this.params=h}static _fromVerification(h,g){return new Ir({verificationId:h,verificationCode:g})}static _fromTokenResponse(h,g){return new Ir({phoneNumber:h,temporaryProof:g})}_getIdTokenResponse(h){return function hr(_,h){return Cs.apply(this,arguments)}(h,this._makeVerificationRequest())}_linkToIdToken(h,g){return function yo(_,h){return oi.apply(this,arguments)}(h,Object.assign({idToken:g},this._makeVerificationRequest()))}_getReauthenticationResolver(h){return function da(_,h){return Fr.apply(this,arguments)}(h,this._makeVerificationRequest())}_makeVerificationRequest(){const{temporaryProof:h,phoneNumber:g,verificationId:C,verificationCode:k}=this.params;return h&&g?{temporaryProof:h,phoneNumber:g}:{sessionInfo:C,code:k}}toJSON(){const h={providerId:this.providerId};return this.params.phoneNumber&&(h.phoneNumber=this.params.phoneNumber),this.params.temporaryProof&&(h.temporaryProof=this.params.temporaryProof),this.params.verificationCode&&(h.verificationCode=this.params.verificationCode),this.params.verificationId&&(h.verificationId=this.params.verificationId),h}static fromJSON(h){"string"==typeof h&&(h=JSON.parse(h));const{verificationId:g,verificationCode:C,phoneNumber:k,temporaryProof:H}=h;return C||g||k||H?new Ir({verificationId:g,verificationCode:C,phoneNumber:k,temporaryProof:H}):null}}class fn{constructor(h){var g,C,k,H,he,Ie;const ht=(0,$.zd)((0,$.pd)(h)),vt=null!==(g=ht.apiKey)&&void 0!==g?g:null,Ft=null!==(C=ht.oobCode)&&void 0!==C?C:null,jt=function ha(_){switch(_){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}(null!==(k=ht.mode)&&void 0!==k?k:null);Te(vt&&Ft&&jt,"argument-error"),this.apiKey=vt,this.operation=jt,this.code=Ft,this.continueUrl=null!==(H=ht.continueUrl)&&void 0!==H?H:null,this.languageCode=null!==(he=ht.languageCode)&&void 0!==he?he:null,this.tenantId=null!==(Ie=ht.tenantId)&&void 0!==Ie?Ie:null}static parseLink(h){const g=function Ks(_){const h=(0,$.zd)((0,$.pd)(_)).link,g=h?(0,$.zd)((0,$.pd)(h)).deep_link_id:null,C=(0,$.zd)((0,$.pd)(_)).deep_link_id;return(C?(0,$.zd)((0,$.pd)(C)).link:null)||C||g||h||_}(h);try{return new fn(g)}catch{return null}}}let Ys=(()=>{class _{constructor(){this.providerId=_.PROVIDER_ID}static credential(g,C){return Zn._fromEmailAndPassword(g,C)}static credentialWithLink(g,C){const k=fn.parseLink(C);return Te(k,"argument-error"),Zn._fromEmailAndCode(g,k.code,k.tenantId)}}return _.PROVIDER_ID="password",_.EMAIL_PASSWORD_SIGN_IN_METHOD="password",_.EMAIL_LINK_SIGN_IN_METHOD="emailLink",_})();class Bi{constructor(h){this.providerId=h,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(h){this.defaultLanguageCode=h}setCustomParameters(h){return this.customParameters=h,this}getCustomParameters(){return this.customParameters}}class mi extends Bi{constructor(){super(...arguments),this.scopes=[]}addScope(h){return this.scopes.includes(h)||this.scopes.push(h),this}getScopes(){return[...this.scopes]}}class Ri extends mi{static credentialFromJSON(h){const g="string"==typeof h?JSON.parse(h):h;return Te("providerId"in g&&"signInMethod"in g,"argument-error"),gi._fromParams(g)}credential(h){return this._credential(Object.assign(Object.assign({},h),{nonce:h.rawNonce}))}_credential(h){return Te(h.idToken||h.accessToken,"argument-error"),gi._fromParams(Object.assign(Object.assign({},h),{providerId:this.providerId,signInMethod:this.providerId}))}static credentialFromResult(h){return Ri.oauthCredentialFromTaggedObject(h)}static credentialFromError(h){return Ri.oauthCredentialFromTaggedObject(h.customData||{})}static oauthCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{oauthIdToken:g,oauthAccessToken:C,oauthTokenSecret:k,pendingToken:H,nonce:he,providerId:Ie}=h;if(!C&&!k&&!g&&!H||!Ie)return null;try{return new Ri(Ie)._credential({idToken:g,accessToken:C,nonce:he,pendingToken:H})}catch{return null}}}let fs=(()=>{class _ extends mi{constructor(){super("facebook.com")}static credential(g){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.FACEBOOK_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.FACEBOOK_SIGN_IN_METHOD="facebook.com",_.PROVIDER_ID="facebook.com",_})(),Is=(()=>{class _ extends mi{constructor(){super("google.com"),this.addScope("profile")}static credential(g,C){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GOOGLE_SIGN_IN_METHOD,idToken:g,accessToken:C})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthIdToken:C,oauthAccessToken:k}=g;if(!C&&!k)return null;try{return _.credential(C,k)}catch{return null}}}return _.GOOGLE_SIGN_IN_METHOD="google.com",_.PROVIDER_ID="google.com",_})(),Br=(()=>{class _ extends mi{constructor(){super("github.com")}static credential(g){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.GITHUB_SIGN_IN_METHOD,accessToken:g})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g||!("oauthAccessToken"in g)||!g.oauthAccessToken)return null;try{return _.credential(g.oauthAccessToken)}catch{return null}}}return _.GITHUB_SIGN_IN_METHOD="github.com",_.PROVIDER_ID="github.com",_})();class or extends xi{constructor(h,g){super(h,h),this.pendingToken=g}_getIdTokenResponse(h){return Vr(h,this.buildRequest())}_linkToIdToken(h,g){const C=this.buildRequest();return C.idToken=g,Vr(h,C)}_getReauthenticationResolver(h){const g=this.buildRequest();return g.autoCreate=!1,Vr(h,g)}toJSON(){return{signInMethod:this.signInMethod,providerId:this.providerId,pendingToken:this.pendingToken}}static fromJSON(h){const g="string"==typeof h?JSON.parse(h):h,{providerId:C,signInMethod:k,pendingToken:H}=g;return C&&k&&H&&C===k?new or(C,H):null}static _create(h,g){return new or(h,g)}buildRequest(){return{requestUri:"http://localhost",returnSecureToken:!0,pendingToken:this.pendingToken}}}class _o extends Bi{constructor(h){Te(h.startsWith("saml."),"argument-error"),super(h)}static credentialFromResult(h){return _o.samlCredentialFromTaggedObject(h)}static credentialFromError(h){return _o.samlCredentialFromTaggedObject(h.customData||{})}static credentialFromJSON(h){const g=or.fromJSON(h);return Te(g,"argument-error"),g}static samlCredentialFromTaggedObject({_tokenResponse:h}){if(!h)return null;const{pendingToken:g,providerId:C}=h;if(!g||!C)return null;try{return or._create(C,g)}catch{return null}}}let Us=(()=>{class _ extends mi{constructor(){super("twitter.com")}static credential(g,C){return gi._fromParams({providerId:_.PROVIDER_ID,signInMethod:_.TWITTER_SIGN_IN_METHOD,oauthToken:g,oauthTokenSecret:C})}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{oauthAccessToken:C,oauthTokenSecret:k}=g;if(!C||!k)return null;try{return _.credential(C,k)}catch{return null}}}return _.TWITTER_SIGN_IN_METHOD="twitter.com",_.PROVIDER_ID="twitter.com",_})();function Vs(_,h){return Zr.apply(this,arguments)}function Zr(){return(Zr=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signUp",We(_,h))})).apply(this,arguments)}class ai{constructor(h){this.user=h.user,this.providerId=h.providerId,this._tokenResponse=h._tokenResponse,this.operationType=h.operationType}static _fromIdTokenResponse(h,g,C,k=!1){return(0,E.Z)(function*(){const H=yield Gn._fromIdTokenResponse(h,C,k),he=K(C);return new ai({user:H,providerId:he,_tokenResponse:C,operationType:g})})()}static _forOperation(h,g,C){return(0,E.Z)(function*(){yield h._updateTokensIfNecessary(C,!0);const k=K(C);return new ai({user:h,providerId:k,_tokenResponse:C,operationType:g})})()}}function K(_){return _.providerId?_.providerId:"phoneNumber"in _?"phone":null}function te(){return(te=(0,E.Z)(function*(_){var h;const g=$n(_);if(yield g._initializationPromise,null!==(h=g.currentUser)&&void 0!==h&&h.isAnonymous)return new ai({user:g.currentUser,providerId:null,operationType:"signIn"});const C=yield Vs(g,{returnSecureToken:!0}),k=yield ai._fromIdTokenResponse(g,"signIn",C,!0);return yield g._updateCurrentUser(k.user),k})).apply(this,arguments)}class fe extends $.ZR{constructor(h,g,C,k){var H;super(g.code,g.message),this.operationType=C,this.user=k,Object.setPrototypeOf(this,fe.prototype),this.customData={appName:h.name,tenantId:null!==(H=h.tenantId)&&void 0!==H?H:void 0,_serverResponse:g.customData._serverResponse,operationType:C}}static _fromErrorAndOperation(h,g,C,k){return new fe(h,g,C,k)}}function pe(_,h,g,C){return("reauthenticate"===h?g._getReauthenticationResolver(_):g._getIdTokenResponse(_)).catch(H=>{throw"auth/multi-factor-auth-required"===H.code?fe._fromErrorAndOperation(_,H,h,C):H})}function ot(_){return new Set(_.map(({providerId:h})=>h).filter(h=>!!h))}function rn(){return rn=(0,E.Z)(function*(_,h){const g=(0,$.m9)(_);yield yi(!0,g,h);const{providerUserInfo:C}=yield function zr(_,h){return Er.apply(this,arguments)}(g.auth,{idToken:yield g.getIdToken(),deleteProvider:[h]}),k=ot(C||[]);return g.providerData=g.providerData.filter(H=>k.has(H.providerId)),k.has("phone")||(g.phoneNumber=null),yield g.auth._persistUserIfCurrent(g),g}),rn.apply(this,arguments)}function zn(_,h){return Kr.apply(this,arguments)}function Kr(){return(Kr=(0,E.Z)(function*(_,h,g=!1){const C=yield fr(_,h._linkToIdToken(_.auth,yield _.getIdToken()),g);return ai._forOperation(_,"link",C)})).apply(this,arguments)}function yi(_,h,g){return Pn.apply(this,arguments)}function Pn(){return(Pn=(0,E.Z)(function*(_,h,g){yield bn(h);const k=!1===_?"provider-already-linked":"no-such-provider";Te(ot(h.providerData).has(g)===_,h.auth,k)})).apply(this,arguments)}function Qi(_,h){return No.apply(this,arguments)}function No(){return(No=(0,E.Z)(function*(_,h,g=!1){const{auth:C}=_,k="reauthenticate";try{const H=yield fr(_,pe(C,k,h,_),g);Te(H.idToken,C,"internal-error");const he=Ht(H.idToken);Te(he,C,"internal-error");const{sub:Ie}=he;return Te(_.uid===Ie,C,"user-mismatch"),ai._forOperation(_,k,H)}catch(H){throw"auth/user-not-found"===H?.code&&Qe(C,"user-mismatch"),H}})).apply(this,arguments)}function Su(_,h){return Ra.apply(this,arguments)}function Ra(){return(Ra=(0,E.Z)(function*(_,h,g=!1){const C="signIn",k=yield pe(_,C,h),H=yield ai._fromIdTokenResponse(_,C,k);return g||(yield _._updateCurrentUser(H.user)),H})).apply(this,arguments)}function fa(_,h){return ru.apply(this,arguments)}function ru(){return(ru=(0,E.Z)(function*(_,h){return Su($n(_),h)})).apply(this,arguments)}function Vc(_,h){return Bc.apply(this,arguments)}function Bc(){return(Bc=(0,E.Z)(function*(_,h){const g=(0,$.m9)(_);return yield yi(!1,g,h.providerId),zn(g,h)})).apply(this,arguments)}function Yr(_,h){return Dl.apply(this,arguments)}function Dl(){return(Dl=(0,E.Z)(function*(_,h){return Qi((0,$.m9)(_),h)})).apply(this,arguments)}function Tl(){return(Tl=(0,E.Z)(function*(_,h){return Gt(_,"POST","/v1/accounts:signInWithCustomToken",We(_,h))})).apply(this,arguments)}function ps(){return ps=(0,E.Z)(function*(_,h){const g=$n(_),C=yield function zo(_,h){return Tl.apply(this,arguments)}(g,{token:h,returnSecureToken:!0}),k=yield ai._fromIdTokenResponse(g,"signIn",C);return yield g._updateCurrentUser(k.user),k}),ps.apply(this,arguments)}class gr{constructor(h,g){this.factorId=h,this.uid=g.mfaEnrollmentId,this.enrollmentTime=new Date(g.enrolledAt).toUTCString(),this.displayName=g.displayName}static _fromServerResponse(h,g){return"phoneInfo"in g?Bs._fromServerResponse(h,g):"totpInfo"in g?bs._fromServerResponse(h,g):Qe(h,"internal-error")}}class Bs extends gr{constructor(h){super("phone",h),this.phoneNumber=h.phoneInfo}static _fromServerResponse(h,g){return new Bs(g)}}class bs extends gr{constructor(h){super("totp",h)}static _fromServerResponse(h,g){return new bs(g)}}function Oo(_,h,g){var C;Te((null===(C=g.url)||void 0===C?void 0:C.length)>0,_,"invalid-continue-uri"),Te(typeof g.dynamicLinkDomain>"u"||g.dynamicLinkDomain.length>0,_,"invalid-dynamic-link-domain"),h.continueUrl=g.url,h.dynamicLinkDomain=g.dynamicLinkDomain,h.canHandleCodeInApp=g.handleCodeInApp,g.iOS&&(Te(g.iOS.bundleId.length>0,_,"missing-ios-bundle-id"),h.iOSBundleId=g.iOS.bundleId),g.android&&(Te(g.android.packageName.length>0,_,"missing-android-pkg-name"),h.androidInstallApp=g.android.installApp,h.androidMinimumVersionCode=g.android.minimumVersion,h.androidPackageName=g.android.packageName)}function _i(){return _i=(0,E.Z)(function*(_,h,g){var C;const k=$n(_),H={requestType:"PASSWORD_RESET",email:h,clientType:"CLIENT_TYPE_WEB"};if(null!==(C=k._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const he=yield Zi(k,H,"getOobCode",!0);g&&Oo(k,he,g),yield mo(k,he)}else g&&Oo(k,H,g),yield mo(k,H).catch(function(){var he=(0,E.Z)(function*(Ie){if("auth/missing-recaptcha-token"!==Ie.code)return Promise.reject(Ie);{console.log("Password resets are protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the password reset flow.");const ht=yield Zi(k,H,"getOobCode",!0);g&&Oo(k,ht,g),yield mo(k,ht)}});return function(Ie){return he.apply(this,arguments)}}())}),_i.apply(this,arguments)}function pa(){return(pa=(0,E.Z)(function*(_,h,g){yield ua((0,$.m9)(_),{oobCode:h,newPassword:g})})).apply(this,arguments)}function ji(){return ji=(0,E.Z)(function*(_,h){yield function dn(_,h){return ti.apply(this,arguments)}((0,$.m9)(_),{oobCode:h})}),ji.apply(this,arguments)}function nc(_,h){return Wo.apply(this,arguments)}function Wo(){return(Wo=(0,E.Z)(function*(_,h){const g=(0,$.m9)(_),C=yield ua(g,{oobCode:h}),k=C.requestType;switch(Te(k,g,"internal-error"),k){case"EMAIL_SIGNIN":break;case"VERIFY_AND_CHANGE_EMAIL":Te(C.newEmail,g,"internal-error");break;case"REVERT_SECOND_FACTOR_ADDITION":Te(C.mfaInfo,g,"internal-error");default:Te(C.email,g,"internal-error")}let H=null;return C.mfaInfo&&(H=gr._fromServerResponse($n(g),C.mfaInfo)),{data:{email:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.newEmail:C.email)||null,previousEmail:("VERIFY_AND_CHANGE_EMAIL"===C.requestType?C.email:C.newEmail)||null,multiFactorInfo:H},operation:k}})).apply(this,arguments)}function Ji(){return(Ji=(0,E.Z)(function*(_,h){const{data:g}=yield nc((0,$.m9)(_),h);return g.email})).apply(this,arguments)}function Cn(){return Cn=(0,E.Z)(function*(_,h,g){var C;const k=$n(_),H={returnSecureToken:!0,email:h,password:g,clientType:"CLIENT_TYPE_WEB"};let he;if(null!==(C=k._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const vt=yield Zi(k,H,"signUpPassword");he=Vs(k,vt)}else he=Vs(k,H).catch(function(){var vt=(0,E.Z)(function*(Ft){if("auth/missing-recaptcha-token"===Ft.code){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const jt=yield Zi(k,H,"signUpPassword");return Vs(k,jt)}return Promise.reject(Ft)});return function(Ft){return vt.apply(this,arguments)}}());const Ie=yield he.catch(vt=>Promise.reject(vt)),ht=yield ai._fromIdTokenResponse(k,"signIn",Ie);return yield k._updateCurrentUser(ht.user),ht}),Cn.apply(this,arguments)}function su(){return su=(0,E.Z)(function*(_,h,g){var C;const k=$n(_),H={requestType:"EMAIL_SIGNIN",email:h,clientType:"CLIENT_TYPE_WEB"};function he(Ie,ht){Te(ht.handleCodeInApp,k,"argument-error"),ht&&Oo(k,Ie,ht)}if(null!==(C=k._getRecaptchaConfig())&&void 0!==C&&C.emailPasswordEnabled){const Ie=yield Zi(k,H,"getOobCode",!0);he(Ie,g),yield Rr(k,Ie)}else he(H,g),yield Rr(k,H).catch(function(){var Ie=(0,E.Z)(function*(ht){if("auth/missing-recaptcha-token"!==ht.code)return Promise.reject(ht);{console.log("Email link sign-in is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const vt=yield Zi(k,H,"getOobCode",!0);he(vt,g),yield Rr(k,vt)}});return function(ht){return Ie.apply(this,arguments)}}())}),su.apply(this,arguments)}function Au(){return(Au=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_),k=Ys.credentialWithLink(h,g||Wn());return Te(k._tenantId===(C.tenantId||null),C,"tenant-id-mismatch"),fa(C,k)})).apply(this,arguments)}function sc(){return(sc=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:createAuthUri",We(_,h))})).apply(this,arguments)}function xu(){return xu=(0,E.Z)(function*(_,h){const C={identifier:h,continueUri:_n()?Wn():"http://localhost"},{signinMethods:k}=yield function ic(_,h){return sc.apply(this,arguments)}((0,$.m9)(_),C);return k||[]}),xu.apply(this,arguments)}function Na(){return Na=(0,E.Z)(function*(_,h){const g=(0,$.m9)(_),k={requestType:"VERIFY_EMAIL",idToken:yield _.getIdToken()};h&&Oo(g.auth,k,h);const{email:H}=yield function la(_,h){return Ro.apply(this,arguments)}(g.auth,k);H!==_.email&&(yield _.reload())}),Na.apply(this,arguments)}function ou(){return ou=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_),H={requestType:"VERIFY_AND_CHANGE_EMAIL",idToken:yield _.getIdToken(),newEmail:h};g&&Oo(C.auth,H,g);const{email:he}=yield function tn(_,h){return er.apply(this,arguments)}(C.auth,H);he!==_.email&&(yield _.reload())}),ou.apply(this,arguments)}function ac(){return(ac=(0,E.Z)(function*(_,h){return tt(_,"POST","/v1/accounts:update",h)})).apply(this,arguments)}function Ru(){return Ru=(0,E.Z)(function*(_,{displayName:h,photoURL:g}){if(void 0===h&&void 0===g)return;const C=(0,$.m9)(_),H={idToken:yield C.getIdToken(),displayName:h,photoUrl:g,returnSecureToken:!0},he=yield fr(C,function Sl(_,h){return ac.apply(this,arguments)}(C.auth,H));C.displayName=he.displayName||null,C.photoURL=he.photoUrl||null;const Ie=C.providerData.find(({providerId:ht})=>"password"===ht);Ie&&(Ie.displayName=C.displayName,Ie.photoURL=C.photoURL),yield C._updateTokensIfNecessary(he)}),Ru.apply(this,arguments)}function ri(_,h,g){return ee.apply(this,arguments)}function ee(){return(ee=(0,E.Z)(function*(_,h,g){const{auth:C}=_,H={idToken:yield _.getIdToken(),returnSecureToken:!0};h&&(H.email=h),g&&(H.password=g);const he=yield fr(_,tu(C,H));yield _._updateTokensIfNecessary(he,!0)})).apply(this,arguments)}class Vn{constructor(h,g,C={}){this.isNewUser=h,this.providerId=g,this.profile=C}}class _a extends Vn{constructor(h,g,C,k){super(h,g,C),this.username=k}}class M extends Vn{constructor(h,g){super(h,"facebook.com",g)}}class F extends _a{constructor(h,g){super(h,"github.com",g,"string"==typeof g?.login?g?.login:null)}}class N extends Vn{constructor(h,g){super(h,"google.com",g)}}class W extends _a{constructor(h,g,C){super(h,"twitter.com",g,C)}}function se(_){const{user:h,_tokenResponse:g}=_;return h.isAnonymous&&!g?{providerId:null,isNewUser:!1,profile:null}:function Xi(_){var h,g;if(!_)return null;const{providerId:C}=_,k=_.rawUserInfo?JSON.parse(_.rawUserInfo):{},H=_.isNewUser||"identitytoolkit#SignupNewUserResponse"===_.kind;if(!C&&_?.idToken){const he=null===(g=null===(h=Ht(_.idToken))||void 0===h?void 0:h.firebase)||void 0===g?void 0:g.sign_in_provider;if(he)return new Vn(H,"anonymous"!==he&&"custom"!==he?he:null)}if(!C)return null;switch(C){case"facebook.com":return new M(H,k);case"github.com":return new F(H,k);case"google.com":return new N(H,k);case"twitter.com":return new W(H,k,_.screenName||null);case"custom":case"anonymous":return new Vn(H,null);default:return new Vn(H,C,k)}}(g)}class Ni{constructor(h,g,C){this.type=h,this.credential=g,this.auth=C}static _fromIdtoken(h,g){return new Ni("enroll",h,g)}static _fromMfaPendingCredential(h){return new Ni("signin",h)}toJSON(){return{multiFactorSession:{["enroll"===this.type?"idToken":"pendingCredential"]:this.credential}}}static fromJSON(h){var g,C;if(h?.multiFactorSession){if(null!==(g=h.multiFactorSession)&&void 0!==g&&g.pendingCredential)return Ni._fromMfaPendingCredential(h.multiFactorSession.pendingCredential);if(null!==(C=h.multiFactorSession)&&void 0!==C&&C.idToken)return Ni._fromIdtoken(h.multiFactorSession.idToken)}return null}}class Bt{constructor(h,g,C){this.session=h,this.hints=g,this.signInResolver=C}static _fromError(h,g){const C=$n(h),k=g.customData._serverResponse,H=(k.mfaInfo||[]).map(Ie=>gr._fromServerResponse(C,Ie));Te(k.mfaPendingCredential,C,"internal-error");const he=Ni._fromMfaPendingCredential(k.mfaPendingCredential);return new Bt(he,H,function(){var Ie=(0,E.Z)(function*(ht){const vt=yield ht._process(C,he);delete k.mfaInfo,delete k.mfaPendingCredential;const Ft=Object.assign(Object.assign({},k),{idToken:vt.idToken,refreshToken:vt.refreshToken});switch(g.operationType){case"signIn":const jt=yield ai._fromIdTokenResponse(C,g.operationType,Ft);return yield C._updateCurrentUser(jt.user),jt;case"reauthenticate":return Te(g.user,C,"internal-error"),ai._forOperation(g.user,g.operationType,Ft);default:Qe(C,"internal-error")}});return function(ht){return Ie.apply(this,arguments)}}())}resolveSignIn(h){var g=this;return(0,E.Z)(function*(){return g.signInResolver(h)})()}}class Po{constructor(h){this.user=h,this.enrolledFactors=[],h._onReload(g=>{g.mfaInfo&&(this.enrolledFactors=g.mfaInfo.map(C=>gr._fromServerResponse(h.auth,C)))})}static _fromUser(h){return new Po(h)}getSession(){var h=this;return(0,E.Z)(function*(){return Ni._fromIdtoken(yield h.user.getIdToken(),h.user.auth)})()}enroll(h,g){var C=this;return(0,E.Z)(function*(){const k=h,H=yield C.getSession(),he=yield fr(C.user,k._process(C.user.auth,H,g));return yield C.user._updateTokensIfNecessary(he),C.user.reload()})()}unenroll(h){var g=this;return(0,E.Z)(function*(){const C="string"==typeof h?h:h.uid,k=yield g.user.getIdToken();try{const H=yield fr(g.user,function jc(_,h){return tt(_,"POST","/v2/accounts/mfaEnrollment:withdraw",We(_,h))}(g.user.auth,{idToken:k,mfaEnrollmentId:C}));g.enrolledFactors=g.enrolledFactors.filter(({uid:he})=>he!==C),yield g.user._updateTokensIfNecessary(H),yield g.user.reload()}catch(H){throw H}})()}}const uc=new WeakMap,$i="__sak";class Nu{constructor(h,g){this.storageRetriever=h,this.type=g}_isAvailable(){try{return this.storage?(this.storage.setItem($i,"1"),this.storage.removeItem($i),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(h,g){return this.storage.setItem(h,JSON.stringify(g)),Promise.resolve()}_get(h){const g=this.storage.getItem(h);return Promise.resolve(g?JSON.parse(g):null)}_remove(h){return this.storage.removeItem(h),Promise.resolve()}get storage(){return this.storageRetriever()}}const uu=(()=>{class _ extends Nu{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(g,C)=>this.onStorageEvent(g,C),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=function Ou(){const _=(0,$.z$)();return ne(_)||Rt(_)}()&&function xr(){try{return!(!window||window===window.top)}catch{return!1}}(),this.fallbackToPolling=Es(),this._shouldAllowMigration=!0}forAllChangedKeys(g){for(const C of Object.keys(this.listeners)){const k=this.storage.getItem(C),H=this.localCache[C];k!==H&&g(C,H,k)}}onStorageEvent(g,C=!1){if(!g.key)return void this.forAllChangedKeys((Ie,ht,vt)=>{this.notifyListeners(Ie,vt)});const k=g.key;if(C?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const Ie=this.storage.getItem(k);if(g.newValue!==Ie)null!==g.newValue?this.storage.setItem(k,g.newValue):this.storage.removeItem(k);else if(this.localCache[k]===g.newValue&&!C)return}const H=()=>{const Ie=this.storage.getItem(k);!C&&this.localCache[k]===Ie||this.notifyListeners(k,Ie)},he=this.storage.getItem(k);!function Mi(){return(0,$.w1)()&&10===document.documentMode}()||he===g.newValue||g.newValue===g.oldValue?H():setTimeout(H,10)}notifyListeners(g,C){this.localCache[g]=C;const k=this.listeners[g];if(k)for(const H of Array.from(k))H(C&&JSON.parse(C))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((g,C,k)=>{this.onStorageEvent(new StorageEvent("storage",{key:g,oldValue:C,newValue:k}),!0)})},1e3)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(g,C){0===Object.keys(this.listeners).length&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[g]||(this.listeners[g]=new Set,this.localCache[g]=this.storage.getItem(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&(this.detachListener(),this.stopPolling())}_set(g,C){var k=()=>super._set,H=this;return(0,E.Z)(function*(){yield k().call(H,g,C),H.localCache[g]=JSON.stringify(C)})()}_get(g){var C=()=>super._get,k=this;return(0,E.Z)(function*(){const H=yield C().call(k,g);return k.localCache[g]=JSON.stringify(H),H})()}_remove(g){var C=()=>super._remove,k=this;return(0,E.Z)(function*(){yield C().call(k,g),delete k.localCache[g]})()}}return _.type="LOCAL",_})(),ko=(()=>{class _ extends Nu{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(g,C){}_removeListener(g,C){}}return _.type="SESSION",_})();let gs=(()=>{class _{constructor(g){this.eventTarget=g,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(g){const C=this.receivers.find(H=>H.isListeningto(g));if(C)return C;const k=new _(g);return this.receivers.push(k),k}isListeningto(g){return this.eventTarget===g}handleEvent(g){var C=this;return(0,E.Z)(function*(){const k=g,{eventId:H,eventType:he,data:Ie}=k.data,ht=C.handlersMap[he];if(!ht?.size)return;k.ports[0].postMessage({status:"ack",eventId:H,eventType:he});const vt=Array.from(ht).map(function(){var jt=(0,E.Z)(function*(Jr){return Jr(k.origin,Ie)});return function(Jr){return jt.apply(this,arguments)}}()),Ft=yield function Oa(_){return Promise.all(_.map(function(){var h=(0,E.Z)(function*(g){try{return{fulfilled:!0,value:yield g}}catch(C){return{fulfilled:!1,reason:C}}});return function(g){return h.apply(this,arguments)}}()))}(vt);k.ports[0].postMessage({status:"done",eventId:H,eventType:he,response:Ft})})()}_subscribe(g,C){0===Object.keys(this.handlersMap).length&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[g]||(this.handlersMap[g]=new Set),this.handlersMap[g].add(C)}_unsubscribe(g,C){this.handlersMap[g]&&C&&this.handlersMap[g].delete(C),(!C||0===this.handlersMap[g].size)&&delete this.handlersMap[g],0===Object.keys(this.handlersMap).length&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}return _.receivers=[],_})();function cu(_="",h=10){let g="";for(let C=0;C<h;C++)g+=Math.floor(10*Math.random());return _+g}class Pa{constructor(h){this.target=h,this.handlers=new Set}removeMessageHandler(h){h.messageChannel&&(h.messageChannel.port1.removeEventListener("message",h.onMessage),h.messageChannel.port1.close()),this.handlers.delete(h)}_send(h,g,C=50){var k=this;return(0,E.Z)(function*(){const H=typeof MessageChannel<"u"?new MessageChannel:null;if(!H)throw new Error("connection_unavailable");let he,Ie;return new Promise((ht,vt)=>{const Ft=cu("",20);H.port1.start();const jt=setTimeout(()=>{vt(new Error("unsupported_event"))},C);Ie={messageChannel:H,onMessage(Jr){const Ha=Jr;if(Ha.data.eventId===Ft)switch(Ha.data.status){case"ack":clearTimeout(jt),he=setTimeout(()=>{vt(new Error("timeout"))},3e3);break;case"done":clearTimeout(he),ht(Ha.data.response);break;default:clearTimeout(jt),clearTimeout(he),vt(new Error("invalid_response"))}}},k.handlers.add(Ie),H.port1.addEventListener("message",Ie.onMessage),k.target.postMessage({eventType:h,eventId:Ft,data:g},[H.port2])}).finally(()=>{Ie&&k.removeMessageHandler(Ie)})})()}}function tr(){return window}function Pu(){return typeof tr().WorkerGlobalScope<"u"&&"function"==typeof tr().importScripts}function Js(){return(Js=(0,E.Z)(function*(){if(!navigator?.serviceWorker)return null;try{return(yield navigator.serviceWorker.ready).active}catch{return null}})).apply(this,arguments)}const Ts="firebaseLocalStorageDb",ku="firebaseLocalStorage",Rl="fbase_key";class Zo{constructor(h){this.request=h}toPromise(){return new Promise((h,g)=>{this.request.addEventListener("success",()=>{h(this.request.result)}),this.request.addEventListener("error",()=>{g(this.request.error)})})}}function va(_,h){return _.transaction([ku],h?"readwrite":"readonly").objectStore(ku)}function Fu(){const _=indexedDB.open(Ts,1);return new Promise((h,g)=>{_.addEventListener("error",()=>{g(_.error)}),_.addEventListener("upgradeneeded",()=>{const C=_.result;try{C.createObjectStore(ku,{keyPath:Rl})}catch(k){g(k)}}),_.addEventListener("success",(0,E.Z)(function*(){const C=_.result;C.objectStoreNames.contains(ku)?h(C):(C.close(),yield function Hc(){const _=indexedDB.deleteDatabase(Ts);return new Zo(_).toPromise()}(),h(yield Fu()))}))})}function Fa(_,h,g){return Lu.apply(this,arguments)}function Lu(){return(Lu=(0,E.Z)(function*(_,h,g){const C=va(_,!0).put({[Rl]:h,value:g});return new Zo(C).toPromise()})).apply(this,arguments)}function lu(){return(lu=(0,E.Z)(function*(_,h){const g=va(_,!1).get(h),C=yield new Zo(g).toPromise();return void 0===C?null:C.value})).apply(this,arguments)}function lc(_,h){const g=va(_,!0).delete(h);return new Zo(g).toPromise()}const Ea=(()=>{class _{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}_openDb(){var g=this;return(0,E.Z)(function*(){return g.db||(g.db=yield Fu()),g.db})()}_withRetries(g){var C=this;return(0,E.Z)(function*(){let k=0;for(;;)try{const H=yield C._openDb();return yield g(H)}catch(H){if(k++>3)throw H;C.db&&(C.db.close(),C.db=void 0)}})()}initializeServiceWorkerMessaging(){var g=this;return(0,E.Z)(function*(){return Pu()?g.initializeReceiver():g.initializeSender()})()}initializeReceiver(){var g=this;return(0,E.Z)(function*(){g.receiver=gs._getInstance(function Tr(){return Pu()?self:null}()),g.receiver._subscribe("keyChanged",function(){var C=(0,E.Z)(function*(k,H){return{keyProcessed:(yield g._poll()).includes(H.key)}});return function(k,H){return C.apply(this,arguments)}}()),g.receiver._subscribe("ping",function(){var C=(0,E.Z)(function*(k,H){return["keyChanged"]});return function(k,H){return C.apply(this,arguments)}}())})()}initializeSender(){var g=this;return(0,E.Z)(function*(){var C,k;if(g.activeServiceWorker=yield function Ds(){return Js.apply(this,arguments)}(),!g.activeServiceWorker)return;g.sender=new Pa(g.activeServiceWorker);const H=yield g.sender._send("ping",{},800);H&&null!==(C=H[0])&&void 0!==C&&C.fulfilled&&null!==(k=H[0])&&void 0!==k&&k.value.includes("keyChanged")&&(g.serviceWorkerReceiverAvailable=!0)})()}notifyServiceWorker(g){var C=this;return(0,E.Z)(function*(){if(C.sender&&C.activeServiceWorker&&function ka(){var _;return(null===(_=navigator?.serviceWorker)||void 0===_?void 0:_.controller)||null}()===C.activeServiceWorker)try{yield C.sender._send("keyChanged",{key:g},C.serviceWorkerReceiverAvailable?800:50)}catch{}})()}_isAvailable(){return(0,E.Z)(function*(){try{if(!indexedDB)return!1;const g=yield Fu();return yield Fa(g,$i,"1"),yield lc(g,$i),!0}catch{}return!1})()}_withPendingWrite(g){var C=this;return(0,E.Z)(function*(){C.pendingWrites++;try{yield g()}finally{C.pendingWrites--}})()}_set(g,C){var k=this;return(0,E.Z)(function*(){return k._withPendingWrite((0,E.Z)(function*(){return yield k._withRetries(H=>Fa(H,g,C)),k.localCache[g]=C,k.notifyServiceWorker(g)}))})()}_get(g){var C=this;return(0,E.Z)(function*(){const k=yield C._withRetries(H=>function cc(_,h){return lu.apply(this,arguments)}(H,g));return C.localCache[g]=k,k})()}_remove(g){var C=this;return(0,E.Z)(function*(){return C._withPendingWrite((0,E.Z)(function*(){return yield C._withRetries(k=>lc(k,g)),delete C.localCache[g],C.notifyServiceWorker(g)}))})()}_poll(){var g=this;return(0,E.Z)(function*(){const C=yield g._withRetries(he=>{const Ie=va(he,!1).getAll();return new Zo(Ie).toPromise()});if(!C)return[];if(0!==g.pendingWrites)return[];const k=[],H=new Set;for(const{fbase_key:he,value:Ie}of C)H.add(he),JSON.stringify(g.localCache[he])!==JSON.stringify(Ie)&&(g.notifyListeners(he,Ie),k.push(he));for(const he of Object.keys(g.localCache))g.localCache[he]&&!H.has(he)&&(g.notifyListeners(he,null),k.push(he));return k})()}notifyListeners(g,C){this.localCache[g]=C;const k=this.listeners[g];if(k)for(const H of Array.from(k))H(C)}startPolling(){var g=this;this.stopPolling(),this.pollTimer=setInterval((0,E.Z)(function*(){return g._poll()}),800)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(g,C){0===Object.keys(this.listeners).length&&this.startPolling(),this.listeners[g]||(this.listeners[g]=new Set,this._get(g)),this.listeners[g].add(C)}_removeListener(g,C){this.listeners[g]&&(this.listeners[g].delete(C),0===this.listeners[g].size&&delete this.listeners[g]),0===Object.keys(this.listeners).length&&this.stopPolling()}}return _.type="LOCAL",_})(),Uu=1e12;class jd{constructor(h){this.auth=h,this.counter=Uu,this._widgets=new Map}render(h,g){const C=this.counter;return this._widgets.set(C,new Vu(h,this.auth.name,g||{})),this.counter++,C}reset(h){var g;const C=h||Uu;null===(g=this._widgets.get(C))||void 0===g||g.delete(),this._widgets.delete(C)}getResponse(h){var g;return(null===(g=this._widgets.get(h||Uu))||void 0===g?void 0:g.getResponse())||""}execute(h){var g=this;return(0,E.Z)(function*(){var C;return null===(C=g._widgets.get(h||Uu))||void 0===C||C.execute(),""})()}}class Vu{constructor(h,g,C){this.params=C,this.timerId=null,this.deleted=!1,this.responseToken=null,this.clickHandler=()=>{this.execute()};const k="string"==typeof h?document.getElementById(h):h;Te(k,"argument-error",{appName:g}),this.container=k,this.isVisible="invisible"!==this.params.size,this.isVisible?this.execute():this.container.addEventListener("click",this.clickHandler)}getResponse(){return this.checkIfDeleted(),this.responseToken}delete(){this.checkIfDeleted(),this.deleted=!0,this.timerId&&(clearTimeout(this.timerId),this.timerId=null),this.container.removeEventListener("click",this.clickHandler)}execute(){this.checkIfDeleted(),!this.timerId&&(this.timerId=window.setTimeout(()=>{this.responseToken=function Hd(_){const h=[],g="1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ";for(let C=0;C<_;C++)h.push(g.charAt(Math.floor(62*Math.random())));return h.join("")}(50);const{callback:h,"expired-callback":g}=this.params;if(h)try{h(this.responseToken)}catch{}this.timerId=window.setTimeout(()=>{if(this.timerId=null,this.responseToken=null,g)try{g()}catch{}this.isVisible&&this.execute()},6e4)},500))}checkIfDeleted(){if(this.deleted)throw new Error("reCAPTCHA mock was already deleted!")}}const dc=qs("rcb"),Gc=new Gr(3e4,6e4);class S{constructor(){var h;this.hostLanguage="",this.counter=0,this.librarySeparatelyLoaded=!(null===(h=tr().grecaptcha)||void 0===h||!h.render)}load(h,g=""){return Te(function v(_){return _.length<=6&&/^\s*[a-zA-Z0-9\-]*\s*$/.test(_)}(g),h,"argument-error"),this.shouldResolveImmediately(g)&&ln(tr().grecaptcha)?Promise.resolve(tr().grecaptcha):new Promise((C,k)=>{const H=tr().setTimeout(()=>{k(ye(h,"network-request-failed"))},Gc.get());tr()[dc]=()=>{tr().clearTimeout(H),delete tr()[dc];const Ie=tr().grecaptcha;if(!Ie||!ln(Ie))return void k(ye(h,"internal-error"));const ht=Ie.render;Ie.render=(vt,Ft)=>{const jt=ht(vt,Ft);return this.counter++,jt},this.hostLanguage=g,C(Ie)},ws(`https://www.google.com/recaptcha/api.js??${(0,$.xO)({onload:dc,render:"explicit",hl:g})}`).catch(()=>{clearTimeout(H),k(ye(h,"internal-error"))})})}clearedOneInstance(){this.counter--}shouldResolveImmediately(h){var g;return!(null===(g=tr().grecaptcha)||void 0===g||!g.render)&&(h===this.hostLanguage||this.counter>0||this.librarySeparatelyLoaded)}}class x{load(h){return(0,E.Z)(function*(){return new jd(h)})()}clearedOneInstance(){}}const L="recaptcha",Y={theme:"light",type:"image"};class X{constructor(h,g=Object.assign({},Y),C){this.parameters=g,this.type=L,this.destroyed=!1,this.widgetId=null,this.tokenChangeListeners=new Set,this.renderPromise=null,this.recaptcha=null,this.auth=$n(C),this.isInvisible="invisible"===this.parameters.size,Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment");const k="string"==typeof h?document.getElementById(h):h;Te(k,this.auth,"argument-error"),this.container=k,this.parameters.callback=this.makeTokenCallback(this.parameters.callback),this._recaptchaLoader=this.auth.settings.appVerificationDisabledForTesting?new x:new S,this.validateStartingState()}verify(){var h=this;return(0,E.Z)(function*(){h.assertNotDestroyed();const g=yield h.render(),C=h.getAssertedRecaptcha();return C.getResponse(g)||new Promise(H=>{const he=Ie=>{Ie&&(h.tokenChangeListeners.delete(he),H(Ie))};h.tokenChangeListeners.add(he),h.isInvisible&&C.execute(g)})})()}render(){try{this.assertNotDestroyed()}catch(h){return Promise.reject(h)}return this.renderPromise||(this.renderPromise=this.makeRenderPromise().catch(h=>{throw this.renderPromise=null,h})),this.renderPromise}_reset(){this.assertNotDestroyed(),null!==this.widgetId&&this.getAssertedRecaptcha().reset(this.widgetId)}clear(){this.assertNotDestroyed(),this.destroyed=!0,this._recaptchaLoader.clearedOneInstance(),this.isInvisible||this.container.childNodes.forEach(h=>{this.container.removeChild(h)})}validateStartingState(){Te(!this.parameters.sitekey,this.auth,"argument-error"),Te(this.isInvisible||!this.container.hasChildNodes(),this.auth,"argument-error"),Te(typeof document<"u",this.auth,"operation-not-supported-in-this-environment")}makeTokenCallback(h){return g=>{if(this.tokenChangeListeners.forEach(C=>C(g)),"function"==typeof h)h(g);else if("string"==typeof h){const C=tr()[h];"function"==typeof C&&C(g)}}}assertNotDestroyed(){Te(!this.destroyed,this.auth,"internal-error")}makeRenderPromise(){var h=this;return(0,E.Z)(function*(){if(yield h.init(),!h.widgetId){let g=h.container;if(!h.isInvisible){const C=document.createElement("div");g.appendChild(C),g=C}h.widgetId=h.getAssertedRecaptcha().render(g,h.parameters)}return h.widgetId})()}init(){var h=this;return(0,E.Z)(function*(){Te(_n()&&!Pu(),h.auth,"internal-error"),yield function Ee(){let _=null;return new Promise(h=>{"complete"!==document.readyState?(_=()=>h(),window.addEventListener("load",_)):h()}).catch(h=>{throw _&&window.removeEventListener("load",_),h})}(),h.recaptcha=yield h._recaptchaLoader.load(h.auth,h.auth.languageCode||void 0);const g=yield function Se(_){return rt.apply(this,arguments)}(h.auth);Te(g,h.auth,"internal-error"),h.parameters.sitekey=g})()}getAssertedRecaptcha(){return Te(this.recaptcha,this.auth,"internal-error"),this.recaptcha}}class lt{constructor(h,g){this.verificationId=h,this.onConfirmation=g}confirm(h){const g=Ir._fromVerification(this.verificationId,h);return this.onConfirmation(g)}}function Vt(){return(Vt=(0,E.Z)(function*(_,h,g){const C=$n(_),k=yield wa(C,h,(0,$.m9)(g));return new lt(k,H=>fa(C,H))})).apply(this,arguments)}function vi(){return(vi=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_);yield yi(!1,C,"phone");const k=yield wa(C.auth,h,(0,$.m9)(g));return new lt(k,H=>Vc(C,H))})).apply(this,arguments)}function Ko(){return(Ko=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_),k=yield wa(C.auth,h,(0,$.m9)(g));return new lt(k,H=>Yr(C,H))})).apply(this,arguments)}function wa(_,h,g){return du.apply(this,arguments)}function du(){return du=(0,E.Z)(function*(_,h,g){var C;const k=yield g.verify();try{let H;if(Te("string"==typeof k,_,"argument-error"),Te(g.type===L,_,"argument-error"),H="string"==typeof h?{phoneNumber:h}:h,"session"in H){const he=H.session;if("phoneNumber"in H)return Te("enroll"===he.type,_,"internal-error"),(yield function Hi(_,h){return tt(_,"POST","/v2/accounts/mfaEnrollment:start",We(_,h))}(_,{idToken:he.credential,phoneEnrollmentInfo:{phoneNumber:H.phoneNumber,recaptchaToken:k}})).phoneSessionInfo.sessionInfo;{Te("signin"===he.type,_,"internal-error");const Ie=(null===(C=H.multiFactorHint)||void 0===C?void 0:C.uid)||H.multiFactorUid;return Te(Ie,_,"missing-multi-factor-info"),(yield function Nl(_,h){return tt(_,"POST","/v2/accounts/mfaSignIn:start",We(_,h))}(_,{mfaPendingCredential:he.credential,mfaEnrollmentId:Ie,phoneSignInInfo:{recaptchaToken:k}})).phoneResponseInfo.sessionInfo}}{const{sessionInfo:he}=yield function Ui(_,h){return Vi.apply(this,arguments)}(_,{phoneNumber:H.phoneNumber,recaptchaToken:k});return he}}finally{g._reset()}}),du.apply(this,arguments)}function $d(){return($d=(0,E.Z)(function*(_,h){yield zn((0,$.m9)(_),h)})).apply(this,arguments)}let fu=(()=>{class _{constructor(g){this.providerId=_.PROVIDER_ID,this.auth=$n(g)}verifyPhoneNumber(g,C){return wa(this.auth,g,(0,$.m9)(C))}static credential(g,C){return Ir._fromVerification(g,C)}static credentialFromResult(g){return _.credentialFromTaggedObject(g)}static credentialFromError(g){return _.credentialFromTaggedObject(g.customData||{})}static credentialFromTaggedObject({_tokenResponse:g}){if(!g)return null;const{phoneNumber:C,temporaryProof:k}=g;return C&&k?Ir._fromTokenResponse(C,k):null}}return _.PROVIDER_ID="phone",_.PHONE_SIGN_IN_METHOD="phone",_})();function Lo(_,h){return h?Nn(h):(Te(_._popupRedirectResolver,_,"argument-error"),_._popupRedirectResolver)}class Xs extends xi{constructor(h){super("custom","custom"),this.params=h}_getIdTokenResponse(h){return Vr(h,this._buildIdpRequest())}_linkToIdToken(h,g){return Vr(h,this._buildIdpRequest(g))}_getReauthenticationResolver(h){return Vr(h,this._buildIdpRequest())}_buildIdpRequest(h){const g={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return h&&(g.idToken=h),g}}function Ol(_){return Su(_.auth,new Xs(_),_.bypassAuthState)}function Pl(_){const{auth:h,user:g}=_;return Te(g,h,"internal-error"),Qi(g,new Xs(_),_.bypassAuthState)}function hc(_){return fc.apply(this,arguments)}function fc(){return(fc=(0,E.Z)(function*(_){const{auth:h,user:g}=_;return Te(g,h,"internal-error"),zn(g,new Xs(_),_.bypassAuthState)})).apply(this,arguments)}class ef{constructor(h,g,C,k,H=!1){this.auth=h,this.resolver=C,this.user=k,this.bypassAuthState=H,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(g)?g:[g]}execute(){var h=this;return new Promise(function(){var g=(0,E.Z)(function*(C,k){h.pendingPromise={resolve:C,reject:k};try{h.eventManager=yield h.resolver._initialize(h.auth),yield h.onExecution(),h.eventManager.registerConsumer(h)}catch(H){h.reject(H)}});return function(C,k){return g.apply(this,arguments)}}())}onAuthEvent(h){var g=this;return(0,E.Z)(function*(){const{urlResponse:C,sessionId:k,postBody:H,tenantId:he,error:Ie,type:ht}=h;if(Ie)return void g.reject(Ie);const vt={auth:g.auth,requestUri:C,sessionId:k,tenantId:he||void 0,postBody:H||void 0,user:g.user,bypassAuthState:g.bypassAuthState};try{g.resolve(yield g.getIdpTask(ht)(vt))}catch(Ft){g.reject(Ft)}})()}onError(h){this.reject(h)}getIdpTask(h){switch(h){case"signInViaPopup":case"signInViaRedirect":return Ol;case"linkViaPopup":case"linkViaRedirect":return hc;case"reauthViaPopup":case"reauthViaRedirect":return Pl;default:Qe(this.auth,"internal-error")}}resolve(h){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(h),this.unregisterAndCleanUp()}reject(h){pn(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(h),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}const Yo=new Gr(2e3,1e4);function Kp(){return(Kp=(0,E.Z)(function*(_,h,g){const C=$n(_);nt(_,h,Bi);const k=Lo(C,g);return new zd(C,"signInViaPopup",h,k).executeNotNull()})).apply(this,arguments)}function tf(){return(tf=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_);nt(C.auth,h,Bi);const k=Lo(C.auth,g);return new zd(C.auth,"reauthViaPopup",h,k,C).executeNotNull()})).apply(this,arguments)}function kl(){return(kl=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_);nt(C.auth,h,Bi);const k=Lo(C.auth,g);return new zd(C.auth,"linkViaPopup",h,k,C).executeNotNull()})).apply(this,arguments)}let zd=(()=>{class _ extends ef{constructor(g,C,k,H,he){super(g,C,H,he),this.provider=k,this.authWindow=null,this.pollId=null,_.currentPopupAction&&_.currentPopupAction.cancel(),_.currentPopupAction=this}executeNotNull(){var g=this;return(0,E.Z)(function*(){const C=yield g.execute();return Te(C,g.auth,"internal-error"),C})()}onExecution(){var g=this;return(0,E.Z)(function*(){pn(1===g.filter.length,"Popup operations only handle one event");const C=cu();g.authWindow=yield g.resolver._openPopup(g.auth,g.provider,g.filter[0],C),g.authWindow.associatedEvent=C,g.resolver._originValidation(g.auth).catch(k=>{g.reject(k)}),g.resolver._isIframeWebStorageSupported(g.auth,k=>{k||g.reject(ye(g.auth,"web-storage-unsupported"))}),g.pollUserCancellation()})()}get eventId(){var g;return(null===(g=this.authWindow)||void 0===g?void 0:g.associatedEvent)||null}cancel(){this.reject(ye(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,_.currentPopupAction=null}pollUserCancellation(){const g=()=>{var C,k;this.pollId=null!==(k=null===(C=this.authWindow)||void 0===C?void 0:C.window)&&void 0!==k&&k.closed?window.setTimeout(()=>{this.pollId=null,this.reject(ye(this.auth,"popup-closed-by-user"))},8e3):window.setTimeout(g,Yo.get())};g()}}return _.currentPopupAction=null,_})();const Fl="pendingRedirect",Ua=new Map;class Km extends ef{constructor(h,g,C=!1){super(h,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],g,void 0,C),this.eventId=null}execute(){var h=()=>super.execute,g=this;return(0,E.Z)(function*(){let C=Ua.get(g.auth._key());if(!C){try{const H=(yield function pc(_,h){return Wc.apply(this,arguments)}(g.resolver,g.auth))?yield h().call(g):null;C=()=>Promise.resolve(H)}catch(k){C=()=>Promise.reject(k)}Ua.set(g.auth._key(),C)}return g.bypassAuthState||Ua.set(g.auth._key(),()=>Promise.resolve(null)),C()})()}onAuthEvent(h){var g=()=>super.onAuthEvent,C=this;return(0,E.Z)(function*(){if("signInViaRedirect"===h.type)return g().call(C,h);if("unknown"!==h.type){if(h.eventId){const k=yield C.auth._redirectUserForId(h.eventId);if(k)return C.user=k,g().call(C,h);C.resolve(null)}}else C.resolve(null)})()}onExecution(){return(0,E.Z)(function*(){})()}cleanUp(){}}function Wc(){return(Wc=(0,E.Z)(function*(_,h){const g=Bu(h),C=Va(_);if(!(yield C._isAvailable()))return!1;const k="true"===(yield C._get(g));return yield C._remove(g),k})).apply(this,arguments)}function qc(_,h){return Zc.apply(this,arguments)}function Zc(){return(Zc=(0,E.Z)(function*(_,h){return Va(_)._set(Bu(h),"true")})).apply(this,arguments)}function pu(_,h){Ua.set(_._key(),h)}function Va(_){return Nn(_._redirectPersistence)}function Bu(_){return ue(Fl,_.config.apiKey,_.name)}function Wd(_,h,g){return function Ll(_,h,g){return Qo.apply(this,arguments)}(_,h,g)}function Qo(){return(Qo=(0,E.Z)(function*(_,h,g){const C=$n(_);nt(_,h,Bi),yield C._initializationPromise;const k=Lo(C,g);return yield qc(k,C),k._openRedirect(C,h,"signInViaRedirect")})).apply(this,arguments)}function Yp(_,h,g){return function Ul(_,h,g){return Kc.apply(this,arguments)}(_,h,g)}function Kc(){return(Kc=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_);nt(C.auth,h,Bi),yield C.auth._initializationPromise;const k=Lo(C.auth,g);yield qc(k,C.auth);const H=yield Qc(C);return k._openRedirect(C.auth,h,"reauthViaRedirect",H)})).apply(this,arguments)}function Qp(_,h,g){return function sf(_,h,g){return Yc.apply(this,arguments)}(_,h,g)}function Yc(){return(Yc=(0,E.Z)(function*(_,h,g){const C=(0,$.m9)(_);nt(C.auth,h,Bi),yield C.auth._initializationPromise;const k=Lo(C.auth,g);yield yi(!1,C,h.providerId),yield qc(k,C.auth);const H=yield Qc(C);return k._openRedirect(C.auth,h,"linkViaRedirect",H)})).apply(this,arguments)}function Ba(){return(Ba=(0,E.Z)(function*(_,h){return yield $n(_)._initializationPromise,Ia(_,h,!1)})).apply(this,arguments)}function Ia(_,h){return gc.apply(this,arguments)}function gc(){return(gc=(0,E.Z)(function*(_,h,g=!1){const C=$n(_),k=Lo(C,h),he=yield new Km(C,k,g).execute();return he&&!g&&(delete he.user._redirectEventId,yield C._persistUserIfCurrent(he.user),yield C._setRedirectUser(null,h)),he})).apply(this,arguments)}function Qc(_){return eo.apply(this,arguments)}function eo(){return(eo=(0,E.Z)(function*(_){const h=cu(`${_.uid}:::`);return _._redirectEventId=h,yield _.auth._setRedirectUser(_),yield _.auth._persistUserIfCurrent(_),h})).apply(this,arguments)}class Vl{constructor(h){this.auth=h,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(h){this.consumers.add(h),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,h)&&(this.sendToConsumer(this.queuedRedirectEvent,h),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(h){this.consumers.delete(h)}onEvent(h){if(this.hasEventBeenHandled(h))return!1;let g=!1;return this.consumers.forEach(C=>{this.isEventForConsumer(h,C)&&(g=!0,this.sendToConsumer(h,C),this.saveEventToCache(h))}),this.hasHandledPotentialRedirect||!function uf(_){switch(_.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Zd(_);default:return!1}}(h)||(this.hasHandledPotentialRedirect=!0,g||(this.queuedRedirectEvent=h,g=!0)),g}sendToConsumer(h,g){var C;if(h.error&&!Zd(h)){const k=(null===(C=h.error.code)||void 0===C?void 0:C.split("auth/")[1])||"internal-error";g.onError(ye(this.auth,k))}else g.onAuthEvent(h)}isEventForConsumer(h,g){const C=null===g.eventId||!!h.eventId&&h.eventId===g.eventId;return g.filter.includes(h.type)&&C}hasEventBeenHandled(h){return Date.now()-this.lastProcessedEventTime>=6e5&&this.cachedEventUids.clear(),this.cachedEventUids.has(qd(h))}saveEventToCache(h){this.cachedEventUids.add(qd(h)),this.lastProcessedEventTime=Date.now()}}function qd(_){return[_.type,_.eventId,_.sessionId,_.tenantId].filter(h=>h).join("-")}function Zd({type:_,error:h}){return"unknown"===_&&"auth/no-auth-event"===h?.code}function Kd(_){return Jp.apply(this,arguments)}function Jp(){return(Jp=(0,E.Z)(function*(_,h={}){return tt(_,"GET","/v1/projects",h)})).apply(this,arguments)}const NC=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Bl=/^https?/;function Hu(){return(Hu=(0,E.Z)(function*(_){if(_.config.emulator)return;const{authorizedDomains:h}=yield Kd(_);for(const g of h)try{if(Gi(g))return}catch{}Qe(_,"unauthorized-domain")})).apply(this,arguments)}function Gi(_){const h=Wn(),{protocol:g,hostname:C}=new URL(h);if(_.startsWith("chrome-extension://")){const he=new URL(_);return""===he.hostname&&""===C?"chrome-extension:"===g&&_.replace("chrome-extension://","")===h.replace("chrome-extension://",""):"chrome-extension:"===g&&he.hostname===C}if(!Bl.test(g))return!1;if(NC.test(_))return C===_;const k=_.replace(/\./g,"\\.");return new RegExp("^(.+\\."+k+"|"+k+")$","i").test(C)}const jl=new Gr(3e4,6e4);function Jc(){const _=tr().___jsl;if(_?.H)for(const h of Object.keys(_.H))if(_.H[h].r=_.H[h].r||[],_.H[h].L=_.H[h].L||[],_.H[h].r=[..._.H[h].L],_.CP)for(let g=0;g<_.CP.length;g++)_.CP[g]=null}let js=null;const Xp=new Gr(5e3,15e3),cf="__/auth/iframe",Xc="emulator/auth/iframe",Ym={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Lv=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Uv(_){const h=_.config;Te(h.authDomain,_,"auth-domain-config-required");const g=h.emulator?Re(h,Xc):`https://${_.config.authDomain}/${cf}`,C={apiKey:h.apiKey,appName:_.name,v:Q.SDK_VERSION},k=Lv.get(_.config.apiHost);k&&(C.eid=k);const H=_._getFrameworks();return H.length&&(C.fw=H.join(",")),`${g}?${(0,$.xO)(C).slice(1)}`}function R(){return R=(0,E.Z)(function*(_){const h=yield function ba(_){return js=js||function $u(_){return new Promise((h,g)=>{var C,k,H;function he(){Jc(),gapi.load("gapi.iframes",{callback:()=>{h(gapi.iframes.getContext())},ontimeout:()=>{Jc(),g(ye(_,"network-request-failed"))},timeout:jl.get()})}if(null!==(k=null===(C=tr().gapi)||void 0===C?void 0:C.iframes)&&void 0!==k&&k.Iframe)h(gapi.iframes.getContext());else{if(null===(H=tr().gapi)||void 0===H||!H.load){const Ie=qs("iframefcb");return tr()[Ie]=()=>{gapi.load?he():g(ye(_,"network-request-failed"))},ws(`https://apis.google.com/js/api.js?onload=${Ie}`).catch(ht=>g(ht))}he()}}).catch(h=>{throw js=null,h})}(_),js}(_),g=tr().gapi;return Te(g,_,"internal-error"),h.open({where:document.body,url:Uv(_),messageHandlersFilter:g.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Ym,dontclear:!0},C=>new Promise(function(){var k=(0,E.Z)(function*(H,he){yield C.restyle({setHideOnLeave:!1});const Ie=ye(_,"network-request-failed"),ht=tr().setTimeout(()=>{he(Ie)},Xp.get());function vt(){tr().clearTimeout(ht),H(C)}C.ping(vt).then(vt,()=>{he(Ie)})});return function(H,he){return k.apply(this,arguments)}}()))}),R.apply(this,arguments)}const B={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"};class Tt{constructor(h){this.window=h,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}const hn="__/auth/handler",wn="emulator/auth/handler",wo=encodeURIComponent("fac");function Ei(_,h,g,C,k,H){return el.apply(this,arguments)}function el(){return(el=(0,E.Z)(function*(_,h,g,C,k,H){Te(_.config.authDomain,_,"auth-domain-config-required"),Te(_.config.apiKey,_,"invalid-api-key");const he={apiKey:_.config.apiKey,appName:_.name,authType:g,redirectUrl:C,v:Q.SDK_VERSION,eventId:k};if(h instanceof Bi){h.setDefaultLanguage(_.languageCode),he.providerId=h.providerId||"",(0,$.xb)(h.getCustomParameters())||(he.customParameters=JSON.stringify(h.getCustomParameters()));for(const[Ft,jt]of Object.entries(H||{}))he[Ft]=jt}if(h instanceof mi){const Ft=h.getScopes().filter(jt=>""!==jt);Ft.length>0&&(he.scopes=Ft.join(","))}_.tenantId&&(he.tid=_.tenantId);const Ie=he;for(const Ft of Object.keys(Ie))void 0===Ie[Ft]&&delete Ie[Ft];const ht=yield _._getAppCheckToken(),vt=ht?`#${wo}=${encodeURIComponent(ht)}`:"";return`${function Gu({config:_}){return _.emulator?Re(_,wn):`https://${_.authDomain}/${hn}`}(_)}?${(0,$.xO)(Ie).slice(1)}${vt}`})).apply(this,arguments)}const mc="webStorageSupport",gu=class Co{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=ko,this._completeRedirectFn=Ia,this._overrideRedirectResult=pu}_openPopup(h,g,C,k){var H=this;return(0,E.Z)(function*(){var he;pn(null===(he=H.eventManagers[h._key()])||void 0===he?void 0:he.manager,"_initialize() not called before _openPopup()");const Ie=yield Ei(h,g,C,Wn(),k);return function wt(_,h,g,C=500,k=600){const H=Math.max((window.screen.availHeight-k)/2,0).toString(),he=Math.max((window.screen.availWidth-C)/2,0).toString();let Ie="";const ht=Object.assign(Object.assign({},B),{width:C.toString(),height:k.toString(),top:H,left:he}),vt=(0,$.z$)().toLowerCase();g&&(Ie=be(vt)?"_blank":g),Z(vt)&&(h=h||"http://localhost",ht.scrollbars="yes");const Ft=Object.entries(ht).reduce((Jr,[Ha,ah])=>`${Jr}${Ha}=${ah},`,"");if(function dr(_=(0,$.z$)()){var h;return Rt(_)&&!(null===(h=window.navigator)||void 0===h||!h.standalone)}(vt)&&"_self"!==Ie)return function Zt(_,h){const g=document.createElement("a");g.href=_,g.target=h;const C=document.createEvent("MouseEvent");C.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),g.dispatchEvent(C)}(h||"",Ie),new Tt(null);const jt=window.open(h||"",Ie,Ft);Te(jt,_,"popup-blocked");try{jt.focus()}catch{}return new Tt(jt)}(h,Ie,cu())})()}_openRedirect(h,g,C,k){var H=this;return(0,E.Z)(function*(){return yield H._originValidation(h),function xl(_){tr().location.href=_}(yield Ei(h,g,C,Wn(),k)),new Promise(()=>{})})()}_initialize(h){const g=h._key();if(this.eventManagers[g]){const{manager:k,promise:H}=this.eventManagers[g];return k?Promise.resolve(k):(pn(H,"If manager is not set, promise should be"),H)}const C=this.initAndGetManager(h);return this.eventManagers[g]={promise:C},C.catch(()=>{delete this.eventManagers[g]}),C}initAndGetManager(h){var g=this;return(0,E.Z)(function*(){const C=yield function T(_){return R.apply(this,arguments)}(h),k=new Vl(h);return C.register("authEvent",H=>(Te(H?.authEvent,h,"invalid-auth-event"),{status:k.onEvent(H.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),g.eventManagers[h._key()]={manager:k},g.iframes[h._key()]=C,k})()}_isIframeWebStorageSupported(h,g){this.iframes[h._key()].send(mc,{type:mc},k=>{var H;const he=null===(H=k?.[0])||void 0===H?void 0:H[mc];void 0!==he&&g(!!he),Qe(h,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function Fv(_){return Hu.apply(this,arguments)}(h)),this.originValidationPromises[g]}get _shouldInitProactively(){return Es()||ne()||Rt()}};class Yd{constructor(h){this.factorId=h}_process(h,g,C){switch(g.type){case"enroll":return this._finalizeEnroll(h,g.credential,C);case"signin":return this._finalizeSignIn(h,g.credential);default:return _t("unexpected MultiFactorSessionType")}}}class Hl extends Yd{constructor(h){super("phone"),this.credential=h}static _fromCredential(h){return new Hl(h)}_finalizeEnroll(h,g,C){return function Eo(_,h){return tt(_,"POST","/v2/accounts/mfaEnrollment:finalize",We(_,h))}(h,{idToken:g,displayName:C,phoneVerificationInfo:this.credential._makeVerificationRequest()})}_finalizeSignIn(h,g){return function Bd(_,h){return tt(_,"POST","/v2/accounts/mfaSignIn:finalize",We(_,h))}(h,{mfaPendingCredential:g,phoneVerificationInfo:this.credential._makeVerificationRequest()})}}let eg=(()=>{class _{constructor(){}static assertion(g){return Hl._fromCredential(g)}}return _.FACTOR_ID="phone",_})();var $l="@firebase/auth";class bS{constructor(h){this.auth=h,this.internalListeners=new Map}getUid(){var h;return this.assertAuthConfigured(),(null===(h=this.auth.currentUser)||void 0===h?void 0:h.uid)||null}getToken(h){var g=this;return(0,E.Z)(function*(){return g.assertAuthConfigured(),yield g.auth._initializationPromise,g.auth.currentUser?{accessToken:yield g.auth.currentUser.getIdToken(h)}:null})()}addAuthTokenListener(h){if(this.assertAuthConfigured(),this.internalListeners.has(h))return;const g=this.auth.onIdTokenChanged(C=>{h(C?.stsTokenManager.accessToken||null)});this.internalListeners.set(h,g),this.updateProactiveRefresh()}removeAuthTokenListener(h){this.assertAuthConfigured();const g=this.internalListeners.get(h);g&&(this.internalListeners.delete(h),g(),this.updateProactiveRefresh())}assertAuthConfigured(){Te(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}function tl(){return window}(0,$.Pz)("authIdTokenMaxAge"),function tg(_){(0,Q._registerComponent)(new ve.wA("auth",(h,{options:g})=>{const C=h.getProvider("app").getImmediate(),k=h.getProvider("heartbeat"),H=h.getProvider("app-check-internal"),{apiKey:he,authDomain:Ie}=C.options;Te(he&&!he.includes(":"),"invalid-api-key",{appName:C.name});const ht={apiKey:he,authDomain:Ie,clientPlatform:_,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ue(_)},vt=new Xa(C,k,H,ht);return function oa(_,h){const g=h?.persistence||[],C=(Array.isArray(g)?g:[g]).map(Nn);h?.errorMap&&_._updateErrorMap(h.errorMap),_._initializeWithPersistence(C,h?.popupRedirectResolver)}(vt,g),vt},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((h,g,C)=>{h.getProvider("auth-internal").initialize()})),(0,Q._registerComponent)(new ve.wA("auth-internal",h=>{const g=$n(h.getProvider("auth").getImmediate());return new bS(g)},"PRIVATE").setInstantiationMode("EXPLICIT")),(0,Q.registerVersion)($l,"0.23.2",function Xm(_){switch(_){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}(_)),(0,Q.registerVersion)($l,"0.23.2","esm2017")}("Browser");function ty(){return ty=(0,E.Z)(function*(_,h,g){var C;const{BuildInfo:k}=tl();pn(h.sessionId,"AuthEvent did not contain a session ID");const H=yield function TS(_){return Qd.apply(this,arguments)}(h.sessionId),he={};return Rt()?he.ibi=k.packageName:pt()?he.apn=k.packageName:Qe(_,"operation-not-supported-in-this-environment"),k.displayName&&(he.appDisplayName=k.displayName),he.sessionId=H,Ei(_,g,h.type,void 0,null!==(C=h.eventId)&&void 0!==C?C:void 0,he)}),ty.apply(this,arguments)}function ry(){return(ry=(0,E.Z)(function*(_){const{BuildInfo:h}=tl(),g={};Rt()?g.iosBundleId=h.packageName:pt()?g.androidPackageName=h.packageName:Qe(_,"operation-not-supported-in-this-environment"),yield Kd(_,g)})).apply(this,arguments)}function lf(){return(lf=(0,E.Z)(function*(_,h,g){const{cordova:C}=tl();let k=()=>{};try{yield new Promise((H,he)=>{let Ie=null;function ht(){var jt;H();const Jr=null===(jt=C.plugins.browsertab)||void 0===jt?void 0:jt.close;"function"==typeof Jr&&Jr(),"function"==typeof g?.close&&g.close()}function vt(){Ie||(Ie=window.setTimeout(()=>{he(ye(_,"redirect-cancelled-by-user"))},2e3))}function Ft(){"visible"===document?.visibilityState&&vt()}h.addPassiveListener(ht),document.addEventListener("resume",vt,!1),pt()&&document.addEventListener("visibilitychange",Ft,!1),k=()=>{h.removePassiveListener(ht),document.removeEventListener("resume",vt,!1),document.removeEventListener("visibilitychange",Ft,!1),Ie&&window.clearTimeout(Ie)}})}finally{k()}})).apply(this,arguments)}function Qd(){return(Qd=(0,E.Z)(function*(_){const h=function Gl(_){if(pn(/[0-9a-zA-Z]+/.test(_),"Can only convert alpha-numeric strings"),typeof TextEncoder<"u")return(new TextEncoder).encode(_);const h=new ArrayBuffer(_.length),g=new Uint8Array(h);for(let C=0;C<_.length;C++)g[C]=_.charCodeAt(C);return g}(_),g=yield crypto.subtle.digest("SHA-256",h);return Array.from(new Uint8Array(g)).map(k=>k.toString(16).padStart(2,"0")).join("")})).apply(this,arguments)}class VC extends Vl{constructor(){super(...arguments),this.passiveListeners=new Set,this.initPromise=new Promise(h=>{this.resolveInialized=h})}addPassiveListener(h){this.passiveListeners.add(h)}removePassiveListener(h){this.passiveListeners.delete(h)}resetRedirect(){this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1}onEvent(h){return this.resolveInialized(),this.passiveListeners.forEach(g=>g(h)),super.onEvent(h)}initialized(){var h=this;return(0,E.Z)(function*(){yield h.initPromise})()}}function iy(_){return zl.apply(this,arguments)}function zl(){return(zl=(0,E.Z)(function*(_){const h=yield Xd()._get(df(_));return h&&(yield Xd()._remove(df(_))),h})).apply(this,arguments)}function sy(){const _=[];for(let g=0;g<20;g++){const C=Math.floor(62*Math.random());_.push("1234567890abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ".charAt(C))}return _.join("")}function Xd(){return Nn(uu)}function df(_){return ue("authEvent",_.config.apiKey,_.name)}function eh(_){if(!_?.includes("?"))return{};const[h,...g]=_.split("?");return(0,$.zd)(g.join("?"))}const ja=class ff{constructor(){this._redirectPersistence=ko,this._shouldInitProactively=!0,this.eventManagers=new Map,this.originValidationPromises={},this._completeRedirectFn=Ia,this._overrideRedirectResult=pu}_initialize(h){var g=this;return(0,E.Z)(function*(){const C=h._key();let k=g.eventManagers.get(C);return k||(k=new VC(h),g.eventManagers.set(C,k),g.attachCallbackListeners(h,k)),k})()}_openPopup(h){Qe(h,"operation-not-supported-in-this-environment")}_openRedirect(h,g,C,k){var H=this;return(0,E.Z)(function*(){!function LC(_){var h,g,C,k,H,he,Ie,ht,vt,Ft;const jt=tl();Te("function"==typeof(null===(h=jt?.universalLinks)||void 0===h?void 0:h.subscribe),_,"invalid-cordova-configuration",{missingPlugin:"cordova-universal-links-plugin-fix"}),Te(typeof(null===(g=jt?.BuildInfo)||void 0===g?void 0:g.packageName)<"u",_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-buildInfo"}),Te("function"==typeof(null===(H=null===(k=null===(C=jt?.cordova)||void 0===C?void 0:C.plugins)||void 0===k?void 0:k.browsertab)||void 0===H?void 0:H.openUrl),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(ht=null===(Ie=null===(he=jt?.cordova)||void 0===he?void 0:he.plugins)||void 0===Ie?void 0:Ie.browsertab)||void 0===ht?void 0:ht.isAvailable),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-browsertab"}),Te("function"==typeof(null===(Ft=null===(vt=jt?.cordova)||void 0===vt?void 0:vt.InAppBrowser)||void 0===Ft?void 0:Ft.open),_,"invalid-cordova-configuration",{missingPlugin:"cordova-plugin-inappbrowser"})}(h);const he=yield H._initialize(h);yield he.initialized(),he.resetRedirect(),function rf(){Ua.clear()}(),yield H._originValidation(h);const Ie=function BC(_,h,g=null){return{type:h,eventId:g,urlResponse:null,sessionId:sy(),postBody:null,tenantId:_.tenantId,error:ye(_,"no-auth-event")}}(h,C,k);yield function SS(_,h){return Xd()._set(df(_),h)}(h,Ie);const ht=yield function jv(_,h,g){return ty.apply(this,arguments)}(h,Ie,g),vt=yield function Hv(_){const{cordova:h}=tl();return new Promise(g=>{h.plugins.browsertab.isAvailable(C=>{let k=null;C?h.plugins.browsertab.openUrl(_):k=h.InAppBrowser.open(_,function cn(_=(0,$.z$)()){return/(iPad|iPhone|iPod).*OS 7_\d/i.test(_)||/(iPad|iPhone|iPod).*OS 8_\d/i.test(_)}()?"_blank":"_system","location=yes"),g(k)})})}(ht);return function FC(_,h,g){return lf.apply(this,arguments)}(h,he,vt)})()}_isIframeWebStorageSupported(h,g){throw new Error("Method not implemented.")}_originValidation(h){const g=h._key();return this.originValidationPromises[g]||(this.originValidationPromises[g]=function ny(_){return ry.apply(this,arguments)}(h)),this.originValidationPromises[g]}attachCallbackListeners(h,g){const{universalLinks:C,handleOpenURL:k,BuildInfo:H}=tl(),he=setTimeout((0,E.Z)(function*(){yield iy(h),g.onEvent(rg())}),500),Ie=function(){var Ft=(0,E.Z)(function*(jt){clearTimeout(he);const Jr=yield iy(h);let Ha=null;Jr&&jt?.url&&(Ha=function Jd(_,h){var g,C;const k=function oy(_){const h=eh(_),g=h.link?decodeURIComponent(h.link):void 0,C=eh(g).link,k=h.deep_link_id?decodeURIComponent(h.deep_link_id):void 0;return eh(k).link||k||C||g||_}(h);if(k.includes("/__/auth/callback")){const H=eh(k),he=H.firebaseError?function nl(_){try{return JSON.parse(_)}catch{return null}}(decodeURIComponent(H.firebaseError)):null,Ie=null===(C=null===(g=he?.code)||void 0===g?void 0:g.split("auth/"))||void 0===C?void 0:C[1],ht=Ie?ye(Ie):null;return ht?{type:_.type,eventId:_.eventId,tenantId:_.tenantId,error:ht,urlResponse:null,sessionId:null,postBody:null}:{type:_.type,eventId:_.eventId,tenantId:_.tenantId,sessionId:_.sessionId,urlResponse:k,postBody:null}}return null}(Jr,jt.url)),g.onEvent(Ha||rg())});return function(Jr){return Ft.apply(this,arguments)}}();typeof C<"u"&&"function"==typeof C.subscribe&&C.subscribe(null,Ie);const ht=k,vt=`${H.packageName.toLowerCase()}://`;tl().handleOpenURL=function(){var Ft=(0,E.Z)(function*(jt){if(jt.toLowerCase().startsWith(vt)&&Ie({url:jt}),"function"==typeof ht)try{ht(jt)}catch(Jr){console.error(Jr)}});return function(jt){return Ft.apply(this,arguments)}}()}};function rg(){return{type:"unknown",eventId:null,sessionId:null,urlResponse:null,postBody:null,tenantId:null,error:ye("no-auth-event")}}function on(){var _;return(null===(_=self?.location)||void 0===_?void 0:_.protocol)||null}function pf(_=(0,$.z$)()){return!("file:"!==on()&&"ionic:"!==on()&&"capacitor:"!==on()||!_.toLowerCase().match(/iphone|ipad|ipod|android/))}function gf(){try{const _=self.localStorage,h=cu();if(_)return _.setItem(h,"1"),_.removeItem(h),!function Uo(_=(0,$.z$)()){return function zv(){return(0,$.w1)()&&11===document?.documentMode}()||function Wv(_=(0,$.z$)()){return/Edge\/\d+/.test(_)}(_)}()||(0,$.hl)()}catch{return th()&&(0,$.hl)()}return!1}function th(){return typeof global<"u"&&"WorkerGlobalScope"in global&&"importScripts"in global}function Wl(){return(function ig(){return"http:"===on()||"https:"===on()}()||(0,$.ru)()||pf())&&!function uy(){return(0,$.b$)()||(0,$.UG)()}()&&gf()&&!th()}function Hs(){return pf()&&typeof document<"u"}function mf(){return(mf=(0,E.Z)(function*(){return!!Hs()&&new Promise(_=>{const h=setTimeout(()=>{_(!1)},1e3);document.addEventListener("deviceready",()=>{clearTimeout(h),_(!0)})})})).apply(this,arguments)}const Jo={LOCAL:"local",NONE:"none",SESSION:"session"},ql=Te,cy="persistence";function yf(_){return rh.apply(this,arguments)}function rh(){return(rh=(0,E.Z)(function*(_){yield _._initializationPromise;const h=Zl(),g=ue(cy,_.config.apiKey,_.name);h&&h.setItem(g,_._getPersistence())})).apply(this,arguments)}function Zl(){var _;try{return(null===(_=function sg(){return typeof window<"u"?window:null}())||void 0===_?void 0:_.sessionStorage)||null}catch{return null}}const Ss=Te;class mu{constructor(){this.browserResolver=Nn(gu),this.cordovaResolver=Nn(ja),this.underlyingResolver=null,this._redirectPersistence=ko,this._completeRedirectFn=Ia,this._overrideRedirectResult=pu}_initialize(h){var g=this;return(0,E.Z)(function*(){return yield g.selectUnderlyingResolver(),g.assertedUnderlyingResolver._initialize(h)})()}_openPopup(h,g,C,k){var H=this;return(0,E.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._openPopup(h,g,C,k)})()}_openRedirect(h,g,C,k){var H=this;return(0,E.Z)(function*(){return yield H.selectUnderlyingResolver(),H.assertedUnderlyingResolver._openRedirect(h,g,C,k)})()}_isIframeWebStorageSupported(h,g){this.assertedUnderlyingResolver._isIframeWebStorageSupported(h,g)}_originValidation(h){return this.assertedUnderlyingResolver._originValidation(h)}get _shouldInitProactively(){return Hs()||this.browserResolver._shouldInitProactively}get assertedUnderlyingResolver(){return Ss(this.underlyingResolver,"internal-error"),this.underlyingResolver}selectUnderlyingResolver(){var h=this;return(0,E.Z)(function*(){if(h.underlyingResolver)return;const g=yield function nh(){return mf.apply(this,arguments)}();h.underlyingResolver=g?h.cordovaResolver:h.browserResolver})()}}function ly(_){return _.unwrap()}function qv(_){return og(_)}function og(_){const{_tokenResponse:h}=_ instanceof $.ZR?_.customData:_;if(!h)return null;if(!(_ instanceof $.ZR)&&"temporaryProof"in h&&"phoneNumber"in h)return fu.credentialFromResult(_);const g=h.providerId;if(!g||g===Me.PASSWORD)return null;let C;switch(g){case Me.GOOGLE:C=Is;break;case Me.FACEBOOK:C=fs;break;case Me.GITHUB:C=Br;break;case Me.TWITTER:C=Us;break;default:const{oauthIdToken:k,oauthAccessToken:H,oauthTokenSecret:he,pendingToken:Ie,nonce:ht}=h;return H||he||k||Ie?Ie?g.startsWith("saml.")?or._create(g,Ie):gi._fromParams({providerId:g,signInMethod:g,pendingToken:Ie,idToken:k,accessToken:H}):new Ri(g).credential({idToken:k,accessToken:H,rawNonce:ht}):null}return _ instanceof $.ZR?C.credentialFromError(_):C.credentialFromResult(_)}function As(_,h){return h.catch(g=>{throw g instanceof $.ZR&&function Zv(_,h){var g;const C=null===(g=h.customData)||void 0===g?void 0:g._tokenResponse;if("auth/multi-factor-auth-required"===h?.code)h.resolver=new Kl(_,function es(_,h){var g;const C=(0,$.m9)(_),k=h;return Te(h.customData.operationType,C,"argument-error"),Te(null===(g=k.customData._serverResponse)||void 0===g?void 0:g.mfaPendingCredential,C,"argument-error"),Bt._fromError(C,k)}(_,h));else if(C){const k=og(h),H=h;k&&(H.credential=k,H.tenantId=C.tenantId||void 0,H.email=C.email||void 0,H.phoneNumber=C.phoneNumber||void 0)}}(_,g),g}).then(g=>{const k=g.user;return{operationType:g.operationType,credential:qv(g),additionalUserInfo:se(g),user:Ms.getOrCreate(k)}})}function oh(_,h){return yu.apply(this,arguments)}function yu(){return(yu=(0,E.Z)(function*(_,h){const g=yield h;return{verificationId:g.verificationId,confirm:C=>As(_,g.confirm(C))}})).apply(this,arguments)}class Kl{constructor(h,g){this.resolver=g,this.auth=function sh(_){return _.wrapped()}(h)}get session(){return this.resolver.session}get hints(){return this.resolver.hints}resolveSignIn(h){return As(ly(this.auth),this.resolver.resolveSignIn(h))}}class Ms{constructor(h){this._delegate=h,this.multiFactor=function au(_){const h=(0,$.m9)(_);return uc.has(h)||uc.set(h,Po._fromUser(h)),uc.get(h)}(h)}static getOrCreate(h){return Ms.USER_MAP.has(h)||Ms.USER_MAP.set(h,new Ms(h)),Ms.USER_MAP.get(h)}delete(){return this._delegate.delete()}reload(){return this._delegate.reload()}toJSON(){return this._delegate.toJSON()}getIdTokenResult(h){return this._delegate.getIdTokenResult(h)}getIdToken(h){return this._delegate.getIdToken(h)}linkAndRetrieveDataWithCredential(h){return this.linkWithCredential(h)}linkWithCredential(h){var g=this;return(0,E.Z)(function*(){return As(g.auth,Vc(g._delegate,h))})()}linkWithPhoneNumber(h,g){var C=this;return(0,E.Z)(function*(){return oh(C.auth,function Kn(_,h,g){return vi.apply(this,arguments)}(C._delegate,h,g))})()}linkWithPopup(h){var g=this;return(0,E.Z)(function*(){return As(g.auth,function nf(_,h,g){return kl.apply(this,arguments)}(g._delegate,h,mu))})()}linkWithRedirect(h){var g=this;return(0,E.Z)(function*(){return yield yf($n(g.auth)),Qp(g._delegate,h,mu)})()}reauthenticateAndRetrieveDataWithCredential(h){return this.reauthenticateWithCredential(h)}reauthenticateWithCredential(h){var g=this;return(0,E.Z)(function*(){return As(g.auth,Yr(g._delegate,h))})()}reauthenticateWithPhoneNumber(h,g){return oh(this.auth,function zc(_,h,g){return Ko.apply(this,arguments)}(this._delegate,h,g))}reauthenticateWithPopup(h){return As(this.auth,function Ca(_,h,g){return tf.apply(this,arguments)}(this._delegate,h,mu))}reauthenticateWithRedirect(h){var g=this;return(0,E.Z)(function*(){return yield yf($n(g.auth)),Yp(g._delegate,h,mu)})()}sendEmailVerification(h){return function oc(_,h){return Na.apply(this,arguments)}(this._delegate,h)}unlink(h){var g=this;return(0,E.Z)(function*(){return yield function Mt(_,h){return rn.apply(this,arguments)}(g._delegate,h),g})()}updateEmail(h){return function qe(_,h){return ri((0,$.m9)(_),h,null)}(this._delegate,h)}updatePassword(h){return function br(_,h){return ri((0,$.m9)(_),null,h)}(this._delegate,h)}updatePhoneNumber(h){return function hu(_,h){return $d.apply(this,arguments)}(this._delegate,h)}updateProfile(h){return function Al(_,h){return Ru.apply(this,arguments)}(this._delegate,h)}verifyBeforeUpdateEmail(h,g){return function ya(_,h,g){return ou.apply(this,arguments)}(this._delegate,h,g)}get emailVerified(){return this._delegate.emailVerified}get isAnonymous(){return this._delegate.isAnonymous}get metadata(){return this._delegate.metadata}get phoneNumber(){return this._delegate.phoneNumber}get providerData(){return this._delegate.providerData}get refreshToken(){return this._delegate.refreshToken}get tenantId(){return this._delegate.tenantId}get displayName(){return this._delegate.displayName}get email(){return this._delegate.email}get photoURL(){return this._delegate.photoURL}get providerId(){return this._delegate.providerId}get uid(){return this._delegate.uid}get auth(){return this._delegate.auth}}Ms.USER_MAP=new WeakMap;const _c=Te;let xs=(()=>{class _{constructor(g,C){if(this.app=g,C.isInitialized())return this._delegate=C.getImmediate(),void this.linkUnderlyingAuth();const{apiKey:k}=g.options;_c(k,"invalid-api-key",{appName:g.name}),_c(k,"invalid-api-key",{appName:g.name});const H=typeof window<"u"?mu:void 0;this._delegate=C.initialize({options:{persistence:Kv(k,g.name),popupRedirectResolver:H}}),this._delegate._updateErrorMap(gt),this.linkUnderlyingAuth()}get emulatorConfig(){return this._delegate.emulatorConfig}get currentUser(){return this._delegate.currentUser?Ms.getOrCreate(this._delegate.currentUser):null}get languageCode(){return this._delegate.languageCode}set languageCode(g){this._delegate.languageCode=g}get settings(){return this._delegate.settings}get tenantId(){return this._delegate.tenantId}set tenantId(g){this._delegate.tenantId=g}useDeviceLanguage(){this._delegate.useDeviceLanguage()}signOut(){return this._delegate.signOut()}useEmulator(g,C){!function Zs(_,h,g){const C=$n(_);Te(C._canInitEmulator,C,"emulator-config-failed"),Te(/^https?:\/\//.test(h),C,"invalid-emulator-scheme");const k=!!g?.disableWarnings,H=hi(h),{host:he,port:Ie}=function aa(_){const h=hi(_),g=/(\/\/)?([^?#/]+)/.exec(_.substr(h.length));if(!g)return{host:"",port:null};const C=g[2].split("@").pop()||"",k=/^(\[[^\]]+\])(:|$)/.exec(C);if(k){const H=k[1];return{host:H,port:Ki(C.substr(H.length+1))}}{const[H,he]=C.split(":");return{host:H,port:Ki(he)}}}(h);C.config.emulator={url:`${H}//${he}${null===Ie?"":`:${Ie}`}/`},C.settings.appVerificationDisabledForTesting=!0,C.emulatorConfig=Object.freeze({host:he,port:Ie,protocol:H.replace(":",""),options:Object.freeze({disableWarnings:k})}),k||function Go(){function _(){const h=document.createElement("p"),g=h.style;h.innerText="Running in emulator mode. Do not use with production credentials.",g.position="fixed",g.width="100%",g.backgroundColor="#ffffff",g.border=".1em solid #000000",g.color="#b50000",g.bottom="0px",g.left="0px",g.margin="0px",g.zIndex="10000",g.textAlign="center",h.classList.add("firebase-emulator-warning"),document.body.appendChild(h)}typeof console<"u"&&"function"==typeof console.info&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&("loading"===document.readyState?window.addEventListener("DOMContentLoaded",_):_())}()}(this._delegate,g,C)}applyActionCode(g){return function jr(_,h){return ji.apply(this,arguments)}(this._delegate,g)}checkActionCode(g){return nc(this._delegate,g)}confirmPasswordReset(g,C){return function Qs(_,h,g){return pa.apply(this,arguments)}(this._delegate,g,C)}createUserWithEmailAndPassword(g,C){var k=this;return(0,E.Z)(function*(){return As(k._delegate,function ma(_,h,g){return Cn.apply(this,arguments)}(k._delegate,g,C))})()}fetchProvidersForEmail(g){return this.fetchSignInMethodsForEmail(g)}fetchSignInMethodsForEmail(g){return function Mu(_,h){return xu.apply(this,arguments)}(this._delegate,g)}isSignInWithEmailLink(g){return function rc(_,h){const g=fn.parseLink(h);return"EMAIL_SIGNIN"===g?.operation}(0,g)}getRedirectResult(){var g=this;return(0,E.Z)(function*(){_c(Wl(),g._delegate,"operation-not-supported-in-this-environment");const C=yield function ju(_,h){return Ba.apply(this,arguments)}(g._delegate,mu);return C?As(g._delegate,Promise.resolve(C)):{credential:null,user:null}})()}addFrameworkForLogging(g){!function $v(_,h){$n(_)._logFramework(h)}(this._delegate,g)}onAuthStateChanged(g,C,k){const{next:H,error:he,complete:Ie}=ag(g,C,k);return this._delegate.onAuthStateChanged(H,he,Ie)}onIdTokenChanged(g,C,k){const{next:H,error:he,complete:Ie}=ag(g,C,k);return this._delegate.onIdTokenChanged(H,he,Ie)}sendSignInLinkToEmail(g,C){return function vo(_,h,g){return su.apply(this,arguments)}(this._delegate,g,C)}sendPasswordResetEmail(g,C){return function tc(_,h,g){return _i.apply(this,arguments)}(this._delegate,g,C||void 0)}setPersistence(g){var C=this;return(0,E.Z)(function*(){let k;switch(function rl(_,h){ql(Object.values(Jo).includes(h),_,"invalid-persistence-type"),(0,$.b$)()?ql(h!==Jo.SESSION,_,"unsupported-persistence-type"):(0,$.UG)()?ql(h===Jo.NONE,_,"unsupported-persistence-type"):th()?ql(h===Jo.NONE||h===Jo.LOCAL&&(0,$.hl)(),_,"unsupported-persistence-type"):ql(h===Jo.NONE||gf(),_,"unsupported-persistence-type")}(C._delegate,g),g){case Jo.SESSION:k=ko;break;case Jo.LOCAL:k=(yield Nn(Ea)._isAvailable())?Ea:uu;break;case Jo.NONE:k=vn;break;default:return Qe("argument-error",{appName:C._delegate.name})}return C._delegate.setPersistence(k)})()}signInAndRetrieveDataWithCredential(g){return this.signInWithCredential(g)}signInAnonymously(){return As(this._delegate,function V(_){return te.apply(this,arguments)}(this._delegate))}signInWithCredential(g){return As(this._delegate,fa(this._delegate,g))}signInWithCustomToken(g){return As(this._delegate,function ni(_,h){return ps.apply(this,arguments)}(this._delegate,g))}signInWithEmailAndPassword(g,C){return As(this._delegate,function iu(_,h,g){return fa((0,$.m9)(_),Ys.credential(h,g))}(this._delegate,g,C))}signInWithEmailLink(g,C){return As(this._delegate,function ui(_,h,g){return Au.apply(this,arguments)}(this._delegate,g,C))}signInWithPhoneNumber(g,C){return oh(this._delegate,function qt(_,h,g){return Vt.apply(this,arguments)}(this._delegate,g,C))}signInWithPopup(g){var C=this;return(0,E.Z)(function*(){return _c(Wl(),C._delegate,"operation-not-supported-in-this-environment"),As(C._delegate,function Gd(_,h,g){return Kp.apply(this,arguments)}(C._delegate,g,mu))})()}signInWithRedirect(g){var C=this;return(0,E.Z)(function*(){return _c(Wl(),C._delegate,"operation-not-supported-in-this-environment"),yield yf(C._delegate),Wd(C._delegate,g,mu)})()}updateCurrentUser(g){return this._delegate.updateCurrentUser(g)}verifyPasswordResetCode(g){return function ga(_,h){return Ji.apply(this,arguments)}(this._delegate,g)}unwrap(){return this._delegate}_delete(){return this._delegate._delete()}linkUnderlyingAuth(){this._delegate.wrapped=()=>this}}return _.Persistence=Jo,_})();function ag(_,h,g){let C=_;"function"!=typeof _&&({next:C,error:h,complete:g}=_);const k=C;return{next:he=>k(he&&Ms.getOrCreate(he)),error:h,complete:g}}function Kv(_,h){const g=function ih(_,h){const g=Zl();if(!g)return[];const C=ue(cy,_,h);switch(g.getItem(C)){case Jo.NONE:return[vn];case Jo.LOCAL:return[Ea,ko];case Jo.SESSION:return[ko];default:return[]}}(_,h);if(typeof self<"u"&&!g.includes(Ea)&&g.push(Ea),typeof window<"u")for(const C of[uu,ko])g.includes(C)||g.push(C);return g.includes(vn)||g.push(vn),g}class Yl{constructor(){this.providerId="phone",this._delegate=new fu(ly(w.Z.auth()))}static credential(h,g){return fu.credential(h,g)}verifyPhoneNumber(h,g){return this._delegate.verifyPhoneNumber(h,g)}unwrap(){return this._delegate}}Yl.PHONE_SIGN_IN_METHOD=fu.PHONE_SIGN_IN_METHOD,Yl.PROVIDER_ID=fu.PROVIDER_ID;const Yv=Te;class Qv{constructor(h,g,C=w.Z.app()){var k;Yv(null===(k=C.options)||void 0===k?void 0:k.apiKey,"invalid-api-key",{appName:C.name}),this._delegate=new X(h,g,C.auth()),this.type=this._delegate.type}clear(){this._delegate.clear()}render(){return this._delegate.render()}verify(){return this._delegate.verify()}}!function dy(_){_.INTERNAL.registerComponent(new ve.wA("auth-compat",h=>{const g=h.getProvider("app-compat").getImmediate(),C=h.getProvider("auth");return new xs(g,C)},"PUBLIC").setServiceProps({ActionCodeInfo:{Operation:{EMAIL_SIGNIN:"EMAIL_SIGNIN",PASSWORD_RESET:"PASSWORD_RESET",RECOVER_EMAIL:"RECOVER_EMAIL",REVERT_SECOND_FACTOR_ADDITION:"REVERT_SECOND_FACTOR_ADDITION",VERIFY_AND_CHANGE_EMAIL:"VERIFY_AND_CHANGE_EMAIL",VERIFY_EMAIL:"VERIFY_EMAIL"}},EmailAuthProvider:Ys,FacebookAuthProvider:fs,GithubAuthProvider:Br,GoogleAuthProvider:Is,OAuthProvider:Ri,SAMLAuthProvider:_o,PhoneAuthProvider:Yl,PhoneMultiFactorGenerator:eg,RecaptchaVerifier:Qv,TwitterAuthProvider:Us,Auth:xs,AuthCredential:xi,Error:$.ZR}).setInstantiationMode("LAZY").setMultipleInstances(!1)),_.registerVersion("@firebase/auth-compat","0.4.2")}(w.Z)},6593:(bt,Pe,j)=>{j.d(Pe,{Dx:()=>Xn,b2:()=>Sn,q6:()=>sn});var E=j(5879),w=j(6814);class $ extends w.w_{constructor(){super(...arguments),this.supportsDOMEvents=!0}}class Q extends ${static makeCurrent(){(0,w.HT)(new Q)}onAndCancel(z,Z,ne){return z.addEventListener(Z,ne),()=>{z.removeEventListener(Z,ne)}}dispatchEvent(z,Z){z.dispatchEvent(Z)}remove(z){z.parentNode&&z.parentNode.removeChild(z)}createElement(z,Z){return(Z=Z||this.getDefaultDocument()).createElement(z)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(z){return z.nodeType===Node.ELEMENT_NODE}isShadowRoot(z){return z instanceof DocumentFragment}getGlobalEventTarget(z,Z){return"window"===Z?window:"document"===Z?z:"body"===Z?z.body:null}getBaseHref(z){const Z=function de(){return ae=ae||document.querySelector("base"),ae?ae.getAttribute("href"):null}();return null==Z?null:function ze(G){ve=ve||document.createElement("a"),ve.setAttribute("href",G);const z=ve.pathname;return"/"===z.charAt(0)?z:`/${z}`}(Z)}resetBaseElement(){ae=null}getUserAgent(){return window.navigator.userAgent}getCookie(z){return(0,w.Mx)(document.cookie,z)}}let ve,ae=null,oe=(()=>{class G{build(){return new XMLHttpRequest}}return G.\u0275fac=function(Z){return new(Z||G)},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();const le=new E.OlP("EventManagerPlugins");let _e=(()=>{class G{constructor(Z,ne){this._zone=ne,this._eventNameToPlugin=new Map,Z.forEach(be=>{be.manager=this}),this._plugins=Z.slice().reverse()}addEventListener(Z,ne,be){return this._findPluginFor(ne).addEventListener(Z,ne,be)}getZone(){return this._zone}_findPluginFor(Z){let ne=this._eventNameToPlugin.get(Z);if(ne)return ne;if(ne=this._plugins.find(Xe=>Xe.supports(Z)),!ne)throw new E.vHH(5101,!1);return this._eventNameToPlugin.set(Z,ne),ne}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(le),E.LFG(E.R0b))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();class st{constructor(z){this._doc=z}}const Be="ng-app-id";let gt=(()=>{class G{constructor(Z,ne,be,Xe={}){this.doc=Z,this.appId=ne,this.nonce=be,this.platformId=Xe,this.styleRef=new Map,this.hostNodes=new Set,this.styleNodesInDOM=this.collectServerRenderedStyles(),this.platformIsServer=(0,w.PM)(Xe),this.resetHostNodes()}addStyles(Z){for(const ne of Z)1===this.changeUsageCount(ne,1)&&this.onStyleAdded(ne)}removeStyles(Z){for(const ne of Z)this.changeUsageCount(ne,-1)<=0&&this.onStyleRemoved(ne)}ngOnDestroy(){const Z=this.styleNodesInDOM;Z&&(Z.forEach(ne=>ne.remove()),Z.clear());for(const ne of this.getAllStyles())this.onStyleRemoved(ne);this.resetHostNodes()}addHost(Z){this.hostNodes.add(Z);for(const ne of this.getAllStyles())this.addStyleToHost(Z,ne)}removeHost(Z){this.hostNodes.delete(Z)}getAllStyles(){return this.styleRef.keys()}onStyleAdded(Z){for(const ne of this.hostNodes)this.addStyleToHost(ne,Z)}onStyleRemoved(Z){const ne=this.styleRef;ne.get(Z)?.elements?.forEach(be=>be.remove()),ne.delete(Z)}collectServerRenderedStyles(){const Z=this.doc.head?.querySelectorAll(`style[${Be}="${this.appId}"]`);if(Z?.length){const ne=new Map;return Z.forEach(be=>{null!=be.textContent&&ne.set(be.textContent,be)}),ne}return null}changeUsageCount(Z,ne){const be=this.styleRef;if(be.has(Z)){const Xe=be.get(Z);return Xe.usage+=ne,Xe.usage}return be.set(Z,{usage:ne,elements:[]}),ne}getStyleElement(Z,ne){const be=this.styleNodesInDOM,Xe=be?.get(ne);if(Xe?.parentNode===Z)return be.delete(ne),Xe.removeAttribute(Be),Xe;{const pt=this.doc.createElement("style");return this.nonce&&pt.setAttribute("nonce",this.nonce),pt.textContent=ne,this.platformIsServer&&pt.setAttribute(Be,this.appId),pt}}addStyleToHost(Z,ne){const be=this.getStyleElement(Z,ne);Z.appendChild(be);const Xe=this.styleRef,pt=Xe.get(ne)?.elements;pt?pt.push(be):Xe.set(ne,{elements:[be],usage:1})}resetHostNodes(){const Z=this.hostNodes;Z.clear(),Z.add(this.doc.head)}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(w.K0),E.LFG(E.AFp),E.LFG(E.Ojb,8),E.LFG(E.Lbi))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();const et={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/MathML/"},xe=/%COMP%/g,Qe=new E.OlP("RemoveStylesOnCompDestroy",{providedIn:"root",factory:()=>!1});function nt(G,z){return z.map(Z=>Z.replace(xe,G))}let it=(()=>{class G{constructor(Z,ne,be,Xe,pt,Yt,Wt,Rt=null){this.eventManager=Z,this.sharedStylesHost=ne,this.appId=be,this.removeStylesOnCompDestroy=Xe,this.doc=pt,this.platformId=Yt,this.ngZone=Wt,this.nonce=Rt,this.rendererByCompId=new Map,this.platformIsServer=(0,w.PM)(Yt),this.defaultRenderer=new Te(Z,pt,Wt,this.platformIsServer)}createRenderer(Z,ne){if(!Z||!ne)return this.defaultRenderer;this.platformIsServer&&ne.encapsulation===E.ifc.ShadowDom&&(ne={...ne,encapsulation:E.ifc.Emulated});const be=this.getOrCreateRenderer(Z,ne);return be instanceof Qn?be.applyToHost(Z):be instanceof Sr&&be.applyStyles(),be}getOrCreateRenderer(Z,ne){const be=this.rendererByCompId;let Xe=be.get(ne.id);if(!Xe){const pt=this.doc,Yt=this.ngZone,Wt=this.eventManager,Rt=this.sharedStylesHost,cn=this.removeStylesOnCompDestroy,dr=this.platformIsServer;switch(ne.encapsulation){case E.ifc.Emulated:Xe=new Qn(Wt,Rt,ne,this.appId,cn,pt,Yt,dr);break;case E.ifc.ShadowDom:return new _n(Wt,Rt,Z,ne,pt,Yt,this.nonce,dr);default:Xe=new Sr(Wt,Rt,ne,cn,pt,Yt,dr)}be.set(ne.id,Xe)}return Xe}ngOnDestroy(){this.rendererByCompId.clear()}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(_e),E.LFG(gt),E.LFG(E.AFp),E.LFG(Qe),E.LFG(w.K0),E.LFG(E.Lbi),E.LFG(E.R0b),E.LFG(E.Ojb))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();class Te{constructor(z,Z,ne,be){this.eventManager=z,this.doc=Z,this.ngZone=ne,this.platformIsServer=be,this.data=Object.create(null),this.destroyNode=null}destroy(){}createElement(z,Z){return Z?this.doc.createElementNS(et[Z]||Z,z):this.doc.createElement(z)}createComment(z){return this.doc.createComment(z)}createText(z){return this.doc.createTextNode(z)}appendChild(z,Z){(Wn(z)?z.content:z).appendChild(Z)}insertBefore(z,Z,ne){z&&(Wn(z)?z.content:z).insertBefore(Z,ne)}removeChild(z,Z){z&&z.removeChild(Z)}selectRootElement(z,Z){let ne="string"==typeof z?this.doc.querySelector(z):z;if(!ne)throw new E.vHH(-5104,!1);return Z||(ne.textContent=""),ne}parentNode(z){return z.parentNode}nextSibling(z){return z.nextSibling}setAttribute(z,Z,ne,be){if(be){Z=be+":"+Z;const Xe=et[be];Xe?z.setAttributeNS(Xe,Z,ne):z.setAttribute(Z,ne)}else z.setAttribute(Z,ne)}removeAttribute(z,Z,ne){if(ne){const be=et[ne];be?z.removeAttributeNS(be,Z):z.removeAttribute(`${ne}:${Z}`)}else z.removeAttribute(Z)}addClass(z,Z){z.classList.add(Z)}removeClass(z,Z){z.classList.remove(Z)}setStyle(z,Z,ne,be){be&(E.JOm.DashCase|E.JOm.Important)?z.style.setProperty(Z,ne,be&E.JOm.Important?"important":""):z.style[Z]=ne}removeStyle(z,Z,ne){ne&E.JOm.DashCase?z.style.removeProperty(Z):z.style[Z]=""}setProperty(z,Z,ne){z[Z]=ne}setValue(z,Z){z.nodeValue=Z}listen(z,Z,ne){if("string"==typeof z&&!(z=(0,w.q)().getGlobalEventTarget(this.doc,z)))throw new Error(`Unsupported event target ${z} for event ${Z}`);return this.eventManager.addEventListener(z,Z,this.decoratePreventDefault(ne))}decoratePreventDefault(z){return Z=>{if("__ngUnwrap__"===Z)return z;!1===(this.platformIsServer?this.ngZone.runGuarded(()=>z(Z)):z(Z))&&Z.preventDefault()}}}function Wn(G){return"TEMPLATE"===G.tagName&&void 0!==G.content}class _n extends Te{constructor(z,Z,ne,be,Xe,pt,Yt,Wt){super(z,Xe,pt,Wt),this.sharedStylesHost=Z,this.hostEl=ne,this.shadowRoot=ne.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const Rt=nt(be.id,be.styles);for(const cn of Rt){const dr=document.createElement("style");Yt&&dr.setAttribute("nonce",Yt),dr.textContent=cn,this.shadowRoot.appendChild(dr)}}nodeOrShadowRoot(z){return z===this.hostEl?this.shadowRoot:z}appendChild(z,Z){return super.appendChild(this.nodeOrShadowRoot(z),Z)}insertBefore(z,Z,ne){return super.insertBefore(this.nodeOrShadowRoot(z),Z,ne)}removeChild(z,Z){return super.removeChild(this.nodeOrShadowRoot(z),Z)}parentNode(z){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(z)))}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}}class Sr extends Te{constructor(z,Z,ne,be,Xe,pt,Yt,Wt){super(z,Xe,pt,Yt),this.sharedStylesHost=Z,this.removeStylesOnCompDestroy=be,this.styles=Wt?nt(Wt,ne.styles):ne.styles}applyStyles(){this.sharedStylesHost.addStyles(this.styles)}destroy(){this.removeStylesOnCompDestroy&&this.sharedStylesHost.removeStyles(this.styles)}}class Qn extends Sr{constructor(z,Z,ne,be,Xe,pt,Yt,Wt){const Rt=be+"-"+ne.id;super(z,Z,ne,Xe,pt,Yt,Wt,Rt),this.contentAttr=function ye(G){return"_ngcontent-%COMP%".replace(xe,G)}(Rt),this.hostAttr=function Le(G){return"_nghost-%COMP%".replace(xe,G)}(Rt)}applyToHost(z){this.applyStyles(),this.setAttribute(z,this.hostAttr,"")}createElement(z,Z){const ne=super.createElement(z,Z);return super.setAttribute(ne,this.contentAttr,""),ne}}let Os=(()=>{class G extends st{constructor(Z){super(Z)}supports(Z){return!0}addEventListener(Z,ne,be){return Z.addEventListener(ne,be,!1),()=>this.removeEventListener(Z,ne,be)}removeEventListener(Z,ne,be){return Z.removeEventListener(ne,be)}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(w.K0))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();const Gr=["alt","control","meta","shift"],Re={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},Fe={alt:G=>G.altKey,control:G=>G.ctrlKey,meta:G=>G.metaKey,shift:G=>G.shiftKey};let Ke=(()=>{class G extends st{constructor(Z){super(Z)}supports(Z){return null!=G.parseEventName(Z)}addEventListener(Z,ne,be){const Xe=G.parseEventName(ne),pt=G.eventCallback(Xe.fullKey,be,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>(0,w.q)().onAndCancel(Z,Xe.domEventName,pt))}static parseEventName(Z){const ne=Z.toLowerCase().split("."),be=ne.shift();if(0===ne.length||"keydown"!==be&&"keyup"!==be)return null;const Xe=G._normalizeKey(ne.pop());let pt="",Yt=ne.indexOf("code");if(Yt>-1&&(ne.splice(Yt,1),pt="code."),Gr.forEach(Rt=>{const cn=ne.indexOf(Rt);cn>-1&&(ne.splice(cn,1),pt+=Rt+".")}),pt+=Xe,0!=ne.length||0===Xe.length)return null;const Wt={};return Wt.domEventName=be,Wt.fullKey=pt,Wt}static matchEventFullKeyCode(Z,ne){let be=Re[Z.key]||Z.key,Xe="";return ne.indexOf("code.")>-1&&(be=Z.code,Xe="code."),!(null==be||!be)&&(be=be.toLowerCase()," "===be?be="space":"."===be&&(be="dot"),Gr.forEach(pt=>{pt!==be&&(0,Fe[pt])(Z)&&(Xe+=pt+".")}),Xe+=be,Xe===ne)}static eventCallback(Z,ne,be){return Xe=>{G.matchEventFullKeyCode(Xe,Z)&&be.runGuarded(()=>ne(Xe))}}static _normalizeKey(Z){return"esc"===Z?"escape":Z}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(w.K0))},G.\u0275prov=E.Yz7({token:G,factory:G.\u0275fac}),G})();const sn=(0,E.eFA)(E._c5,"browser",[{provide:E.Lbi,useValue:w.bD},{provide:E.g9A,useValue:function At(){Q.makeCurrent()},multi:!0},{provide:w.K0,useFactory:function Gt(){return(0,E.RDi)(document),document},deps:[]}]),Hn=new E.OlP(""),Jn=[{provide:E.rWj,useClass:class Me{addToWindow(z){E.dqk.getAngularTestability=(ne,be=!0)=>{const Xe=z.findTestabilityInTree(ne,be);if(null==Xe)throw new E.vHH(5103,!1);return Xe},E.dqk.getAllAngularTestabilities=()=>z.getAllTestabilities(),E.dqk.getAllAngularRootElements=()=>z.getAllRootElements(),E.dqk.frameworkStabilizers||(E.dqk.frameworkStabilizers=[]),E.dqk.frameworkStabilizers.push(ne=>{const be=E.dqk.getAllAngularTestabilities();let Xe=be.length,pt=!1;const Yt=function(Wt){pt=pt||Wt,Xe--,0==Xe&&ne(pt)};be.forEach(Wt=>{Wt.whenStable(Yt)})})}findTestabilityInTree(z,Z,ne){return null==Z?null:z.getTestability(Z)??(ne?(0,w.q)().isShadowRoot(Z)?this.findTestabilityInTree(z,Z.host,!0):this.findTestabilityInTree(z,Z.parentElement,!0):null)}},deps:[]},{provide:E.lri,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]},{provide:E.dDg,useClass:E.dDg,deps:[E.R0b,E.eoX,E.rWj]}],Lt=[{provide:E.zSh,useValue:"root"},{provide:E.qLn,useFactory:function sr(){return new E.qLn},deps:[]},{provide:le,useClass:Os,multi:!0,deps:[w.K0,E.R0b,E.Lbi]},{provide:le,useClass:Ke,multi:!0,deps:[w.K0]},it,gt,_e,{provide:E.FYo,useExisting:it},{provide:w.JF,useClass:oe,deps:[]},[]];let Sn=(()=>{class G{constructor(Z){}static withServerTransition(Z){return{ngModule:G,providers:[{provide:E.AFp,useValue:Z.appId}]}}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(Hn,12))},G.\u0275mod=E.oAB({type:G}),G.\u0275inj=E.cJS({providers:[...Lt,...Jn],imports:[w.ez,E.hGG]}),G})(),Xn=(()=>{class G{constructor(Z){this._doc=Z}getTitle(){return this._doc.title}setTitle(Z){this._doc.title=Z||""}}return G.\u0275fac=function(Z){return new(Z||G)(E.LFG(w.K0))},G.\u0275prov=E.Yz7({token:G,factory:function(Z){let ne=null;return ne=Z?new Z:function Wr(){return new Xn((0,E.LFG)(w.K0))}(),ne},providedIn:"root"}),G})();typeof window<"u"&&window},7045:(bt,Pe,j)=>{j.d(Pe,{F0:()=>$i,rH:()=>Ou,Bz:()=>$c,lC:()=>Ls});var E=j(5879),w=j(5592),$=j(4674),ae=j(2459),de=j(2096),ve=j(5619),ze=j(7453),Me=j(2737),oe=j(7400),le=j(4564),_e=j(2714),st=j(8251),Be=j(7103);function gt(...I){const S=(0,le.yG)(I),v=(0,le.jO)(I),{args:x,keys:L}=(0,ze.D)(I);if(0===x.length)return(0,ae.D)([],S);const Y=new w.y(function et(I,S,v=Me.y){return x=>{xe(S,()=>{const{length:L}=I,Y=new Array(L);let X=L,Ee=L;for(let lt=0;lt<L;lt++)xe(S,()=>{const qt=(0,ae.D)(I[lt],S);let Vt=!1;qt.subscribe((0,st.x)(x,Kn=>{Y[lt]=Kn,Vt||(Vt=!0,Ee--),Ee||x.next(v(Y.slice()))},()=>{--X||x.complete()}))},x)},x)}}(x,S,L?X=>(0,_e.n)(L,X):Me.y));return v?Y.pipe((0,oe.Z)(v)):Y}function xe(I,S,v){I?(0,Be.f)(v,I,S):S()}var Ge=j(6973),Oe=j(5211),yt=j(4829);function Ae(I){return new w.y(S=>{(0,yt.Xf)(I()).subscribe(S)})}var Qe=j(8407);function ye(I,S){const v=(0,$.m)(I)?I:()=>I,x=L=>L.error(v());return new w.y(S?L=>S.schedule(x,0,L):x)}var Le=j(6232),nt=j(7394),it=j(9360);function Te(){return(0,it.e)((I,S)=>{let v=null;I._refCount++;const x=(0,st.x)(S,void 0,void 0,void 0,()=>{if(!I||I._refCount<=0||0<--I._refCount)return void(v=null);const L=I._connection,Y=v;v=null,L&&(!Y||L===Y)&&L.unsubscribe(),S.unsubscribe()});I.subscribe(x),x.closed||(v=I.connect())})}class _t extends w.y{constructor(S,v){super(),this.source=S,this.subjectFactory=v,this._subject=null,this._refCount=0,this._connection=null,(0,it.A)(S)&&(this.lift=S.lift)}_subscribe(S){return this.getSubject().subscribe(S)}getSubject(){const S=this._subject;return(!S||S.isStopped)&&(this._subject=this.subjectFactory()),this._subject}_teardown(){this._refCount=0;const{_connection:S}=this;this._subject=this._connection=null,S?.unsubscribe()}connect(){let S=this._connection;if(!S){S=this._connection=new nt.w0;const v=this.getSubject();S.add(this.source.subscribe((0,st.x)(v,void 0,()=>{this._teardown(),v.complete()},x=>{this._teardown(),v.error(x)},()=>this._teardown()))),S.closed&&(this._connection=null,S=nt.w0.EMPTY)}return S}refCount(){return Te()(this)}}var pn=j(8645),Wn=j(6814),_n=j(7398),Sr=j(4664),Qn=j(8180),Os=j(7921),Gr=j(2181),Re=j(1631),Fe=j(1374),Ke=j(6328),He=j(9397);function We(I){return(0,it.e)((S,v)=>{let Y,x=null,L=!1;x=S.subscribe((0,st.x)(v,void 0,void 0,X=>{Y=(0,yt.Xf)(I(X,We(I)(S))),x?(x.unsubscribe(),x=null,Y.subscribe(v)):L=!0})),L&&(x.unsubscribe(),x=null,Y.subscribe(v))})}var tt=j(6699),Dt=j(3572);function At(I){return I<=0?()=>Le.E:(0,it.e)((S,v)=>{let x=[];S.subscribe((0,st.x)(v,L=>{x.push(L),I<x.length&&x.shift()},()=>{for(const L of x)v.next(L);v.complete()},void 0,()=>{x=null}))})}var sr=j(3026),sn=j(4716),Hn=j(7537),Jn=j(6593);const Lt="primary",Sn=Symbol("RouteTitle");class zr{constructor(S){this.params=S||{}}has(S){return Object.prototype.hasOwnProperty.call(this.params,S)}get(S){if(this.has(S)){const v=this.params[S];return Array.isArray(v)?v[0]:v}return null}getAll(S){if(this.has(S)){const v=this.params[S];return Array.isArray(v)?v:[v]}return[]}get keys(){return Object.keys(this.params)}}function Er(I){return new zr(I)}function fo(I,S,v){const x=v.path.split("/");if(x.length>I.length||"full"===v.pathMatch&&(S.hasChildren()||x.length<I.length))return null;const L={};for(let Y=0;Y<x.length;Y++){const X=x[Y],Ee=I[Y];if(X.startsWith(":"))L[X.substring(1)]=Ee;else if(X!==Ee.path)return null}return{consumed:I.slice(0,x.length),posParams:L}}function Xn(I,S){const v=I?Object.keys(I):void 0,x=S?Object.keys(S):void 0;if(!v||!x||v.length!=x.length)return!1;let L;for(let Y=0;Y<v.length;Y++)if(L=v[Y],!lr(I[L],S[L]))return!1;return!0}function lr(I,S){if(Array.isArray(I)&&Array.isArray(S)){if(I.length!==S.length)return!1;const v=[...I].sort(),x=[...S].sort();return v.every((L,Y)=>x[Y]===L)}return I===S}function Ar(I){return I.length>0?I[I.length-1]:null}function mt(I){return function Q(I){return!!I&&(I instanceof w.y||(0,$.m)(I.lift)&&(0,$.m)(I.subscribe))}(I)?I:(0,E.QGY)(I)?(0,ae.D)(Promise.resolve(I)):(0,de.of)(I)}const zt={exact:function ei(I,S,v){if(!hs(I.segments,S.segments)||!bn(I.segments,S.segments,v)||I.numberOfChildren!==S.numberOfChildren)return!1;for(const x in S.children)if(!I.children[x]||!ei(I.children[x],S.children[x],v))return!1;return!0},subset:wr},Ht={exact:function fr(I,S){return Xn(I,S)},subset:function An(I,S){return Object.keys(S).length<=Object.keys(I).length&&Object.keys(S).every(v=>lr(I[v],S[v]))},ignored:()=>!0};function Un(I,S,v){return zt[v.paths](I.root,S.root,v.matrixParams)&&Ht[v.queryParams](I.queryParams,S.queryParams)&&!("exact"===v.fragment&&I.fragment!==S.fragment)}function wr(I,S,v){return Ps(I,S,S.segments,v)}function Ps(I,S,v,x){if(I.segments.length>v.length){const L=I.segments.slice(0,v.length);return!(!hs(L,v)||S.hasChildren()||!bn(L,v,x))}if(I.segments.length===v.length){if(!hs(I.segments,v)||!bn(I.segments,v,x))return!1;for(const L in S.children)if(!I.children[L]||!wr(I.children[L],S.children[L],x))return!1;return!0}{const L=v.slice(0,I.segments.length),Y=v.slice(I.segments.length);return!!(hs(I.segments,L)&&bn(I.segments,L,x)&&I.children[Lt])&&Ps(I.children[Lt],S,Y,x)}}function bn(I,S,v){return S.every((x,L)=>Ht[v](I[L].parameters,x.parameters))}class kr{constructor(S=new xt([],{}),v={},x=null){this.root=S,this.queryParams=v,this.fragment=x}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return Mr.serialize(this)}}class xt{constructor(S,v){this.segments=S,this.children=v,this.parent=null,Object.values(v).forEach(x=>x.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return Gn(this)}}class Ai{constructor(S,v){this.path=S,this.parameters=v}get parameterMap(){return this._parameterMap||(this._parameterMap=Er(this.parameters)),this._parameterMap}toString(){return Z(this)}}function hs(I,S){return I.length===S.length&&I.every((v,x)=>v.path===S[x].path)}let li=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:function(){return new Cr},providedIn:"root"}),I})();class Cr{parse(S){const v=new Es(S);return new kr(v.parseRootSegment(),v.parseQueryParams(),v.parseFragment())}serialize(S){const v=`/${Li(S.root,!0)}`,x=function be(I){const S=Object.keys(I).map(v=>{const x=I[v];return Array.isArray(x)?x.map(L=>`${qr(v)}=${qr(L)}`).join("&"):`${qr(v)}=${qr(x)}`}).filter(v=>!!v);return S.length?`?${S.join("&")}`:""}(S.queryParams);return`${v}${x}${"string"==typeof S.fragment?`#${function vn(I){return encodeURI(I)}(S.fragment)}`:""}`}}const Mr=new Cr;function Gn(I){return I.segments.map(S=>Z(S)).join("/")}function Li(I,S){if(!I.hasChildren())return Gn(I);if(S){const v=I.children[Lt]?Li(I.children[Lt],!1):"",x=[];return Object.entries(I.children).forEach(([L,Y])=>{L!==Lt&&x.push(`${L}:${Li(Y,!1)}`)}),x.length>0?`${v}(${x.join("//")})`:v}{const v=function qi(I,S){let v=[];return Object.entries(I.children).forEach(([x,L])=>{x===Lt&&(v=v.concat(S(L,x)))}),Object.entries(I.children).forEach(([x,L])=>{x!==Lt&&(v=v.concat(S(L,x)))}),v}(I,(x,L)=>L===Lt?[Li(I.children[Lt],!1)]:[`${L}:${Li(x,!1)}`]);return 1===Object.keys(I.children).length&&null!=I.children[Lt]?`${Gn(I)}/${v[0]}`:`${Gn(I)}/(${v.join("//")})`}}function Nn(I){return encodeURIComponent(I).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function qr(I){return Nn(I).replace(/%3B/gi,";")}function ue(I){return Nn(I).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function G(I){return decodeURIComponent(I)}function z(I){return G(I.replace(/\+/g,"%20"))}function Z(I){return`${ue(I.path)}${function ne(I){return Object.keys(I).map(S=>`;${ue(S)}=${ue(I[S])}`).join("")}(I.parameters)}`}const Xe=/^[^\/()?;#]+/;function pt(I){const S=I.match(Xe);return S?S[0]:""}const Yt=/^[^\/()?;=#]+/,Rt=/^[^=?&#]+/,dr=/^[^&#]+/;class Es{constructor(S){this.url=S,this.remaining=S}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new xt([],{}):new xt([],this.parseChildren())}parseQueryParams(){const S={};if(this.consumeOptional("?"))do{this.parseQueryParam(S)}while(this.consumeOptional("&"));return S}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const S=[];for(this.peekStartsWith("(")||S.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),S.push(this.parseSegment());let v={};this.peekStartsWith("/(")&&(this.capture("/"),v=this.parseParens(!0));let x={};return this.peekStartsWith("(")&&(x=this.parseParens(!1)),(S.length>0||Object.keys(v).length>0)&&(x[Lt]=new xt(S,v)),x}parseSegment(){const S=pt(this.remaining);if(""===S&&this.peekStartsWith(";"))throw new E.vHH(4009,!1);return this.capture(S),new Ai(G(S),this.parseMatrixParams())}parseMatrixParams(){const S={};for(;this.consumeOptional(";");)this.parseParam(S);return S}parseParam(S){const v=function Wt(I){const S=I.match(Yt);return S?S[0]:""}(this.remaining);if(!v)return;this.capture(v);let x="";if(this.consumeOptional("=")){const L=pt(this.remaining);L&&(x=L,this.capture(x))}S[G(v)]=G(x)}parseQueryParam(S){const v=function cn(I){const S=I.match(Rt);return S?S[0]:""}(this.remaining);if(!v)return;this.capture(v);let x="";if(this.consumeOptional("=")){const X=function Mi(I){const S=I.match(dr);return S?S[0]:""}(this.remaining);X&&(x=X,this.capture(x))}const L=z(v),Y=z(x);if(S.hasOwnProperty(L)){let X=S[L];Array.isArray(X)||(X=[X],S[L]=X),X.push(Y)}else S[L]=Y}parseParens(S){const v={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const x=pt(this.remaining),L=this.remaining[x.length];if("/"!==L&&")"!==L&&";"!==L)throw new E.vHH(4010,!1);let Y;x.indexOf(":")>-1?(Y=x.slice(0,x.indexOf(":")),this.capture(Y),this.capture(":")):S&&(Y=Lt);const X=this.parseChildren();v[Y]=1===Object.keys(X).length?X[Lt]:new xt([],X),this.consumeOptional("//")}return v}peekStartsWith(S){return this.remaining.startsWith(S)}consumeOptional(S){return!!this.peekStartsWith(S)&&(this.remaining=this.remaining.substring(S.length),!0)}capture(S){if(!this.consumeOptional(S))throw new E.vHH(4011,!1)}}function xr(I){return I.segments.length>0?new xt([],{[Lt]:I}):I}function Ue(I){const S={};for(const x of Object.keys(I.children)){const Y=Ue(I.children[x]);if(x===Lt&&0===Y.segments.length&&Y.hasChildren())for(const[X,Ee]of Object.entries(Y.children))S[X]=Ee;else(Y.segments.length>0||Y.hasChildren())&&(S[x]=Y)}return function Se(I){if(1===I.numberOfChildren&&I.children[Lt]){const S=I.children[Lt];return new xt(I.segments.concat(S.segments),S.children)}return I}(new xt(I.segments,S))}function rt(I){return I instanceof kr}function Qt(I){let S;const L=xr(function v(Y){const X={};for(const lt of Y.children){const qt=v(lt);X[lt.outlet]=qt}const Ee=new xt(Y.url,X);return Y===I&&(S=Ee),Ee}(I.root));return S??L}function ln(I,S,v,x){let L=I;for(;L.parent;)L=L.parent;if(0===S.length)return pr(L,L,L,v,x);const Y=function $o(I){if("string"==typeof I[0]&&1===I.length&&"/"===I[0])return new qs(!0,0,I);let S=0,v=!1;const x=I.reduce((L,Y,X)=>{if("object"==typeof Y&&null!=Y){if(Y.outlets){const Ee={};return Object.entries(Y.outlets).forEach(([lt,qt])=>{Ee[lt]="string"==typeof qt?qt.split("/"):qt}),[...L,{outlets:Ee}]}if(Y.segmentPath)return[...L,Y.segmentPath]}return"string"!=typeof Y?[...L,Y]:0===X?(Y.split("/").forEach((Ee,lt)=>{0==lt&&"."===Ee||(0==lt&&""===Ee?v=!0:".."===Ee?S++:""!=Ee&&L.push(Ee))}),L):[...L,Y]},[]);return new qs(v,S,x)}(S);if(Y.toRoot())return pr(L,L,new xt([],{}),v,x);const X=function di(I,S,v){if(I.isAbsolute)return new So(S,!0,0);if(!v)return new So(S,!1,NaN);if(null===v.parent)return new So(v,!0,0);const x=mn(I.commands[0])?0:1;return function Ja(I,S,v){let x=I,L=S,Y=v;for(;Y>L;){if(Y-=L,x=x.parent,!x)throw new E.vHH(4005,!1);L=x.segments.length}return new So(x,!1,L-Y)}(v,v.segments.length-1+x,I.numberOfDoubleDots)}(Y,L,I),Ee=X.processChildren?ks(X.segmentGroup,X.index,Y.commands):Ao(X.segmentGroup,X.index,Y.commands);return pr(L,X.segmentGroup,Ee,v,x)}function mn(I){return"object"==typeof I&&null!=I&&!I.outlets&&!I.segmentPath}function On(I){return"object"==typeof I&&null!=I&&I.outlets}function pr(I,S,v,x,L){let X,Y={};x&&Object.entries(x).forEach(([lt,qt])=>{Y[lt]=Array.isArray(qt)?qt.map(Vt=>`${Vt}`):`${qt}`}),X=I===S?v:ws(I,S,v);const Ee=xr(Ue(X));return new kr(Ee,Y,L)}function ws(I,S,v){const x={};return Object.entries(I.children).forEach(([L,Y])=>{x[L]=Y===S?v:ws(Y,S,v)}),new xt(I.segments,x)}class qs{constructor(S,v,x){if(this.isAbsolute=S,this.numberOfDoubleDots=v,this.commands=x,S&&x.length>0&&mn(x[0]))throw new E.vHH(4003,!1);const L=x.find(On);if(L&&L!==Ar(x))throw new E.vHH(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class So{constructor(S,v,x){this.segmentGroup=S,this.processChildren=v,this.index=x}}function Ao(I,S,v){if(I||(I=new xt([],{})),0===I.segments.length&&I.hasChildren())return ks(I,S,v);const x=function Xa(I,S,v){let x=0,L=S;const Y={match:!1,pathIndex:0,commandIndex:0};for(;L<I.segments.length;){if(x>=v.length)return Y;const X=I.segments[L],Ee=v[x];if(On(Ee))break;const lt=`${Ee}`,qt=x<v.length-1?v[x+1]:null;if(L>0&&void 0===lt)break;if(lt&&qt&&"object"==typeof qt&&void 0===qt.outlets){if(!oa(lt,qt,X))return Y;x+=2}else{if(!oa(lt,{},X))return Y;x++}L++}return{match:!0,pathIndex:L,commandIndex:x}}(I,S,v),L=v.slice(x.commandIndex);if(x.match&&x.pathIndex<I.segments.length){const Y=new xt(I.segments.slice(0,x.pathIndex),{});return Y.children[Lt]=new xt(I.segments.slice(x.pathIndex),I.children),ks(Y,0,L)}return x.match&&0===L.length?new xt(I.segments,{}):x.match&&!I.hasChildren()?$n(I,S,v):x.match?ks(I,0,L):$n(I,S,v)}function ks(I,S,v){if(0===v.length)return new xt(I.segments,{});{const x=function Zi(I){return On(I[0])?I[0].outlets:{[Lt]:I}}(v),L={};if(!x[Lt]&&I.children[Lt]&&1===I.numberOfChildren&&0===I.children[Lt].segments.length){const Y=ks(I.children[Lt],S,v);return new xt(I.segments,Y.children)}return Object.entries(x).forEach(([Y,X])=>{"string"==typeof X&&(X=[X]),null!==X&&(L[Y]=Ao(I.children[Y],S,X))}),Object.entries(I.children).forEach(([Y,X])=>{void 0===x[Y]&&(L[Y]=X)}),new xt(I.segments,L)}}function $n(I,S,v){const x=I.segments.slice(0,S);let L=0;for(;L<v.length;){const Y=v[L];if(On(Y)){const lt=Mo(Y.outlets);return new xt(x,lt)}if(0===L&&mn(v[0])){x.push(new Ai(I.segments[S].path,eu(v[0]))),L++;continue}const X=On(Y)?Y.outlets[Lt]:`${Y}`,Ee=L<v.length-1?v[L+1]:null;X&&Ee&&mn(Ee)?(x.push(new Ai(X,eu(Ee))),L+=2):(x.push(new Ai(X,{})),L++)}return new xt(x,{})}function Mo(I){const S={};return Object.entries(I).forEach(([v,x])=>{"string"==typeof x&&(x=[x]),null!==x&&(S[v]=$n(new xt([],{}),0,x))}),S}function eu(I){const S={};return Object.entries(I).forEach(([v,x])=>S[v]=`${x}`),S}function oa(I,S,v){return I==v.path&&Xn(S,v.parameters)}const Zs="imperative";class hi{constructor(S,v){this.id=S,this.url=v}}class aa extends hi{constructor(S,v,x="imperative",L=null){super(S,v),this.type=0,this.navigationTrigger=x,this.restoredState=L}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Ki extends hi{constructor(S,v,x){super(S,v),this.urlAfterRedirects=x,this.type=1}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class Go extends hi{constructor(S,v,x,L){super(S,v),this.reason=x,this.code=L,this.type=2}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class xi extends hi{constructor(S,v,x,L){super(S,v),this.reason=x,this.code=L,this.type=16}}class ua extends hi{constructor(S,v,x,L){super(S,v),this.error=x,this.target=L,this.type=3}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class xo extends hi{constructor(S,v,x,L){super(S,v),this.urlAfterRedirects=x,this.state=L,this.type=4}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class tu extends hi{constructor(S,v,x,L){super(S,v),this.urlAfterRedirects=x,this.state=L,this.type=7}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ma extends hi{constructor(S,v,x,L,Y){super(S,v),this.urlAfterRedirects=x,this.state=L,this.shouldActivate=Y,this.type=8}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class dn extends hi{constructor(S,v,x,L){super(S,v),this.urlAfterRedirects=x,this.state=L,this.type=5}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class ti extends hi{constructor(S,v,x,L){super(S,v),this.urlAfterRedirects=x,this.state=L,this.type=6}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class qn{constructor(S){this.route=S,this.type=9}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class go{constructor(S){this.route=S,this.type=10}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class fi{constructor(S){this.snapshot=S,this.type=11}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ca{constructor(S){this.snapshot=S,this.type=12}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class la{constructor(S){this.snapshot=S,this.type=13}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ro{constructor(S){this.snapshot=S,this.type=14}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class mo{constructor(S,v,x){this.routerEvent=S,this.position=v,this.anchor=x,this.type=15}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Rr{constructor(){this.outlet=null,this.route=null,this.injector=null,this.children=new Et,this.attachRef=null}}let Et=(()=>{class I{constructor(){this.contexts=new Map}onChildOutletCreated(v,x){const L=this.getOrCreateContext(v);L.outlet=x,this.contexts.set(v,L)}onChildOutletDestroyed(v){const x=this.getContext(v);x&&(x.outlet=null,x.attachRef=null)}onOutletDeactivated(){const v=this.contexts;return this.contexts=new Map,v}onOutletReAttached(v){this.contexts=v}getOrCreateContext(v){let x=this.getContext(v);return x||(x=new Rr,this.contexts.set(v,x)),x}getContext(v){return this.contexts.get(v)||null}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();class tn{constructor(S){this._root=S}get root(){return this._root.value}parent(S){const v=this.pathFromRoot(S);return v.length>1?v[v.length-2]:null}children(S){const v=er(S,this._root);return v?v.children.map(x=>x.value):[]}firstChild(S){const v=er(S,this._root);return v&&v.children.length>0?v.children[0].value:null}siblings(S){const v=Nr(S,this._root);return v.length<2?[]:v[v.length-2].children.map(L=>L.value).filter(L=>L!==S)}pathFromRoot(S){return Nr(S,this._root).map(v=>v.value)}}function er(I,S){if(I===S.value)return S;for(const v of S.children){const x=er(I,v);if(x)return x}return null}function Nr(I,S){if(I===S.value)return[S];for(const v of S.children){const x=Nr(I,v);if(x.length)return x.unshift(S),x}return[]}class Ur{constructor(S,v){this.value=S,this.children=v}toString(){return`TreeNode(${this.value})`}}function Or(I){const S={};return I&&I.children.forEach(v=>S[v.value.outlet]=v),S}class Fs extends tn{constructor(S,v){super(S),this.snapshot=v,hr(this,S)}toString(){return this.snapshot.toString()}}function Zn(I,S){const v=function Vr(I,S){const X=new Ui([],{},{},"",{},Lt,S,null,{});return new Vi("",new Ur(X,[]))}(0,S),x=new ve.X([new Ai("",{})]),L=new ve.X({}),Y=new ve.X({}),X=new ve.X({}),Ee=new ve.X(""),lt=new pi(x,L,X,Ee,Y,Lt,S,v.root);return lt.snapshot=v.root,new Fs(new Ur(lt,[]),v)}class pi{constructor(S,v,x,L,Y,X,Ee,lt){this.urlSubject=S,this.paramsSubject=v,this.queryParamsSubject=x,this.fragmentSubject=L,this.dataSubject=Y,this.outlet=X,this.component=Ee,this._futureSnapshot=lt,this.title=this.dataSubject?.pipe((0,_n.U)(qt=>qt[Sn]))??(0,de.of)(void 0),this.url=S,this.params=v,this.queryParams=x,this.fragment=L,this.data=Y}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe((0,_n.U)(S=>Er(S)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe((0,_n.U)(S=>Er(S)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function un(I,S="emptyOnly"){const v=I.pathFromRoot;let x=0;if("always"!==S)for(x=v.length-1;x>=1;){const L=v[x],Y=v[x-1];if(L.routeConfig&&""===L.routeConfig.path)x--;else{if(Y.component)break;x--}}return function gi(I){return I.reduce((S,v)=>({params:{...S.params,...v.params},data:{...S.data,...v.data},resolve:{...v.data,...S.resolve,...v.routeConfig?.data,...v._resolvedData}}),{params:{},data:{},resolve:{}})}(v.slice(x))}class Ui{get title(){return this.data?.[Sn]}constructor(S,v,x,L,Y,X,Ee,lt,qt){this.url=S,this.params=v,this.queryParams=x,this.fragment=L,this.data=Y,this.outlet=X,this.component=Ee,this.routeConfig=lt,this._resolve=qt}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Er(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Er(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(x=>x.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Vi extends tn{constructor(S,v){super(v),this.url=S,hr(this,v)}toString(){return Cs(this._root)}}function hr(I,S){S.value._routerState=I,S.children.forEach(v=>hr(I,v))}function Cs(I){const S=I.children.length>0?` { ${I.children.map(Cs).join(", ")} } `:"";return`${I.value}${S}`}function yo(I){if(I.snapshot){const S=I.snapshot,v=I._futureSnapshot;I.snapshot=v,Xn(S.queryParams,v.queryParams)||I.queryParamsSubject.next(v.queryParams),S.fragment!==v.fragment&&I.fragmentSubject.next(v.fragment),Xn(S.params,v.params)||I.paramsSubject.next(v.params),function Wr(I,S){if(I.length!==S.length)return!1;for(let v=0;v<I.length;++v)if(!Xn(I[v],S[v]))return!1;return!0}(S.url,v.url)||I.urlSubject.next(v.url),Xn(S.data,v.data)||I.dataSubject.next(v.data)}else I.snapshot=I._futureSnapshot,I.dataSubject.next(I._futureSnapshot.data)}function oi(I,S){const v=Xn(I.params,S.params)&&function po(I,S){return hs(I,S)&&I.every((v,x)=>Xn(v.parameters,S[x].parameters))}(I.url,S.url);return v&&!(!I.parent!=!S.parent)&&(!I.parent||oi(I.parent,S.parent))}let Ls=(()=>{class I{constructor(){this.activated=null,this._activatedRoute=null,this.name=Lt,this.activateEvents=new E.vpe,this.deactivateEvents=new E.vpe,this.attachEvents=new E.vpe,this.detachEvents=new E.vpe,this.parentContexts=(0,E.f3M)(Et),this.location=(0,E.f3M)(E.s_b),this.changeDetector=(0,E.f3M)(E.sBO),this.environmentInjector=(0,E.f3M)(E.lqb),this.inputBinder=(0,E.f3M)(Fr,{optional:!0}),this.supportsBindingToComponentInputs=!0}get activatedComponentRef(){return this.activated}ngOnChanges(v){if(v.name){const{firstChange:x,previousValue:L}=v.name;if(x)return;this.isTrackedInParentContexts(L)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(L)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(v){return this.parentContexts.getContext(v)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const v=this.parentContexts.getContext(this.name);v?.route&&(v.attachRef?this.attach(v.attachRef,v.route):this.activateWith(v.route,v.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new E.vHH(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new E.vHH(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new E.vHH(4012,!1);this.location.detach();const v=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(v.instance),v}attach(v,x){this.activated=v,this._activatedRoute=x,this.location.insert(v.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(v.instance)}deactivate(){if(this.activated){const v=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(v)}}activateWith(v,x){if(this.isActivated)throw new E.vHH(4013,!1);this._activatedRoute=v;const L=this.location,X=v.snapshot.component,Ee=this.parentContexts.getOrCreateContext(this.name).children,lt=new da(v,Ee,L.injector);this.activated=L.createComponent(X,{index:L.length,injector:lt,environmentInjector:x??this.environmentInjector}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275dir=E.lG2({type:I,selectors:[["router-outlet"]],inputs:{name:"name"},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],standalone:!0,features:[E.TTD]}),I})();class da{constructor(S,v,x){this.route=S,this.childContexts=v,this.parent=x}get(S,v){return S===pi?this.route:S===Et?this.childContexts:this.parent.get(S,v)}}const Fr=new E.OlP("");let Ir=(()=>{class I{constructor(){this.outletDataSubscriptions=new Map}bindActivatedRouteToOutletComponent(v){this.unsubscribeFromRouteData(v),this.subscribeToRouteData(v)}unsubscribeFromRouteData(v){this.outletDataSubscriptions.get(v)?.unsubscribe(),this.outletDataSubscriptions.delete(v)}subscribeToRouteData(v){const{activatedRoute:x}=v,L=gt([x.queryParams,x.params,x.data]).pipe((0,Sr.w)(([Y,X,Ee],lt)=>(Ee={...Y,...X,...Ee},0===lt?(0,de.of)(Ee):Promise.resolve(Ee)))).subscribe(Y=>{if(!v.isActivated||!v.activatedComponentRef||v.activatedRoute!==x||null===x.component)return void this.unsubscribeFromRouteData(v);const X=(0,E.qFp)(x.component);if(X)for(const{templateName:Ee}of X.inputs)v.activatedComponentRef.setInput(Ee,Y[Ee]);else this.unsubscribeFromRouteData(v)});this.outletDataSubscriptions.set(v,L)}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})();function Ks(I,S,v){if(v&&I.shouldReuseRoute(S.value,v.value.snapshot)){const x=v.value;x._futureSnapshot=S.value;const L=function fn(I,S,v){return S.children.map(x=>{for(const L of v.children)if(I.shouldReuseRoute(x.value,L.value.snapshot))return Ks(I,x,L);return Ks(I,x)})}(I,S,v);return new Ur(x,L)}{if(I.shouldAttach(S.value)){const Y=I.retrieve(S.value);if(null!==Y){const X=Y.route;return X.value._futureSnapshot=S.value,X.children=S.children.map(Ee=>Ks(I,Ee)),X}}const x=function nu(I){return new pi(new ve.X(I.url),new ve.X(I.params),new ve.X(I.queryParams),new ve.X(I.fragment),new ve.X(I.data),I.outlet,I.component,I)}(S.value),L=S.children.map(Y=>Ks(I,Y));return new Ur(x,L)}}const Ys="ngNavigationCancelingError";function Bi(I,S){const{redirectTo:v,navigationBehaviorOptions:x}=rt(S)?{redirectTo:S,navigationBehaviorOptions:void 0}:S,L=mi(!1,0,S);return L.url=v,L.navigationBehaviorOptions=x,L}function mi(I,S,v){const x=new Error("NavigationCancelingError: "+(I||""));return x[Ys]=!0,x.cancellationCode=S,v&&(x.url=v),x}function Ri(I){return fs(I)&&rt(I.url)}function fs(I){return I&&I[Ys]}let Is=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275cmp=E.Xpm({type:I,selectors:[["ng-component"]],standalone:!0,features:[E.jDz],decls:1,vars:0,template:function(v,x){1&v&&E._UZ(0,"router-outlet")},dependencies:[Ls],encapsulation:2}),I})();function K(I){const S=I.children&&I.children.map(K),v=S?{...I,children:S}:{...I};return!v.component&&!v.loadComponent&&(S||v.loadChildren)&&v.outlet&&v.outlet!==Lt&&(v.component=Is),v}function V(I){return I.outlet||Lt}function fe(I){if(!I)return null;if(I.routeConfig?._injector)return I.routeConfig._injector;for(let S=I.parent;S;S=S.parent){const v=S.routeConfig;if(v?._loadedInjector)return v._loadedInjector;if(v?._injector)return v._injector}return null}class Mt{constructor(S,v,x,L,Y){this.routeReuseStrategy=S,this.futureState=v,this.currState=x,this.forwardEvent=L,this.inputBindingEnabled=Y}activate(S){const v=this.futureState._root,x=this.currState?this.currState._root:null;this.deactivateChildRoutes(v,x,S),yo(this.futureState.root),this.activateChildRoutes(v,x,S)}deactivateChildRoutes(S,v,x){const L=Or(v);S.children.forEach(Y=>{const X=Y.value.outlet;this.deactivateRoutes(Y,L[X],x),delete L[X]}),Object.values(L).forEach(Y=>{this.deactivateRouteAndItsChildren(Y,x)})}deactivateRoutes(S,v,x){const L=S.value,Y=v?v.value:null;if(L===Y)if(L.component){const X=x.getContext(L.outlet);X&&this.deactivateChildRoutes(S,v,X.children)}else this.deactivateChildRoutes(S,v,x);else Y&&this.deactivateRouteAndItsChildren(v,x)}deactivateRouteAndItsChildren(S,v){S.value.component&&this.routeReuseStrategy.shouldDetach(S.value.snapshot)?this.detachAndStoreRouteSubtree(S,v):this.deactivateRouteAndOutlet(S,v)}detachAndStoreRouteSubtree(S,v){const x=v.getContext(S.value.outlet),L=x&&S.value.component?x.children:v,Y=Or(S);for(const X of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[X],L);if(x&&x.outlet){const X=x.outlet.detach(),Ee=x.children.onOutletDeactivated();this.routeReuseStrategy.store(S.value.snapshot,{componentRef:X,route:S,contexts:Ee})}}deactivateRouteAndOutlet(S,v){const x=v.getContext(S.value.outlet),L=x&&S.value.component?x.children:v,Y=Or(S);for(const X of Object.keys(Y))this.deactivateRouteAndItsChildren(Y[X],L);x&&(x.outlet&&(x.outlet.deactivate(),x.children.onOutletDeactivated()),x.attachRef=null,x.route=null)}activateChildRoutes(S,v,x){const L=Or(v);S.children.forEach(Y=>{this.activateRoutes(Y,L[Y.value.outlet],x),this.forwardEvent(new Ro(Y.value.snapshot))}),S.children.length&&this.forwardEvent(new ca(S.value.snapshot))}activateRoutes(S,v,x){const L=S.value,Y=v?v.value:null;if(yo(L),L===Y)if(L.component){const X=x.getOrCreateContext(L.outlet);this.activateChildRoutes(S,v,X.children)}else this.activateChildRoutes(S,v,x);else if(L.component){const X=x.getOrCreateContext(L.outlet);if(this.routeReuseStrategy.shouldAttach(L.snapshot)){const Ee=this.routeReuseStrategy.retrieve(L.snapshot);this.routeReuseStrategy.store(L.snapshot,null),X.children.onOutletReAttached(Ee.contexts),X.attachRef=Ee.componentRef,X.route=Ee.route.value,X.outlet&&X.outlet.attach(Ee.componentRef,Ee.route.value),yo(Ee.route.value),this.activateChildRoutes(S,null,X.children)}else{const Ee=fe(L.snapshot);X.attachRef=null,X.route=L,X.injector=Ee,X.outlet&&X.outlet.activateWith(L,X.injector),this.activateChildRoutes(S,null,X.children)}}else this.activateChildRoutes(S,null,x)}}class rn{constructor(S){this.path=S,this.route=this.path[this.path.length-1]}}class zn{constructor(S,v){this.component=S,this.route=v}}function Kr(I,S,v){const x=I._root;return Qi(x,S?S._root:null,v,[x.value])}function Pn(I,S){const v=Symbol(),x=S.get(I,v);return x===v?"function"!=typeof I||(0,E.Z0I)(I)?S.get(I):I:x}function Qi(I,S,v,x,L={canDeactivateChecks:[],canActivateChecks:[]}){const Y=Or(S);return I.children.forEach(X=>{(function No(I,S,v,x,L={canDeactivateChecks:[],canActivateChecks:[]}){const Y=I.value,X=S?S.value:null,Ee=v?v.getContext(I.value.outlet):null;if(X&&Y.routeConfig===X.routeConfig){const lt=function Su(I,S,v){if("function"==typeof v)return v(I,S);switch(v){case"pathParamsChange":return!hs(I.url,S.url);case"pathParamsOrQueryParamsChange":return!hs(I.url,S.url)||!Xn(I.queryParams,S.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!oi(I,S)||!Xn(I.queryParams,S.queryParams);default:return!oi(I,S)}}(X,Y,Y.routeConfig.runGuardsAndResolvers);lt?L.canActivateChecks.push(new rn(x)):(Y.data=X.data,Y._resolvedData=X._resolvedData),Qi(I,S,Y.component?Ee?Ee.children:null:v,x,L),lt&&Ee&&Ee.outlet&&Ee.outlet.isActivated&&L.canDeactivateChecks.push(new zn(Ee.outlet.component,X))}else X&&Ra(S,Ee,L),L.canActivateChecks.push(new rn(x)),Qi(I,null,Y.component?Ee?Ee.children:null:v,x,L)})(X,Y[X.value.outlet],v,x.concat([X.value]),L),delete Y[X.value.outlet]}),Object.entries(Y).forEach(([X,Ee])=>Ra(Ee,v.getContext(X),L)),L}function Ra(I,S,v){const x=Or(I),L=I.value;Object.entries(x).forEach(([Y,X])=>{Ra(X,L.component?S?S.children.getContext(Y):null:S,v)}),v.canDeactivateChecks.push(new zn(L.component&&S&&S.outlet&&S.outlet.isActivated?S.outlet.component:null,L))}function fa(I){return"function"==typeof I}function ps(I){return I instanceof Ge.K||"EmptyError"===I?.name}const gr=Symbol("INITIAL_VALUE");function Bs(){return(0,Sr.w)(I=>gt(I.map(S=>S.pipe((0,Qn.q)(1),(0,Os.O)(gr)))).pipe((0,_n.U)(S=>{for(const v of S)if(!0!==v){if(v===gr)return gr;if(!1===v||v instanceof kr)return v}return!0}),(0,Gr.h)(S=>S!==gr),(0,Qn.q)(1)))}function Wo(I){return(0,Qe.z)((0,He.b)(S=>{if(rt(S))throw Bi(0,S)}),(0,_n.U)(S=>!0===S))}class Ji{constructor(S){this.segmentGroup=S||null}}class ma{constructor(S){this.urlTree=S}}function Cn(I){return ye(new Ji(I))}function iu(I){return ye(new ma(I))}class rc{constructor(S,v){this.urlSerializer=S,this.urlTree=v}noMatchError(S){return new E.vHH(4002,!1)}lineralizeSegments(S,v){let x=[],L=v.root;for(;;){if(x=x.concat(L.segments),0===L.numberOfChildren)return(0,de.of)(x);if(L.numberOfChildren>1||!L.children[Lt])return ye(new E.vHH(4e3,!1));L=L.children[Lt]}}applyRedirectCommands(S,v,x){return this.applyRedirectCreateUrlTree(v,this.urlSerializer.parse(v),S,x)}applyRedirectCreateUrlTree(S,v,x,L){const Y=this.createSegmentGroup(S,v.root,x,L);return new kr(Y,this.createQueryParams(v.queryParams,this.urlTree.queryParams),v.fragment)}createQueryParams(S,v){const x={};return Object.entries(S).forEach(([L,Y])=>{if("string"==typeof Y&&Y.startsWith(":")){const Ee=Y.substring(1);x[L]=v[Ee]}else x[L]=Y}),x}createSegmentGroup(S,v,x,L){const Y=this.createSegments(S,v.segments,x,L);let X={};return Object.entries(v.children).forEach(([Ee,lt])=>{X[Ee]=this.createSegmentGroup(S,lt,x,L)}),new xt(Y,X)}createSegments(S,v,x,L){return v.map(Y=>Y.path.startsWith(":")?this.findPosParam(S,Y,L):this.findOrReturn(Y,x))}findPosParam(S,v,x){const L=x[v.path.substring(1)];if(!L)throw new E.vHH(4001,!1);return L}findOrReturn(S,v){let x=0;for(const L of v){if(L.path===S.path)return v.splice(x),L;x++}return S}}const ui={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function Au(I,S,v,x,L){const Y=ic(I,S,v);return Y.matched?(x=function Br(I,S){return I.providers&&!I._injector&&(I._injector=(0,E.MMx)(I.providers,S,`Route: ${I.path}`)),I._injector??S}(S,x),function ga(I,S,v,x){const L=S.canMatch;if(!L||0===L.length)return(0,de.of)(!0);const Y=L.map(X=>{const Ee=Pn(X,I);return mt(function zo(I){return I&&fa(I.canMatch)}(Ee)?Ee.canMatch(S,v):I.runInContext(()=>Ee(S,v)))});return(0,de.of)(Y).pipe(Bs(),Wo())}(x,S,v).pipe((0,_n.U)(X=>!0===X?Y:{...ui}))):(0,de.of)(Y)}function ic(I,S,v){if(""===S.path)return"full"===S.pathMatch&&(I.hasChildren()||v.length>0)?{...ui}:{matched:!0,consumedSegments:[],remainingSegments:v,parameters:{},positionalParamSegments:{}};const L=(S.matcher||fo)(v,I,S);if(!L)return{...ui};const Y={};Object.entries(L.posParams??{}).forEach(([Ee,lt])=>{Y[Ee]=lt.path});const X=L.consumed.length>0?{...Y,...L.consumed[L.consumed.length-1].parameters}:Y;return{matched:!0,consumedSegments:L.consumed,remainingSegments:v.slice(L.consumed.length),parameters:X,positionalParamSegments:L.posParams??{}}}function sc(I,S,v,x){return v.length>0&&function oc(I,S,v){return v.some(x=>ya(I,S,x)&&V(x)!==Lt)}(I,v,x)?{segmentGroup:new xt(S,xu(x,new xt(v,I.children))),slicedSegments:[]}:0===v.length&&function Na(I,S,v){return v.some(x=>ya(I,S,x))}(I,v,x)?{segmentGroup:new xt(I.segments,Mu(I,0,v,x,I.children)),slicedSegments:v}:{segmentGroup:new xt(I.segments,I.children),slicedSegments:v}}function Mu(I,S,v,x,L){const Y={};for(const X of x)if(ya(I,v,X)&&!L[V(X)]){const Ee=new xt([],{});Y[V(X)]=Ee}return{...L,...Y}}function xu(I,S){const v={};v[Lt]=S;for(const x of I)if(""===x.path&&V(x)!==Lt){const L=new xt([],{});v[V(x)]=L}return v}function ya(I,S,v){return(!(I.hasChildren()||S.length>0)||"full"!==v.pathMatch)&&""===v.path}class Al{constructor(S,v,x,L,Y,X,Ee){this.injector=S,this.configLoader=v,this.rootComponentType=x,this.config=L,this.urlTree=Y,this.paramsInheritanceStrategy=X,this.urlSerializer=Ee,this.allowRedirects=!0,this.applyRedirects=new rc(this.urlSerializer,this.urlTree)}noMatchError(S){return new E.vHH(4002,!1)}recognize(){const S=sc(this.urlTree.root,[],[],this.config).segmentGroup;return this.processSegmentGroup(this.injector,this.config,S,Lt).pipe(We(v=>{if(v instanceof ma)return this.allowRedirects=!1,this.urlTree=v.urlTree,this.match(v.urlTree);throw v instanceof Ji?this.noMatchError(v):v}),(0,_n.U)(v=>{const x=new Ui([],Object.freeze({}),Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,{},Lt,this.rootComponentType,null,{}),L=new Ur(x,v),Y=new Vi("",L),X=function Pt(I,S,v=null,x=null){return ln(Qt(I),S,v,x)}(x,[],this.urlTree.queryParams,this.urlTree.fragment);return X.queryParams=this.urlTree.queryParams,Y.url=this.urlSerializer.serialize(X),this.inheritParamsAndData(Y._root),{state:Y,tree:X}}))}match(S){return this.processSegmentGroup(this.injector,this.config,S.root,Lt).pipe(We(x=>{throw x instanceof Ji?this.noMatchError(x):x}))}inheritParamsAndData(S){const v=S.value,x=un(v,this.paramsInheritanceStrategy);v.params=Object.freeze(x.params),v.data=Object.freeze(x.data),S.children.forEach(L=>this.inheritParamsAndData(L))}processSegmentGroup(S,v,x,L){return 0===x.segments.length&&x.hasChildren()?this.processChildren(S,v,x):this.processSegment(S,v,x,x.segments,L,!0)}processChildren(S,v,x){const L=[];for(const Y of Object.keys(x.children))"primary"===Y?L.unshift(Y):L.push(Y);return(0,ae.D)(L).pipe((0,Ke.b)(Y=>{const X=x.children[Y],Ee=function te(I,S){const v=I.filter(x=>V(x)===S);return v.push(...I.filter(x=>V(x)!==S)),v}(v,Y);return this.processSegmentGroup(S,Ee,X,Y)}),(0,tt.R)((Y,X)=>(Y.push(...X),Y)),(0,Dt.d)(null),function Gt(I,S){const v=arguments.length>=2;return x=>x.pipe(I?(0,Gr.h)((L,Y)=>I(L,Y,x)):Me.y,At(1),v?(0,Dt.d)(S):(0,sr.T)(()=>new Ge.K))}(),(0,Re.z)(Y=>{if(null===Y)return Cn(x);const X=br(Y);return function Ru(I){I.sort((S,v)=>S.value.outlet===Lt?-1:v.value.outlet===Lt?1:S.value.outlet.localeCompare(v.value.outlet))}(X),(0,de.of)(X)}))}processSegment(S,v,x,L,Y,X){return(0,ae.D)(v).pipe((0,Ke.b)(Ee=>this.processSegmentAgainstRoute(Ee._injector??S,v,Ee,x,L,Y,X).pipe(We(lt=>{if(lt instanceof Ji)return(0,de.of)(null);throw lt}))),(0,Fe.P)(Ee=>!!Ee),We(Ee=>{if(ps(Ee))return function Sl(I,S,v){return 0===S.length&&!I.children[v]}(x,L,Y)?(0,de.of)([]):Cn(x);throw Ee}))}processSegmentAgainstRoute(S,v,x,L,Y,X,Ee){return function ou(I,S,v,x){return!!(V(I)===x||x!==Lt&&ya(S,v,I))&&("**"===I.path||ic(S,I,v).matched)}(x,L,Y,X)?void 0===x.redirectTo?this.matchSegmentAgainstRoute(S,L,x,Y,X,Ee):Ee&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(S,L,v,x,Y,X):Cn(L):Cn(L)}expandSegmentAgainstRouteUsingRedirect(S,v,x,L,Y,X){return"**"===L.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(S,x,L,X):this.expandRegularSegmentAgainstRouteUsingRedirect(S,v,x,L,Y,X)}expandWildCardWithParamsAgainstRouteUsingRedirect(S,v,x,L){const Y=this.applyRedirects.applyRedirectCommands([],x.redirectTo,{});return x.redirectTo.startsWith("/")?iu(Y):this.applyRedirects.lineralizeSegments(x,Y).pipe((0,Re.z)(X=>{const Ee=new xt(X,{});return this.processSegment(S,v,Ee,X,L,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(S,v,x,L,Y,X){const{matched:Ee,consumedSegments:lt,remainingSegments:qt,positionalParamSegments:Vt}=ic(v,L,Y);if(!Ee)return Cn(v);const Kn=this.applyRedirects.applyRedirectCommands(lt,L.redirectTo,Vt);return L.redirectTo.startsWith("/")?iu(Kn):this.applyRedirects.lineralizeSegments(L,Kn).pipe((0,Re.z)(vi=>this.processSegment(S,x,v,vi.concat(qt),X,!1)))}matchSegmentAgainstRoute(S,v,x,L,Y,X){let Ee;if("**"===x.path){const lt=L.length>0?Ar(L).parameters:{},qt=new Ui(L,lt,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ee(x),V(x),x.component??x._loadedComponent??null,x,Xi(x));Ee=(0,de.of)({snapshot:qt,consumedSegments:[],remainingSegments:[]}),v.children={}}else Ee=Au(v,x,L,S).pipe((0,_n.U)(({matched:lt,consumedSegments:qt,remainingSegments:Vt,parameters:Kn})=>lt?{snapshot:new Ui(qt,Kn,Object.freeze({...this.urlTree.queryParams}),this.urlTree.fragment,ee(x),V(x),x.component??x._loadedComponent??null,x,Xi(x)),consumedSegments:qt,remainingSegments:Vt}:null));return Ee.pipe((0,Sr.w)(lt=>null===lt?Cn(v):this.getChildConfig(S=x._injector??S,x,L).pipe((0,Sr.w)(({routes:qt})=>{const Vt=x._loadedInjector??S,{snapshot:Kn,consumedSegments:vi,remainingSegments:zc}=lt,{segmentGroup:Ko,slicedSegments:wa}=sc(v,vi,zc,qt);if(0===wa.length&&Ko.hasChildren())return this.processChildren(Vt,qt,Ko).pipe((0,_n.U)(hu=>null===hu?null:[new Ur(Kn,hu)]));if(0===qt.length&&0===wa.length)return(0,de.of)([new Ur(Kn,[])]);const du=V(x)===Y;return this.processSegment(Vt,qt,Ko,wa,du?Lt:Y,!0).pipe((0,_n.U)(hu=>[new Ur(Kn,hu)]))}))))}getChildConfig(S,v,x){return v.children?(0,de.of)({routes:v.children,injector:S}):v.loadChildren?void 0!==v._loadedRoutes?(0,de.of)({routes:v._loadedRoutes,injector:v._loadedInjector}):function nc(I,S,v,x){const L=S.canLoad;if(void 0===L||0===L.length)return(0,de.of)(!0);const Y=L.map(X=>{const Ee=Pn(X,I);return mt(function Vc(I){return I&&fa(I.canLoad)}(Ee)?Ee.canLoad(S,v):I.runInContext(()=>Ee(S,v)))});return(0,de.of)(Y).pipe(Bs(),Wo())}(S,v,x).pipe((0,Re.z)(L=>L?this.configLoader.loadChildren(S,v).pipe((0,He.b)(Y=>{v._loadedRoutes=Y.routes,v._loadedInjector=Y.injector})):function su(I){return ye(mi(!1,3))}())):(0,de.of)({routes:[],injector:S})}}function qe(I){const S=I.value.routeConfig;return S&&""===S.path}function br(I){const S=[],v=new Set;for(const x of I){if(!qe(x)){S.push(x);continue}const L=S.find(Y=>x.value.routeConfig===Y.value.routeConfig);void 0!==L?(L.children.push(...x.children),v.add(L)):S.push(x)}for(const x of v){const L=br(x.children);S.push(new Ur(x.value,L))}return S.filter(x=>!v.has(x))}function ee(I){return I.data||{}}function Xi(I){return I.resolve||{}}function se(I){return"string"==typeof I.title||null===I.title}function Ne(I){return(0,Sr.w)(S=>{const v=I(S);return v?(0,ae.D)(v).pipe((0,_n.U)(()=>S)):(0,de.of)(S)})}const Je=new E.OlP("ROUTES");let Ut=(()=>{class I{constructor(){this.componentLoaders=new WeakMap,this.childrenLoaders=new WeakMap,this.compiler=(0,E.f3M)(E.Sil)}loadComponent(v){if(this.componentLoaders.get(v))return this.componentLoaders.get(v);if(v._loadedComponent)return(0,de.of)(v._loadedComponent);this.onLoadStartListener&&this.onLoadStartListener(v);const x=mt(v.loadComponent()).pipe((0,_n.U)(xn),(0,He.b)(Y=>{this.onLoadEndListener&&this.onLoadEndListener(v),v._loadedComponent=Y}),(0,sn.x)(()=>{this.componentLoaders.delete(v)})),L=new _t(x,()=>new pn.x).pipe(Te());return this.componentLoaders.set(v,L),L}loadChildren(v,x){if(this.childrenLoaders.get(x))return this.childrenLoaders.get(x);if(x._loadedRoutes)return(0,de.of)({routes:x._loadedRoutes,injector:x._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(x);const Y=this.loadModuleFactoryOrRoutes(x.loadChildren).pipe((0,_n.U)(Ee=>{this.onLoadEndListener&&this.onLoadEndListener(x);let lt,qt;return Array.isArray(Ee)?qt=Ee:(lt=Ee.create(v).injector,qt=lt.get(Je,[],E.XFs.Self|E.XFs.Optional).flat()),{routes:qt.map(K),injector:lt}}),(0,sn.x)(()=>{this.childrenLoaders.delete(x)})),X=new _t(Y,()=>new pn.x).pipe(Te());return this.childrenLoaders.set(x,X),X}loadModuleFactoryOrRoutes(v){return mt(v()).pipe((0,_n.U)(xn),(0,Re.z)(x=>x instanceof E.YKP||Array.isArray(x)?(0,de.of)(x):(0,ae.D)(this.compiler.compileModuleAsync(x))))}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function xn(I){return function ar(I){return I&&"object"==typeof I&&"default"in I}(I)?I.default:I}let Bn=(()=>{class I{get hasRequestedNavigation(){return 0!==this.navigationId}constructor(){this.currentNavigation=null,this.lastSuccessfulNavigation=null,this.events=new pn.x,this.configLoader=(0,E.f3M)(Ut),this.environmentInjector=(0,E.f3M)(E.lqb),this.urlSerializer=(0,E.f3M)(li),this.rootContexts=(0,E.f3M)(Et),this.inputBindingEnabled=null!==(0,E.f3M)(Fr,{optional:!0}),this.navigationId=0,this.afterPreactivation=()=>(0,de.of)(void 0),this.rootComponentType=null,this.configLoader.onLoadEndListener=L=>this.events.next(new go(L)),this.configLoader.onLoadStartListener=L=>this.events.next(new qn(L))}complete(){this.transitions?.complete()}handleNavigationRequest(v){const x=++this.navigationId;this.transitions?.next({...this.transitions.value,...v,id:x})}setupNavigations(v){return this.transitions=new ve.X({id:0,currentUrlTree:v.currentUrlTree,currentRawUrl:v.currentUrlTree,extractedUrl:v.urlHandlingStrategy.extract(v.currentUrlTree),urlAfterRedirects:v.urlHandlingStrategy.extract(v.currentUrlTree),rawUrl:v.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:Zs,restoredState:null,currentSnapshot:v.routerState.snapshot,targetSnapshot:null,currentRouterState:v.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.transitions.pipe((0,Gr.h)(x=>0!==x.id),(0,_n.U)(x=>({...x,extractedUrl:v.urlHandlingStrategy.extract(x.rawUrl)})),(0,Sr.w)(x=>{let L=!1,Y=!1;return(0,de.of)(x).pipe((0,He.b)(X=>{this.currentNavigation={id:X.id,initialUrl:X.rawUrl,extractedUrl:X.extractedUrl,trigger:X.source,extras:X.extras,previousNavigation:this.lastSuccessfulNavigation?{...this.lastSuccessfulNavigation,previousNavigation:null}:null}}),(0,Sr.w)(X=>{const Ee=v.browserUrlTree.toString(),lt=!v.navigated||X.extractedUrl.toString()!==Ee||Ee!==v.currentUrlTree.toString();if(!lt&&"reload"!==(X.extras.onSameUrlNavigation??v.onSameUrlNavigation)){const Vt="";return this.events.next(new xi(X.id,v.serializeUrl(x.rawUrl),Vt,0)),v.rawUrlTree=X.rawUrl,X.resolve(null),Le.E}if(v.urlHandlingStrategy.shouldProcessUrl(X.rawUrl))return In(X.source)&&(v.browserUrlTree=X.extractedUrl),(0,de.of)(X).pipe((0,Sr.w)(Vt=>{const Kn=this.transitions?.getValue();return this.events.next(new aa(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),Vt.source,Vt.restoredState)),Kn!==this.transitions?.getValue()?Le.E:Promise.resolve(Vt)}),function Vn(I,S,v,x,L,Y){return(0,Re.z)(X=>function ac(I,S,v,x,L,Y,X="emptyOnly"){return new Al(I,S,v,x,L,X,Y).recognize()}(I,S,v,x,X.extractedUrl,L,Y).pipe((0,_n.U)(({state:Ee,tree:lt})=>({...X,targetSnapshot:Ee,urlAfterRedirects:lt}))))}(this.environmentInjector,this.configLoader,this.rootComponentType,v.config,this.urlSerializer,v.paramsInheritanceStrategy),(0,He.b)(Vt=>{if(x.targetSnapshot=Vt.targetSnapshot,x.urlAfterRedirects=Vt.urlAfterRedirects,this.currentNavigation={...this.currentNavigation,finalUrl:Vt.urlAfterRedirects},"eager"===v.urlUpdateStrategy){if(!Vt.extras.skipLocationChange){const vi=v.urlHandlingStrategy.merge(Vt.urlAfterRedirects,Vt.rawUrl);v.setBrowserUrl(vi,Vt)}v.browserUrlTree=Vt.urlAfterRedirects}const Kn=new xo(Vt.id,this.urlSerializer.serialize(Vt.extractedUrl),this.urlSerializer.serialize(Vt.urlAfterRedirects),Vt.targetSnapshot);this.events.next(Kn)}));if(lt&&v.urlHandlingStrategy.shouldProcessUrl(v.rawUrlTree)){const{id:Vt,extractedUrl:Kn,source:vi,restoredState:zc,extras:Ko}=X,wa=new aa(Vt,this.urlSerializer.serialize(Kn),vi,zc);this.events.next(wa);const du=Zn(0,this.rootComponentType).snapshot;return x={...X,targetSnapshot:du,urlAfterRedirects:Kn,extras:{...Ko,skipLocationChange:!1,replaceUrl:!1}},(0,de.of)(x)}{const Vt="";return this.events.next(new xi(X.id,v.serializeUrl(x.extractedUrl),Vt,1)),v.rawUrlTree=X.rawUrl,X.resolve(null),Le.E}}),(0,He.b)(X=>{const Ee=new tu(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot);this.events.next(Ee)}),(0,_n.U)(X=>x={...X,guards:Kr(X.targetSnapshot,X.currentSnapshot,this.rootContexts)}),function bs(I,S){return(0,Re.z)(v=>{const{targetSnapshot:x,currentSnapshot:L,guards:{canActivateChecks:Y,canDeactivateChecks:X}}=v;return 0===X.length&&0===Y.length?(0,de.of)({...v,guardsResult:!0}):function Oo(I,S,v,x){return(0,ae.D)(I).pipe((0,Re.z)(L=>function ji(I,S,v,x,L){const Y=S&&S.routeConfig?S.routeConfig.canDeactivate:null;if(!Y||0===Y.length)return(0,de.of)(!0);const X=Y.map(Ee=>{const lt=fe(S)??L,qt=Pn(Ee,lt);return mt(function Dl(I){return I&&fa(I.canDeactivate)}(qt)?qt.canDeactivate(I,S,v,x):lt.runInContext(()=>qt(I,S,v,x))).pipe((0,Fe.P)())});return(0,de.of)(X).pipe(Bs())}(L.component,L.route,v,S,x)),(0,Fe.P)(L=>!0!==L,!0))}(X,x,L,I).pipe((0,Re.z)(Ee=>Ee&&function ru(I){return"boolean"==typeof I}(Ee)?function tc(I,S,v,x){return(0,ae.D)(S).pipe((0,Ke.b)(L=>(0,Oe.z)(function Qs(I,S){return null!==I&&S&&S(new fi(I)),(0,de.of)(!0)}(L.route.parent,x),function _i(I,S){return null!==I&&S&&S(new la(I)),(0,de.of)(!0)}(L.route,x),function jr(I,S,v){const x=S[S.length-1],Y=S.slice(0,S.length-1).reverse().map(X=>function yi(I){const S=I.routeConfig?I.routeConfig.canActivateChild:null;return S&&0!==S.length?{node:I,guards:S}:null}(X)).filter(X=>null!==X).map(X=>Ae(()=>{const Ee=X.guards.map(lt=>{const qt=fe(X.node)??v,Vt=Pn(lt,qt);return mt(function Yr(I){return I&&fa(I.canActivateChild)}(Vt)?Vt.canActivateChild(x,I):qt.runInContext(()=>Vt(x,I))).pipe((0,Fe.P)())});return(0,de.of)(Ee).pipe(Bs())}));return(0,de.of)(Y).pipe(Bs())}(I,L.path,v),function pa(I,S,v){const x=S.routeConfig?S.routeConfig.canActivate:null;if(!x||0===x.length)return(0,de.of)(!0);const L=x.map(Y=>Ae(()=>{const X=fe(S)??v,Ee=Pn(Y,X);return mt(function Bc(I){return I&&fa(I.canActivate)}(Ee)?Ee.canActivate(S,I):X.runInContext(()=>Ee(S,I))).pipe((0,Fe.P)())}));return(0,de.of)(L).pipe(Bs())}(I,L.route,v))),(0,Fe.P)(L=>!0!==L,!0))}(x,Y,I,S):(0,de.of)(Ee)),(0,_n.U)(Ee=>({...v,guardsResult:Ee})))})}(this.environmentInjector,X=>this.events.next(X)),(0,He.b)(X=>{if(x.guardsResult=X.guardsResult,rt(X.guardsResult))throw Bi(0,X.guardsResult);const Ee=new Ma(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(X.urlAfterRedirects),X.targetSnapshot,!!X.guardsResult);this.events.next(Ee)}),(0,Gr.h)(X=>!!X.guardsResult||(v.restoreHistory(X),this.cancelNavigationTransition(X,"",3),!1)),Ne(X=>{if(X.guards.canActivateChecks.length)return(0,de.of)(X).pipe((0,He.b)(Ee=>{const lt=new dn(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects),Ee.targetSnapshot);this.events.next(lt)}),(0,Sr.w)(Ee=>{let lt=!1;return(0,de.of)(Ee).pipe(function _a(I,S){return(0,Re.z)(v=>{const{targetSnapshot:x,guards:{canActivateChecks:L}}=v;if(!L.length)return(0,de.of)(v);let Y=0;return(0,ae.D)(L).pipe((0,Ke.b)(X=>function M(I,S,v,x){const L=I.routeConfig,Y=I._resolve;return void 0!==L?.title&&!se(L)&&(Y[Sn]=L.title),function F(I,S,v,x){const L=function N(I){return[...Object.keys(I),...Object.getOwnPropertySymbols(I)]}(I);if(0===L.length)return(0,de.of)({});const Y={};return(0,ae.D)(L).pipe((0,Re.z)(X=>function W(I,S,v,x){const L=fe(S)??x,Y=Pn(I,L);return mt(Y.resolve?Y.resolve(S,v):L.runInContext(()=>Y(S,v)))}(I[X],S,v,x).pipe((0,Fe.P)(),(0,He.b)(Ee=>{Y[X]=Ee}))),At(1),function gn(I){return(0,_n.U)(()=>I)}(Y),We(X=>ps(X)?Le.E:ye(X)))}(Y,I,S,x).pipe((0,_n.U)(X=>(I._resolvedData=X,I.data=un(I,v).resolve,L&&se(L)&&(I.data[Sn]=L.title),null)))}(X.route,x,I,S)),(0,He.b)(()=>Y++),At(1),(0,Re.z)(X=>Y===L.length?(0,de.of)(v):Le.E))})}(v.paramsInheritanceStrategy,this.environmentInjector),(0,He.b)({next:()=>lt=!0,complete:()=>{lt||(v.restoreHistory(Ee),this.cancelNavigationTransition(Ee,"",2))}}))}),(0,He.b)(Ee=>{const lt=new ti(Ee.id,this.urlSerializer.serialize(Ee.extractedUrl),this.urlSerializer.serialize(Ee.urlAfterRedirects),Ee.targetSnapshot);this.events.next(lt)}))}),Ne(X=>{const Ee=lt=>{const qt=[];lt.routeConfig?.loadComponent&&!lt.routeConfig._loadedComponent&&qt.push(this.configLoader.loadComponent(lt.routeConfig).pipe((0,He.b)(Vt=>{lt.component=Vt}),(0,_n.U)(()=>{})));for(const Vt of lt.children)qt.push(...Ee(Vt));return qt};return gt(Ee(X.targetSnapshot.root)).pipe((0,Dt.d)(),(0,Qn.q)(1))}),Ne(()=>this.afterPreactivation()),(0,_n.U)(X=>{const Ee=function ha(I,S,v){const x=Ks(I,S._root,v?v._root:void 0);return new Fs(x,S)}(v.routeReuseStrategy,X.targetSnapshot,X.currentRouterState);return x={...X,targetRouterState:Ee}}),(0,He.b)(X=>{v.currentUrlTree=X.urlAfterRedirects,v.rawUrlTree=v.urlHandlingStrategy.merge(X.urlAfterRedirects,X.rawUrl),v.routerState=X.targetRouterState,"deferred"===v.urlUpdateStrategy&&(X.extras.skipLocationChange||v.setBrowserUrl(v.rawUrlTree,X),v.browserUrlTree=X.urlAfterRedirects)}),((I,S,v,x)=>(0,_n.U)(L=>(new Mt(S,L.targetRouterState,L.currentRouterState,v,x).activate(I),L)))(this.rootContexts,v.routeReuseStrategy,X=>this.events.next(X),this.inputBindingEnabled),(0,Qn.q)(1),(0,He.b)({next:X=>{L=!0,this.lastSuccessfulNavigation=this.currentNavigation,v.navigated=!0,this.events.next(new Ki(X.id,this.urlSerializer.serialize(X.extractedUrl),this.urlSerializer.serialize(v.currentUrlTree))),v.titleStrategy?.updateTitle(X.targetRouterState.snapshot),X.resolve(!0)},complete:()=>{L=!0}}),(0,sn.x)(()=>{L||Y||this.cancelNavigationTransition(x,"",1),this.currentNavigation?.id===x.id&&(this.currentNavigation=null)}),We(X=>{if(Y=!0,fs(X)){Ri(X)||(v.navigated=!0,v.restoreHistory(x,!0));const Ee=new Go(x.id,this.urlSerializer.serialize(x.extractedUrl),X.message,X.cancellationCode);if(this.events.next(Ee),Ri(X)){const lt=v.urlHandlingStrategy.merge(X.url,v.rawUrlTree),qt={skipLocationChange:x.extras.skipLocationChange,replaceUrl:"eager"===v.urlUpdateStrategy||In(x.source)};v.scheduleNavigation(lt,Zs,null,qt,{resolve:x.resolve,reject:x.reject,promise:x.promise})}else x.resolve(!1)}else{v.restoreHistory(x,!0);const Ee=new ua(x.id,this.urlSerializer.serialize(x.extractedUrl),X,x.targetSnapshot??void 0);this.events.next(Ee);try{x.resolve(v.errorHandler(X))}catch(lt){x.reject(lt)}}return Le.E}))}))}cancelNavigationTransition(v,x,L){const Y=new Go(v.id,this.urlSerializer.serialize(v.extractedUrl),x,L);this.events.next(Y),v.resolve(!1)}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();function In(I){return I!==Zs}let Dr=(()=>{class I{buildTitle(v){let x,L=v.root;for(;void 0!==L;)x=this.getResolvedTitleForRoute(L)??x,L=L.children.find(Y=>Y.outlet===Lt);return x}getResolvedTitleForRoute(v){return v.data[Sn]}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:function(){return(0,E.f3M)(yn)},providedIn:"root"}),I})(),yn=(()=>{class I extends Dr{constructor(v){super(),this.title=v}updateTitle(v){const x=this.buildTitle(v);void 0!==x&&this.title.setTitle(x)}}return I.\u0275fac=function(v){return new(v||I)(E.LFG(Jn.Dx))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),mr=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:function(){return(0,E.f3M)(Bt)},providedIn:"root"}),I})();class Ni{shouldDetach(S){return!1}store(S,v){}shouldAttach(S){return!1}retrieve(S){return null}shouldReuseRoute(S,v){return S.routeConfig===v.routeConfig}}let Bt=(()=>{class I extends Ni{}return I.\u0275fac=function(){let S;return function(x){return(S||(S=E.n5z(I)))(x||I)}}(),I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const es=new E.OlP("",{providedIn:"root",factory:()=>({})});let Hi=(()=>{class I{}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:function(){return(0,E.f3M)(Eo)},providedIn:"root"}),I})(),Eo=(()=>{class I{shouldProcessUrl(v){return!0}extract(v){return v}merge(v,x){return v}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();var Qr=(()=>((Qr=Qr||{})[Qr.COMPLETE=0]="COMPLETE",Qr[Qr.FAILED=1]="FAILED",Qr[Qr.REDIRECTING=2]="REDIRECTING",Qr))();function qo(I,S){I.events.pipe((0,Gr.h)(v=>v instanceof Ki||v instanceof Go||v instanceof ua||v instanceof xi),(0,_n.U)(v=>v instanceof Ki||v instanceof xi?Qr.COMPLETE:v instanceof Go&&(0===v.code||1===v.code)?Qr.REDIRECTING:Qr.FAILED),(0,Gr.h)(v=>v!==Qr.REDIRECTING),(0,Qn.q)(1)).subscribe(()=>{S()})}function jc(I){throw I}function Po(I,S,v){return S.parse("/")}const uc={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},au={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let $i=(()=>{class I{get navigationId(){return this.navigationTransitions.navigationId}get browserPageId(){if("computed"===this.canceledNavigationResolution)return this.location.getState()?.\u0275routerPageId}get events(){return this.navigationTransitions.events}constructor(){this.disposed=!1,this.currentPageId=0,this.console=(0,E.f3M)(E.c2e),this.isNgZoneEnabled=!1,this.options=(0,E.f3M)(es,{optional:!0})||{},this.pendingTasks=(0,E.f3M)(E.HDt),this.errorHandler=this.options.errorHandler||jc,this.malformedUriErrorHandler=this.options.malformedUriErrorHandler||Po,this.navigated=!1,this.lastSuccessfulId=-1,this.urlHandlingStrategy=(0,E.f3M)(Hi),this.routeReuseStrategy=(0,E.f3M)(mr),this.titleStrategy=(0,E.f3M)(Dr),this.onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore",this.paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly",this.urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred",this.canceledNavigationResolution=this.options.canceledNavigationResolution||"replace",this.config=(0,E.f3M)(Je,{optional:!0})?.flat()??[],this.navigationTransitions=(0,E.f3M)(Bn),this.urlSerializer=(0,E.f3M)(li),this.location=(0,E.f3M)(Wn.Ye),this.componentInputBindingEnabled=!!(0,E.f3M)(Fr,{optional:!0}),this.isNgZoneEnabled=(0,E.f3M)(E.R0b)instanceof E.R0b&&E.R0b.isInAngularZone(),this.resetConfig(this.config),this.currentUrlTree=new kr,this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.routerState=Zn(0,null),this.navigationTransitions.setupNavigations(this).subscribe(v=>{this.lastSuccessfulId=v.id,this.currentPageId=this.browserPageId??0},v=>{this.console.warn(`Unhandled Navigation Error: ${v}`)})}resetRootComponentType(v){this.routerState.root.component=v,this.navigationTransitions.rootComponentType=v}initialNavigation(){if(this.setUpLocationChangeListener(),!this.navigationTransitions.hasRequestedNavigation){const v=this.location.getState();this.navigateToSyncWithBrowser(this.location.path(!0),Zs,v)}}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(v=>{const x="popstate"===v.type?"popstate":"hashchange";"popstate"===x&&setTimeout(()=>{this.navigateToSyncWithBrowser(v.url,x,v.state)},0)}))}navigateToSyncWithBrowser(v,x,L){const Y={replaceUrl:!0},X=L?.navigationId?L:null;if(L){const lt={...L};delete lt.navigationId,delete lt.\u0275routerPageId,0!==Object.keys(lt).length&&(Y.state=lt)}const Ee=this.parseUrl(v);this.scheduleNavigation(Ee,x,X,Y)}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.navigationTransitions.currentNavigation}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(v){this.config=v.map(K),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.navigationTransitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(v,x={}){const{relativeTo:L,queryParams:Y,fragment:X,queryParamsHandling:Ee,preserveFragment:lt}=x,qt=lt?this.currentUrlTree.fragment:X;let Kn,Vt=null;switch(Ee){case"merge":Vt={...this.currentUrlTree.queryParams,...Y};break;case"preserve":Vt=this.currentUrlTree.queryParams;break;default:Vt=Y||null}null!==Vt&&(Vt=this.removeEmptyProps(Vt));try{Kn=Qt(L?L.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof v[0]||!v[0].startsWith("/"))&&(v=[]),Kn=this.currentUrlTree.root}return ln(Kn,v,Vt,qt??null)}navigateByUrl(v,x={skipLocationChange:!1}){const L=rt(v)?v:this.parseUrl(v),Y=this.urlHandlingStrategy.merge(L,this.rawUrlTree);return this.scheduleNavigation(Y,Zs,null,x)}navigate(v,x={skipLocationChange:!1}){return function Nu(I){for(let S=0;S<I.length;S++)if(null==I[S])throw new E.vHH(4008,!1)}(v),this.navigateByUrl(this.createUrlTree(v,x),x)}serializeUrl(v){return this.urlSerializer.serialize(v)}parseUrl(v){let x;try{x=this.urlSerializer.parse(v)}catch(L){x=this.malformedUriErrorHandler(L,this.urlSerializer,v)}return x}isActive(v,x){let L;if(L=!0===x?{...uc}:!1===x?{...au}:x,rt(v))return Un(this.currentUrlTree,v,L);const Y=this.parseUrl(v);return Un(this.currentUrlTree,Y,L)}removeEmptyProps(v){return Object.keys(v).reduce((x,L)=>{const Y=v[L];return null!=Y&&(x[L]=Y),x},{})}scheduleNavigation(v,x,L,Y,X){if(this.disposed)return Promise.resolve(!1);let Ee,lt,qt;X?(Ee=X.resolve,lt=X.reject,qt=X.promise):qt=new Promise((Kn,vi)=>{Ee=Kn,lt=vi});const Vt=this.pendingTasks.add();return qo(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(Vt))}),this.navigationTransitions.handleNavigationRequest({source:x,restoredState:L,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:v,extras:Y,resolve:Ee,reject:lt,promise:qt,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),qt.catch(Kn=>Promise.reject(Kn))}setBrowserUrl(v,x){const L=this.urlSerializer.serialize(v);if(this.location.isCurrentPathEqualTo(L)||x.extras.replaceUrl){const X={...x.extras.state,...this.generateNgRouterState(x.id,this.browserPageId)};this.location.replaceState(L,"",X)}else{const Y={...x.extras.state,...this.generateNgRouterState(x.id,(this.browserPageId??0)+1)};this.location.go(L,"",Y)}}restoreHistory(v,x=!1){if("computed"===this.canceledNavigationResolution){const Y=this.currentPageId-(this.browserPageId??this.currentPageId);0!==Y?this.location.historyGo(Y):this.currentUrlTree===this.getCurrentNavigation()?.finalUrl&&0===Y&&(this.resetState(v),this.browserUrlTree=v.currentUrlTree,this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(x&&this.resetState(v),this.resetUrlToCurrentUrlTree())}resetState(v){this.routerState=v.currentRouterState,this.currentUrlTree=v.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,v.rawUrl)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(v,x){return"computed"===this.canceledNavigationResolution?{navigationId:v,\u0275routerPageId:x}:{navigationId:v}}}return I.\u0275fac=function(v){return new(v||I)},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})(),Ou=(()=>{class I{constructor(v,x,L,Y,X,Ee){this.router=v,this.route=x,this.tabIndexAttribute=L,this.renderer=Y,this.el=X,this.locationStrategy=Ee,this.href=null,this.commands=null,this.onChanges=new pn.x,this.preserveFragment=!1,this.skipLocationChange=!1,this.replaceUrl=!1;const lt=X.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===lt||"area"===lt,this.isAnchorElement?this.subscription=v.events.subscribe(qt=>{qt instanceof Ki&&this.updateHref()}):this.setTabIndexIfNotOnNativeEl("0")}setTabIndexIfNotOnNativeEl(v){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",v)}ngOnChanges(v){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}set routerLink(v){null!=v?(this.commands=Array.isArray(v)?v:[v],this.setTabIndexIfNotOnNativeEl("0")):(this.commands=null,this.setTabIndexIfNotOnNativeEl(null))}onClick(v,x,L,Y,X){return!!(null===this.urlTree||this.isAnchorElement&&(0!==v||x||L||Y||X||"string"==typeof this.target&&"_self"!=this.target))||(this.router.navigateByUrl(this.urlTree,{skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state}),!this.isAnchorElement)}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){this.href=null!==this.urlTree&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(this.urlTree)):null;const v=null===this.href?null:(0,E.P3R)(this.href,this.el.nativeElement.tagName.toLowerCase(),"href");this.applyAttributeValue("href",v)}applyAttributeValue(v,x){const L=this.renderer,Y=this.el.nativeElement;null!==x?L.setAttribute(Y,v,x):L.removeAttribute(Y,v)}get urlTree(){return null===this.commands?null:this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}}return I.\u0275fac=function(v){return new(v||I)(E.Y36($i),E.Y36(pi),E.$8M("tabindex"),E.Y36(E.Qsj),E.Y36(E.SBq),E.Y36(Wn.S$))},I.\u0275dir=E.lG2({type:I,selectors:[["","routerLink",""]],hostVars:1,hostBindings:function(v,x){1&v&&E.NdJ("click",function(Y){return x.onClick(Y.button,Y.ctrlKey,Y.shiftKey,Y.altKey,Y.metaKey)}),2&v&&E.uIk("target",x.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",relativeTo:"relativeTo",preserveFragment:["preserveFragment","preserveFragment",E.VuI],skipLocationChange:["skipLocationChange","skipLocationChange",E.VuI],replaceUrl:["replaceUrl","replaceUrl",E.VuI],routerLink:"routerLink"},standalone:!0,features:[E.Xq5,E.TTD]}),I})();class Ml{}let ko=(()=>{class I{constructor(v,x,L,Y,X){this.router=v,this.injector=L,this.preloadingStrategy=Y,this.loader=X}setUpPreloading(){this.subscription=this.router.events.pipe((0,Gr.h)(v=>v instanceof Ki),(0,Ke.b)(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(v,x){const L=[];for(const Y of x){Y.providers&&!Y._injector&&(Y._injector=(0,E.MMx)(Y.providers,v,`Route: ${Y.path}`));const X=Y._injector??v,Ee=Y._loadedInjector??X;(Y.loadChildren&&!Y._loadedRoutes&&void 0===Y.canLoad||Y.loadComponent&&!Y._loadedComponent)&&L.push(this.preloadConfig(X,Y)),(Y.children||Y._loadedRoutes)&&L.push(this.processRoutes(Ee,Y.children??Y._loadedRoutes))}return(0,ae.D)(L).pipe((0,Hn.J)())}preloadConfig(v,x){return this.preloadingStrategy.preload(x,()=>{let L;L=x.loadChildren&&void 0===x.canLoad?this.loader.loadChildren(v,x):(0,de.of)(null);const Y=L.pipe((0,Re.z)(X=>null===X?(0,de.of)(void 0):(x._loadedRoutes=X.routes,x._loadedInjector=X.injector,this.processRoutes(X.injector??v,X.routes))));if(x.loadComponent&&!x._loadedComponent){const X=this.loader.loadComponent(x);return(0,ae.D)([Y,X]).pipe((0,Hn.J)())}return Y})}}return I.\u0275fac=function(v){return new(v||I)(E.LFG($i),E.LFG(E.Sil),E.LFG(E.lqb),E.LFG(Ml),E.LFG(Ut))},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac,providedIn:"root"}),I})();const Oa=new E.OlP("");let gs=(()=>{class I{constructor(v,x,L,Y,X={}){this.urlSerializer=v,this.transitions=x,this.viewportScroller=L,this.zone=Y,this.options=X,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},X.scrollPositionRestoration=X.scrollPositionRestoration||"disabled",X.anchorScrolling=X.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof aa?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=v.navigationTrigger,this.restoredId=v.restoredState?v.restoredState.navigationId:0):v instanceof Ki?(this.lastId=v.id,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.urlAfterRedirects).fragment)):v instanceof xi&&0===v.code&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(v,this.urlSerializer.parse(v.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(v=>{v instanceof mo&&(v.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(v.position):v.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(v.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(v,x){this.zone.runOutsideAngular(()=>{setTimeout(()=>{this.zone.run(()=>{this.transitions.events.next(new mo(v,"popstate"===this.lastSource?this.store[this.restoredId]:null,x))})},0)})}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}}return I.\u0275fac=function(v){E.$Z()},I.\u0275prov=E.Yz7({token:I,factory:I.\u0275fac}),I})();function tr(I,S){return{\u0275kind:I,\u0275providers:S}}function ka(){const I=(0,E.f3M)(E.zs3);return S=>{const v=I.get(E.z2F);if(S!==v.components[0])return;const x=I.get($i),L=I.get(Tr);1===I.get(Ts)&&x.initialNavigation(),I.get(Zo,null,E.XFs.Optional)?.setUpPreloading(),I.get(Oa,null,E.XFs.Optional)?.init(),x.resetRootComponentType(v.componentTypes[0]),L.closed||(L.next(),L.complete(),L.unsubscribe())}}const Tr=new E.OlP("",{factory:()=>new pn.x}),Ts=new E.OlP("",{providedIn:"root",factory:()=>1}),Zo=new E.OlP("");function va(I){return tr(0,[{provide:Zo,useExisting:ko},{provide:Ml,useExisting:I}])}const lu=new E.OlP("ROUTER_FORROOT_GUARD"),lc=[Wn.Ye,{provide:li,useClass:Cr},$i,Et,{provide:pi,useFactory:function Pa(I){return I.routerState.root},deps:[$i]},Ut,[]];function La(){return new E.PXZ("Router",$i)}let $c=(()=>{class I{constructor(v){}static forRoot(v,x){return{ngModule:I,providers:[lc,[],{provide:Je,multi:!0,useValue:v},{provide:lu,useFactory:Bd,deps:[[$i,new E.FiY,new E.tp0]]},{provide:es,useValue:x||{}},x?.useHash?{provide:Wn.S$,useClass:Wn.Do}:{provide:Wn.S$,useClass:Wn.b0},{provide:Oa,useFactory:()=>{const I=(0,E.f3M)(Wn.EM),S=(0,E.f3M)(E.R0b),v=(0,E.f3M)(es),x=(0,E.f3M)(Bn),L=(0,E.f3M)(li);return v.scrollOffset&&I.setOffset(v.scrollOffset),new gs(L,x,I,S,v)}},x?.preloadingStrategy?va(x.preloadingStrategy).\u0275providers:[],{provide:E.PXZ,multi:!0,useFactory:La},x?.initialNavigation?ys(x):[],x?.bindToComponentInputs?tr(8,[Ir,{provide:Fr,useExisting:Ir}]).\u0275providers:[],[{provide:Fo,useFactory:ka},{provide:E.tb,multi:!0,useExisting:Fo}]]}}static forChild(v){return{ngModule:I,providers:[{provide:Je,multi:!0,useValue:v}]}}}return I.\u0275fac=function(v){return new(v||I)(E.LFG(lu,8))},I.\u0275mod=E.oAB({type:I}),I.\u0275inj=E.cJS({}),I})();function Bd(I){return"guarded"}function ys(I){return["disabled"===I.initialNavigation?tr(3,[{provide:E.ip1,multi:!0,useFactory:()=>{const S=(0,E.f3M)($i);return()=>{S.setUpLocationChangeListener()}}},{provide:Ts,useValue:2}]).\u0275providers:[],"enabledBlocking"===I.initialNavigation?tr(2,[{provide:Ts,useValue:0},{provide:E.ip1,multi:!0,deps:[E.zs3],useFactory:S=>{const v=S.get(Wn.V_,Promise.resolve());return()=>v.then(()=>new Promise(x=>{const L=S.get($i),Y=S.get(Tr);qo(L,()=>{x(!0)}),S.get(Bn).afterPreactivation=()=>(x(!0),Y.closed?(0,de.of)(void 0):Y),L.initialNavigation()}))}}]).\u0275providers:[]]}const Fo=new E.OlP("")},1356:(bt,Pe,j)=>{j.r(Pe),j.d(Pe,{FirebaseError:()=>We,SDK_VERSION:()=>hr,_DEFAULT_ENTRY_NAME:()=>tn,_addComponent:()=>Or,_addOrOverwriteComponent:()=>Fs,_apps:()=>Nr,_clearComponents:()=>un,_components:()=>Ur,_getProvider:()=>Vr,_registerComponent:()=>Zn,_removeServiceInstance:()=>pi,deleteApp:()=>Ls,getApp:()=>yo,getApps:()=>oi,initializeApp:()=>Cs,onLog:()=>Ir,registerVersion:()=>Fr,setLogLevel:()=>ha});var E=j(5861);const ae=function(K){const V=[];let te=0;for(let fe=0;fe<K.length;fe++){let pe=K.charCodeAt(fe);pe<128?V[te++]=pe:pe<2048?(V[te++]=pe>>6|192,V[te++]=63&pe|128):55296==(64512&pe)&&fe+1<K.length&&56320==(64512&K.charCodeAt(fe+1))?(pe=65536+((1023&pe)<<10)+(1023&K.charCodeAt(++fe)),V[te++]=pe>>18|240,V[te++]=pe>>12&63|128,V[te++]=pe>>6&63|128,V[te++]=63&pe|128):(V[te++]=pe>>12|224,V[te++]=pe>>6&63|128,V[te++]=63&pe|128)}return V},ve={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:"function"==typeof atob,encodeByteArray(K,V){if(!Array.isArray(K))throw Error("encodeByteArray takes an array as a parameter");this.init_();const te=V?this.byteToCharMapWebSafe_:this.byteToCharMap_,fe=[];for(let pe=0;pe<K.length;pe+=3){const ot=K[pe],Mt=pe+1<K.length,rn=Mt?K[pe+1]:0,zn=pe+2<K.length,Kr=zn?K[pe+2]:0;let Qi=(15&rn)<<2|Kr>>6,No=63&Kr;zn||(No=64,Mt||(Qi=64)),fe.push(te[ot>>2],te[(3&ot)<<4|rn>>4],te[Qi],te[No])}return fe.join("")},encodeString(K,V){return this.HAS_NATIVE_SUPPORT&&!V?btoa(K):this.encodeByteArray(ae(K),V)},decodeString(K,V){return this.HAS_NATIVE_SUPPORT&&!V?atob(K):function(K){const V=[];let te=0,fe=0;for(;te<K.length;){const pe=K[te++];if(pe<128)V[fe++]=String.fromCharCode(pe);else if(pe>191&&pe<224){const ot=K[te++];V[fe++]=String.fromCharCode((31&pe)<<6|63&ot)}else if(pe>239&&pe<365){const zn=((7&pe)<<18|(63&K[te++])<<12|(63&K[te++])<<6|63&K[te++])-65536;V[fe++]=String.fromCharCode(55296+(zn>>10)),V[fe++]=String.fromCharCode(56320+(1023&zn))}else{const ot=K[te++],Mt=K[te++];V[fe++]=String.fromCharCode((15&pe)<<12|(63&ot)<<6|63&Mt)}}return V.join("")}(this.decodeStringToByteArray(K,V))},decodeStringToByteArray(K,V){this.init_();const te=V?this.charToByteMapWebSafe_:this.charToByteMap_,fe=[];for(let pe=0;pe<K.length;){const ot=te[K.charAt(pe++)],rn=pe<K.length?te[K.charAt(pe)]:0;++pe;const Kr=pe<K.length?te[K.charAt(pe)]:64;++pe;const Pn=pe<K.length?te[K.charAt(pe)]:64;if(++pe,null==ot||null==rn||null==Kr||null==Pn)throw Error();fe.push(ot<<2|rn>>4),64!==Kr&&(fe.push(rn<<4&240|Kr>>2),64!==Pn&&fe.push(Kr<<6&192|Pn))}return fe},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let K=0;K<this.ENCODED_VALS.length;K++)this.byteToCharMap_[K]=this.ENCODED_VALS.charAt(K),this.charToByteMap_[this.byteToCharMap_[K]]=K,this.byteToCharMapWebSafe_[K]=this.ENCODED_VALS_WEBSAFE.charAt(K),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[K]]=K,K>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(K)]=K,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(K)]=K)}}},Me=function(K){return function(K){const V=ae(K);return ve.encodeByteArray(V,!0)}(K).replace(/\./g,"")},Ge=()=>{try{return function Be(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}().__FIREBASE_DEFAULTS__||(()=>{if(typeof process>"u"||typeof process.env>"u")return;const K=process.env.__FIREBASE_DEFAULTS__;return K?JSON.parse(K):void 0})()||(()=>{if(typeof document>"u")return;let K;try{K=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const V=K&&function(K){try{return ve.decodeString(K,!0)}catch(V){console.error("base64Decode failed: ",V)}return null}(K[1]);return V&&JSON.parse(V)})()}catch(K){return void console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${K}`)}},Ae=()=>{var K;return null===(K=Ge())||void 0===K?void 0:K.config};class ye{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((V,te)=>{this.resolve=V,this.reject=te})}wrapCallback(V){return(te,fe)=>{te?this.reject(te):this.resolve(fe),"function"==typeof V&&(this.promise.catch(()=>{}),1===V.length?V(te):V(te,fe))}}}class We extends Error{constructor(V,te,fe){super(te),this.code=V,this.customData=fe,this.name="FirebaseError",Object.setPrototypeOf(this,We.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,tt.prototype.create)}}class tt{constructor(V,te,fe){this.service=V,this.serviceName=te,this.errors=fe}create(V,...te){const fe=te[0]||{},pe=`${this.service}/${V}`,ot=this.errors[V],Mt=ot?function Dt(K,V){return K.replace(At,(te,fe)=>{const pe=V[fe];return null!=pe?String(pe):`<${fe}?>`})}(ot,fe):"Error";return new We(pe,`${this.serviceName}: ${Mt} (${pe}).`,fe)}}const At=/\{\$([^}]+)}/g;function Wr(K,V){if(K===V)return!0;const te=Object.keys(K),fe=Object.keys(V);for(const pe of te){if(!fe.includes(pe))return!1;const ot=K[pe],Mt=V[pe];if(Xn(ot)&&Xn(Mt)){if(!Wr(ot,Mt))return!1}else if(ot!==Mt)return!1}for(const pe of fe)if(!te.includes(pe))return!1;return!0}function Xn(K){return null!==K&&"object"==typeof K}class ue{constructor(V,te,fe){this.name=V,this.instanceFactory=te,this.type=fe,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(V){return this.instantiationMode=V,this}setMultipleInstances(V){return this.multipleInstances=V,this}setServiceProps(V){return this.serviceProps=V,this}setInstanceCreatedCallback(V){return this.onInstanceCreated=V,this}}const G="[DEFAULT]";class z{constructor(V,te){this.name=V,this.container=te,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(V){const te=this.normalizeInstanceIdentifier(V);if(!this.instancesDeferred.has(te)){const fe=new ye;if(this.instancesDeferred.set(te,fe),this.isInitialized(te)||this.shouldAutoInitialize())try{const pe=this.getOrInitializeService({instanceIdentifier:te});pe&&fe.resolve(pe)}catch{}}return this.instancesDeferred.get(te).promise}getImmediate(V){var te;const fe=this.normalizeInstanceIdentifier(V?.identifier),pe=null!==(te=V?.optional)&&void 0!==te&&te;if(!this.isInitialized(fe)&&!this.shouldAutoInitialize()){if(pe)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:fe})}catch(ot){if(pe)return null;throw ot}}getComponent(){return this.component}setComponent(V){if(V.name!==this.name)throw Error(`Mismatching Component ${V.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=V,this.shouldAutoInitialize()){if(function ne(K){return"EAGER"===K.instantiationMode}(V))try{this.getOrInitializeService({instanceIdentifier:G})}catch{}for(const[te,fe]of this.instancesDeferred.entries()){const pe=this.normalizeInstanceIdentifier(te);try{const ot=this.getOrInitializeService({instanceIdentifier:pe});fe.resolve(ot)}catch{}}}}clearInstance(V=G){this.instancesDeferred.delete(V),this.instancesOptions.delete(V),this.instances.delete(V)}delete(){var V=this;return(0,E.Z)(function*(){const te=Array.from(V.instances.values());yield Promise.all([...te.filter(fe=>"INTERNAL"in fe).map(fe=>fe.INTERNAL.delete()),...te.filter(fe=>"_delete"in fe).map(fe=>fe._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(V=G){return this.instances.has(V)}getOptions(V=G){return this.instancesOptions.get(V)||{}}initialize(V={}){const{options:te={}}=V,fe=this.normalizeInstanceIdentifier(V.instanceIdentifier);if(this.isInitialized(fe))throw Error(`${this.name}(${fe}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const pe=this.getOrInitializeService({instanceIdentifier:fe,options:te});for(const[ot,Mt]of this.instancesDeferred.entries())fe===this.normalizeInstanceIdentifier(ot)&&Mt.resolve(pe);return pe}onInit(V,te){var fe;const pe=this.normalizeInstanceIdentifier(te),ot=null!==(fe=this.onInitCallbacks.get(pe))&&void 0!==fe?fe:new Set;ot.add(V),this.onInitCallbacks.set(pe,ot);const Mt=this.instances.get(pe);return Mt&&V(Mt,pe),()=>{ot.delete(V)}}invokeOnInitCallbacks(V,te){const fe=this.onInitCallbacks.get(te);if(fe)for(const pe of fe)try{pe(V,te)}catch{}}getOrInitializeService({instanceIdentifier:V,options:te={}}){let fe=this.instances.get(V);if(!fe&&this.component&&(fe=this.component.instanceFactory(this.container,{instanceIdentifier:(K=V,K===G?void 0:K),options:te}),this.instances.set(V,fe),this.instancesOptions.set(V,te),this.invokeOnInitCallbacks(fe,V),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,V,fe)}catch{}var K;return fe||null}normalizeInstanceIdentifier(V=G){return this.component?this.component.multipleInstances?V:G:V}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class be{constructor(V){this.name=V,this.providers=new Map}addComponent(V){const te=this.getProvider(V.name);if(te.isComponentSet())throw new Error(`Component ${V.name} has already been registered with ${this.name}`);te.setComponent(V)}addOrOverwriteComponent(V){this.getProvider(V.name).isComponentSet()&&this.providers.delete(V.name),this.addComponent(V)}getProvider(V){if(this.providers.has(V))return this.providers.get(V);const te=new z(V,this);return this.providers.set(V,te),te}getProviders(){return Array.from(this.providers.values())}}var Xe=j(7879);const pt=(K,V)=>V.some(te=>K instanceof te);let Yt,Wt;const dr=new WeakMap,Mi=new WeakMap,Es=new WeakMap,xr=new WeakMap,Ue=new WeakMap;let Pt={get(K,V,te){if(K instanceof IDBTransaction){if("done"===V)return Mi.get(K);if("objectStoreNames"===V)return K.objectStoreNames||Es.get(K);if("store"===V)return te.objectStoreNames[1]?void 0:te.objectStore(te.objectStoreNames[0])}return On(K[V])},set:(K,V,te)=>(K[V]=te,!0),has:(K,V)=>K instanceof IDBTransaction&&("done"===V||"store"===V)||V in K};function mn(K){return"function"==typeof K?function ln(K){return K!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?function cn(){return Wt||(Wt=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}().includes(K)?function(...V){return K.apply(pr(this),V),On(dr.get(this))}:function(...V){return On(K.apply(pr(this),V))}:function(V,...te){const fe=K.call(pr(this),V,...te);return Es.set(fe,V.sort?V.sort():[V]),On(fe)}}(K):(K instanceof IDBTransaction&&function rt(K){if(Mi.has(K))return;const V=new Promise((te,fe)=>{const pe=()=>{K.removeEventListener("complete",ot),K.removeEventListener("error",Mt),K.removeEventListener("abort",Mt)},ot=()=>{te(),pe()},Mt=()=>{fe(K.error||new DOMException("AbortError","AbortError")),pe()};K.addEventListener("complete",ot),K.addEventListener("error",Mt),K.addEventListener("abort",Mt)});Mi.set(K,V)}(K),pt(K,function Rt(){return Yt||(Yt=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}())?new Proxy(K,Pt):K)}function On(K){if(K instanceof IDBRequest)return function Se(K){const V=new Promise((te,fe)=>{const pe=()=>{K.removeEventListener("success",ot),K.removeEventListener("error",Mt)},ot=()=>{te(On(K.result)),pe()},Mt=()=>{fe(K.error),pe()};K.addEventListener("success",ot),K.addEventListener("error",Mt)});return V.then(te=>{te instanceof IDBCursor&&dr.set(te,K)}).catch(()=>{}),Ue.set(V,K),V}(K);if(xr.has(K))return xr.get(K);const V=mn(K);return V!==K&&(xr.set(K,V),Ue.set(V,K)),V}const pr=K=>Ue.get(K),$o=["get","getKey","getAll","getAllKeys","count"],So=["put","add","delete","clear"],di=new Map;function Ja(K,V){if(!(K instanceof IDBDatabase)||V in K||"string"!=typeof V)return;if(di.get(V))return di.get(V);const te=V.replace(/FromIndex$/,""),fe=V!==te,pe=So.includes(te);if(!(te in(fe?IDBIndex:IDBObjectStore).prototype)||!pe&&!$o.includes(te))return;const ot=function(){var Mt=(0,E.Z)(function*(rn,...zn){const Kr=this.transaction(rn,pe?"readwrite":"readonly");let yi=Kr.store;return fe&&(yi=yi.index(zn.shift())),(yield Promise.all([yi[te](...zn),pe&&Kr.done]))[0]});return function(zn){return Mt.apply(this,arguments)}}();return di.set(V,ot),ot}!function Qt(K){Pt=K(Pt)}(K=>({...K,get:(V,te,fe)=>Ja(V,te)||K.get(V,te,fe),has:(V,te)=>!!Ja(V,te)||K.has(V,te)}));class Zi{constructor(V){this.container=V}getPlatformInfoString(){return this.container.getProviders().map(te=>{if(function Ao(K){const V=K.getComponent();return"VERSION"===V?.type}(te)){const fe=te.getImmediate();return`${fe.library}/${fe.version}`}return null}).filter(te=>te).join(" ")}}const ks="@firebase/app",$n=new Xe.Yd("@firebase/app"),tn="[DEFAULT]",er={[ks]:"fire-core","@firebase/app-compat":"fire-core-compat","@firebase/analytics":"fire-analytics","@firebase/analytics-compat":"fire-analytics-compat","@firebase/app-check":"fire-app-check","@firebase/app-check-compat":"fire-app-check-compat","@firebase/auth":"fire-auth","@firebase/auth-compat":"fire-auth-compat","@firebase/database":"fire-rtdb","@firebase/database-compat":"fire-rtdb-compat","@firebase/functions":"fire-fn","@firebase/functions-compat":"fire-fn-compat","@firebase/installations":"fire-iid","@firebase/installations-compat":"fire-iid-compat","@firebase/messaging":"fire-fcm","@firebase/messaging-compat":"fire-fcm-compat","@firebase/performance":"fire-perf","@firebase/performance-compat":"fire-perf-compat","@firebase/remote-config":"fire-rc","@firebase/remote-config-compat":"fire-rc-compat","@firebase/storage":"fire-gcs","@firebase/storage-compat":"fire-gcs-compat","@firebase/firestore":"fire-fst","@firebase/firestore-compat":"fire-fst-compat","fire-js":"fire-js",firebase:"fire-js-all"},Nr=new Map,Ur=new Map;function Or(K,V){try{K.container.addComponent(V)}catch(te){$n.debug(`Component ${V.name} failed to register with FirebaseApp ${K.name}`,te)}}function Fs(K,V){K.container.addOrOverwriteComponent(V)}function Zn(K){const V=K.name;if(Ur.has(V))return $n.debug(`There were multiple attempts to register component ${V}.`),!1;Ur.set(V,K);for(const te of Nr.values())Or(te,K);return!0}function Vr(K,V){const te=K.container.getProvider("heartbeat").getImmediate({optional:!0});return te&&te.triggerHeartbeat(),K.container.getProvider(V)}function pi(K,V,te=tn){Vr(K,V).clearInstance(te)}function un(){Ur.clear()}const Ui=new tt("app","Firebase",{"no-app":"No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."});class Vi{constructor(V,te,fe){this._isDeleted=!1,this._options=Object.assign({},V),this._config=Object.assign({},te),this._name=te.name,this._automaticDataCollectionEnabled=te.automaticDataCollectionEnabled,this._container=fe,this.container.addComponent(new ue("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(V){this.checkDestroyed(),this._automaticDataCollectionEnabled=V}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(V){this._isDeleted=V}checkDestroyed(){if(this.isDeleted)throw Ui.create("app-deleted",{appName:this._name})}}const hr="9.16.0";function Cs(K,V={}){let te=K;"object"!=typeof V&&(V={name:V});const fe=Object.assign({name:tn,automaticDataCollectionEnabled:!1},V),pe=fe.name;if("string"!=typeof pe||!pe)throw Ui.create("bad-app-name",{appName:String(pe)});if(te||(te=Ae()),!te)throw Ui.create("no-options");const ot=Nr.get(pe);if(ot){if(Wr(te,ot.options)&&Wr(fe,ot.config))return ot;throw Ui.create("duplicate-app",{appName:pe})}const Mt=new be(pe);for(const zn of Ur.values())Mt.addComponent(zn);const rn=new Vi(te,fe,Mt);return Nr.set(pe,rn),rn}function yo(K=tn){const V=Nr.get(K);if(!V&&K===tn)return Cs();if(!V)throw Ui.create("no-app",{appName:K});return V}function oi(){return Array.from(Nr.values())}function Ls(K){return da.apply(this,arguments)}function da(){return(da=(0,E.Z)(function*(K){const V=K.name;Nr.has(V)&&(Nr.delete(V),yield Promise.all(K.container.getProviders().map(te=>te.delete())),K.isDeleted=!0)})).apply(this,arguments)}function Fr(K,V,te){var fe;let pe=null!==(fe=er[K])&&void 0!==fe?fe:K;te&&(pe+=`-${te}`);const ot=pe.match(/\s|\//),Mt=V.match(/\s|\//);if(ot||Mt){const rn=[`Unable to register library "${pe}" with version "${V}":`];return ot&&rn.push(`library name "${pe}" contains illegal characters (whitespace or "/")`),ot&&Mt&&rn.push("and"),Mt&&rn.push(`version name "${V}" contains illegal characters (whitespace or "/")`),void $n.warn(rn.join(" "))}Zn(new ue(`${pe}-version`,()=>({library:pe,version:V}),"VERSION"))}function Ir(K,V){if(null!==K&&"function"!=typeof K)throw Ui.create("invalid-log-argument");(0,Xe.Am)(K,V)}function ha(K){(0,Xe.Ub)(K)}const Ks="firebase-heartbeat-database",fn=1,nu="firebase-heartbeat-store";let Ys=null;function Bi(){return Ys||(Ys=function ws(K,V,{blocked:te,upgrade:fe,blocking:pe,terminated:ot}={}){const Mt=indexedDB.open(K,V),rn=On(Mt);return fe&&Mt.addEventListener("upgradeneeded",zn=>{fe(On(Mt.result),zn.oldVersion,zn.newVersion,On(Mt.transaction))}),te&&Mt.addEventListener("blocked",()=>te()),rn.then(zn=>{ot&&zn.addEventListener("close",()=>ot()),pe&&zn.addEventListener("versionchange",()=>pe())}).catch(()=>{}),rn}(Ks,fn,{upgrade:(K,V)=>{0===V&&K.createObjectStore(nu)}}).catch(K=>{throw Ui.create("idb-open",{originalErrorMessage:K.message})})),Ys}function Ri(){return(Ri=(0,E.Z)(function*(K){try{return(yield Bi()).transaction(nu).objectStore(nu).get(Br(K))}catch(V){if(V instanceof We)$n.warn(V.message);else{const te=Ui.create("idb-get",{originalErrorMessage:V?.message});$n.warn(te.message)}}})).apply(this,arguments)}function fs(K,V){return Is.apply(this,arguments)}function Is(){return(Is=(0,E.Z)(function*(K,V){try{const fe=(yield Bi()).transaction(nu,"readwrite");return yield fe.objectStore(nu).put(V,Br(K)),fe.done}catch(te){if(te instanceof We)$n.warn(te.message);else{const fe=Ui.create("idb-set",{originalErrorMessage:te?.message});$n.warn(fe.message)}}})).apply(this,arguments)}function Br(K){return`${K.name}!${K.options.appId}`}class Yi{constructor(V){this.container=V,this._heartbeatsCache=null;const te=this.container.getProvider("app").getImmediate();this._storage=new Vs(te),this._heartbeatsCachePromise=this._storage.read().then(fe=>(this._heartbeatsCache=fe,fe))}triggerHeartbeat(){var V=this;return(0,E.Z)(function*(){const fe=V.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),pe=_o();if(null===V._heartbeatsCache&&(V._heartbeatsCache=yield V._heartbeatsCachePromise),V._heartbeatsCache.lastSentHeartbeatDate!==pe&&!V._heartbeatsCache.heartbeats.some(ot=>ot.date===pe))return V._heartbeatsCache.heartbeats.push({date:pe,agent:fe}),V._heartbeatsCache.heartbeats=V._heartbeatsCache.heartbeats.filter(ot=>{const Mt=new Date(ot.date).valueOf();return Date.now()-Mt<=2592e6}),V._storage.overwrite(V._heartbeatsCache)})()}getHeartbeatsHeader(){var V=this;return(0,E.Z)(function*(){if(null===V._heartbeatsCache&&(yield V._heartbeatsCachePromise),null===V._heartbeatsCache||0===V._heartbeatsCache.heartbeats.length)return"";const te=_o(),{heartbeatsToSend:fe,unsentEntries:pe}=function Us(K,V=1024){const te=[];let fe=K.slice();for(const pe of K){const ot=te.find(Mt=>Mt.agent===pe.agent);if(ot){if(ot.dates.push(pe.date),Zr(te)>V){ot.dates.pop();break}}else if(te.push({agent:pe.agent,dates:[pe.date]}),Zr(te)>V){te.pop();break}fe=fe.slice(1)}return{heartbeatsToSend:te,unsentEntries:fe}}(V._heartbeatsCache.heartbeats),ot=Me(JSON.stringify({version:2,heartbeats:fe}));return V._heartbeatsCache.lastSentHeartbeatDate=te,pe.length>0?(V._heartbeatsCache.heartbeats=pe,yield V._storage.overwrite(V._heartbeatsCache)):(V._heartbeatsCache.heartbeats=[],V._storage.overwrite(V._heartbeatsCache)),ot})()}}function _o(){return(new Date).toISOString().substring(0,10)}class Vs{constructor(V){this.app=V,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}runIndexedDBEnvironmentCheck(){return(0,E.Z)(function*(){return!!function Re(){try{return"object"==typeof indexedDB}catch{return!1}}()&&function Fe(){return new Promise((K,V)=>{try{let te=!0;const fe="validate-browser-context-for-indexeddb-analytics-module",pe=self.indexedDB.open(fe);pe.onsuccess=()=>{pe.result.close(),te||self.indexedDB.deleteDatabase(fe),K(!0)},pe.onupgradeneeded=()=>{te=!1},pe.onerror=()=>{var ot;V((null===(ot=pe.error)||void 0===ot?void 0:ot.message)||"")}}catch(te){V(te)}})}().then(()=>!0).catch(()=>!1)})()}read(){var V=this;return(0,E.Z)(function*(){return(yield V._canUseIndexedDBPromise)&&(yield function mi(K){return Ri.apply(this,arguments)}(V.app))||{heartbeats:[]}})()}overwrite(V){var te=this;return(0,E.Z)(function*(){var fe;if(yield te._canUseIndexedDBPromise){const ot=yield te.read();return fs(te.app,{lastSentHeartbeatDate:null!==(fe=V.lastSentHeartbeatDate)&&void 0!==fe?fe:ot.lastSentHeartbeatDate,heartbeats:V.heartbeats})}})()}add(V){var te=this;return(0,E.Z)(function*(){var fe;if(yield te._canUseIndexedDBPromise){const ot=yield te.read();return fs(te.app,{lastSentHeartbeatDate:null!==(fe=V.lastSentHeartbeatDate)&&void 0!==fe?fe:ot.lastSentHeartbeatDate,heartbeats:[...ot.heartbeats,...V.heartbeats]})}})()}}function Zr(K){return Me(JSON.stringify({version:2,heartbeats:K})).length}!function ai(K){Zn(new ue("platform-logger",V=>new Zi(V),"PRIVATE")),Zn(new ue("heartbeat",V=>new Yi(V),"PRIVATE")),Fr(ks,"0.9.1",K),Fr(ks,"0.9.1","esm2017"),Fr("fire-js","")}("")},4537:(bt,Pe,j)=>{j.d(Pe,{H0:()=>ze,wA:()=>$,zt:()=>ae});var E=j(5861),w=j(9058);class ${constructor(oe,le,_e){this.name=oe,this.instanceFactory=le,this.type=_e,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(oe){return this.instantiationMode=oe,this}setMultipleInstances(oe){return this.multipleInstances=oe,this}setServiceProps(oe){return this.serviceProps=oe,this}setInstanceCreatedCallback(oe){return this.onInstanceCreated=oe,this}}const Q="[DEFAULT]";class ae{constructor(oe,le){this.name=oe,this.container=le,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(oe){const le=this.normalizeInstanceIdentifier(oe);if(!this.instancesDeferred.has(le)){const _e=new w.BH;if(this.instancesDeferred.set(le,_e),this.isInitialized(le)||this.shouldAutoInitialize())try{const st=this.getOrInitializeService({instanceIdentifier:le});st&&_e.resolve(st)}catch{}}return this.instancesDeferred.get(le).promise}getImmediate(oe){var le;const _e=this.normalizeInstanceIdentifier(oe?.identifier),st=null!==(le=oe?.optional)&&void 0!==le&&le;if(!this.isInitialized(_e)&&!this.shouldAutoInitialize()){if(st)return null;throw Error(`Service ${this.name} is not available`)}try{return this.getOrInitializeService({instanceIdentifier:_e})}catch(Be){if(st)return null;throw Be}}getComponent(){return this.component}setComponent(oe){if(oe.name!==this.name)throw Error(`Mismatching Component ${oe.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=oe,this.shouldAutoInitialize()){if(function ve(Me){return"EAGER"===Me.instantiationMode}(oe))try{this.getOrInitializeService({instanceIdentifier:Q})}catch{}for(const[le,_e]of this.instancesDeferred.entries()){const st=this.normalizeInstanceIdentifier(le);try{const Be=this.getOrInitializeService({instanceIdentifier:st});_e.resolve(Be)}catch{}}}}clearInstance(oe=Q){this.instancesDeferred.delete(oe),this.instancesOptions.delete(oe),this.instances.delete(oe)}delete(){var oe=this;return(0,E.Z)(function*(){const le=Array.from(oe.instances.values());yield Promise.all([...le.filter(_e=>"INTERNAL"in _e).map(_e=>_e.INTERNAL.delete()),...le.filter(_e=>"_delete"in _e).map(_e=>_e._delete())])})()}isComponentSet(){return null!=this.component}isInitialized(oe=Q){return this.instances.has(oe)}getOptions(oe=Q){return this.instancesOptions.get(oe)||{}}initialize(oe={}){const{options:le={}}=oe,_e=this.normalizeInstanceIdentifier(oe.instanceIdentifier);if(this.isInitialized(_e))throw Error(`${this.name}(${_e}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const st=this.getOrInitializeService({instanceIdentifier:_e,options:le});for(const[Be,gt]of this.instancesDeferred.entries())_e===this.normalizeInstanceIdentifier(Be)&&gt.resolve(st);return st}onInit(oe,le){var _e;const st=this.normalizeInstanceIdentifier(le),Be=null!==(_e=this.onInitCallbacks.get(st))&&void 0!==_e?_e:new Set;Be.add(oe),this.onInitCallbacks.set(st,Be);const gt=this.instances.get(st);return gt&&oe(gt,st),()=>{Be.delete(oe)}}invokeOnInitCallbacks(oe,le){const _e=this.onInitCallbacks.get(le);if(_e)for(const st of _e)try{st(oe,le)}catch{}}getOrInitializeService({instanceIdentifier:oe,options:le={}}){let _e=this.instances.get(oe);if(!_e&&this.component&&(_e=this.component.instanceFactory(this.container,{instanceIdentifier:(Me=oe,Me===Q?void 0:Me),options:le}),this.instances.set(oe,_e),this.instancesOptions.set(oe,le),this.invokeOnInitCallbacks(_e,oe),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,oe,_e)}catch{}var Me;return _e||null}normalizeInstanceIdentifier(oe=Q){return this.component?this.component.multipleInstances?oe:Q:oe}shouldAutoInitialize(){return!!this.component&&"EXPLICIT"!==this.component.instantiationMode}}class ze{constructor(oe){this.name=oe,this.providers=new Map}addComponent(oe){const le=this.getProvider(oe.name);if(le.isComponentSet())throw new Error(`Component ${oe.name} has already been registered with ${this.name}`);le.setComponent(oe)}addOrOverwriteComponent(oe){this.getProvider(oe.name).isComponentSet()&&this.providers.delete(oe.name),this.addComponent(oe)}getProvider(oe){if(this.providers.has(oe))return this.providers.get(oe);const le=new ae(oe,this);return this.providers.set(oe,le),le}getProviders(){return Array.from(this.providers.values())}}},7879:(bt,Pe,j)=>{j.d(Pe,{Am:()=>Me,Ub:()=>ze,Yd:()=>ve,in:()=>w});const E=[];var w=(()=>((w=w||{})[w.DEBUG=0]="DEBUG",w[w.VERBOSE=1]="VERBOSE",w[w.INFO=2]="INFO",w[w.WARN=3]="WARN",w[w.ERROR=4]="ERROR",w[w.SILENT=5]="SILENT",w))();const $={debug:w.DEBUG,verbose:w.VERBOSE,info:w.INFO,warn:w.WARN,error:w.ERROR,silent:w.SILENT},Q=w.INFO,ae={[w.DEBUG]:"log",[w.VERBOSE]:"log",[w.INFO]:"info",[w.WARN]:"warn",[w.ERROR]:"error"},de=(oe,le,..._e)=>{if(le<oe.logLevel)return;const st=(new Date).toISOString(),Be=ae[le];if(!Be)throw new Error(`Attempted to log a message with an invalid logType (value: ${le})`);console[Be](`[${st}]  ${oe.name}:`,..._e)};class ve{constructor(le){this.name=le,this._logLevel=Q,this._logHandler=de,this._userLogHandler=null,E.push(this)}get logLevel(){return this._logLevel}set logLevel(le){if(!(le in w))throw new TypeError(`Invalid value "${le}" assigned to \`logLevel\``);this._logLevel=le}setLogLevel(le){this._logLevel="string"==typeof le?$[le]:le}get logHandler(){return this._logHandler}set logHandler(le){if("function"!=typeof le)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=le}get userLogHandler(){return this._userLogHandler}set userLogHandler(le){this._userLogHandler=le}debug(...le){this._userLogHandler&&this._userLogHandler(this,w.DEBUG,...le),this._logHandler(this,w.DEBUG,...le)}log(...le){this._userLogHandler&&this._userLogHandler(this,w.VERBOSE,...le),this._logHandler(this,w.VERBOSE,...le)}info(...le){this._userLogHandler&&this._userLogHandler(this,w.INFO,...le),this._logHandler(this,w.INFO,...le)}warn(...le){this._userLogHandler&&this._userLogHandler(this,w.WARN,...le),this._logHandler(this,w.WARN,...le)}error(...le){this._userLogHandler&&this._userLogHandler(this,w.ERROR,...le),this._logHandler(this,w.ERROR,...le)}}function ze(oe){E.forEach(le=>{le.setLogLevel(oe)})}function Me(oe,le){for(const _e of E){let st=null;le&&le.level&&(st=$[le.level]),_e.userLogHandler=null===oe?null:(Be,gt,...et)=>{const xe=et.map(Ge=>{if(null==Ge)return null;if("string"==typeof Ge)return Ge;if("number"==typeof Ge||"boolean"==typeof Ge)return Ge.toString();if(Ge instanceof Error)return Ge.message;try{return JSON.stringify(Ge)}catch{return null}}).filter(Ge=>Ge).join(" ");gt>=(st??Be.logLevel)&&oe({level:w[gt].toLowerCase(),message:xe,args:et,type:Be.name})}}}},5861:(bt,Pe,j)=>{function E($,Q,ae,de,ve,ze,Me){try{var oe=$[ze](Me),le=oe.value}catch(_e){return void ae(_e)}oe.done?Q(le):Promise.resolve(le).then(de,ve)}function w($){return function(){var Q=this,ae=arguments;return new Promise(function(de,ve){var ze=$.apply(Q,ae);function Me(le){E(ze,de,ve,Me,oe,"next",le)}function oe(le){E(ze,de,ve,Me,oe,"throw",le)}Me(void 0)})}}j.d(Pe,{Z:()=>w})},1180:(bt,Pe,j)=>{function E(ae){return(E="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(de){return typeof de}:function(de){return de&&"function"==typeof Symbol&&de.constructor===Symbol&&de!==Symbol.prototype?"symbol":typeof de})(ae)}function Q(ae,de,ve){return(de=function $(ae){var de=function w(ae,de){if("object"!==E(ae)||null===ae)return ae;var ve=ae[Symbol.toPrimitive];if(void 0!==ve){var ze=ve.call(ae,de||"default");if("object"!==E(ze))return ze;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===de?String:Number)(ae)}(ae,"string");return"symbol"===E(de)?de:String(de)}(de))in ae?Object.defineProperty(ae,de,{value:ve,enumerable:!0,configurable:!0,writable:!0}):ae[de]=ve,ae}j.d(Pe,{Z:()=>Q})},7582:(bt,Pe,j)=>{function Q(Re,Fe){var Ke={};for(var He in Re)Object.prototype.hasOwnProperty.call(Re,He)&&Fe.indexOf(He)<0&&(Ke[He]=Re[He]);if(null!=Re&&"function"==typeof Object.getOwnPropertySymbols){var We=0;for(He=Object.getOwnPropertySymbols(Re);We<He.length;We++)Fe.indexOf(He[We])<0&&Object.prototype.propertyIsEnumerable.call(Re,He[We])&&(Ke[He[We]]=Re[He[We]])}return Ke}function _e(Re,Fe,Ke,He){return new(Ke||(Ke=Promise))(function(tt,Dt){function At(gn){try{Gt(He.next(gn))}catch(sn){Dt(sn)}}function sr(gn){try{Gt(He.throw(gn))}catch(sn){Dt(sn)}}function Gt(gn){gn.done?tt(gn.value):function We(tt){return tt instanceof Ke?tt:new Ke(function(Dt){Dt(tt)})}(gn.value).then(At,sr)}Gt((He=He.apply(Re,Fe||[])).next())})}function Ae(Re){return this instanceof Ae?(this.v=Re,this):new Ae(Re)}function Qe(Re,Fe,Ke){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var We,He=Ke.apply(Re,Fe||[]),tt=[];return We={},Dt("next"),Dt("throw"),Dt("return"),We[Symbol.asyncIterator]=function(){return this},We;function Dt(Hn){He[Hn]&&(We[Hn]=function(Jn){return new Promise(function(Lt,Sn){tt.push([Hn,Jn,Lt,Sn])>1||At(Hn,Jn)})})}function At(Hn,Jn){try{!function sr(Hn){Hn.value instanceof Ae?Promise.resolve(Hn.value.v).then(Gt,gn):sn(tt[0][2],Hn)}(He[Hn](Jn))}catch(Lt){sn(tt[0][3],Lt)}}function Gt(Hn){At("next",Hn)}function gn(Hn){At("throw",Hn)}function sn(Hn,Jn){Hn(Jn),tt.shift(),tt.length&&At(tt[0][0],tt[0][1])}}function Le(Re){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var Ke,Fe=Re[Symbol.asyncIterator];return Fe?Fe.call(Re):(Re=function et(Re){var Fe="function"==typeof Symbol&&Symbol.iterator,Ke=Fe&&Re[Fe],He=0;if(Ke)return Ke.call(Re);if(Re&&"number"==typeof Re.length)return{next:function(){return Re&&He>=Re.length&&(Re=void 0),{value:Re&&Re[He++],done:!Re}}};throw new TypeError(Fe?"Object is not iterable.":"Symbol.iterator is not defined.")}(Re),Ke={},He("next"),He("throw"),He("return"),Ke[Symbol.asyncIterator]=function(){return this},Ke);function He(tt){Ke[tt]=Re[tt]&&function(Dt){return new Promise(function(At,sr){!function We(tt,Dt,At,sr){Promise.resolve(sr).then(function(Gt){tt({value:Gt,done:At})},Dt)}(At,sr,(Dt=Re[tt](Dt)).done,Dt.value)})}}}j.d(Pe,{FC:()=>Qe,KL:()=>Le,_T:()=>Q,mG:()=>_e,qq:()=>Ae}),"function"==typeof SuppressedError&&SuppressedError}},bt=>{bt(bt.s=2121)}]);